"use strict";var cK=Object.defineProperty,dK=Object.defineProperties,hK=Object.getOwnPropertyDescriptors,PU=Object.getOwnPropertySymbols,fK=Object.prototype.hasOwnProperty,pK=Object.prototype.propertyIsEnumerable,OU=(it,Ee,L)=>Ee in it?cK(it,Ee,{enumerable:!0,configurable:!0,writable:!0,value:L}):it[Ee]=L,kU=(it,Ee)=>{for(var L in Ee||(Ee={}))fK.call(Ee,L)&&OU(it,L,Ee[L]);if(PU)for(var L of PU(Ee))pK.call(Ee,L)&&OU(it,L,Ee[L]);return it},FU=(it,Ee)=>dK(it,hK(Ee));(self.webpackChunkbucketList=self.webpackChunkbucketList||[]).push([[179],{2011:(it,Ee,L)=>{L.d(Ee,{Dh:()=>se,GT:()=>we,cc:()=>De,hO:()=>ze,on:()=>W,pX:()=>de,xv:()=>he});var f=L(5e3),G=L(127),k=L(6351);it=L.hmd(it);const ie=["ngOnDestroy"],de=(ve,Pe,qe,Be={})=>new Proxy(ve,{get:(ot,Re)=>qe.runOutsideAngular(()=>{var lt;if(ve[Re])return(null===(lt=null==Be?void 0:Be.spy)||void 0===lt?void 0:lt.get)&&Be.spy.get(Re,ve[Re]),ve[Re];if(ie.indexOf(Re)>-1)return()=>{};const Qe=Pe.toPromise().then(Ie=>{const Y=Ie&&Ie[Re];return"function"==typeof Y?Y.bind(Ie):Y&&Y.then?Y.then(re=>qe.run(()=>re)):qe.run(()=>Y)});return new Proxy(()=>{},{get:(Ie,Y)=>Qe[Y],apply:(Ie,Y,re)=>Qe.then(ge=>{var _e;const Oe=ge&&ge(...re);return(null===(_e=null==Be?void 0:Be.spy)||void 0===_e?void 0:_e.apply)&&Be.spy.apply(Re,re,Oe),Oe})})})}),we=(ve,Pe)=>{Pe.forEach(qe=>{Object.getOwnPropertyNames(qe.prototype||qe).forEach(Be=>{Object.defineProperty(ve.prototype,Be,Object.getOwnPropertyDescriptor(qe.prototype||qe,Be))})})};class fe{constructor(Pe){return Pe}}const se=new f.OlP("angularfire2.app.options"),he=new f.OlP("angularfire2.app.name");function W(ve,Pe,qe){const ot="object"==typeof qe&&qe||{};ot.name=ot.name||"string"==typeof qe&&qe||"[DEFAULT]";const lt=G.Z.apps.filter(Qe=>Qe&&Qe.name===ot.name)[0]||Pe.runOutsideAngular(()=>G.Z.initializeApp(ve,ot));try{JSON.stringify(ve)!==JSON.stringify(lt.options)&&Q("error",`${lt.name} Firebase App already initialized with different options${it.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Qe){}return new fe(lt)}const Q=(ve,...Pe)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[ve](...Pe)},oe={provide:fe,useFactory:W,deps:[se,f.R0b,[new f.FiY,he]]};let ze=(()=>{class ve{constructor(qe){G.Z.registerVersion("angularfire",k.q4.full,"core"),G.Z.registerVersion("angularfire",k.q4.full,"app-compat"),G.Z.registerVersion("angular",f.q4F.full,qe.toString())}static initializeApp(qe,Be){return{ngModule:ve,providers:[{provide:se,useValue:qe},{provide:he,useValue:Be}]}}}return ve.\u0275fac=function(qe){return new(qe||ve)(f.LFG(f.Lbi))},ve.\u0275mod=f.oAB({type:ve}),ve.\u0275inj=f.cJS({providers:[oe]}),ve})();function De(ve,Pe,qe,Be,ot){const[,Re,lt]=globalThis.\u0275AngularfireInstanceCache.find(Qe=>Qe[0]===ve)||[];if(Re)return function Ve(ve,Pe){try{return ve.toString()===Pe.toString()}catch(qe){return ve===Pe}}(ot,lt)||(ye("error",`${Pe} was already initialized on the ${qe} Firebase App with different settings.${He?" You may need to reload as Firebase is not HMR aware.":""}`),ye("warn",{is:ot,was:lt})),Re;{const Qe=Be();return globalThis.\u0275AngularfireInstanceCache.push([ve,Qe,ot]),Qe}}const He=!!it.hot,ye=(ve,...Pe)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[ve](...Pe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6351:(it,Ee,L)=>{L.d(Ee,{q4:()=>Bf,iC:()=>fu,fc:()=>ma,HU:()=>hu,vb:()=>Zi,JM:()=>jf});var f=L(5e3),G=L(5867),k=L(5861),ie=L(9681),de=L(2090),we=L(4859),fe=L(1877),se=L(8766);const he="@firebase/installations",W="0.5.16",oe=`w:${W}`,ze="FIS_v2",Pe=new de.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function qe(T){return T instanceof de.ZR&&T.code.includes("request-failed")}function Be({projectId:T}){return`https://firebaseinstallations.googleapis.com/v1/projects/${T}/installations`}function ot(T){return{token:T.token,requestStatus:2,expiresIn:ge(T.expiresIn),creationTime:Date.now()}}function Re(T,S){return lt.apply(this,arguments)}function lt(){return(lt=(0,k.Z)(function*(T,S){const B=(yield S.json()).error;return Pe.create("request-failed",{requestName:T,serverCode:B.code,serverMessage:B.message,serverStatus:B.status})})).apply(this,arguments)}function Qe({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function Ie(T,{refreshToken:S}){const P=Qe(T);return P.append("Authorization",function _e(T){return`${ze} ${T}`}(S)),P}function Y(T){return re.apply(this,arguments)}function re(){return(re=(0,k.Z)(function*(T){const S=yield T();return S.status>=500&&S.status<600?T():S})).apply(this,arguments)}function ge(T){return Number(T.replace("s","000"))}function Oe(T,S){return ce.apply(this,arguments)}function ce(){return(ce=(0,k.Z)(function*({appConfig:T,heartbeatServiceProvider:S},{fid:P}){const B=Be(T),Z=Qe(T),ue=S.getImmediate({optional:!0});if(ue){const Bt=yield ue.getHeartbeatsHeader();Bt&&Z.append("x-firebase-client",Bt)}const $e={method:"POST",headers:Z,body:JSON.stringify({fid:P,authVersion:ze,appId:T.appId,sdkVersion:oe})},Dt=yield Y(()=>fetch(B,$e));if(Dt.ok){const Bt=yield Dt.json();return{fid:Bt.fid||P,registrationStatus:2,refreshToken:Bt.refreshToken,authToken:ot(Bt.authToken)}}throw yield Re("Create Installation",Dt)})).apply(this,arguments)}function At(T){return new Promise(S=>{setTimeout(S,T)})}const br=/^[cdef][\w-]{21}$/;function Nt(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const P=function er(T){return function qt(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return br.test(P)?P:""}catch(T){return""}}function en(T){return`${T.appName}!${T.appId}`}const cr=new Map;function mn(T,S){const P=en(T);jn(P,S),function Br(T,S){const P=function En(){return!Pn&&"BroadcastChannel"in self&&(Pn=new BroadcastChannel("[Firebase] FID Change"),Pn.onmessage=T=>{jn(T.data.key,T.data.fid)}),Pn}();P&&P.postMessage({key:T,fid:S}),function Es(){0===cr.size&&Pn&&(Pn.close(),Pn=null)}()}(P,S)}function jn(T,S){const P=cr.get(T);if(P)for(const B of P)B(S)}let Pn=null;const Fe="firebase-installations-store";let hr=null;function mt(){return hr||(hr=(0,se.X3)("firebase-installations-database",1,{upgrade:(T,S)=>{0===S&&T.createObjectStore(Fe)}})),hr}function Rr(T,S){return rn.apply(this,arguments)}function rn(){return(rn=(0,k.Z)(function*(T,S){const P=en(T),Z=(yield mt()).transaction(Fe,"readwrite"),ue=Z.objectStore(Fe),Se=yield ue.get(P);return yield ue.put(S,P),yield Z.done,(!Se||Se.fid!==S.fid)&&mn(T,S.fid),S})).apply(this,arguments)}function yn(T){return li.apply(this,arguments)}function li(){return(li=(0,k.Z)(function*(T){const S=en(T),B=(yield mt()).transaction(Fe,"readwrite");yield B.objectStore(Fe).delete(S),yield B.done})).apply(this,arguments)}function Kr(T,S){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,k.Z)(function*(T,S){const P=en(T),Z=(yield mt()).transaction(Fe,"readwrite"),ue=Z.objectStore(Fe),Se=yield ue.get(P),$e=S(Se);return void 0===$e?yield ue.delete(P):yield ue.put($e,P),yield Z.done,$e&&(!Se||Se.fid!==$e.fid)&&mn(T,$e.fid),$e})).apply(this,arguments)}function Sn(T){return $r.apply(this,arguments)}function $r(){return($r=(0,k.Z)(function*(T){let S;const P=yield Kr(T.appConfig,B=>{const Z=bo(B),ue=Qt(T,Z);return S=ue.registrationPromise,ue.installationEntry});return""===P.fid?{installationEntry:yield S}:{installationEntry:P,registrationPromise:S}})).apply(this,arguments)}function bo(T){return wn(T||{fid:Nt(),registrationStatus:0})}function Qt(T,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(Pe.create("app-offline"))};const P={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},B=function yt(T,S){return gt.apply(this,arguments)}(T,P);return{installationEntry:P,registrationPromise:B}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:is(T)}:{installationEntry:S}}function gt(){return(gt=(0,k.Z)(function*(T,S){try{const P=yield Oe(T,S);return Rr(T.appConfig,P)}catch(P){throw qe(P)&&409===P.customData.serverCode?yield yn(T.appConfig):yield Rr(T.appConfig,{fid:S.fid,registrationStatus:0}),P}})).apply(this,arguments)}function is(T){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,k.Z)(function*(T){let S=yield Ct(T.appConfig);for(;1===S.registrationStatus;)yield At(100),S=yield Ct(T.appConfig);if(0===S.registrationStatus){const{installationEntry:P,registrationPromise:B}=yield Sn(T);return B||P}return S})).apply(this,arguments)}function Ct(T){return Kr(T,S=>{if(!S)throw Pe.create("installation-not-found");return wn(S)})}function wn(T){return function fr(T){return 1===T.registrationStatus&&T.registrationTime+1e4<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function bn(T,S){return _t.apply(this,arguments)}function _t(){return(_t=(0,k.Z)(function*({appConfig:T,heartbeatServiceProvider:S},P){const B=pr(T,P),Z=Ie(T,P),ue=S.getImmediate({optional:!0});if(ue){const Bt=yield ue.getHeartbeatsHeader();Bt&&Z.append("x-firebase-client",Bt)}const $e={method:"POST",headers:Z,body:JSON.stringify({installation:{sdkVersion:oe,appId:T.appId}})},Dt=yield Y(()=>fetch(B,$e));if(Dt.ok)return ot(yield Dt.json());throw yield Re("Generate Auth Token",Dt)})).apply(this,arguments)}function pr(T,{fid:S}){return`${Be(T)}/${S}/authTokens:generate`}function Kt(T){return tr.apply(this,arguments)}function tr(){return(tr=(0,k.Z)(function*(T,S=!1){let P;const B=yield Kr(T.appConfig,ue=>{if(!tn(ue))throw Pe.create("not-registered");const Se=ue.authToken;if(!S&&z(Se))return ue;if(1===Se.requestStatus)return P=Je(T,S),ue;{if(!navigator.onLine)throw Pe.create("app-offline");const $e=J(ue);return P=Pt(T,$e),$e}});return P?yield P:B.authToken})).apply(this,arguments)}function Je(T,S){return Te.apply(this,arguments)}function Te(){return(Te=(0,k.Z)(function*(T,S){let P=yield et(T.appConfig);for(;1===P.authToken.requestStatus;)yield At(100),P=yield et(T.appConfig);const B=P.authToken;return 0===B.requestStatus?Kt(T,S):B})).apply(this,arguments)}function et(T){return Kr(T,S=>{if(!tn(S))throw Pe.create("not-registered");return function H(T){return 1===T.requestStatus&&T.requestTime+1e4<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function Pt(T,S){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,k.Z)(function*(T,S){try{const P=yield bn(T,S),B=Object.assign(Object.assign({},S),{authToken:P});return yield Rr(T.appConfig,B),P}catch(P){if(!qe(P)||401!==P.customData.serverCode&&404!==P.customData.serverCode){const B=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield Rr(T.appConfig,B)}else yield yn(T.appConfig);throw P}})).apply(this,arguments)}function tn(T){return void 0!==T&&2===T.registrationStatus}function z(T){return 2===T.requestStatus&&!function q(T){const S=Date.now();return S<T.creationTime||T.creationTime+T.expiresIn<S+36e5}(T)}function J(T){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:S})}function $(){return($=(0,k.Z)(function*(T){const S=T,{installationEntry:P,registrationPromise:B}=yield Sn(S);return B?B.catch(console.error):Kt(S).catch(console.error),P.fid})).apply(this,arguments)}function Ne(){return(Ne=(0,k.Z)(function*(T,S=!1){const P=T;return yield st(P),(yield Kt(P,S)).token})).apply(this,arguments)}function st(T){return at.apply(this,arguments)}function at(){return(at=(0,k.Z)(function*(T){const{registrationPromise:S}=yield Sn(T);S&&(yield S)})).apply(this,arguments)}function ja(T){return Pe.create("missing-app-config-values",{valueName:T})}const Ei="installations",Wt=T=>{const S=T.getProvider("app").getImmediate(),P=function Cr(T){if(!T||!T.options)throw ja("App Configuration");if(!T.name)throw ja("App Name");const S=["projectId","apiKey","appId"];for(const P of S)if(!T.options[P])throw ja(P);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(S);return{app:S,appConfig:P,heartbeatServiceProvider:(0,ie._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},gn=T=>{const S=T.getProvider("app").getImmediate(),P=(0,ie._getProvider)(S,Ei).getImmediate();return{getId:()=>function O(T){return $.apply(this,arguments)}(P),getToken:Z=>function ae(T){return Ne.apply(this,arguments)}(P,Z)}};(function nr(){(0,ie._registerComponent)(new we.wA(Ei,Wt,"PUBLIC")),(0,ie._registerComponent)(new we.wA("installations-internal",gn,"PRIVATE"))})(),(0,ie.registerVersion)(he,W),(0,ie.registerVersion)(he,W,"esm2017");const Yr="@firebase/remote-config",rr=new de.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Nf{constructor(S,P,B,Z){this.client=S,this.storage=P,this.storageCache=B,this.logger=Z}isCachedDataFresh(S,P){if(!P)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const B=Date.now()-P,Z=B<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${B}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${Z}.`),Z}fetch(S){var P=this;return(0,k.Z)(function*(){const[B,Z]=yield Promise.all([P.storage.getLastSuccessfulFetchTimestampMillis(),P.storage.getLastSuccessfulFetchResponse()]);if(Z&&P.isCachedDataFresh(S.cacheMaxAgeMillis,B))return Z;S.eTag=Z&&Z.eTag;const ue=yield P.client.fetch(S),Se=[P.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ue.status&&Se.push(P.storage.setLastSuccessfulFetchResponse(ue)),yield Promise.all(Se),ue})()}}function jg(T=navigator){return T.languages&&T.languages[0]||T.language}class Ri{constructor(S,P,B,Z,ue,Se){this.firebaseInstallations=S,this.sdkVersion=P,this.namespace=B,this.projectId=Z,this.apiKey=ue,this.appId=Se}fetch(S){var P=this;return(0,k.Z)(function*(){var B,Z,ue;const[Se,$e]=yield Promise.all([P.firebaseInstallations.getId(),P.firebaseInstallations.getToken()]),Bt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${P.projectId}/namespaces/${P.namespace}:fetch?key=${P.apiKey}`,zt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},vt={sdk_version:P.sdkVersion,app_instance_id:Se,app_instance_id_token:$e,app_id:P.appId,language_code:jg()},kn={method:"POST",headers:zt,body:JSON.stringify(vt)},or=fetch(Bt,kn),ds=new Promise((ao,uo)=>{S.signal.addEventListener(()=>{const Ps=new Error("The operation was aborted.");Ps.name="AbortError",uo(Ps)})});let hs;try{yield Promise.race([or,ds]),hs=yield or}catch(ao){let uo="fetch-client-network";throw"AbortError"===(null===(B=ao)||void 0===B?void 0:B.name)&&(uo="fetch-timeout"),rr.create(uo,{originalErrorMessage:null===(Z=ao)||void 0===Z?void 0:Z.message})}let Ns=hs.status;const gu=hs.headers.get("ETag")||void 0;let Ci,No;if(200===hs.status){let ao;try{ao=yield hs.json()}catch(uo){throw rr.create("fetch-client-parse",{originalErrorMessage:null===(ue=uo)||void 0===ue?void 0:ue.message})}Ci=ao.entries,No=ao.state}if("INSTANCE_STATE_UNSPECIFIED"===No?Ns=500:"NO_CHANGE"===No?Ns=304:("NO_TEMPLATE"===No||"EMPTY_CONFIG"===No)&&(Ci={}),304!==Ns&&200!==Ns)throw rr.create("fetch-status",{httpStatus:Ns});return{status:Ns,eTag:gu,config:Ci}})()}}class Pf{constructor(S,P){this.client=S,this.storage=P}fetch(S){var P=this;return(0,k.Z)(function*(){const B=(yield P.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return P.attemptFetch(S,B)})()}attemptFetch(S,{throttleEndTimeMillis:P,backoffCount:B}){var Z=this;return(0,k.Z)(function*(){yield function $g(T,S){return new Promise((P,B)=>{const Z=Math.max(S-Date.now(),0),ue=setTimeout(P,Z);T.addEventListener(()=>{clearTimeout(ue),B(rr.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,P);try{const ue=yield Z.client.fetch(S);return yield Z.storage.deleteThrottleMetadata(),ue}catch(ue){if(!function Ha(T){if(!(T instanceof de.ZR&&T.customData))return!1;const S=Number(T.customData.httpStatus);return 429===S||500===S||503===S||504===S}(ue))throw ue;const Se={throttleEndTimeMillis:Date.now()+(0,de.$s)(B),backoffCount:B+1};return yield Z.storage.setThrottleMetadata(Se),Z.attemptFetch(S,Se)}})()}}class Bd{constructor(S,P,B,Z,ue){this.app=S,this._client=P,this._storageCache=B,this._storage=Z,this._logger=ue,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function tc(T,S){var P;const B=T.target.error||void 0;return rr.create(S,{originalErrorMessage:B&&(null===(P=B)||void 0===P?void 0:P.message)})}const to="app_namespace_store";class $d{constructor(S,P,B,Z=function nc(){return new Promise((T,S)=>{var P;try{const B=indexedDB.open("firebase_remote_config",1);B.onerror=Z=>{S(tc(Z,"storage-open"))},B.onsuccess=Z=>{T(Z.target.result)},B.onupgradeneeded=Z=>{0===Z.oldVersion&&Z.target.result.createObjectStore(to,{keyPath:"compositeKey"})}}catch(B){S(rr.create("storage-open",{originalErrorMessage:null===(P=B)||void 0===P?void 0:P.message}))}})}()){this.appId=S,this.appName=P,this.namespace=B,this.openDbPromise=Z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var P=this;return(0,k.Z)(function*(){const B=yield P.openDbPromise;return new Promise((Z,ue)=>{var Se;const Dt=B.transaction([to],"readonly").objectStore(to),Bt=P.createCompositeKey(S);try{const zt=Dt.get(Bt);zt.onerror=vt=>{ue(tc(vt,"storage-get"))},zt.onsuccess=vt=>{const kn=vt.target.result;Z(kn?kn.value:void 0)}}catch(zt){ue(rr.create("storage-get",{originalErrorMessage:null===(Se=zt)||void 0===Se?void 0:Se.message}))}})})()}set(S,P){var B=this;return(0,k.Z)(function*(){const Z=yield B.openDbPromise;return new Promise((ue,Se)=>{var $e;const Bt=Z.transaction([to],"readwrite").objectStore(to),zt=B.createCompositeKey(S);try{const vt=Bt.put({compositeKey:zt,value:P});vt.onerror=kn=>{Se(tc(kn,"storage-set"))},vt.onsuccess=()=>{ue()}}catch(vt){Se(rr.create("storage-set",{originalErrorMessage:null===($e=vt)||void 0===$e?void 0:$e.message}))}})})()}delete(S){var P=this;return(0,k.Z)(function*(){const B=yield P.openDbPromise;return new Promise((Z,ue)=>{var Se;const Dt=B.transaction([to],"readwrite").objectStore(to),Bt=P.createCompositeKey(S);try{const zt=Dt.delete(Bt);zt.onerror=vt=>{ue(tc(vt,"storage-delete"))},zt.onsuccess=()=>{Z()}}catch(zt){ue(rr.create("storage-delete",{originalErrorMessage:null===(Se=zt)||void 0===Se?void 0:Se.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class Gg{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,k.Z)(function*(){const P=S.storage.getLastFetchStatus(),B=S.storage.getLastSuccessfulFetchTimestampMillis(),Z=S.storage.getActiveConfig(),ue=yield P;ue&&(S.lastFetchStatus=ue);const Se=yield B;Se&&(S.lastSuccessfulFetchTimestampMillis=Se);const $e=yield Z;$e&&(S.activeConfig=$e)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function qg(){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,k.Z)(function*(){if(!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch(T){return!1}})).apply(this,arguments)}!function Hd(){(0,ie._registerComponent)(new we.wA("remote-config",function T(S,{instanceIdentifier:P}){const B=S.getProvider("app").getImmediate(),Z=S.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw rr.create("registration-window");if(!(0,de.hl)())throw rr.create("indexed-db-unavailable");const{projectId:ue,apiKey:Se,appId:$e}=B.options;if(!ue)throw rr.create("registration-project-id");if(!Se)throw rr.create("registration-api-key");if(!$e)throw rr.create("registration-app-id");const Dt=new $d($e,B.name,P=P||"firebase"),Bt=new Gg(Dt),zt=new fe.Yd(Yr);zt.logLevel=fe.in.ERROR;const vt=new Ri(Z,ie.SDK_VERSION,P,ue,Se,$e),kn=new Pf(vt,Dt),or=new Nf(kn,Dt,Bt,zt),ds=new Bd(B,or,Bt,Dt,zt);return function An(T){const S=(0,de.m9)(T);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(ds),ds},"PUBLIC").setMultipleInstances(!0)),(0,ie.registerVersion)(Yr,"0.3.15"),(0,ie.registerVersion)(Yr,"0.3.15","esm2017")}();const Wg="/firebase-messaging-sw.js",bs="/firebase-cloud-messaging-push-scope",Gd="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",qa="google.c.a.c_id",rc="google.c.a.c_l",Bu="google.c.a.ts",xi="google.c.a.e";var Jo=(()=>{return(T=Jo||(Jo={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",Jo;var T})();function ir(T){const S=new Uint8Array(T);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ff(T){const P=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),B=atob(P),Z=new Uint8Array(B.length);for(let ue=0;ue<B.length;++ue)Z[ue]=B.charCodeAt(ue);return Z}const Xr="fcm_token_details_db",$u="fcm_token_object_Store";function qd(T){return Hu.apply(this,arguments)}function Hu(){return Hu=(0,k.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ue=>ue.name).includes(Xr))return null;let S=null;return(yield(0,se.X3)(Xr,5,{upgrade:(B=(0,k.Z)(function*(Z,ue,Se,$e){var Dt;if(ue<2||!Z.objectStoreNames.contains($u))return;const Bt=$e.objectStore($u),zt=yield Bt.index("fcmSenderId").get(T);if(yield Bt.clear(),zt)if(2===ue){const vt=zt;if(!vt.auth||!vt.p256dh||!vt.endpoint)return;S={token:vt.fcmToken,createTime:null!==(Dt=vt.createTime)&&void 0!==Dt?Dt:Date.now(),subscriptionOptions:{auth:vt.auth,p256dh:vt.p256dh,endpoint:vt.endpoint,swScope:vt.swScope,vapidKey:"string"==typeof vt.vapidKey?vt.vapidKey:ir(vt.vapidKey)}}}else if(3===ue){const vt=zt;S={token:vt.fcmToken,createTime:vt.createTime,subscriptionOptions:{auth:ir(vt.auth),p256dh:ir(vt.p256dh),endpoint:vt.endpoint,swScope:vt.swScope,vapidKey:ir(vt.vapidKey)}}}else if(4===ue){const vt=zt;S={token:vt.fcmToken,createTime:vt.createTime,subscriptionOptions:{auth:ir(vt.auth),p256dh:ir(vt.p256dh),endpoint:vt.endpoint,swScope:vt.swScope,vapidKey:ir(vt.vapidKey)}}}}),function(ue,Se,$e,Dt){return B.apply(this,arguments)})})).close(),yield(0,se.Lj)(Xr),yield(0,se.Lj)("fcm_vapid_details_db"),yield(0,se.Lj)("undefined"),sc(S)?S:null;var B}),Hu.apply(this,arguments)}function sc(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:S}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}const ci="firebase-messaging-store";let Wd=null;function Gn(){return Wd||(Wd=(0,se.X3)("firebase-messaging-database",1,{upgrade:(T,S)=>{0===S&&T.createObjectStore(ci)}})),Wd}function ea(T){return oc.apply(this,arguments)}function oc(){return(oc=(0,k.Z)(function*(T){const S=Ts(T),B=yield(yield Gn()).transaction(ci).objectStore(ci).get(S);if(B)return B;{const Z=yield qd(T.appConfig.senderId);if(Z)return yield Mi(T,Z),Z}})).apply(this,arguments)}function Mi(T,S){return qn.apply(this,arguments)}function qn(){return(qn=(0,k.Z)(function*(T,S){const P=Ts(T),Z=(yield Gn()).transaction(ci,"readwrite");return yield Z.objectStore(ci).put(S,P),yield Z.done,S})).apply(this,arguments)}function Is(T){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,k.Z)(function*(T){const S=Ts(T),B=(yield Gn()).transaction(ci,"readwrite");yield B.objectStore(ci).delete(S),yield B.done})).apply(this,arguments)}function Ts({appConfig:T}){return T.appId}const Dr=new de.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Wa(T,S){return no.apply(this,arguments)}function no(){return(no=(0,k.Z)(function*(T,S){var P;const B=yield Jr(T),Z=Gu(S),ue={method:"POST",headers:B,body:JSON.stringify(Z)};let Se;try{Se=yield(yield fetch(ro(T.appConfig),ue)).json()}catch($e){throw Dr.create("token-subscribe-failed",{errorInfo:null===(P=$e)||void 0===P?void 0:P.toString()})}if(Se.error)throw Dr.create("token-subscribe-failed",{errorInfo:Se.error.message});if(!Se.token)throw Dr.create("token-subscribe-no-token");return Se.token})).apply(this,arguments)}function Wi(T,S){return os.apply(this,arguments)}function os(){return(os=(0,k.Z)(function*(T,S){var P;const B=yield Jr(T),Z=Gu(S.subscriptionOptions),ue={method:"PATCH",headers:B,body:JSON.stringify(Z)};let Se;try{Se=yield(yield fetch(`${ro(T.appConfig)}/${S.token}`,ue)).json()}catch($e){throw Dr.create("token-update-failed",{errorInfo:null===(P=$e)||void 0===P?void 0:P.toString()})}if(Se.error)throw Dr.create("token-update-failed",{errorInfo:Se.error.message});if(!Se.token)throw Dr.create("token-update-no-token");return Se.token})).apply(this,arguments)}function za(T,S){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,k.Z)(function*(T,S){var P;const Z={method:"DELETE",headers:yield Jr(T)};try{const Se=yield(yield fetch(`${ro(T.appConfig)}/${S}`,Z)).json();if(Se.error)throw Dr.create("token-unsubscribe-failed",{errorInfo:Se.error.message})}catch(ue){throw Dr.create("token-unsubscribe-failed",{errorInfo:null===(P=ue)||void 0===P?void 0:P.toString()})}})).apply(this,arguments)}function ro({projectId:T}){return`https://fcmregistrations.googleapis.com/v1/projects/${T}/registrations`}function Jr(T){return ta.apply(this,arguments)}function ta(){return(ta=(0,k.Z)(function*({appConfig:T,installations:S}){const P=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${P}`})})).apply(this,arguments)}function Gu({p256dh:T,auth:S,endpoint:P,vapidKey:B}){const Z={web:{endpoint:P,auth:S,p256dh:T}};return B!==Gd&&(Z.web.applicationPubKey=B),Z}const Ka=6048e5;function Za(T){return qu.apply(this,arguments)}function qu(){return(qu=(0,k.Z)(function*(T){const S=yield ei(T.swRegistration,T.vapidKey),P={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:S.endpoint,auth:ir(S.getKey("auth")),p256dh:ir(S.getKey("p256dh"))},B=yield ea(T.firebaseDependencies);if(B){if(Ya(B.subscriptionOptions,P))return Date.now()>=B.createTime+Ka?Wu(T,{token:B.token,createTime:Date.now(),subscriptionOptions:P}):B.token;try{yield za(T.firebaseDependencies,B.token)}catch(Z){console.warn(Z)}return na(T.firebaseDependencies,P)}return na(T.firebaseDependencies,P)})).apply(this,arguments)}function xe(T){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,k.Z)(function*(T){const S=yield ea(T.firebaseDependencies);S&&(yield za(T.firebaseDependencies,S.token),yield Is(T.firebaseDependencies));const P=yield T.swRegistration.pushManager.getSubscription();return!P||P.unsubscribe()})).apply(this,arguments)}function Wu(T,S){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,k.Z)(function*(T,S){try{const P=yield Wi(T.firebaseDependencies,S),B=Object.assign(Object.assign({},S),{token:P,createTime:Date.now()});return yield Mi(T.firebaseDependencies,B),P}catch(P){throw yield xe(T),P}})).apply(this,arguments)}function na(T,S){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,k.Z)(function*(T,S){const B={token:yield Wa(T,S),createTime:Date.now(),subscriptionOptions:S};return yield Mi(T,B),B.token})).apply(this,arguments)}function ei(T,S){return io.apply(this,arguments)}function io(){return(io=(0,k.Z)(function*(T,S){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ff(S)})})).apply(this,arguments)}function Ya(T,S){return S.vapidKey===T.vapidKey&&S.endpoint===T.endpoint&&S.auth===T.auth&&S.p256dh===T.p256dh}function ac(T){const S={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function uc(T,S){if(!S.notification)return;T.notification={};const P=S.notification.title;P&&(T.notification.title=P);const B=S.notification.body;B&&(T.notification.body=B);const Z=S.notification.image;Z&&(T.notification.image=Z);const ue=S.notification.icon;ue&&(T.notification.icon=ue)}(S,T),function Do(T,S){!S.data||(T.data=S.data)}(S,T),function ra(T,S){var P,B,Z,ue,Se;if(!S.fcmOptions&&!(null===(P=S.notification)||void 0===P?void 0:P.click_action))return;T.fcmOptions={};const $e=null!==(Z=null===(B=S.fcmOptions)||void 0===B?void 0:B.link)&&void 0!==Z?Z:null===(ue=S.notification)||void 0===ue?void 0:ue.click_action;$e&&(T.fcmOptions.link=$e);const Dt=null===(Se=S.fcmOptions)||void 0===Se?void 0:Se.analytics_label;Dt&&(T.fcmOptions.analyticsLabel=Dt)}(S,T),S}function Mr(T){return"object"==typeof T&&!!T&&qa in T}function Ni(T,S){const P=[];for(let B=0;B<T.length;B++)P.push(T.charAt(B)),B<S.length&&P.push(S.charAt(B));return P.join("")}function zi(T){return Dr.create("missing-app-config-values",{valueName:T})}Ni("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ni("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ss{constructor(S,P,B){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Z=function lc(T){if(!T||!T.options)throw zi("App Configuration Object");if(!T.name)throw zi("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:P}=T;for(const B of S)if(!P[B])throw zi(B);return{appName:T.name,projectId:P.projectId,apiKey:P.apiKey,appId:P.appId,senderId:P.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:Z,installations:P,analyticsProvider:B}}_delete(){return Promise.resolve()}}function zu(T){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,k.Z)(function*(T){var S;try{T.swRegistration=yield navigator.serviceWorker.register(Wg,{scope:bs}),T.swRegistration.update().catch(()=>{})}catch(P){throw Dr.create("failed-service-worker-registration",{browserErrorMessage:null===(S=P)||void 0===S?void 0:S.message})}})).apply(this,arguments)}function cc(T,S){return ia.apply(this,arguments)}function ia(){return(ia=(0,k.Z)(function*(T,S){if(!S&&!T.swRegistration&&(yield zu(T)),S||!T.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw Dr.create("invalid-sw-registration");T.swRegistration=S}})).apply(this,arguments)}function Qa(T,S){return so.apply(this,arguments)}function so(){return(so=(0,k.Z)(function*(T,S){S?T.vapidKey=S:T.vapidKey||(T.vapidKey=Gd)})).apply(this,arguments)}function So(){return(So=(0,k.Z)(function*(T,S){if(!navigator)throw Dr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Dr.create("permission-blocked");return yield Qa(T,null==S?void 0:S.vapidKey),yield cc(T,null==S?void 0:S.serviceWorkerRegistration),Za(T)})).apply(this,arguments)}function zd(T,S,P){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,k.Z)(function*(T,S,P){const B=Zu(S);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(B,{message_id:P[qa],message_name:P[rc],message_time:P[Bu],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Zu(T){switch(T){case Jo.NOTIFICATION_CLICKED:return"notification_open";case Jo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Yu(){return(Yu=(0,k.Z)(function*(T,S){const P=S.data;if(!P.isFirebaseMessaging)return;T.onMessageHandler&&P.messageType===Jo.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(ac(P)):T.onMessageHandler.next(ac(P)));const B=P.data;Mr(B)&&"1"===B[xi]&&(yield zd(T,P.messageType,B))})).apply(this,arguments)}const Ja="@firebase/messaging",sa=T=>{const S=new Ss(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",P=>function hc(T,S){return Yu.apply(this,arguments)}(S,P)),S},Kg=T=>{const S=T.getProvider("messaging").getImmediate();return{getToken:B=>function dc(T,S){return So.apply(this,arguments)}(S,B)}};function Nr(){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,k.Z)(function*(){try{yield(0,de.eu)()}catch(T){return!1}return"undefined"!=typeof window&&(0,de.hl)()&&(0,de.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Kd(){(0,ie._registerComponent)(new we.wA("messaging",sa,"PUBLIC")),(0,ie._registerComponent)(new we.wA("messaging-internal",Kg,"PRIVATE")),(0,ie.registerVersion)(Ja,"0.11.0"),(0,ie.registerVersion)(Ja,"0.11.0","esm2017")}();const oa="analytics",aa="firebase_id",Zg="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ki="https://www.googletagmanager.com/gtag/js",sr=new fe.Yd("@firebase/analytics");function _c(T){return Promise.all(T.map(S=>S.catch(P=>P)))}function Yg(T,S){const P=document.createElement("script");P.src=`${Ki}?l=${T}&id=${S}`,P.async=!0,document.head.appendChild(P)}function vc(T,S,P,B,Z,ue){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,k.Z)(function*(T,S,P,B,Z,ue){const Se=B[Z];try{if(Se)yield S[Se];else{const Dt=(yield _c(P)).find(Bt=>Bt.measurementId===Z);Dt&&(yield S[Dt.appId])}}catch($e){sr.error($e)}T("config",Z,ue)})).apply(this,arguments)}function Qg(T,S,P,B,Z){return ua.apply(this,arguments)}function ua(){return(ua=(0,k.Z)(function*(T,S,P,B,Z){try{let ue=[];if(Z&&Z.send_to){let Se=Z.send_to;Array.isArray(Se)||(Se=[Se]);const $e=yield _c(P);for(const Dt of Se){const Bt=$e.find(vt=>vt.measurementId===Dt),zt=Bt&&S[Bt.appId];if(!zt){ue=[];break}ue.push(zt)}}0===ue.length&&(ue=Object.values(S)),yield Promise.all(ue),T("event",B,Z||{})}catch(ue){sr.error(ue)}})).apply(this,arguments)}function In(T){const S=window.document.getElementsByTagName("script");for(const P of Object.values(S))if(P.src&&P.src.includes(Ki)&&P.src.includes(T))return P;return null}const dt=new de.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Yd=new class Wn{constructor(S={},P=1e3){this.throttleMetadata=S,this.intervalMillis=P}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,P){this.throttleMetadata[S]=P}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function tu(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function Qd(T){return nu.apply(this,arguments)}function nu(){return(nu=(0,k.Z)(function*(T){var S;const{appId:P,apiKey:B}=T,Z={method:"GET",headers:tu(B)},ue=Zg.replace("{app-id}",P),Se=yield fetch(ue,Z);if(200!==Se.status&&304!==Se.status){let $e="";try{const Dt=yield Se.json();(null===(S=Dt.error)||void 0===S?void 0:S.message)&&($e=Dt.error.message)}catch(Dt){}throw dt.create("config-fetch-failed",{httpStatus:Se.status,responseMessage:$e})}return Se.json()})).apply(this,arguments)}function Xg(T){return wc.apply(this,arguments)}function wc(){return(wc=(0,k.Z)(function*(T,S=Yd,P){const{appId:B,apiKey:Z,measurementId:ue}=T.options;if(!B)throw dt.create("no-app-id");if(!Z){if(ue)return{measurementId:ue,appId:B};throw dt.create("no-api-key")}const Se=S.getThrottleMetadata(B)||{backoffCount:0,throttleEndTimeMillis:Date.now()},$e=new el;return setTimeout((0,k.Z)(function*(){$e.abort()}),void 0!==P?P:6e4),us({appId:B,apiKey:Z,measurementId:ue},Se,$e,S)})).apply(this,arguments)}function us(T,S,P){return It.apply(this,arguments)}function It(){return(It=(0,k.Z)(function*(T,{throttleEndTimeMillis:S,backoffCount:P},B,Z=Yd){var ue,Se;const{appId:$e,measurementId:Dt}=T;try{yield bc(B,S)}catch(Bt){if(Dt)return sr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Dt} provided in the "measurementId" field in the local Firebase config. [${null===(ue=Bt)||void 0===ue?void 0:ue.message}]`),{appId:$e,measurementId:Dt};throw Bt}try{const Bt=yield Qd(T);return Z.deleteThrottleMetadata($e),Bt}catch(Bt){const zt=Bt;if(!ru(zt)){if(Z.deleteThrottleMetadata($e),Dt)return sr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Dt} provided in the "measurementId" field in the local Firebase config. [${null==zt?void 0:zt.message}]`),{appId:$e,measurementId:Dt};throw Bt}const vt=503===Number(null===(Se=null==zt?void 0:zt.customData)||void 0===Se?void 0:Se.httpStatus)?(0,de.$s)(P,Z.intervalMillis,30):(0,de.$s)(P,Z.intervalMillis),kn={throttleEndTimeMillis:Date.now()+vt,backoffCount:P+1};return Z.setThrottleMetadata($e,kn),sr.debug(`Calling attemptFetch again in ${vt} millis`),us(T,kn,B,Z)}})).apply(this,arguments)}function bc(T,S){return new Promise((P,B)=>{const Z=Math.max(S-Date.now(),0),ue=setTimeout(P,Z);T.addEventListener(()=>{clearTimeout(ue),B(dt.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}function ru(T){if(!(T instanceof de.ZR&&T.customData))return!1;const S=Number(T.customData.httpStatus);return 429===S||500===S||503===S||504===S}class el{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}let la,Pi;function oo(){return(oo=(0,k.Z)(function*(T,S,P,B,Z){if(Z&&Z.global)T("event",P,B);else{const ue=yield S;T("event",P,Object.assign(Object.assign({},B),{send_to:ue}))}})).apply(this,arguments)}function Xd(T){Pi=T}function ls(T){la=T}function Cc(){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,k.Z)(function*(){var T;if(!(0,de.hl)())return sr.warn(dt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,de.eu)()}catch(S){return sr.warn(dt.create("indexeddb-unavailable",{errorInfo:null===(T=S)||void 0===T?void 0:T.toString()}).message),!1}return!0})).apply(this,arguments)}function ou(){return(ou=(0,k.Z)(function*(T,S,P,B,Z,ue,Se){var $e;const Dt=Xg(T);Dt.then(or=>{P[or.measurementId]=or.appId,T.options.measurementId&&or.measurementId!==T.options.measurementId&&sr.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${or.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(or=>sr.error(or)),S.push(Dt);const Bt=Cc().then(or=>{if(or)return B.getId()}),[zt,vt]=yield Promise.all([Dt,Bt]);In(ue)||Yg(ue,zt.measurementId),Pi&&(Z("consent","default",Pi),Xd(void 0)),Z("js",new Date);const kn=null!==($e=null==Se?void 0:Se.config)&&void 0!==$e?$e:{};return kn.origin="firebase",kn.update=!0,null!=vt&&(kn[aa]=vt),Z("config",zt.measurementId,kn),la&&(Z("set",la),ls(void 0)),zt.measurementId})).apply(this,arguments)}class Zt{constructor(S){this.app=S}_delete(){return delete Gr[this.app.options.appId],Promise.resolve()}}let Gr={},Oi=[];const xo={};let fi,Vn,hi="dataLayer",nl=!1;function au(T,S,P){!function rl(){const T=[];if((0,de.ru)()&&T.push("This is a browser extension environment."),(0,de.zI)()||T.push("Cookies are not available."),T.length>0){const S=T.map((B,Z)=>`(${Z+1}) ${B}`).join(" "),P=dt.create("invalid-analytics-context",{errorInfo:S});sr.warn(P.message)}}();const B=T.options.appId;if(!B)throw dt.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw dt.create("no-api-key");sr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Gr[B])throw dt.create("already-exists",{id:B});if(!nl){!function Xu(T){let S=[];Array.isArray(window[T])?S=window[T]:window[T]=S}(hi);const{wrappedGtag:ue,gtagCore:Se}=function Ec(T,S,P,B,Z){let ue=function(...Se){window[B].push(arguments)};return window[Z]&&"function"==typeof window[Z]&&(ue=window[Z]),window[Z]=function Lf(T,S,P,B){function ue(){return(ue=(0,k.Z)(function*(Se,$e,Dt){try{"event"===Se?yield Qg(T,S,P,$e,Dt):"config"===Se?yield vc(T,S,P,B,$e,Dt):"consent"===Se?T("consent","update",Dt):T("set",$e)}catch(Bt){sr.error(Bt)}})).apply(this,arguments)}return function Z(Se,$e,Dt){return ue.apply(this,arguments)}}(ue,T,S,P),{gtagCore:ue,wrappedGtag:window[Z]}}(Gr,Oi,xo,hi,"gtag");Vn=ue,fi=Se,nl=!0}return Gr[B]=function Ro(T,S,P,B,Z,ue,Se){return ou.apply(this,arguments)}(T,Oi,xo,S,fi,hi,P),new Zt(T)}function eh(){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,k.Z)(function*(){if((0,de.ru)()||!(0,de.zI)()||!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch(T){return!1}})).apply(this,arguments)}const Tc="@firebase/analytics";!function cs(){(0,ie._registerComponent)(new we.wA(oa,(S,{options:P})=>au(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),P),"PUBLIC")),(0,ie._registerComponent)(new we.wA("analytics-internal",function T(S){try{const P=S.getProvider(oa).getImmediate();return{logEvent:(B,Z,ue)=>function fa(T,S,P,B){T=(0,de.m9)(T),function Zn(T,S,P,B,Z){return oo.apply(this,arguments)}(Vn,Gr[T.app.options.appId],S,P,B).catch(Z=>sr.error(Z))}(P,B,Z,ue)}}catch(P){throw dt.create("interop-component-reg-failed",{reason:P})}},"PRIVATE")),(0,ie.registerVersion)(Tc,"0.8.4"),(0,ie.registerVersion)(Tc,"0.8.4","esm2017")}();var th=L(233),pa=L(4986),ga=L(8505),uu=L(5363),nh=L(9468);const Bf=new f.GfV("7.4.1"),rh="__angularfire_symbol__analyticsIsSupportedValue",lu="__angularfire_symbol__analyticsIsSupported",cu="__angularfire_symbol__remoteConfigIsSupportedValue",Tt="__angularfire_symbol__remoteConfigIsSupported",du="__angularfire_symbol__messagingIsSupportedValue",ti="__angularfire_symbol__messagingIsSupported";function jf(T,S,P){if(S){if(1===S.length)return S[0];const ue=S.filter(Se=>Se.app===P);if(1===ue.length)return ue[0]}return P.container.getProvider(T).getImmediate({optional:!0})}globalThis[lu]||(globalThis[lu]=eh().then(T=>globalThis[rh]=T).catch(()=>globalThis[rh]=!1)),globalThis[ti]||(globalThis[ti]=Nr().then(T=>globalThis[du]=T).catch(()=>globalThis[du]=!1)),globalThis[Tt]||(globalThis[Tt]=qg().then(T=>globalThis[cu]=T).catch(()=>globalThis[cu]=!1));const Zi=(T,S)=>{const P=S?[S]:(0,G.C6)(),B=[];return P.forEach(Z=>{Z.container.getProvider(T).instances.forEach(Se=>{B.includes(Se)||B.push(Se)})}),B};function Mo(){}class sl{constructor(S,P=th.N){this.zone=S,this.delegate=P}now(){return this.delegate.now()}schedule(S,P,B){const Z=this.zone;return this.delegate.schedule(function(Se){Z.runGuarded(()=>{S.apply(this,[Se])})},P,B)}}class ol{constructor(S){this.zone=S,this.task=null}call(S,P){const B=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Mo,{},Mo,Mo)),P.pipe((0,ga.b)({next:B,complete:B,error:B})).subscribe(S).add(B)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let hu=(()=>{class T{constructor(P){this.ngZone=P,this.outsideAngular=P.runOutsideAngular(()=>new sl(Zone.current)),this.insideAngular=P.run(()=>new sl(Zone.current,pa.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(P){return new(P||T)(f.LFG(f.R0b))},T.\u0275prov=f.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function zn(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function ma(T){return T.pipe((0,uu.Q)(zn().outsideAngular))}function fu(T){return zn(),function al(T){return function(P){return(P=P.lift(new ol(T.ngZone))).pipe((0,nh.R)(T.outsideAngular),(0,uu.Q)(T.insideAngular))}}(zn())(T)}},732:(it,Ee,L)=>{L.d(Ee,{$:()=>Ku,A:()=>Nt,B:()=>cr,G:()=>Vd,H:()=>Ha,J:()=>ir,L:()=>ji,M:()=>Mi,N:()=>Ts,P:()=>S,Q:()=>wi,R:()=>sl,T:()=>Dr,U:()=>Cs,V:()=>os,W:()=>za,X:()=>Gu,Y:()=>Do,Z:()=>Mr,_:()=>lc,a:()=>ls,a0:()=>dc,a1:()=>zd,a2:()=>Zu,a3:()=>Yu,a4:()=>fc,a5:()=>Kg,a6:()=>Nr,a7:()=>Pr,a8:()=>pc,a9:()=>gc,aA:()=>_n,aB:()=>ll,aC:()=>H_,aD:()=>ih,aE:()=>$n,aI:()=>Ro,aL:()=>no,aa:()=>$_,ab:()=>oa,ac:()=>Zd,af:()=>sr,ag:()=>Yg,ah:()=>Xu,ak:()=>Jt,al:()=>as,an:()=>ru,ao:()=>tl,ap:()=>mt,aq:()=>ws,ar:()=>eo,as:()=>Pn,at:()=>cm,au:()=>dl,av:()=>Qr,aw:()=>En,ax:()=>Fe,ay:()=>qf,az:()=>rn,b:()=>Pi,c:()=>zt,d:()=>ds,e:()=>kn,f:()=>J0,g:()=>Os,h:()=>Gf,i:()=>Tc,j:()=>eb,k:()=>hm,l:()=>Ms,m:()=>ph,o:()=>qt,r:()=>$f,s:()=>zn,u:()=>tm});var f=L(5861),G=L(2090),k=L(9681),ie=L(1877);function se(v,g){var y={};for(var w in v)Object.prototype.hasOwnProperty.call(v,w)&&g.indexOf(w)<0&&(y[w]=v[w]);if(null!=v&&"function"==typeof Object.getOwnPropertySymbols){var A=0;for(w=Object.getOwnPropertySymbols(v);A<w.length;A++)g.indexOf(w[A])<0&&Object.prototype.propertyIsEnumerable.call(v,w[A])&&(y[w[A]]=v[w[A]])}return y}var ce=L(4859);const qt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Nt={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const cr=function er(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},mn=function en(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},dr=new G.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),jn=new ie.Yd("@firebase/auth");function Br(v,...g){jn.logLevel<=ie.in.ERROR&&jn.error(`Auth (${k.SDK_VERSION}): ${v}`,...g)}function Pn(v,...g){throw ui(v,...g)}function En(v,...g){return ui(v,...g)}function Es(v,g,y){const w=Object.assign(Object.assign({},mn()),{[g]:y});return new G.LL("auth","Firebase",w).create(g,{appName:v.name})}function jr(v,g,y){if(!(g instanceof y))throw y.name!==g.constructor.name&&Pn(v,"argument-error"),Es(v,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ui(v,...g){if("string"!=typeof v){const y=g[0],w=[...g.slice(1)];return w[0]&&(w[0].appName=v.name),v._errorFactory.create(y,...w)}return dr.create(v,...g)}function Fe(v,g,...y){if(!v)throw ui(g,...y)}function hr(v){const g="INTERNAL ASSERTION FAILED: "+v;throw Br(g),new Error(g)}function mt(v,g){v||hr(g)}const Rr=new Map;function rn(v){mt(v instanceof Function,"Expected a class definition");let g=Rr.get(v);return g?(mt(g instanceof v,"Instance stored in cache mismatched with class"),g):(g=new v,Rr.set(v,g),g)}function Kr(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function Ir(){return"http:"===Sn()||"https:"===Sn()}function Sn(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Qt{constructor(g,y){this.shortDelay=g,this.longDelay=y,mt(y>g,"Short delay should be less than long delay!"),this.isMobile=(0,G.uI)()||(0,G.b$)()}get(){return function $r(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ir()||(0,G.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function yt(v,g){mt(v.emulator,"Emulator should always be set here");const{url:y}=v.emulator;return g?`${y}${g.startsWith("/")?g.slice(1):g}`:y}class gt{static initialize(g,y,w){this.fetchImpl=g,y&&(this.headersImpl=y),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void hr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void hr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void hr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const is={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Zr=new Qt(3e4,6e4);function Ct(v,g){return v.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:v.tenantId}):g}function wn(v,g,y,w){return fr.apply(this,arguments)}function fr(){return(fr=(0,f.Z)(function*(v,g,y,w,A={}){return bn(v,A,(0,f.Z)(function*(){let M={},K={};w&&("GET"===g?K=w:M={body:JSON.stringify(w)});const pe=(0,G.xO)(Object.assign({key:v.config.apiKey},K)).slice(1),Ze=yield v._getAdditionalHeaders();return Ze["Content-Type"]="application/json",v.languageCode&&(Ze["X-Firebase-Locale"]=v.languageCode),gt.fetch()(tr(v,v.config.apiHost,y,pe),Object.assign({method:g,headers:Ze,referrerPolicy:"no-referrer"},M))}))})).apply(this,arguments)}function bn(v,g,y){return _t.apply(this,arguments)}function _t(){return(_t=(0,f.Z)(function*(v,g,y){v._canInitEmulator=!1;const w=Object.assign(Object.assign({},is),g);try{const A=new Je(v),M=yield Promise.race([y(),A.promise]);A.clearNetworkTimeout();const K=yield M.json();if("needConfirmation"in K)throw Te(v,"account-exists-with-different-credential",K);if(M.ok&&!("errorMessage"in K))return K;{const pe=M.ok?K.errorMessage:K.error.message,[Ze,Le]=pe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ze)throw Te(v,"credential-already-in-use",K);if("EMAIL_EXISTS"===Ze)throw Te(v,"email-already-in-use",K);if("USER_DISABLED"===Ze)throw Te(v,"user-disabled",K);const ut=w[Ze]||Ze.toLowerCase().replace(/[_\s]+/g,"-");if(Le)throw Es(v,ut,Le);Pn(v,ut)}}catch(A){if(A instanceof G.ZR)throw A;Pn(v,"network-request-failed")}})).apply(this,arguments)}function pr(v,g,y,w){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,f.Z)(function*(v,g,y,w,A={}){const M=yield wn(v,g,y,w,A);return"mfaPendingCredential"in M&&Pn(v,"multi-factor-auth-required",{_serverResponse:M}),M})).apply(this,arguments)}function tr(v,g,y,w){const A=`${g}${y}?${w}`;return v.config.emulator?yt(v.config,A):`${v.config.apiScheme}://${A}`}class Je{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((y,w)=>{this.timer=setTimeout(()=>w(En(this.auth,"network-request-failed")),Zr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Te(v,g,y){const w={appName:v.name};y.email&&(w.email=y.email),y.phoneNumber&&(w.phoneNumber=y.phoneNumber);const A=En(v,g,w);return A.customData._tokenResponse=y,A}function Pt(){return(Pt=(0,f.Z)(function*(v,g){return wn(v,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Ot(v,g){return tn.apply(this,arguments)}function tn(){return(tn=(0,f.Z)(function*(v,g){return wn(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function z(v,g){return q.apply(this,arguments)}function q(){return(q=(0,f.Z)(function*(v,g){return wn(v,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function J(v){if(v)try{const g=new Date(Number(v));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function $(){return($=(0,f.Z)(function*(v,g=!1){const y=(0,G.m9)(v),w=yield y.getIdToken(g),A=Ne(w);Fe(A&&A.exp&&A.auth_time&&A.iat,y.auth,"internal-error");const M="object"==typeof A.firebase?A.firebase:void 0,K=null==M?void 0:M.sign_in_provider;return{claims:A,token:w,authTime:J(ae(A.auth_time)),issuedAtTime:J(ae(A.iat)),expirationTime:J(ae(A.exp)),signInProvider:K||null,signInSecondFactor:(null==M?void 0:M.sign_in_second_factor)||null}})).apply(this,arguments)}function ae(v){return 1e3*Number(v)}function Ne(v){var g;const[y,w,A]=v.split(".");if(void 0===y||void 0===w||void 0===A)return Br("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,G.tV)(w);return M?JSON.parse(M):(Br("Failed to decode base64 JWT payload"),null)}catch(M){return Br("Caught error parsing JWT payload as JSON",null===(g=M)||void 0===g?void 0:g.toString()),null}}function at(v,g){return kt.apply(this,arguments)}function kt(){return(kt=(0,f.Z)(function*(v,g,y=!1){if(y)return g;try{return yield g}catch(w){throw w instanceof G.ZR&&ht(w)&&v.auth.currentUser===v&&(yield v.auth.signOut()),w}})).apply(this,arguments)}function ht({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class pn{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var y;if(g){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const A=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(g=!1){var y=this;if(!this.isRunning)return;const w=this.getInterval(g);this.timerId=setTimeout((0,f.Z)(function*(){yield y.iteration()}),w)}iteration(){var g=this;return(0,f.Z)(function*(){var y;try{yield g.user.getIdToken(!0)}catch(w){return void("auth/network-request-failed"===(null===(y=w)||void 0===y?void 0:y.code)&&g.schedule(!0))}g.schedule()})()}}class gr{constructor(g,y){this.createdAt=g,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=J(this.lastLoginAt),this.creationTime=J(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Vt(v){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,f.Z)(function*(v){var g;const y=v.auth,w=yield v.getIdToken(),A=yield at(v,z(y,{idToken:w}));Fe(null==A?void 0:A.users.length,y,"internal-error");const M=A.users[0];v._notifyReloadListener(M);const K=(null===(g=M.providerUserInfo)||void 0===g?void 0:g.length)?Ei(M.providerUserInfo):[],pe=ja(v.providerData,K),ut=!!v.isAnonymous&&!(v.email&&M.passwordHash||(null==pe?void 0:pe.length)),sn={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:pe,metadata:new gr(M.createdAt,M.lastLoginAt),isAnonymous:ut};Object.assign(v,sn)})).apply(this,arguments)}function Cr(){return(Cr=(0,f.Z)(function*(v){const g=(0,G.m9)(v);yield Vt(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function ja(v,g){return[...v.filter(w=>!g.some(A=>A.providerId===w.providerId)),...g]}function Ei(v){return v.map(g=>{var{providerId:y}=g,w=se(g,["providerId"]);return{providerId:y,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function Wt(){return(Wt=(0,f.Z)(function*(v,g){const y=yield bn(v,{},(0,f.Z)(function*(){const w=(0,G.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:A,apiKey:M}=v.config,K=tr(v,A,"/v1/token",`key=${M}`),pe=yield v._getAdditionalHeaders();return pe["Content-Type"]="application/x-www-form-urlencoded",gt.fetch()(K,{method:"POST",headers:pe,body:w})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class gn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){Fe(g.idToken,"internal-error"),Fe(void 0!==g.idToken,"internal-error"),Fe(void 0!==g.refreshToken,"internal-error");const y="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function st(v){const g=Ne(v);return Fe(g,"internal-error"),Fe(void 0!==g.exp,"internal-error"),Fe(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,y)}getToken(g,y=!1){var w=this;return(0,f.Z)(function*(){return Fe(!w.accessToken||w.refreshToken,g,"user-token-expired"),y||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(g,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,y){var w=this;return(0,f.Z)(function*(){const{accessToken:A,refreshToken:M,expiresIn:K}=yield function tt(v,g){return Wt.apply(this,arguments)}(g,y);w.updateTokensAndExpiration(A,M,Number(K))})()}updateTokensAndExpiration(g,y,w){this.refreshToken=y||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(g,y){const{refreshToken:w,accessToken:A,expirationTime:M}=y,K=new gn;return w&&(Fe("string"==typeof w,"internal-error",{appName:g}),K.refreshToken=w),A&&(Fe("string"==typeof A,"internal-error",{appName:g}),K.accessToken=A),M&&(Fe("number"==typeof M,"internal-error",{appName:g}),K.expirationTime=M),K}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new gn,this.toJSON())}_performRefresh(){return hr("not implemented")}}function nr(v,g){Fe("string"==typeof v||void 0===v,"internal-error",{appName:g})}class Yr{constructor(g){var{uid:y,auth:w,stsTokenManager:A}=g,M=se(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=w,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.tenantId=M.tenantId||null,this.providerData=M.providerData?[...M.providerData]:[],this.metadata=new gr(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(g){var y=this;return(0,f.Z)(function*(){const w=yield at(y,y.stsTokenManager.getToken(y.auth,g));return Fe(w,y.auth,"internal-error"),y.accessToken!==w&&(y.accessToken=w,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),w})()}getIdTokenResult(g){return function O(v){return $.apply(this,arguments)}(this,g)}reload(){return function ss(v){return Cr.apply(this,arguments)}(this)}_assign(g){this!==g&&(Fe(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(y=>Object.assign({},y)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new Yr(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,y=!1){var w=this;return(0,f.Z)(function*(){let A=!1;g.idToken&&g.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(g),A=!0),y&&(yield Vt(w)),yield w.auth._persistUserIfCurrent(w),A&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var g=this;return(0,f.Z)(function*(){const y=yield g.getIdToken();return yield at(g,function et(v,g){return Pt.apply(this,arguments)}(g.auth,{idToken:y})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,y){var w,A,M,K,pe,Ze,Le,ut;const sn=null!==(w=y.displayName)&&void 0!==w?w:void 0,Cn=null!==(A=y.email)&&void 0!==A?A:void 0,Ti=null!==(M=y.phoneNumber)&&void 0!==M?M:void 0,va=null!==(K=y.photoURL)&&void 0!==K?K:void 0,Pc=null!==(pe=y.tenantId)&&void 0!==pe?pe:void 0,Oc=null!==(Ze=y._redirectEventId)&&void 0!==Ze?Ze:void 0,Jf=null!==(Le=y.createdAt)&&void 0!==Le?Le:void 0,ep=null!==(ut=y.lastLoginAt)&&void 0!==ut?ut:void 0,{uid:_u,emailVerified:fm,isAnonymous:pm,providerData:Ea,stsTokenManager:gm}=y;Fe(_u&&gm,g,"internal-error");const kc=gn.fromJSON(this.name,gm);Fe("string"==typeof _u,g,"internal-error"),nr(sn,g.name),nr(Cn,g.name),Fe("boolean"==typeof fm,g,"internal-error"),Fe("boolean"==typeof pm,g,"internal-error"),nr(Ti,g.name),nr(va,g.name),nr(Pc,g.name),nr(Oc,g.name),nr(Jf,g.name),nr(ep,g.name);const Fc=new Yr({uid:_u,auth:g,email:Cn,emailVerified:fm,displayName:sn,isAnonymous:pm,photoURL:va,phoneNumber:Ti,tenantId:Pc,stsTokenManager:kc,createdAt:Jf,lastLoginAt:ep});return Ea&&Array.isArray(Ea)&&(Fc.providerData=Ea.map(J_=>Object.assign({},J_))),Oc&&(Fc._redirectEventId=Oc),Fc}static _fromIdTokenResponse(g,y,w=!1){return(0,f.Z)(function*(){const A=new gn;A.updateFromServerResponse(y);const M=new Yr({uid:y.localId,auth:g,stsTokenManager:A,isAnonymous:w});return yield Vt(M),M})()}}const ji=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(y,w){var A=this;return(0,f.Z)(function*(){A.storage[y]=w})()}_get(y){var w=this;return(0,f.Z)(function*(){const A=w.storage[y];return void 0===A?null:A})()}_remove(y){var w=this;return(0,f.Z)(function*(){delete w.storage[y]})()}_addListener(y,w){}_removeListener(y,w){}}return v.type="NONE",v})();function _n(v,g,y){return`firebase:${v}:${g}:${y}`}class $i{constructor(g,y,w){this.persistence=g,this.auth=y,this.userKey=w;const{config:A,name:M}=this.auth;this.fullUserKey=_n(this.userKey,A.apiKey,M),this.fullPersistenceKey=_n("persistence",A.apiKey,M),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,f.Z)(function*(){const y=yield g.persistence._get(g.fullUserKey);return y?Yr._fromJSON(g.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var y=this;return(0,f.Z)(function*(){if(y.persistence===g)return;const w=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=g,w?y.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,y,w="authUser"){return(0,f.Z)(function*(){if(!y.length)return new $i(rn(ji),g,w);const A=(yield Promise.all(y.map(function(){var Le=(0,f.Z)(function*(ut){if(yield ut._isAvailable())return ut});return function(ut){return Le.apply(this,arguments)}}()))).filter(Le=>Le);let M=A[0]||rn(ji);const K=_n(w,g.config.apiKey,g.name);let pe=null;for(const Le of y)try{const ut=yield Le._get(K);if(ut){const sn=Yr._fromJSON(g,ut);Le!==M&&(pe=sn),M=Le;break}}catch(ut){}const Ze=A.filter(Le=>Le._shouldAllowMigration);return M._shouldAllowMigration&&Ze.length?(M=Ze[0],pe&&(yield M._set(K,pe.toJSON())),yield Promise.all(y.map(function(){var Le=(0,f.Z)(function*(ut){if(ut!==M)try{yield ut._remove(K)}catch(sn){}});return function(ut){return Le.apply(this,arguments)}}())),new $i(M,g,w)):new $i(M,g,w)})()}}function rr(v){const g=v.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if($a(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if($t(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(xr(g))return"Blackberry";if(Qo(g))return"Webos";if(Yo(g))return"Safari";if((g.includes("chrome/")||Io(g))&&!g.includes("edge/"))return"Chrome";if(eo(g))return"Android";{const w=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function $t(v=(0,G.z$)()){return/firefox\//i.test(v)}function Yo(v=(0,G.z$)()){const g=v.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function Io(v=(0,G.z$)()){return/crios\//i.test(v)}function $a(v=(0,G.z$)()){return/iemobile/i.test(v)}function eo(v=(0,G.z$)()){return/android/i.test(v)}function xr(v=(0,G.z$)()){return/blackberry/i.test(v)}function Qo(v=(0,G.z$)()){return/webos/i.test(v)}function ws(v=(0,G.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function Qr(v=(0,G.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function Xo(v=(0,G.z$)()){return ws(v)||eo(v)||Qo(v)||xr(v)||/windows phone/i.test(v)||$a(v)}function Gi(v,g=[]){let y;switch(v){case"Browser":y=rr((0,G.z$)());break;case"Worker":y=`${rr((0,G.z$)())}-${v}`;break;default:y=v}const w=g.length?g.join(","):"FirebaseCore-web";return`${y}/JsCore/${k.SDK_VERSION}/${w}`}class Fd{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,y){const w=M=>new Promise((K,pe)=>{try{K(g(M))}catch(Ze){pe(Ze)}});w.onAbort=y,this.queue.push(w);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(g){var y=this;return(0,f.Z)(function*(){var w;if(y.auth.currentUser===g)return;const A=[];try{for(const M of y.queue)yield M(g),M.onAbort&&A.push(M.onAbort)}catch(M){A.reverse();for(const K of A)try{K()}catch(pe){}throw y.auth._errorFactory.create("login-blocked",{originalMessage:null===(w=M)||void 0===w?void 0:w.message})}})()}}class Ld{constructor(g,y,w){this.app=g,this.heartbeatServiceProvider=y,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qi(this),this.idTokenSubscription=new qi(this),this.beforeStateQueue=new Fd(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dr,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(g,y){var w=this;return y&&(this._popupRedirectResolver=rn(y)),this._initializationPromise=this.queue((0,f.Z)(function*(){var A,M;if(!w._deleted&&(w.persistenceManager=yield $i.create(w,g),!w._deleted)){if(null===(A=w._popupRedirectResolver)||void 0===A?void 0:A._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(K){}yield w.initializeCurrentUser(y),w.lastNotifiedUid=(null===(M=w.currentUser)||void 0===M?void 0:M.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,f.Z)(function*(){if(g._deleted)return;const y=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||y){if(g.currentUser&&y&&g.currentUser.uid===y.uid)return g._currentUser._assign(y),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(y,!0)}})()}initializeCurrentUser(g){var y=this;return(0,f.Z)(function*(){var w;const A=yield y.assertedPersistence.getCurrentUser();let M=A,K=!1;if(g&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const pe=null===(w=y.redirectUser)||void 0===w?void 0:w._redirectEventId,Ze=null==M?void 0:M._redirectEventId,Le=yield y.tryRedirectSignIn(g);(!pe||pe===Ze)&&(null==Le?void 0:Le.user)&&(M=Le.user,K=!0)}if(!M)return y.directlySetCurrentUser(null);if(!M._redirectEventId){if(K)try{yield y.beforeStateQueue.runMiddleware(M)}catch(pe){M=A,y._popupRedirectResolver._overrideRedirectResult(y,()=>Promise.reject(pe))}return M?y.reloadAndSetCurrentUserOrClear(M):y.directlySetCurrentUser(null)}return Fe(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===M._redirectEventId?y.directlySetCurrentUser(M):y.reloadAndSetCurrentUserOrClear(M)})()}tryRedirectSignIn(g){var y=this;return(0,f.Z)(function*(){let w=null;try{w=yield y._popupRedirectResolver._completeRedirectFn(y,g,!0)}catch(A){yield y._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(g){var y=this;return(0,f.Z)(function*(){var w;try{yield Vt(g)}catch(A){if("auth/network-request-failed"!==(null===(w=A)||void 0===w?void 0:w.code))return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function bo(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var g=this;return(0,f.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var y=this;return(0,f.Z)(function*(){const w=g?(0,G.m9)(g):null;return w&&Fe(w.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(w&&w._clone(y))})()}_updateCurrentUser(g,y=!1){var w=this;return(0,f.Z)(function*(){if(!w._deleted)return g&&Fe(w.tenantId===g.tenantId,w,"tenant-id-mismatch"),y||(yield w.beforeStateQueue.runMiddleware(g)),w.queue((0,f.Z)(function*(){yield w.directlySetCurrentUser(g),w.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,f.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var y=this;return this.queue((0,f.Z)(function*(){yield y.assertedPersistence.setPersistence(rn(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new G.LL("auth","Firebase",g())}onAuthStateChanged(g,y,w){return this.registerStateListener(this.authStateSubscription,g,y,w)}beforeAuthStateChanged(g,y){return this.beforeStateQueue.pushCallback(g,y)}onIdTokenChanged(g,y,w){return this.registerStateListener(this.idTokenSubscription,g,y,w)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,y){var w=this;return(0,f.Z)(function*(){const A=yield w.getOrInitRedirectPersistenceManager(y);return null===g?A.removeCurrentUser():A.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var y=this;return(0,f.Z)(function*(){if(!y.redirectPersistenceManager){const w=g&&rn(g)||y._popupRedirectResolver;Fe(w,y,"argument-error"),y.redirectPersistenceManager=yield $i.create(y,[rn(w._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(g){var y=this;return(0,f.Z)(function*(){var w,A;return y._isInitialized&&(yield y.queue((0,f.Z)(function*(){}))),(null===(w=y._currentUser)||void 0===w?void 0:w._redirectEventId)===g?y._currentUser:(null===(A=y.redirectUser)||void 0===A?void 0:A._redirectEventId)===g?y.redirectUser:null})()}_persistUserIfCurrent(g){var y=this;return(0,f.Z)(function*(){if(g===y.currentUser)return y.queue((0,f.Z)(function*(){return y.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(y=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,y,w,A){if(this._deleted)return()=>{};const M="function"==typeof y?y:y.next.bind(y),K=this._isInitialized?Promise.resolve():this._initializationPromise;return Fe(K,this,"internal-error"),K.then(()=>M(this.currentUser)),"function"==typeof y?g.addObserver(y,w,A):g.addObserver(y)}directlySetCurrentUser(g){var y=this;return(0,f.Z)(function*(){y.currentUser&&y.currentUser!==g&&y._currentUser._stopProactiveRefresh(),g&&y.isProactiveRefreshEnabled&&g._startProactiveRefresh(),y.currentUser=g,g?yield y.assertedPersistence.setCurrentUser(g):yield y.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Gi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,f.Z)(function*(){var y;const w={"X-Client-Version":g.clientVersion};g.app.options.appId&&(w["X-Firebase-gmpid"]=g.app.options.appId);const A=yield null===(y=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();return A&&(w["X-Firebase-Client"]=A),w})()}}function $n(v){return(0,G.m9)(v)}class qi{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,G.ne)(y=>this.observer=y)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Vd(v,g,y){const w=$n(v);Fe(w._canInitEmulator,w,"emulator-config-failed"),Fe(/^https?:\/\//.test(g),w,"invalid-emulator-scheme");const A=!!(null==y?void 0:y.disableWarnings),M=Nf(g),{host:K,port:pe}=function jg(v){const g=Nf(v),y=/(\/\/)?([^?#/]+)/.exec(v.substr(g.length));if(!y)return{host:"",port:null};const w=y[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(w);if(A){const M=A[1];return{host:M,port:Ri(w.substr(M.length+1))}}{const[M,K]=w.split(":");return{host:M,port:Ri(K)}}}(g);w.config.emulator={url:`${M}//${K}${null===pe?"":`:${pe}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:K,port:pe,protocol:M.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function $g(){function v(){const g=document.createElement("p"),y=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function Nf(v){const g=v.indexOf(":");return g<0?"":v.substr(0,g+1)}function Ri(v){if(!v)return null;const g=Number(v);return isNaN(g)?null:g}class Ha{constructor(g,y){this.providerId=g,this.signInMethod=y}toJSON(){return hr("not implemented")}_getIdTokenResponse(g){return hr("not implemented")}_linkToIdToken(g,y){return hr("not implemented")}_getReauthenticationResolver(g){return hr("not implemented")}}function Pf(v,g){return Ud.apply(this,arguments)}function Ud(){return(Ud=(0,f.Z)(function*(v,g){return wn(v,"POST","/v1/accounts:resetPassword",Ct(v,g))})).apply(this,arguments)}function Of(v,g){return Bd.apply(this,arguments)}function Bd(){return(Bd=(0,f.Z)(function*(v,g){return wn(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function tc(v,g){return to.apply(this,arguments)}function to(){return(to=(0,f.Z)(function*(v,g){return wn(v,"POST","/v1/accounts:update",Ct(v,g))})).apply(this,arguments)}function jd(){return(jd=(0,f.Z)(function*(v,g){return pr(v,"POST","/v1/accounts:signInWithPassword",Ct(v,g))})).apply(this,arguments)}function nc(v,g){return $d.apply(this,arguments)}function $d(){return($d=(0,f.Z)(function*(v,g){return wn(v,"POST","/v1/accounts:sendOobCode",Ct(v,g))})).apply(this,arguments)}function Gg(v,g){return Hd.apply(this,arguments)}function Hd(){return(Hd=(0,f.Z)(function*(v,g){return nc(v,g)})).apply(this,arguments)}function kf(v,g){return Co.apply(this,arguments)}function Co(){return(Co=(0,f.Z)(function*(v,g){return nc(v,g)})).apply(this,arguments)}function qg(v,g){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,f.Z)(function*(v,g){return nc(v,g)})).apply(this,arguments)}function Wg(v,g){return bs.apply(this,arguments)}function bs(){return(bs=(0,f.Z)(function*(v,g){return nc(v,g)})).apply(this,arguments)}function To(){return(To=(0,f.Z)(function*(v,g){return pr(v,"POST","/v1/accounts:signInWithEmailLink",Ct(v,g))})).apply(this,arguments)}function rc(){return(rc=(0,f.Z)(function*(v,g){return pr(v,"POST","/v1/accounts:signInWithEmailLink",Ct(v,g))})).apply(this,arguments)}class Bu extends Ha{constructor(g,y,w,A=null){super("password",w),this._email=g,this._password=y,this._tenantId=A}static _fromEmailAndPassword(g,y){return new Bu(g,y,"password")}static _fromEmailAndCode(g,y,w=null){return new Bu(g,y,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g;if((null==y?void 0:y.email)&&(null==y?void 0:y.password)){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(g){var y=this;return(0,f.Z)(function*(){switch(y.signInMethod){case"password":return function Hg(v,g){return jd.apply(this,arguments)}(g,{returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function Gd(v,g){return To.apply(this,arguments)}(g,{email:y._email,oobCode:y._password});default:Pn(g,"internal-error")}})()}_linkToIdToken(g,y){var w=this;return(0,f.Z)(function*(){switch(w.signInMethod){case"password":return Of(g,{idToken:y,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function qa(v,g){return rc.apply(this,arguments)}(g,{idToken:y,email:w._email,oobCode:w._password});default:Pn(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function xi(v,g){return ju.apply(this,arguments)}function ju(){return(ju=(0,f.Z)(function*(v,g){return pr(v,"POST","/v1/accounts:signInWithIdp",Ct(v,g))})).apply(this,arguments)}class ir extends Ha{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const y=new ir(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(y.idToken=g.idToken),g.accessToken&&(y.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(y.nonce=g.nonce),g.pendingToken&&(y.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(y.accessToken=g.oauthToken,y.secret=g.oauthTokenSecret):Pn("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:w,signInMethod:A}=y,M=se(y,["providerId","signInMethod"]);if(!w||!A)return null;const K=new ir(w,A);return K.idToken=M.idToken||void 0,K.accessToken=M.accessToken||void 0,K.secret=M.secret,K.nonce=M.nonce,K.pendingToken=M.pendingToken||null,K}_getIdTokenResponse(g){return xi(g,this.buildRequest())}_linkToIdToken(g,y){const w=this.buildRequest();return w.idToken=y,xi(g,w)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,xi(g,y)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),g.postBody=(0,G.xO)(y)}return g}}function Ff(v,g){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,f.Z)(function*(v,g){return wn(v,"POST","/v1/accounts:sendVerificationCode",Ct(v,g))})).apply(this,arguments)}function $u(){return($u=(0,f.Z)(function*(v,g){return pr(v,"POST","/v1/accounts:signInWithPhoneNumber",Ct(v,g))})).apply(this,arguments)}function Hu(){return(Hu=(0,f.Z)(function*(v,g){const y=yield pr(v,"POST","/v1/accounts:signInWithPhoneNumber",Ct(v,g));if(y.temporaryProof)throw Te(v,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const sc={USER_NOT_FOUND:"user-not-found"};function On(){return(On=(0,f.Z)(function*(v,g){return pr(v,"POST","/v1/accounts:signInWithPhoneNumber",Ct(v,Object.assign(Object.assign({},g),{operation:"REAUTH"})),sc)})).apply(this,arguments)}class ci extends Ha{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,y){return new ci({verificationId:g,verificationCode:y})}static _fromTokenResponse(g,y){return new ci({phoneNumber:g,temporaryProof:y})}_getIdTokenResponse(g){return function ic(v,g){return $u.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,y){return function qd(v,g){return Hu.apply(this,arguments)}(g,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function zg(v,g){return On.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:y,verificationId:w,verificationCode:A}=this.params;return g&&y?{temporaryProof:g,phoneNumber:y}:{sessionInfo:w,code:A}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:y,verificationCode:w,phoneNumber:A,temporaryProof:M}=g;return w||y||A||M?new ci({verificationId:y,verificationCode:w,phoneNumber:A,temporaryProof:M}):null}}class ea{constructor(g){var y,w,A,M,K,pe;const Ze=(0,G.zd)((0,G.pd)(g)),Le=null!==(y=Ze.apiKey)&&void 0!==y?y:null,ut=null!==(w=Ze.oobCode)&&void 0!==w?w:null,sn=function Wd(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Ze.mode)&&void 0!==A?A:null);Fe(Le&&ut&&sn,"argument-error"),this.apiKey=Le,this.operation=sn,this.code=ut,this.continueUrl=null!==(M=Ze.continueUrl)&&void 0!==M?M:null,this.languageCode=null!==(K=Ze.languageCode)&&void 0!==K?K:null,this.tenantId=null!==(pe=Ze.tenantId)&&void 0!==pe?pe:null}static parseLink(g){const y=function Gn(v){const g=(0,G.zd)((0,G.pd)(v)).link,y=g?(0,G.zd)((0,G.pd)(g)).deep_link_id:null,w=(0,G.zd)((0,G.pd)(v)).deep_link_id;return(w?(0,G.zd)((0,G.pd)(w)).link:null)||w||y||g||v}(g);try{return new ea(y)}catch(w){return null}}}let Mi=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(y,w){return Bu._fromEmailAndPassword(y,w)}static credentialWithLink(y,w){const A=ea.parseLink(w);return Fe(A,"argument-error"),Bu._fromEmailAndCode(y,A.code,A.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class qn{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Is extends qn{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Cs extends Is{static credentialFromJSON(g){const y="string"==typeof g?JSON.parse(g):g;return Fe("providerId"in y&&"signInMethod"in y,"argument-error"),ir._fromParams(y)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return Fe(g.idToken||g.accessToken,"argument-error"),ir._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Cs.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Cs.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:y,oauthAccessToken:w,oauthTokenSecret:A,pendingToken:M,nonce:K,providerId:pe}=g;if(!w&&!A&&!y&&!M||!pe)return null;try{return new Cs(pe)._credential({idToken:y,accessToken:w,nonce:K,pendingToken:M})}catch(Ze){return null}}}let Ts=(()=>{class v extends Is{constructor(){super("facebook.com")}static credential(y){return ir._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return v.credentialFromTaggedObject(y)}static credentialFromError(y){return v.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return v.credential(y.oauthAccessToken)}catch(w){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),wi=(()=>{class v extends Is{constructor(){super("google.com"),this.addScope("profile")}static credential(y,w){return ir._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:w})}static credentialFromResult(y){return v.credentialFromTaggedObject(y)}static credentialFromError(y){return v.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:w,oauthAccessToken:A}=y;if(!w&&!A)return null;try{return v.credential(w,A)}catch(M){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Dr=(()=>{class v extends Is{constructor(){super("github.com")}static credential(y){return ir._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return v.credentialFromTaggedObject(y)}static credentialFromError(y){return v.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return v.credential(y.oauthAccessToken)}catch(w){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class no extends Ha{constructor(g,y){super(g,g),this.pendingToken=y}_getIdTokenResponse(g){return xi(g,this.buildRequest())}_linkToIdToken(g,y){const w=this.buildRequest();return w.idToken=y,xi(g,w)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,xi(g,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:w,signInMethod:A,pendingToken:M}=y;return w&&A&&M&&w===A?new no(w,M):null}static _create(g,y){return new no(g,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class os extends qn{constructor(g){Fe(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return os.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return os.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const y=no.fromJSON(g);return Fe(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:y,providerId:w}=g;if(!y||!w)return null;try{return no._create(w,y)}catch(A){return null}}}let za=(()=>{class v extends Is{constructor(){super("twitter.com")}static credential(y,w){return ir._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:w})}static credentialFromResult(y){return v.credentialFromTaggedObject(y)}static credentialFromError(y){return v.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:w,oauthTokenSecret:A}=y;if(!w||!A)return null;try{return v.credential(w,A)}catch(M){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Rt(v,g){return ro.apply(this,arguments)}function ro(){return(ro=(0,f.Z)(function*(v,g){return pr(v,"POST","/v1/accounts:signUp",Ct(v,g))})).apply(this,arguments)}class Jr{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,y,w,A=!1){return(0,f.Z)(function*(){const M=yield Yr._fromIdTokenResponse(g,w,A),K=ta(w);return new Jr({user:M,providerId:K,_tokenResponse:w,operationType:y})})()}static _forOperation(g,y,w){return(0,f.Z)(function*(){yield g._updateTokensIfNecessary(w,!0);const A=ta(w);return new Jr({user:g,providerId:A,_tokenResponse:w,operationType:y})})()}}function ta(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Gu(v){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,f.Z)(function*(v){var g;const y=$n(v);if(yield y._initializationPromise,null===(g=y.currentUser)||void 0===g?void 0:g.isAnonymous)return new Jr({user:y.currentUser,providerId:null,operationType:"signIn"});const w=yield Rt(y,{returnSecureToken:!0}),A=yield Jr._fromIdTokenResponse(y,"signIn",w,!0);return yield y._updateCurrentUser(A.user),A})).apply(this,arguments)}class Za extends G.ZR{constructor(g,y,w,A){var M;super(y.code,y.message),this.operationType=w,this.user=A,Object.setPrototypeOf(this,Za.prototype),this.customData={appName:g.name,tenantId:null!==(M=g.tenantId)&&void 0!==M?M:void 0,_serverResponse:y.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(g,y,w,A){return new Za(g,y,w,A)}}function qu(v,g,y,w){return("reauthenticate"===g?y._getReauthenticationResolver(v):y._getIdTokenResponse(v)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?Za._fromErrorAndOperation(v,M,g,w):M})}function xe(v){return new Set(v.map(({providerId:g})=>g).filter(g=>!!g))}function Jt(v,g){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,f.Z)(function*(v,g){const y=(0,G.m9)(v);yield Ds(!0,y,g);const{providerUserInfo:w}=yield Ot(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[g]}),A=xe(w||[]);return y.providerData=y.providerData.filter(M=>A.has(M.providerId)),A.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y})).apply(this,arguments)}function Rn(v,g){return na.apply(this,arguments)}function na(){return(na=(0,f.Z)(function*(v,g,y=!1){const w=yield at(v,g._linkToIdToken(v.auth,yield v.getIdToken()),y);return Jr._forOperation(v,"link",w)})).apply(this,arguments)}function Ds(v,g,y){return ei.apply(this,arguments)}function ei(){return(ei=(0,f.Z)(function*(v,g,y){yield Vt(g);const A=!1===v?"provider-already-linked":"no-such-provider";Fe(xe(g.providerData).has(y)===v,g.auth,A)})).apply(this,arguments)}function io(v,g){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,f.Z)(function*(v,g,y=!1){var w;const{auth:A}=v,M="reauthenticate";try{const K=yield at(v,qu(A,M,g,v),y);Fe(K.idToken,A,"internal-error");const pe=Ne(K.idToken);Fe(pe,A,"internal-error");const{sub:Ze}=pe;return Fe(v.uid===Ze,A,"user-mismatch"),Jr._forOperation(v,M,K)}catch(K){throw"auth/user-not-found"===(null===(w=K)||void 0===w?void 0:w.code)&&Pn(A,"user-mismatch"),K}})).apply(this,arguments)}function ac(v,g){return uc.apply(this,arguments)}function uc(){return(uc=(0,f.Z)(function*(v,g,y=!1){const w="signIn",A=yield qu(v,w,g),M=yield Jr._fromIdTokenResponse(v,w,A);return y||(yield v._updateCurrentUser(M.user)),M})).apply(this,arguments)}function Do(v,g){return ra.apply(this,arguments)}function ra(){return(ra=(0,f.Z)(function*(v,g){return ac($n(v),g)})).apply(this,arguments)}function Mr(v,g){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,f.Z)(function*(v,g){const y=(0,G.m9)(v);return yield Ds(!1,y,g.providerId),Rn(y,g)})).apply(this,arguments)}function lc(v,g){return zi.apply(this,arguments)}function zi(){return(zi=(0,f.Z)(function*(v,g){return io((0,G.m9)(v),g)})).apply(this,arguments)}function Ss(v,g){return zu.apply(this,arguments)}function zu(){return(zu=(0,f.Z)(function*(v,g){return pr(v,"POST","/v1/accounts:signInWithCustomToken",Ct(v,g))})).apply(this,arguments)}function Ku(v,g){return cc.apply(this,arguments)}function cc(){return(cc=(0,f.Z)(function*(v,g){const y=$n(v),w=yield Ss(y,{token:g,returnSecureToken:!0}),A=yield Jr._fromIdTokenResponse(y,"signIn",w);return yield y._updateCurrentUser(A.user),A})).apply(this,arguments)}class ia{constructor(g,y){this.factorId=g,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(g,y){return"phoneInfo"in y?Qa._fromServerResponse(g,y):Pn(g,"internal-error")}}class Qa extends ia{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,y){return new Qa(y)}}function so(v,g,y){var w;Fe((null===(w=y.url)||void 0===w?void 0:w.length)>0,v,"invalid-continue-uri"),Fe(void 0===y.dynamicLinkDomain||y.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),g.continueUrl=y.url,g.dynamicLinkDomain=y.dynamicLinkDomain,g.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(Fe(y.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),g.iOSBundleId=y.iOS.bundleId),y.android&&(Fe(y.android.packageName.length>0,v,"missing-android-pkg-name"),g.androidInstallApp=y.android.installApp,g.androidMinimumVersionCode=y.android.minimumVersion,g.androidPackageName=y.android.packageName)}function dc(v,g,y){return So.apply(this,arguments)}function So(){return(So=(0,f.Z)(function*(v,g,y){const w=(0,G.m9)(v),A={requestType:"PASSWORD_RESET",email:g};y&&so(w,A,y),yield kf(w,A)})).apply(this,arguments)}function zd(v,g,y){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,f.Z)(function*(v,g,y){yield Pf((0,G.m9)(v),{oobCode:g,newPassword:y})})).apply(this,arguments)}function Zu(v,g){return hc.apply(this,arguments)}function hc(){return(hc=(0,f.Z)(function*(v,g){yield tc((0,G.m9)(v),{oobCode:g})})).apply(this,arguments)}function Yu(v,g){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,f.Z)(function*(v,g){const y=(0,G.m9)(v),w=yield Pf(y,{oobCode:g}),A=w.requestType;switch(Fe(A,y,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Fe(w.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Fe(w.mfaInfo,y,"internal-error");default:Fe(w.email,y,"internal-error")}let M=null;return w.mfaInfo&&(M=ia._fromServerResponse($n(y),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:M},operation:A}})).apply(this,arguments)}function fc(v,g){return sa.apply(this,arguments)}function sa(){return(sa=(0,f.Z)(function*(v,g){const{data:y}=yield Yu((0,G.m9)(v),g);return y.email})).apply(this,arguments)}function Kg(v,g,y){return Kd.apply(this,arguments)}function Kd(){return(Kd=(0,f.Z)(function*(v,g,y){const w=$n(v),A=yield Rt(w,{returnSecureToken:!0,email:g,password:y}),M=yield Jr._fromIdTokenResponse(w,"signIn",A);return yield w._updateCurrentUser(M.user),M})).apply(this,arguments)}function Nr(v,g,y){return Do((0,G.m9)(v),Mi.credential(g,y))}function Pr(v,g,y){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,f.Z)(function*(v,g,y){const w=(0,G.m9)(v),A={requestType:"EMAIL_SIGNIN",email:g};Fe(y.handleCodeInApp,w,"argument-error"),y&&so(w,A,y),yield qg(w,A)})).apply(this,arguments)}function pc(v,g){const y=ea.parseLink(g);return"EMAIL_SIGNIN"===(null==y?void 0:y.operation)}function gc(v,g,y){return mc.apply(this,arguments)}function mc(){return(mc=(0,f.Z)(function*(v,g,y){const w=(0,G.m9)(v),A=Mi.credentialWithLink(g,y||Kr());return Fe(A._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Do(w,A)})).apply(this,arguments)}function j_(v,g){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,f.Z)(function*(v,g){return wn(v,"POST","/v1/accounts:createAuthUri",Ct(v,g))})).apply(this,arguments)}function $_(v,g){return eu.apply(this,arguments)}function eu(){return(eu=(0,f.Z)(function*(v,g){const w={identifier:g,continueUri:Ir()?Kr():"http://localhost"},{signinMethods:A}=yield j_((0,G.m9)(v),w);return A||[]})).apply(this,arguments)}function oa(v,g){return aa.apply(this,arguments)}function aa(){return(aa=(0,f.Z)(function*(v,g){const y=(0,G.m9)(v),A={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};g&&so(y.auth,A,g);const{email:M}=yield Gg(y.auth,A);M!==v.email&&(yield v.reload())})).apply(this,arguments)}function Zd(v,g,y){return yc.apply(this,arguments)}function yc(){return(yc=(0,f.Z)(function*(v,g,y){const w=(0,G.m9)(v),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:g};y&&so(w.auth,M,y);const{email:K}=yield Wg(w.auth,M);K!==v.email&&(yield v.reload())})).apply(this,arguments)}function Zg(v,g){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,f.Z)(function*(v,g){return wn(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function sr(v,g){return _c.apply(this,arguments)}function _c(){return(_c=(0,f.Z)(function*(v,{displayName:g,photoURL:y}){if(void 0===g&&void 0===y)return;const w=(0,G.m9)(v),M={idToken:yield w.getIdToken(),displayName:g,photoUrl:y,returnSecureToken:!0},K=yield at(w,Zg(w.auth,M));w.displayName=K.displayName||null,w.photoURL=K.photoUrl||null;const pe=w.providerData.find(({providerId:Ze})=>"password"===Ze);pe&&(pe.displayName=w.displayName,pe.photoURL=w.photoURL),yield w._updateTokensIfNecessary(K)})).apply(this,arguments)}function Yg(v,g){return vc((0,G.m9)(v),g,null)}function Xu(v,g){return vc((0,G.m9)(v),null,g)}function vc(v,g,y){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,f.Z)(function*(v,g,y){const{auth:w}=v,M={idToken:yield v.getIdToken(),returnSecureToken:!0};g&&(M.email=g),y&&(M.password=y);const K=yield at(v,Of(w,M));yield v._updateTokensIfNecessary(K,!0)})).apply(this,arguments)}class ua{constructor(g,y,w={}){this.isNewUser=g,this.providerId=y,this.profile=w}}class Lf extends ua{constructor(g,y,w,A){super(g,y,w),this.username=A}}class Ec extends ua{constructor(g,y){super(g,"facebook.com",y)}}class In extends Lf{constructor(g,y){super(g,"github.com",y,"string"==typeof(null==y?void 0:y.login)?null==y?void 0:y.login:null)}}class As extends ua{constructor(g,y){super(g,"google.com",y)}}class dt extends Lf{constructor(g,y,w){super(g,"twitter.com",y,w)}}function as(v){const{user:g,_tokenResponse:y}=v;return g.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function Qg(v){var g,y;if(!v)return null;const{providerId:w}=v,A=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},M=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!w&&(null==v?void 0:v.idToken)){const K=null===(y=null===(g=Ne(v.idToken))||void 0===g?void 0:g.firebase)||void 0===y?void 0:y.sign_in_provider;if(K)return new ua(M,"anonymous"!==K&&"custom"!==K?K:null)}if(!w)return null;switch(w){case"facebook.com":return new Ec(M,A);case"github.com":return new In(M,A);case"google.com":return new As(M,A);case"twitter.com":return new dt(M,A,v.screenName||null);case"custom":case"anonymous":return new ua(M,null);default:return new ua(M,w,A)}}(y)}class It{constructor(g,y,w){this.type=g,this.credential=y,this.auth=w}static _fromIdtoken(g,y){return new It("enroll",g,y)}static _fromMfaPendingCredential(g){return new It("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var y,w;if(null==g?void 0:g.multiFactorSession){if(null===(y=g.multiFactorSession)||void 0===y?void 0:y.pendingCredential)return It._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(w=g.multiFactorSession)||void 0===w?void 0:w.idToken)return It._fromIdtoken(g.multiFactorSession.idToken)}return null}}class bc{constructor(g,y,w){this.session=g,this.hints=y,this.signInResolver=w}static _fromError(g,y){const w=$n(g),A=y.customData._serverResponse,M=(A.mfaInfo||[]).map(pe=>ia._fromServerResponse(w,pe));Fe(A.mfaPendingCredential,w,"internal-error");const K=It._fromMfaPendingCredential(A.mfaPendingCredential);return new bc(K,M,function(){var pe=(0,f.Z)(function*(Ze){const Le=yield Ze._process(w,K);delete A.mfaInfo,delete A.mfaPendingCredential;const ut=Object.assign(Object.assign({},A),{idToken:Le.idToken,refreshToken:Le.refreshToken});switch(y.operationType){case"signIn":const sn=yield Jr._fromIdTokenResponse(w,y.operationType,ut);return yield w._updateCurrentUser(sn.user),sn;case"reauthenticate":return Fe(y.user,w,"internal-error"),Jr._forOperation(y.user,y.operationType,ut);default:Pn(w,"internal-error")}});return function(Ze){return pe.apply(this,arguments)}}())}resolveSignIn(g){var y=this;return(0,f.Z)(function*(){return y.signInResolver(g)})()}}function ru(v,g){var y;const w=(0,G.m9)(v),A=g;return Fe(g.customData.operationType,w,"argument-error"),Fe(null===(y=A.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,w,"argument-error"),bc._fromError(w,A)}function el(v,g){return wn(v,"POST","/v2/accounts/mfaEnrollment:start",Ct(v,g))}class oo{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(w=>ia._fromServerResponse(g.auth,w)))})}static _fromUser(g){return new oo(g)}getSession(){var g=this;return(0,f.Z)(function*(){return It._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,y){var w=this;return(0,f.Z)(function*(){const A=g,M=yield w.getSession(),K=yield at(w.user,A._process(w.user.auth,M,y));return yield w.user._updateTokensIfNecessary(K),w.user.reload()})()}unenroll(g){var y=this;return(0,f.Z)(function*(){var w;const A="string"==typeof g?g:g.uid,M=yield y.user.getIdToken(),K=yield at(y.user,function Zn(v,g){return wn(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Ct(v,g))}(y.user.auth,{idToken:M,mfaEnrollmentId:A}));y.enrolledFactors=y.enrolledFactors.filter(({uid:pe})=>pe!==A),yield y.user._updateTokensIfNecessary(K);try{yield y.user.reload()}catch(pe){if("auth/user-token-expired"!==(null===(w=pe)||void 0===w?void 0:w.code))throw pe}})()}}const Ic=new WeakMap;function tl(v){const g=(0,G.m9)(v);return Ic.has(g)||Ic.set(g,oo._fromUser(g)),Ic.get(g)}const ca="__sak";class iu{constructor(g,y){this.storageRetriever=g,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(ca,"1"),this.storage.removeItem(ca),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,y){return this.storage.setItem(g,JSON.stringify(y)),Promise.resolve()}_get(g){const y=this.storage.getItem(g);return Promise.resolve(y?JSON.parse(y):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Pi=(()=>{class v extends iu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,w)=>this.onStorageEvent(y,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function su(){const v=(0,G.z$)();return Yo(v)||ws(v)}()&&function Hi(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=Xo(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const w of Object.keys(this.listeners)){const A=this.storage.getItem(w),M=this.localCache[w];A!==M&&y(w,M,A)}}onStorageEvent(y,w=!1){if(!y.key)return void this.forAllChangedKeys((pe,Ze,Le)=>{this.notifyListeners(pe,Le)});const A=y.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const pe=this.storage.getItem(A);if(y.newValue!==pe)null!==y.newValue?this.storage.setItem(A,y.newValue):this.storage.removeItem(A);else if(this.localCache[A]===y.newValue&&!w)return}const M=()=>{const pe=this.storage.getItem(A);!w&&this.localCache[A]===pe||this.notifyListeners(A,pe)},K=this.storage.getItem(A);!function kd(){return(0,G.w1)()&&10===document.documentMode}()||K===y.newValue||y.newValue===y.oldValue?M():setTimeout(M,10)}notifyListeners(y,w){this.localCache[y]=w;const A=this.listeners[y];if(A)for(const M of Array.from(A))M(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,w,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:w,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(w)}_removeListener(y,w){this.listeners[y]&&(this.listeners[y].delete(w),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,w){var A=()=>super._set,M=this;return(0,f.Z)(function*(){yield A().call(M,y,w),M.localCache[y]=JSON.stringify(w)})()}_get(y){var w=()=>super._get,A=this;return(0,f.Z)(function*(){const M=yield w().call(A,y);return A.localCache[y]=JSON.stringify(M),M})()}_remove(y){var w=()=>super._remove,A=this;return(0,f.Z)(function*(){yield w().call(A,y),delete A.localCache[y]})()}}return v.type="LOCAL",v})(),ls=(()=>{class v extends iu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,w){}_removeListener(y,w){}}return v.type="SESSION",v})();let Hn=(()=>{class v{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const w=this.receivers.find(M=>M.isListeningto(y));if(w)return w;const A=new v(y);return this.receivers.push(A),A}isListeningto(y){return this.eventTarget===y}handleEvent(y){var w=this;return(0,f.Z)(function*(){const A=y,{eventId:M,eventType:K,data:pe}=A.data,Ze=w.handlersMap[K];if(!(null==Ze?void 0:Ze.size))return;A.ports[0].postMessage({status:"ack",eventId:M,eventType:K});const Le=Array.from(Ze).map(function(){var sn=(0,f.Z)(function*(Cn){return Cn(A.origin,pe)});return function(Cn){return sn.apply(this,arguments)}}()),ut=yield function Cc(v){return Promise.all(v.map(function(){var g=(0,f.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(w){return{fulfilled:!1,reason:w}}});return function(y){return g.apply(this,arguments)}}()))}(Le);A.ports[0].postMessage({status:"done",eventId:M,eventType:K,response:ut})})()}_subscribe(y,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(w)}_unsubscribe(y,w){this.handlersMap[y]&&w&&this.handlersMap[y].delete(w),(!w||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Ro(v="",g=10){let y="";for(let w=0;w<g;w++)y+=Math.floor(10*Math.random());return v+y}class ou{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,y,w=50){var A=this;return(0,f.Z)(function*(){const M="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let K,pe;return new Promise((Ze,Le)=>{const ut=Ro("",20);M.port1.start();const sn=setTimeout(()=>{Le(new Error("unsupported_event"))},w);pe={messageChannel:M,onMessage(Cn){const Ti=Cn;if(Ti.data.eventId===ut)switch(Ti.data.status){case"ack":clearTimeout(sn),K=setTimeout(()=>{Le(new Error("timeout"))},3e3);break;case"done":clearTimeout(K),Ze(Ti.data.response);break;default:clearTimeout(sn),clearTimeout(K),Le(new Error("invalid_response"))}}},A.handlers.add(pe),M.port1.addEventListener("message",pe.onMessage),A.target.postMessage({eventType:g,eventId:ut,data:y},[M.port2])}).finally(()=>{pe&&A.removeMessageHandler(pe)})})()}}function Zt(){return window}function Oi(){return void 0!==Zt().WorkerGlobalScope&&"function"==typeof Zt().importScripts}function hi(){return(hi=(0,f.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const Vn="firebaseLocalStorageDb",vn="firebaseLocalStorage",rl="fbase_key";class au{constructor(g){this.request=g}toPromise(){return new Promise((g,y)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function Jd(v,g){return v.transaction([vn],g?"readwrite":"readonly").objectStore(vn)}function eh(){const v=indexedDB.open(Vn,1);return new Promise((g,y)=>{v.addEventListener("error",()=>{y(v.error)}),v.addEventListener("upgradeneeded",()=>{const w=v.result;try{w.createObjectStore(vn,{keyPath:rl})}catch(A){y(A)}}),v.addEventListener("success",(0,f.Z)(function*(){const w=v.result;w.objectStoreNames.contains(vn)?g(w):(w.close(),yield function Uf(){const v=indexedDB.deleteDatabase(Vn);return new au(v).toPromise()}(),g(yield eh()))}))})}function Rs(v,g,y){return bi.apply(this,arguments)}function bi(){return(bi=(0,f.Z)(function*(v,g,y){const w=Jd(v,!0).put({[rl]:g,value:y});return new au(w).toPromise()})).apply(this,arguments)}function xs(){return(xs=(0,f.Z)(function*(v,g){const y=Jd(v,!1).get(g),w=yield new au(y).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function Yn(v,g){const y=Jd(v,!0).delete(g);return new au(y).toPromise()}const Tc=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,f.Z)(function*(){return y.db||(y.db=yield eh()),y.db})()}_withRetries(y){var w=this;return(0,f.Z)(function*(){let A=0;for(;;)try{const M=yield w._openDb();return yield y(M)}catch(M){if(A++>3)throw M;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,f.Z)(function*(){return Oi()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,f.Z)(function*(){y.receiver=Hn._getInstance(function fi(){return Oi()?self:null}()),y.receiver._subscribe("keyChanged",function(){var w=(0,f.Z)(function*(A,M){return{keyProcessed:(yield y._poll()).includes(M.key)}});return function(A,M){return w.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var w=(0,f.Z)(function*(A,M){return["keyChanged"]});return function(A,M){return w.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,f.Z)(function*(){var w,A;if(y.activeServiceWorker=yield function xo(){return hi.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new ou(y.activeServiceWorker);const M=yield y.sender._send("ping",{},800);!M||(null===(w=M[0])||void 0===w?void 0:w.fulfilled)&&(null===(A=M[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var w=this;return(0,f.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function ki(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:y},w.serviceWorkerReceiverAvailable?800:50)}catch(A){}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const y=yield eh();return yield Rs(y,ca,"1"),yield Yn(y,ca),!0}catch(y){}return!1})()}_withPendingWrite(y){var w=this;return(0,f.Z)(function*(){w.pendingWrites++;try{yield y()}finally{w.pendingWrites--}})()}_set(y,w){var A=this;return(0,f.Z)(function*(){return A._withPendingWrite((0,f.Z)(function*(){return yield A._withRetries(M=>Rs(M,y,w)),A.localCache[y]=w,A.notifyServiceWorker(y)}))})()}_get(y){var w=this;return(0,f.Z)(function*(){const A=yield w._withRetries(M=>function il(v,g){return xs.apply(this,arguments)}(M,y));return w.localCache[y]=A,A})()}_remove(y){var w=this;return(0,f.Z)(function*(){return w._withPendingWrite((0,f.Z)(function*(){return yield w._withRetries(A=>Yn(A,y)),delete w.localCache[y],w.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,f.Z)(function*(){const w=yield y._withRetries(K=>{const pe=Jd(K,!1).getAll();return new au(pe).toPromise()});if(!w)return[];if(0!==y.pendingWrites)return[];const A=[],M=new Set;for(const{fbase_key:K,value:pe}of w)M.add(K),JSON.stringify(y.localCache[K])!==JSON.stringify(pe)&&(y.notifyListeners(K,pe),A.push(K));for(const K of Object.keys(y.localCache))y.localCache[K]&&!M.has(K)&&(y.notifyListeners(K,null),A.push(K));return A})()}notifyListeners(y,w){this.localCache[y]=w;const A=this.listeners[y];if(A)for(const M of Array.from(A))M(w)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(w)}_removeListener(y,w){this.listeners[y]&&(this.listeners[y].delete(w),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function Ii(v,g){return wn(v,"POST","/v2/accounts/mfaSignIn:start",Ct(v,g))}function pa(){return(pa=(0,f.Z)(function*(v){return(yield wn(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function uu(v){return new Promise((g,y)=>{const w=document.createElement("script");w.setAttribute("src",v),w.onload=g,w.onerror=A=>{const M=En("internal-error");M.customData=A,y(M)},w.type="text/javascript",w.charset="UTF-8",function ga(){var v,g;return null!==(g=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==g?g:document}().appendChild(w)})}function nh(v){return`__${v}${Math.floor(1e6*Math.random())}`}const lu=1e12;class cu{constructor(g){this.auth=g,this.counter=lu,this._widgets=new Map}render(g,y){const w=this.counter;return this._widgets.set(w,new Tt(g,this.auth.name,y||{})),this.counter++,w}reset(g){var y;const w=g||lu;null===(y=this._widgets.get(w))||void 0===y||y.delete(),this._widgets.delete(w)}getResponse(g){var y;return(null===(y=this._widgets.get(g||lu))||void 0===y?void 0:y.getResponse())||""}execute(g){var y=this;return(0,f.Z)(function*(){var w;return null===(w=y._widgets.get(g||lu))||void 0===w||w.execute(),""})()}}class Tt{constructor(g,y,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof g?document.getElementById(g):g;Fe(A,"argument-error",{appName:y}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function du(v){const g=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<v;w++)g.push(y.charAt(Math.floor(Math.random()*y.length)));return g.join("")}(50);const{callback:g,"expired-callback":y}=this.params;if(g)try{g(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ti=nh("rcb"),Dc=new Qt(3e4,6e4);class Jg{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(g=Zt().grecaptcha)||void 0===g?void 0:g.render)}load(g,y=""){return Fe(function em(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(y),g,"argument-error"),this.shouldResolveImmediately(y)?Promise.resolve(Zt().grecaptcha):new Promise((w,A)=>{const M=Zt().setTimeout(()=>{A(En(g,"network-request-failed"))},Dc.get());Zt()[ti]=()=>{Zt().clearTimeout(M),delete Zt()[ti];const pe=Zt().grecaptcha;if(!pe)return void A(En(g,"internal-error"));const Ze=pe.render;pe.render=(Le,ut)=>{const sn=Ze(Le,ut);return this.counter++,sn},this.hostLanguage=y,w(pe)},uu(`https://www.google.com/recaptcha/api.js??${(0,G.xO)({onload:ti,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(M),A(En(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var y;return!!(null===(y=Zt().grecaptcha)||void 0===y?void 0:y.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class jf{load(g){return(0,f.Z)(function*(){return new cu(g)})()}clearedOneInstance(){}}const Zi="recaptcha",Mo={theme:"light",type:"image"};class sl{constructor(g,y=Object.assign({},Mo),w){this.parameters=y,this.type=Zi,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=$n(w),this.isInvisible="invisible"===this.parameters.size,Fe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof g?document.getElementById(g):g;Fe(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new jf:new Jg,this.validateStartingState()}verify(){var g=this;return(0,f.Z)(function*(){g.assertNotDestroyed();const y=yield g.render(),w=g.getAssertedRecaptcha();return w.getResponse(y)||new Promise(M=>{const K=pe=>{!pe||(g.tokenChangeListeners.delete(K),M(pe))};g.tokenChangeListeners.add(K),g.isInvisible&&w.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){Fe(!this.parameters.sitekey,this.auth,"argument-error"),Fe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Fe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return y=>{if(this.tokenChangeListeners.forEach(w=>w(y)),"function"==typeof g)g(y);else if("string"==typeof g){const w=Zt()[g];"function"==typeof w&&w(y)}}}assertNotDestroyed(){Fe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,f.Z)(function*(){if(yield g.init(),!g.widgetId){let y=g.container;if(!g.isInvisible){const w=document.createElement("div");y.appendChild(w),y=w}g.widgetId=g.getAssertedRecaptcha().render(y,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,f.Z)(function*(){Fe(Ir()&&!Oi(),g.auth,"internal-error"),yield function ol(){let v=null;return new Promise(g=>{"complete"!==document.readyState?(v=()=>g(),window.addEventListener("load",v)):g()}).catch(g=>{throw v&&window.removeEventListener("load",v),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const y=yield function th(v){return pa.apply(this,arguments)}(g.auth);Fe(y,g.auth,"internal-error"),g.parameters.sitekey=y})()}getAssertedRecaptcha(){return Fe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class hu{constructor(g,y){this.verificationId=g,this.onConfirmation=y}confirm(g){const y=ci._fromVerification(this.verificationId,g);return this.onConfirmation(y)}}function zn(v,g,y){return qr.apply(this,arguments)}function qr(){return(qr=(0,f.Z)(function*(v,g,y){const w=$n(v),A=yield al(w,g,(0,G.m9)(y));return new hu(A,M=>Do(w,M))})).apply(this,arguments)}function Ms(v,g,y){return ma.apply(this,arguments)}function ma(){return(ma=(0,f.Z)(function*(v,g,y){const w=(0,G.m9)(v);yield Ds(!1,w,"phone");const A=yield al(w.auth,g,(0,G.m9)(y));return new hu(A,M=>Mr(w,M))})).apply(this,arguments)}function $f(v,g,y){return fu.apply(this,arguments)}function fu(){return(fu=(0,f.Z)(function*(v,g,y){const w=(0,G.m9)(v),A=yield al(w.auth,g,(0,G.m9)(y));return new hu(A,M=>lc(w,M))})).apply(this,arguments)}function al(v,g,y){return pu.apply(this,arguments)}function pu(){return(pu=(0,f.Z)(function*(v,g,y){var w;const A=yield y.verify();try{let M;if(Fe("string"==typeof A,v,"argument-error"),Fe(y.type===Zi,v,"argument-error"),M="string"==typeof g?{phoneNumber:g}:g,"session"in M){const K=M.session;if("phoneNumber"in M)return Fe("enroll"===K.type,v,"internal-error"),(yield el(v,{idToken:K.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{Fe("signin"===K.type,v,"internal-error");const pe=(null===(w=M.multiFactorHint)||void 0===w?void 0:w.uid)||M.multiFactorUid;return Fe(pe,v,"missing-multi-factor-info"),(yield Ii(v,{mfaPendingCredential:K.credential,mfaEnrollmentId:pe,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:K}=yield Ff(v,{phoneNumber:M.phoneNumber,recaptchaToken:A});return K}}finally{y._reset()}})).apply(this,arguments)}function tm(v,g){return T.apply(this,arguments)}function T(){return(T=(0,f.Z)(function*(v,g){yield Rn((0,G.m9)(v),g)})).apply(this,arguments)}let S=(()=>{class v{constructor(y){this.providerId=v.PROVIDER_ID,this.auth=$n(y)}verifyPhoneNumber(y,w){return al(this.auth,y,(0,G.m9)(w))}static credential(y,w){return ci._fromVerification(y,w)}static credentialFromResult(y){return v.credentialFromTaggedObject(y)}static credentialFromError(y){return v.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:w,temporaryProof:A}=y;return w&&A?ci._fromTokenResponse(w,A):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function P(v,g){return g?rn(g):(Fe(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class B extends Ha{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return xi(g,this._buildIdpRequest())}_linkToIdToken(g,y){return xi(g,this._buildIdpRequest(y))}_getReauthenticationResolver(g){return xi(g,this._buildIdpRequest())}_buildIdpRequest(g){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(y.idToken=g),y}}function Z(v){return ac(v.auth,new B(v),v.bypassAuthState)}function ue(v){const{auth:g,user:y}=v;return Fe(y,g,"internal-error"),io(y,new B(v),v.bypassAuthState)}function Se(v){return $e.apply(this,arguments)}function $e(){return($e=(0,f.Z)(function*(v){const{auth:g,user:y}=v;return Fe(y,g,"internal-error"),Rn(y,new B(v),v.bypassAuthState)})).apply(this,arguments)}class Dt{constructor(g,y,w,A,M=!1){this.auth=g,this.resolver=w,this.user=A,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var g=this;return new Promise(function(){var y=(0,f.Z)(function*(w,A){g.pendingPromise={resolve:w,reject:A};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(M){g.reject(M)}});return function(w,A){return y.apply(this,arguments)}}())}onAuthEvent(g){var y=this;return(0,f.Z)(function*(){const{urlResponse:w,sessionId:A,postBody:M,tenantId:K,error:pe,type:Ze}=g;if(pe)return void y.reject(pe);const Le={auth:y.auth,requestUri:w,sessionId:A,tenantId:K||void 0,postBody:M||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(Ze)(Le))}catch(ut){y.reject(ut)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Z;case"linkViaPopup":case"linkViaRedirect":return Se;case"reauthViaPopup":case"reauthViaRedirect":return ue;default:Pn(this.auth,"internal-error")}}resolve(g){mt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){mt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Bt=new Qt(2e3,1e4);function zt(v,g,y){return vt.apply(this,arguments)}function vt(){return(vt=(0,f.Z)(function*(v,g,y){const w=$n(v);jr(v,g,qn);const A=P(w,y);return new Ns(w,"signInViaPopup",g,A).executeNotNull()})).apply(this,arguments)}function kn(v,g,y){return or.apply(this,arguments)}function or(){return(or=(0,f.Z)(function*(v,g,y){const w=(0,G.m9)(v);jr(w.auth,g,qn);const A=P(w.auth,y);return new Ns(w.auth,"reauthViaPopup",g,A,w).executeNotNull()})).apply(this,arguments)}function ds(v,g,y){return hs.apply(this,arguments)}function hs(){return(hs=(0,f.Z)(function*(v,g,y){const w=(0,G.m9)(v);jr(w.auth,g,qn);const A=P(w.auth,y);return new Ns(w.auth,"linkViaPopup",g,A,w).executeNotNull()})).apply(this,arguments)}let Ns=(()=>{class v extends Dt{constructor(y,w,A,M,K){super(y,w,M,K),this.provider=A,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var y=this;return(0,f.Z)(function*(){const w=yield y.execute();return Fe(w,y.auth,"internal-error"),w})()}onExecution(){var y=this;return(0,f.Z)(function*(){mt(1===y.filter.length,"Popup operations only handle one event");const w=Ro();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],w),y.authWindow.associatedEvent=w,y.resolver._originValidation(y.auth).catch(A=>{y.reject(A)}),y.resolver._isIframeWebStorageSupported(y.auth,A=>{A||y.reject(En(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(En(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const y=()=>{var w,A;this.pollId=(null===(A=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===A?void 0:A.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(En(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(y,Bt.get())};y()}}return v.currentPopupAction=null,v})();const Ci=new Map;class No extends Dt{constructor(g,y,w=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,w),this.eventId=null}execute(){var g=()=>super.execute,y=this;return(0,f.Z)(function*(){let w=Ci.get(y.auth._key());if(!w){try{const M=(yield function ao(v,g){return uo.apply(this,arguments)}(y.resolver,y.auth))?yield g().call(y):null;w=()=>Promise.resolve(M)}catch(A){w=()=>Promise.reject(A)}Ci.set(y.auth._key(),w)}return y.bypassAuthState||Ci.set(y.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(g){var y=()=>super.onAuthEvent,w=this;return(0,f.Z)(function*(){if("signInViaRedirect"===g.type)return y().call(w,g);if("unknown"!==g.type){if(g.eventId){const A=yield w.auth._redirectUserForId(g.eventId);if(A)return w.user=A,y().call(w,g);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function uo(){return(uo=(0,f.Z)(function*(v,g){const y=nm(g),w=Hf(v);if(!(yield w._isAvailable()))return!1;const A="true"===(yield w._get(y));return yield w._remove(y),A})).apply(this,arguments)}function Ps(v,g){return mu.apply(this,arguments)}function mu(){return(mu=(0,f.Z)(function*(v,g){return Hf(v)._set(nm(g),"true")})).apply(this,arguments)}function ih(){Ci.clear()}function H_(v,g){Ci.set(v._key(),g)}function Hf(v){return rn(v._redirectPersistence)}function nm(v){return _n("pendingRedirect",v.config.apiKey,v.name)}function J0(v,g,y){return function G_(v,g,y){return sh.apply(this,arguments)}(v,g,y)}function sh(){return(sh=(0,f.Z)(function*(v,g,y){const w=$n(v);jr(v,g,qn);const A=P(w,y);return yield Ps(A,w),A._openRedirect(w,g,"signInViaRedirect")})).apply(this,arguments)}function Gf(v,g,y){return function ul(v,g,y){return Yi.apply(this,arguments)}(v,g,y)}function Yi(){return(Yi=(0,f.Z)(function*(v,g,y){const w=(0,G.m9)(v);jr(w.auth,g,qn);const A=P(w.auth,y);yield Ps(A,w.auth);const M=yield cl(w);return A._openRedirect(w.auth,g,"reauthViaRedirect",M)})).apply(this,arguments)}function Os(v,g,y){return function rm(v,g,y){return oh.apply(this,arguments)}(v,g,y)}function oh(){return(oh=(0,f.Z)(function*(v,g,y){const w=(0,G.m9)(v);jr(w.auth,g,qn);const A=P(w.auth,y);yield Ds(!1,w,g.providerId),yield Ps(A,w.auth);const M=yield cl(w);return A._openRedirect(w.auth,g,"linkViaRedirect",M)})).apply(this,arguments)}function eb(v,g){return ks.apply(this,arguments)}function ks(){return(ks=(0,f.Z)(function*(v,g){return yield $n(v)._initializationPromise,ll(v,g,!1)})).apply(this,arguments)}function ll(v,g){return ah.apply(this,arguments)}function ah(){return(ah=(0,f.Z)(function*(v,g,y=!1){const w=$n(v),A=P(w,g),K=yield new No(w,A,y).execute();return K&&!y&&(delete K.user._redirectEventId,yield w._persistUserIfCurrent(K.user),yield w._setRedirectUser(null,g)),K})).apply(this,arguments)}function cl(v){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,f.Z)(function*(v){const g=Ro(`${v.uid}:::`);return v._redirectEventId=g,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),g})).apply(this,arguments)}class qf{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let y=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(g,w)&&(y=!0,this.sendToConsumer(g,w),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function q_(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ch(v);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=g,y=!0)),y}sendToConsumer(g,y){var w;if(g.error&&!ch(g)){const A=(null===(w=g.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";y.onError(En(this.auth,A))}else y.onAuthEvent(g)}isEventForConsumer(g,y){const w=null===y.eventId||!!g.eventId&&g.eventId===y.eventId;return y.filter.includes(g.type)&&w}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(lh(g))}saveEventToCache(g){this.cachedEventUids.add(lh(g)),this.lastProcessedEventTime=Date.now()}}function lh(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(g=>g).join("-")}function ch({type:v,error:g}){return"unknown"===v&&"auth/no-auth-event"===(null==g?void 0:g.code)}function dl(v){return lo.apply(this,arguments)}function lo(){return(lo=(0,f.Z)(function*(v,g={}){return wn(v,"GET","/v1/projects",g)})).apply(this,arguments)}const Rc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,W_=/^https?/;function hl(){return(hl=(0,f.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:g}=yield dl(v);for(const y of g)try{if(im(y))return}catch(w){}Pn(v,"unauthorized-domain")})).apply(this,arguments)}function im(v){const g=Kr(),{protocol:y,hostname:w}=new URL(g);if(v.startsWith("chrome-extension://")){const K=new URL(v);return""===K.hostname&&""===w?"chrome-extension:"===y&&v.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===y&&K.hostname===w}if(!W_.test(y))return!1;if(Rc.test(v))return w===v;const A=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(w)}const z_=new Qt(3e4,6e4);function sm(){const v=Zt().___jsl;if(null==v?void 0:v.H)for(const g of Object.keys(v.H))if(v.H[g].r=v.H[g].r||[],v.H[g].L=v.H[g].L||[],v.H[g].r=[...v.H[g].L],v.CP)for(let y=0;y<v.CP.length;y++)v.CP[y]=null}let fl=null;function K_(v){return fl=fl||function om(v){return new Promise((g,y)=>{var w,A,M;function K(){sm(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{sm(),y(En(v,"network-request-failed"))},timeout:z_.get()})}if(null===(A=null===(w=Zt().gapi)||void 0===w?void 0:w.iframes)||void 0===A?void 0:A.Iframe)g(gapi.iframes.getContext());else{if(!(null===(M=Zt().gapi)||void 0===M?void 0:M.load)){const pe=nh("iframefcb");return Zt()[pe]=()=>{gapi.load?K():y(En(v,"network-request-failed"))},uu(`https://apis.google.com/js/api.js?onload=${pe}`).catch(Ze=>y(Ze))}K()}}).catch(g=>{throw fl=null,g})}(v),fl}const Z_=new Qt(5e3,15e3),dh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fh(v){const g=v.config;Fe(g.authDomain,v,"auth-domain-config-required");const y=g.emulator?yt(g,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,w={apiKey:g.apiKey,appName:v.name,v:k.SDK_VERSION},A=hh.get(v.config.apiHost);A&&(w.eid=A);const M=v._getFrameworks();return M.length&&(w.fw=M.join(",")),`${y}?${(0,G.xO)(w).slice(1)}`}function ya(){return ya=(0,f.Z)(function*(v){const g=yield K_(v),y=Zt().gapi;return Fe(y,v,"internal-error"),g.open({where:document.body,url:fh(v),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dh,dontclear:!0},w=>new Promise(function(){var A=(0,f.Z)(function*(M,K){yield w.restyle({setHideOnLeave:!1});const pe=En(v,"network-request-failed"),Ze=Zt().setTimeout(()=>{K(pe)},Z_.get());function Le(){Zt().clearTimeout(Ze),M(w)}w.ping(Le).then(Le,()=>{K(pe)})});return function(M,K){return A.apply(this,arguments)}}()))}),ya.apply(this,arguments)}const zf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class _a{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function cm(v,g,y,w,A,M){Fe(v.config.authDomain,v,"auth-domain-config-required"),Fe(v.config.apiKey,v,"invalid-api-key");const K={apiKey:v.config.apiKey,appName:v.name,authType:y,redirectUrl:w,v:k.SDK_VERSION,eventId:A};if(g instanceof qn){g.setDefaultLanguage(v.languageCode),K.providerId=g.providerId||"",(0,G.xb)(g.getCustomParameters())||(K.customParameters=JSON.stringify(g.getCustomParameters()));for(const[Ze,Le]of Object.entries(M||{}))K[Ze]=Le}if(g instanceof Is){const Ze=g.getScopes().filter(Le=>""!==Le);Ze.length>0&&(K.scopes=Ze.join(","))}v.tenantId&&(K.tid=v.tenantId);const pe=K;for(const Ze of Object.keys(pe))void 0===pe[Ze]&&delete pe[Ze];return`${function dm({config:v}){return v.emulator?yt(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,G.xO)(pe).slice(1)}`}const yu="webStorageSupport",hm=class xc{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ls,this._completeRedirectFn=ll,this._overrideRedirectResult=H_}_openPopup(g,y,w,A){var M=this;return(0,f.Z)(function*(){var K;mt(null===(K=M.eventManagers[g._key()])||void 0===K?void 0:K.manager,"_initialize() not called before _openPopup()");const pe=cm(g,y,w,Kr(),A);return function Kf(v,g,y,w=500,A=600){const M=Math.max((window.screen.availHeight-A)/2,0).toString(),K=Math.max((window.screen.availWidth-w)/2,0).toString();let pe="";const Ze=Object.assign(Object.assign({},zf),{width:w.toString(),height:A.toString(),top:M,left:K}),Le=(0,G.z$)().toLowerCase();y&&(pe=Io(Le)?"_blank":y),$t(Le)&&(g=g||"http://localhost",Ze.scrollbars="yes");const ut=Object.entries(Ze).reduce((Cn,[Ti,va])=>`${Cn}${Ti}=${va},`,"");if(function An(v=(0,G.z$)()){var g;return ws(v)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(Le)&&"_self"!==pe)return function Po(v,g){const y=document.createElement("a");y.href=v,y.target=g;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(w)}(g||"",pe),new _a(null);const sn=window.open(g||"",pe,ut);Fe(sn,v,"popup-blocked");try{sn.focus()}catch(Cn){}return new _a(sn)}(g,pe,Ro())})()}_openRedirect(g,y,w,A){var M=this;return(0,f.Z)(function*(){return yield M._originValidation(g),function Gr(v){Zt().location.href=v}(cm(g,y,w,Kr(),A)),new Promise(()=>{})})()}_initialize(g){const y=g._key();if(this.eventManagers[y]){const{manager:A,promise:M}=this.eventManagers[y];return A?Promise.resolve(A):(mt(M,"If manager is not set, promise should be"),M)}const w=this.initAndGetManager(g);return this.eventManagers[y]={promise:w},w.catch(()=>{delete this.eventManagers[y]}),w}initAndGetManager(g){var y=this;return(0,f.Z)(function*(){const w=yield function co(v){return ya.apply(this,arguments)}(g),A=new qf(g);return w.register("authEvent",M=>(Fe(null==M?void 0:M.authEvent,g,"invalid-auth-event"),{status:A.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[g._key()]={manager:A},y.iframes[g._key()]=w,A})()}_isIframeWebStorageSupported(g,y){this.iframes[g._key()].send(yu,{type:yu},A=>{var M;const K=null===(M=null==A?void 0:A[0])||void 0===M?void 0:M[yu];void 0!==K&&y(!!K),Pn(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const y=g._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function Wf(v){return hl.apply(this,arguments)}(g)),this.originValidationPromises[y]}get _shouldInitProactively(){return Xo()||Yo()||ws()}};class pl extends class Mc{constructor(g){this.factorId=g}_process(g,y,w){switch(y.type){case"enroll":return this._finalizeEnroll(g,y.credential,w);case"signin":return this._finalizeSignIn(g,y.credential);default:return hr("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new pl(g)}_finalizeEnroll(g,y,w){return function la(v,g){return wn(v,"POST","/v2/accounts/mfaEnrollment:finalize",Ct(v,g))}(g,{idToken:y,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,y){return function cs(v,g){return wn(v,"POST","/v2/accounts/mfaSignIn:finalize",Ct(v,g))}(g,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ph=(()=>{class v{constructor(){}static assertion(y){return pl._fromCredential(y)}}return v.FACTOR_ID="phone",v})();var Yf="@firebase/auth",Nc="0.20.11";class X_{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var y=this;return(0,f.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const y=this.auth.onIdTokenChanged(w=>{var A;g((null===(A=w)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,y),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const y=this.internalListeners.get(g);!y||(this.internalListeners.delete(g),y(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,G.Pz)("authIdTokenMaxAge"),function Qf(v){(0,k._registerComponent)(new ce.wA("auth",(g,{options:y})=>{const w=g.getProvider("app").getImmediate(),A=g.getProvider("heartbeat"),{apiKey:M,authDomain:K}=w.options;return((pe,Ze)=>{Fe(M&&!M.includes(":"),"invalid-api-key",{appName:pe.name}),Fe(!(null==K?void 0:K.includes(":")),"argument-error",{appName:pe.name});const Le={apiKey:M,authDomain:K,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Gi(v)},ut=new Ld(pe,Ze,Le);return function li(v,g){const y=(null==g?void 0:g.persistence)||[],w=(Array.isArray(y)?y:[y]).map(rn);(null==g?void 0:g.errorMap)&&v._updateErrorMap(g.errorMap),v._initializeWithPersistence(w,null==g?void 0:g.popupRedirectResolver)}(ut,y),ut})(w,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,y,w)=>{g.getProvider("auth-internal").initialize()})),(0,k._registerComponent)(new ce.wA("auth-internal",g=>{const y=$n(g.getProvider("auth").getImmediate());return new X_(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,k.registerVersion)(Yf,Nc,function Sr(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,k.registerVersion)(Yf,Nc,"esm2017")}("Browser")},2090:(it,Ee,L)=>{L.d(Ee,{$s:()=>et,BH:()=>ct,DV:()=>Fe,Dv:()=>is,G6:()=>Re,GJ:()=>jr,L:()=>se,LL:()=>cr,Pz:()=>br,Sg:()=>Nt,UG:()=>Ve,UI:()=>mt,US:()=>we,Wj:()=>wn,Wl:()=>jn,Yr:()=>ot,ZB:()=>Q,ZR:()=>en,aH:()=>qt,b$:()=>ve,cI:()=>zr,dS:()=>bn,eu:()=>Qe,g5:()=>k,gK:()=>Zr,gQ:()=>Sn,h$:()=>fe,hl:()=>lt,hu:()=>G,jU:()=>He,lb:()=>fr,m9:()=>tn,ne:()=>$r,p$:()=>W,pd:()=>Ir,r3:()=>ui,ru:()=>ye,tV:()=>he,uI:()=>De,ug:()=>_t,vZ:()=>Rr,w1:()=>qe,w9:()=>Es,xO:()=>li,xb:()=>hr,z$:()=>ze,zI:()=>Ie,zd:()=>Kr});const G=function(z,q){if(!z)throw k(q)},k=function(z){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+z)},ie=function(z){const q=[];let J=0;for(let H=0;H<z.length;H++){let O=z.charCodeAt(H);O<128?q[J++]=O:O<2048?(q[J++]=O>>6|192,q[J++]=63&O|128):55296==(64512&O)&&H+1<z.length&&56320==(64512&z.charCodeAt(H+1))?(O=65536+((1023&O)<<10)+(1023&z.charCodeAt(++H)),q[J++]=O>>18|240,q[J++]=O>>12&63|128,q[J++]=O>>6&63|128,q[J++]=63&O|128):(q[J++]=O>>12|224,q[J++]=O>>6&63|128,q[J++]=63&O|128)}return q},we={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(z,q){if(!Array.isArray(z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const J=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,H=[];for(let O=0;O<z.length;O+=3){const $=z[O],ae=O+1<z.length,Ne=ae?z[O+1]:0,st=O+2<z.length,at=st?z[O+2]:0;let pn=(15&Ne)<<2|at>>6,gr=63&at;st||(gr=64,ae||(pn=64)),H.push(J[$>>2],J[(3&$)<<4|Ne>>4],J[pn],J[gr])}return H.join("")},encodeString(z,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(z):this.encodeByteArray(ie(z),q)},decodeString(z,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(z):function(z){const q=[];let J=0,H=0;for(;J<z.length;){const O=z[J++];if(O<128)q[H++]=String.fromCharCode(O);else if(O>191&&O<224){const $=z[J++];q[H++]=String.fromCharCode((31&O)<<6|63&$)}else if(O>239&&O<365){const st=((7&O)<<18|(63&z[J++])<<12|(63&z[J++])<<6|63&z[J++])-65536;q[H++]=String.fromCharCode(55296+(st>>10)),q[H++]=String.fromCharCode(56320+(1023&st))}else{const $=z[J++],ae=z[J++];q[H++]=String.fromCharCode((15&O)<<12|(63&$)<<6|63&ae)}}return q.join("")}(this.decodeStringToByteArray(z,q))},decodeStringToByteArray(z,q){this.init_();const J=q?this.charToByteMapWebSafe_:this.charToByteMap_,H=[];for(let O=0;O<z.length;){const $=J[z.charAt(O++)],Ne=O<z.length?J[z.charAt(O)]:0;++O;const at=O<z.length?J[z.charAt(O)]:64;++O;const ht=O<z.length?J[z.charAt(O)]:64;if(++O,null==$||null==Ne||null==at||null==ht)throw Error();H.push($<<2|Ne>>4),64!==at&&(H.push(Ne<<4&240|at>>2),64!==ht&&H.push(at<<6&192|ht))}return H},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let z=0;z<this.ENCODED_VALS.length;z++)this.byteToCharMap_[z]=this.ENCODED_VALS.charAt(z),this.charToByteMap_[this.byteToCharMap_[z]]=z,this.byteToCharMapWebSafe_[z]=this.ENCODED_VALS_WEBSAFE.charAt(z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[z]]=z,z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(z)]=z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(z)]=z)}}},fe=function(z){const q=ie(z);return we.encodeByteArray(q,!0)},se=function(z){return fe(z).replace(/\./g,"")},he=function(z){try{return we.decodeString(z,!0)}catch(q){console.error("base64Decode failed: ",q)}return null};function W(z){return Q(void 0,z)}function Q(z,q){if(!(q instanceof Object))return q;switch(q.constructor){case Date:return new Date(q.getTime());case Object:void 0===z&&(z={});break;case Array:z=[];break;default:return q}for(const J in q)!q.hasOwnProperty(J)||!oe(J)||(z[J]=Q(z[J],q[J]));return z}function oe(z){return"__proto__"!==z}function ze(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function De(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ze())}function Ve(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(z){return!1}}function He(){return"object"==typeof self&&self.self===self}function ye(){const z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof z&&void 0!==z.id}function ve(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function qe(){const z=ze();return z.indexOf("MSIE ")>=0||z.indexOf("Trident/")>=0}function ot(){return!1}function Re(){return!Ve()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lt(){return"object"==typeof indexedDB}function Qe(){return new Promise((z,q)=>{try{let J=!0;const H="validate-browser-context-for-indexeddb-analytics-module",O=self.indexedDB.open(H);O.onsuccess=()=>{O.result.close(),J||self.indexedDB.deleteDatabase(H),z(!0)},O.onupgradeneeded=()=>{J=!1},O.onerror=()=>{var $;q((null===($=O.error)||void 0===$?void 0:$.message)||"")}}catch(J){q(J)}})}function Ie(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}const Oe=()=>{try{return function Y(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const z=process.env.__FIREBASE_DEFAULTS__;return z?JSON.parse(z):void 0})()||(()=>{if("undefined"==typeof document)return;let z;try{z=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(J){return}const q=z&&he(z[1]);return q&&JSON.parse(q)})()}catch(z){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${z}`)}},qt=()=>{var z;return null===(z=Oe())||void 0===z?void 0:z.config},br=z=>{var q;return null===(q=Oe())||void 0===q?void 0:q[`_${z}`]};class ct{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((q,J)=>{this.resolve=q,this.reject=J})}wrapCallback(q){return(J,H)=>{J?this.reject(J):this.resolve(H),"function"==typeof q&&(this.promise.catch(()=>{}),1===q.length?q(J):q(J,H))}}}function Nt(z,q){if(z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const H=q||"demo-project",O=z.iat||0,$=z.sub||z.user_id;if(!$)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ae=Object.assign({iss:`https://securetoken.google.com/${H}`,aud:H,iat:O,exp:O+3600,auth_time:O,sub:$,user_id:$,firebase:{sign_in_provider:"custom",identities:{}}},z);return[se(JSON.stringify({alg:"none",type:"JWT"})),se(JSON.stringify(ae)),""].join(".")}class en extends Error{constructor(q,J,H){super(J),this.code=q,this.customData=H,this.name="FirebaseError",Object.setPrototypeOf(this,en.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cr.prototype.create)}}class cr{constructor(q,J,H){this.service=q,this.serviceName=J,this.errors=H}create(q,...J){const H=J[0]||{},O=`${this.service}/${q}`,$=this.errors[q],ae=$?function mn(z,q){return z.replace(dr,(J,H)=>{const O=q[H];return null!=O?String(O):`<${H}?>`})}($,H):"Error";return new en(O,`${this.serviceName}: ${ae} (${O}).`,H)}}const dr=/\{\$([^}]+)}/g;function zr(z){return JSON.parse(z)}function jn(z){return JSON.stringify(z)}const Br=function(z){let q={},J={},H={},O="";try{const $=z.split(".");q=zr(he($[0])||""),J=zr(he($[1])||""),O=$[2],H=J.d||{},delete J.d}catch($){}return{header:q,claims:J,data:H,signature:O}},Es=function(z){const J=Br(z).claims;return!!J&&"object"==typeof J&&J.hasOwnProperty("iat")},jr=function(z){const q=Br(z).claims;return"object"==typeof q&&!0===q.admin};function ui(z,q){return Object.prototype.hasOwnProperty.call(z,q)}function Fe(z,q){if(Object.prototype.hasOwnProperty.call(z,q))return z[q]}function hr(z){for(const q in z)if(Object.prototype.hasOwnProperty.call(z,q))return!1;return!0}function mt(z,q,J){const H={};for(const O in z)Object.prototype.hasOwnProperty.call(z,O)&&(H[O]=q.call(J,z[O],O,z));return H}function Rr(z,q){if(z===q)return!0;const J=Object.keys(z),H=Object.keys(q);for(const O of J){if(!H.includes(O))return!1;const $=z[O],ae=q[O];if(rn($)&&rn(ae)){if(!Rr($,ae))return!1}else if($!==ae)return!1}for(const O of H)if(!J.includes(O))return!1;return!0}function rn(z){return null!==z&&"object"==typeof z}function li(z){const q=[];for(const[J,H]of Object.entries(z))Array.isArray(H)?H.forEach(O=>{q.push(encodeURIComponent(J)+"="+encodeURIComponent(O))}):q.push(encodeURIComponent(J)+"="+encodeURIComponent(H));return q.length?"&"+q.join("&"):""}function Kr(z){const q={};return z.replace(/^\?/,"").split("&").forEach(H=>{if(H){const[O,$]=H.split("=");q[decodeURIComponent(O)]=decodeURIComponent($)}}),q}function Ir(z){const q=z.indexOf("?");if(!q)return"";const J=z.indexOf("#",q);return z.substring(q,J>0?J:void 0)}class Sn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let q=1;q<this.blockSize;++q)this.pad_[q]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(q,J){J||(J=0);const H=this.W_;if("string"==typeof q)for(let ht=0;ht<16;ht++)H[ht]=q.charCodeAt(J)<<24|q.charCodeAt(J+1)<<16|q.charCodeAt(J+2)<<8|q.charCodeAt(J+3),J+=4;else for(let ht=0;ht<16;ht++)H[ht]=q[J]<<24|q[J+1]<<16|q[J+2]<<8|q[J+3],J+=4;for(let ht=16;ht<80;ht++){const pn=H[ht-3]^H[ht-8]^H[ht-14]^H[ht-16];H[ht]=4294967295&(pn<<1|pn>>>31)}let at,kt,O=this.chain_[0],$=this.chain_[1],ae=this.chain_[2],Ne=this.chain_[3],st=this.chain_[4];for(let ht=0;ht<80;ht++){ht<40?ht<20?(at=Ne^$&(ae^Ne),kt=1518500249):(at=$^ae^Ne,kt=1859775393):ht<60?(at=$&ae|Ne&($|ae),kt=2400959708):(at=$^ae^Ne,kt=3395469782);const pn=(O<<5|O>>>27)+at+st+kt+H[ht]&4294967295;st=Ne,Ne=ae,ae=4294967295&($<<30|$>>>2),$=O,O=pn}this.chain_[0]=this.chain_[0]+O&4294967295,this.chain_[1]=this.chain_[1]+$&4294967295,this.chain_[2]=this.chain_[2]+ae&4294967295,this.chain_[3]=this.chain_[3]+Ne&4294967295,this.chain_[4]=this.chain_[4]+st&4294967295}update(q,J){if(null==q)return;void 0===J&&(J=q.length);const H=J-this.blockSize;let O=0;const $=this.buf_;let ae=this.inbuf_;for(;O<J;){if(0===ae)for(;O<=H;)this.compress_(q,O),O+=this.blockSize;if("string"==typeof q){for(;O<J;)if($[ae]=q.charCodeAt(O),++ae,++O,ae===this.blockSize){this.compress_($),ae=0;break}}else for(;O<J;)if($[ae]=q[O],++ae,++O,ae===this.blockSize){this.compress_($),ae=0;break}}this.inbuf_=ae,this.total_+=J}digest(){const q=[];let J=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let O=this.blockSize-1;O>=56;O--)this.buf_[O]=255&J,J/=256;this.compress_(this.buf_);let H=0;for(let O=0;O<5;O++)for(let $=24;$>=0;$-=8)q[H]=this.chain_[O]>>$&255,++H;return q}}function $r(z,q){const J=new bo(z,q);return J.subscribe.bind(J)}class bo{constructor(q,J){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=J,this.task.then(()=>{q(this)}).catch(H=>{this.error(H)})}next(q){this.forEachObserver(J=>{J.next(q)})}error(q){this.forEachObserver(J=>{J.error(q)}),this.close(q)}complete(){this.forEachObserver(q=>{q.complete()}),this.close()}subscribe(q,J,H){let O;if(void 0===q&&void 0===J&&void 0===H)throw new Error("Missing Observer.");O=function yt(z,q){if("object"!=typeof z||null===z)return!1;for(const J of q)if(J in z&&"function"==typeof z[J])return!0;return!1}(q,["next","error","complete"])?q:{next:q,error:J,complete:H},void 0===O.next&&(O.next=gt),void 0===O.error&&(O.error=gt),void 0===O.complete&&(O.complete=gt);const $=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?O.error(this.finalError):O.complete()}catch(ae){}}),this.observers.push(O),$}unsubscribeOne(q){void 0===this.observers||void 0===this.observers[q]||(delete this.observers[q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(q){if(!this.finalized)for(let J=0;J<this.observers.length;J++)this.sendOne(J,q)}sendOne(q,J){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[q])try{J(this.observers[q])}catch(H){"undefined"!=typeof console&&console.error&&console.error(H)}})}close(q){this.finalized||(this.finalized=!0,void 0!==q&&(this.finalError=q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gt(){}const is=function(z,q,J,H){let O;if(H<q?O="at least "+q:H>J&&(O=0===J?"none":"no more than "+J),O)throw new Error(z+" failed: Was called with "+H+(1===H?" argument.":" arguments.")+" Expects "+O+".")};function Zr(z,q){return`${z} failed: ${q} argument `}function wn(z,q,J,H){if((!H||J)&&"function"!=typeof J)throw new Error(Zr(z,q)+"must be a valid function.")}function fr(z,q,J,H){if((!H||J)&&("object"!=typeof J||null===J))throw new Error(Zr(z,q)+"must be a valid context object.")}const bn=function(z){const q=[];let J=0;for(let H=0;H<z.length;H++){let O=z.charCodeAt(H);if(O>=55296&&O<=56319){const $=O-55296;H++,G(H<z.length,"Surrogate pair missing trail surrogate."),O=65536+($<<10)+(z.charCodeAt(H)-56320)}O<128?q[J++]=O:O<2048?(q[J++]=O>>6|192,q[J++]=63&O|128):O<65536?(q[J++]=O>>12|224,q[J++]=O>>6&63|128,q[J++]=63&O|128):(q[J++]=O>>18|240,q[J++]=O>>12&63|128,q[J++]=O>>6&63|128,q[J++]=63&O|128)}return q},_t=function(z){let q=0;for(let J=0;J<z.length;J++){const H=z.charCodeAt(J);H<128?q++:H<2048?q+=2:H>=55296&&H<=56319?(q+=4,J++):q+=3}return q};function et(z,q=1e3,J=2){const H=q*Math.pow(J,z),O=Math.round(.5*H*(Math.random()-.5)*2);return Math.min(144e5,H+O)}function tn(z){return z&&z._delegate?z._delegate:z}},4174:(it,Ee,L)=>{var f=L(5e3);let G=null;function k(){return G}const fe=new f.OlP("DocumentToken");let se=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function he(){return(0,f.LFG)(Q)}()},providedIn:"platform"}),n})();const W=new f.OlP("Location Initialized");let Q=(()=>{class n extends se{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){oe()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){oe()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(fe))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function ze(){return new Q((0,f.LFG)(fe))}()},providedIn:"platform"}),n})();function oe(){return!!window.history.pushState}function De(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ve(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function He(n){return n&&"?"!==n[0]?"?"+n:n}let ye=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function ve(n){const e=(0,f.LFG)(fe).location;return new qe((0,f.LFG)(se),e&&e.origin||"")}()},providedIn:"root"}),n})();const Pe=new f.OlP("appBaseHref");let qe=(()=>{class n extends ye{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return De(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+He(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+He(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+He(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(se),f.LFG(Pe,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Be=(()=>{class n extends ye{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=De(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+He(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+He(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(se),f.LFG(Pe,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),ot=(()=>{class n{constructor(t,r){this._subject=new f.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Ve(Qe(i)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+He(r))}normalize(t){return n.stripTrailingSlash(function lt(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Qe(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+He(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+He(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=He,n.joinWithSlash=De,n.stripTrailingSlash=Ve,n.\u0275fac=function(t){return new(t||n)(f.LFG(ye),f.LFG(se))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Re(){return new ot((0,f.LFG)(ye),(0,f.LFG)(se))}()},providedIn:"root"}),n})();function Qe(n){return n.replace(/\/index.html$/,"")}var re=(()=>((re=re||{})[re.Zero=0]="Zero",re[re.One=1]="One",re[re.Two=2]="Two",re[re.Few=3]="Few",re[re.Many=4]="Many",re[re.Other=5]="Other",re))();const ui=f.kL8;class _n{}let rr=(()=>{class n extends _n{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(ui(r||this.locale)(t)){case re.Zero:return"zero";case re.One:return"one";case re.Two:return"two";case re.Few:return"few";case re.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.soG))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Qr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new An,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){kd("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){kd("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class An{constructor(){this.$implicit=null,this.ngIf=null}}function kd(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}let xi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[{provide:_n,useClass:rr}]}),n})();function ic(n){return"server"===n}let sc=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new zg((0,f.LFG)(fe),window)}),n})();class zg{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function ci(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=On(this.window.history)||On(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function On(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class oc extends class ea extends class we{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function de(n){G||(G=n)}(new oc)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function qn(){return Mi=Mi||document.querySelector("base"),Mi?Mi.getAttribute("href"):null}();return null==t?null:function Cs(n){Is=Is||document.createElement("a"),Is.setAttribute("href",n);const e=Is.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Mi=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Yo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let Is,Mi=null;const Ts=new f.OlP("TRANSITION_ID"),Dr=[{provide:f.ip1,useFactory:function wi(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=k(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[Ts,fe,f.zs3],multi:!0}];class Wa{static init(){(0,f.VLi)(new Wa)}addToWindow(e){f.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const i=f.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const d=function(p){l=l||p,a--,0==a&&r(l)};i.forEach(function(p){p.whenStable(d)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let no=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Wi=new f.OlP("EventManagerPlugins");let os=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Wi),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class za{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=k().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Rt=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),ro=(()=>{class n extends Rt{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Jr),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Jr))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(fe))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Jr(n){k().remove(n)}const ta={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Gu=/%COMP%/g;function Rn(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Rn(n,i,t):(i=i.replace(Gu,n),t.push(i))}return t}function na(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ei=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new io(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new uc(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case f.ifc.ShadowDom:return new Do(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Rn(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(os),f.LFG(ro),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class io{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ta[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=ta[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=ta[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,i&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,na(r)):this.eventManager.addEventListener(e,t,na(r))}}class uc extends io{constructor(e,t,r,i){super(e),this.component=r;const a=Rn(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function Jt(n){return"_ngcontent-%COMP%".replace(Gu,n)}(i+"-"+r.id),this.hostAttr=function Wu(n){return"_nghost-%COMP%".replace(Gu,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Do extends io{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Rn(i.id,i.styles,[]);for(let l=0;l<a.length;l++){const d=document.createElement("style");d.textContent=a[l],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let ra=(()=>{class n extends za{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(fe))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Mr=["alt","control","meta","shift"],lc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},zi={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ss={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let zu=(()=>{class n extends za{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="";if(Mr.forEach(p=>{const _=r.indexOf(p);_>-1&&(r.splice(_,1),l+=p+".")}),l+=a,0!=r.length||0===a.length)return null;const d={};return d.domEventName=i,d.fullKey=l,d}static getEventFullKey(t){let r="",i=function Ku(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&zi.hasOwnProperty(e)&&(e=zi[e]))}return lc[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Mr.forEach(a=>{a!=i&&Ss[a](t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(fe))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const dc=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function cc(){oc.makeCurrent(),Wa.init()},multi:!0},{provide:fe,useFactory:function Qa(){return(0,f.RDi)(document),document},deps:[]}]),So=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function ia(){return new f.qLn},deps:[]},{provide:Wi,useClass:ra,multi:!0,deps:[fe,f.R0b,f.Lbi]},{provide:Wi,useClass:zu,multi:!0,deps:[fe]},{provide:ei,useClass:ei,deps:[os,ro,f.AFp]},{provide:f.FYo,useExisting:ei},{provide:Rt,useExisting:ro},{provide:ro,useClass:ro,deps:[fe]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b]},{provide:os,useClass:os,deps:[Wi,f.R0b]},{provide:class Gn{},useClass:no,deps:[]}];let zd=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:Ts,useExisting:f.AFp},Dr]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(n,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:So,imports:[xi,f.hGG]}),n})();"undefined"!=typeof window&&window;var In=L(8996),As=L(7669);function dt(...n){const e=(0,As.yG)(n);return(0,In.D)(n,e)}var as=L(7579);class di extends as.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Wn=L(8306);const{isArray:Yd}=Array,{getPrototypeOf:tu,prototype:Qd,keys:nu}=Object;var us=L(4671),It=L(4004);const{isArray:bc}=Array;var Zn=L(5403),oo=L(9672);function Ic(...n){const e=(0,As.yG)(n),t=(0,As.jO)(n),{args:r,keys:i}=function Xg(n){if(1===n.length){const e=n[0];if(Yd(e))return{args:e,keys:null};if(function wc(n){return n&&"object"==typeof n&&tu(n)===Qd}(e)){const t=nu(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,In.D)([],e);const a=new Wn.y(function tl(n,e,t=us.y){return r=>{ca(e,()=>{const{length:i}=n,a=new Array(i);let l=i,d=i;for(let p=0;p<i;p++)ca(e,()=>{const _=(0,In.D)(n[p],e);let I=!1;_.subscribe(new Zn.Q(r,D=>{a[p]=D,I||(I=!0,d--),d||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>function la(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,l):us.y));return t?a.pipe(function el(n){return(0,It.U)(e=>function ru(n,e){return bc(e)?n(...e):n(e)}(n,e))}(t)):a}function ca(n,e,t){n?(0,oo.f)(t,n,e):e()}const su=(0,L(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var da=L(8189);function Ao(...n){return function Vf(){return(0,da.J)(1)}()((0,In.D)(n,(0,As.yG)(n)))}var Pi=L(8421);function Xd(n){return new Wn.y(e=>{(0,Pi.Xf)(n()).subscribe(e)})}var ls=L(515),Cc=L(727),Hn=L(4482);function Ro(){return(0,Hn.e)((n,e)=>{let t=null;n._refCount++;const r=new Zn.Q(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class ou extends Wn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Hn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Cc.w0;const t=this.getSubject();e.add(this.source.subscribe(new Zn.Q(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Cc.w0.EMPTY)}return e}refCount(){return Ro()(this)}}function Zt(n,e){return(0,Hn.e)((t,r)=>{let i=null,a=0,l=!1;const d=()=>l&&!i&&r.complete();t.subscribe(new Zn.Q(r,p=>{null==i||i.unsubscribe();let _=0;const I=a++;(0,Pi.Xf)(n(p,I)).subscribe(i=new Zn.Q(r,D=>r.next(e?e(p,D,I,_++):D),()=>{i=null,d()}))},()=>{l=!0,d()}))})}var Gr=L(5698);function Oi(...n){const e=(0,As.yG)(n);return(0,Hn.e)((t,r)=>{(e?Ao(n,t,e):Ao(n,t)).subscribe(r)})}function xo(n,e,t,r,i){return(a,l)=>{let d=t,p=e,_=0;a.subscribe(new Zn.Q(l,I=>{const D=_++;p=d?n(p,I,D):(d=!0,I),r&&l.next(p)},i&&(()=>{d&&l.next(p),l.complete()})))}}function hi(n,e){return(0,Hn.e)(xo(n,e,arguments.length>=2,!0))}function ki(n,e){return(0,Hn.e)((t,r)=>{let i=0;t.subscribe(new Zn.Q(r,a=>n.call(e,a,i++)&&r.next(a)))})}function fi(n){return(0,Hn.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe(new Zn.Q(t,void 0,void 0,l=>{a=(0,Pi.Xf)(n(l,fi(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}var Vn=L(5577),nl=L(576);function vn(n,e){return(0,nl.m)(e)?(0,Vn.z)(n,e,1):(0,Vn.z)(n,1)}function rl(n){return n<=0?()=>ls.E:(0,Hn.e)((e,t)=>{let r=[];e.subscribe(new Zn.Q(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function au(n=Jd){return(0,Hn.e)((e,t)=>{let r=!1;e.subscribe(new Zn.Q(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Jd(){return new su}function Uf(n){return(0,Hn.e)((e,t)=>{let r=!1;e.subscribe(new Zn.Q(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Rs(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ki((i,a)=>n(i,a,r)):us.y,(0,Gr.q)(1),t?Uf(e):au(()=>new su))}var bi=L(8505);class xs{constructor(e,t){this.id=e,this.url=t}}class Yn extends xs{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ha extends xs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class fa extends xs{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class X0 extends xs{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Tc extends xs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ii extends xs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cs extends xs{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class th extends xs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pa extends xs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ga{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class uu{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class nh{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Bf{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rh{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lu{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cu{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Tt="primary";class du{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ti(n){return new du(n)}const Dc="ngNavigationCancelingError";function Sc(n){const e=Error("NavigationCancelingError: "+n);return e[Dc]=!0,e}function em(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],d=n[a];if(l.startsWith(":"))i[l.substring(1)]=d;else if(l!==d.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Zi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!Mo(n[i],e[i]))return!1;return!0}function Mo(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function sl(n){return Array.prototype.concat.apply([],n)}function ol(n){return n.length>0?n[n.length-1]:null}function zn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function qr(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,In.D)(Promise.resolve(n)):dt(n)}const ma={exact:function pu(n,e,t){if(!$e(n.segments,e.segments)||!P(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!pu(n.children[r],e.children[r],t))return!1;return!0},subset:T},$f={exact:function al(n,e){return Zi(n,e)},subset:function tm(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Mo(n[t],e[t]))},ignored:()=>!0};function fu(n,e,t){return ma[t.paths](n.root,e.root,t.matrixParams)&&$f[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function T(n,e,t){return S(n,e,e.segments,t)}function S(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!$e(i,t)||e.hasChildren()||!P(i,t,r))}if(n.segments.length===t.length){if(!$e(n.segments,t)||!P(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!T(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!($e(n.segments,i)&&P(n.segments,i,r)&&n.children[Tt])&&S(n.children[Tt],e,a,r)}}function P(n,e,t){return e.every((r,i)=>$f[t](n[i].parameters,r.parameters))}class B{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ti(this.queryParams)),this._queryParamMap}toString(){return vt.serialize(this)}}class Z{constructor(e,t){this.segments=e,this.children=t,this.parent=null,zn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return kn(this)}}class ue{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ti(this.parameters)),this._parameterMap}toString(){return ao(this)}}function $e(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Bt{}class zt{parse(e){const t=new G_(e);return new B(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${or(e.root,!0)}`,r=function Ps(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${hs(t)}=${hs(i)}`).join("&"):`${hs(t)}=${hs(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Ns(n){return encodeURI(n)}(e.fragment)}`:""}`}}const vt=new zt;function kn(n){return n.segments.map(e=>ao(e)).join("/")}function or(n,e){if(!n.hasChildren())return kn(n);if(e){const t=n.children[Tt]?or(n.children[Tt],!1):"",r=[];return zn(n.children,(i,a)=>{a!==Tt&&r.push(`${a}:${or(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Dt(n,e){let t=[];return zn(n.children,(r,i)=>{i===Tt&&(t=t.concat(e(r,i)))}),zn(n.children,(r,i)=>{i!==Tt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Tt?[or(n.children[Tt],!1)]:[`${i}:${or(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Tt]?`${kn(n)}/${t[0]}`:`${kn(n)}/(${t.join("//")})`}}function ds(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function hs(n){return ds(n).replace(/%3B/gi,";")}function gu(n){return ds(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ci(n){return decodeURIComponent(n)}function No(n){return Ci(n.replace(/\+/g,"%20"))}function ao(n){return`${gu(n.path)}${function uo(n){return Object.keys(n).map(e=>`;${gu(e)}=${gu(n[e])}`).join("")}(n.parameters)}`}const mu=/^[^\/()?;=#]+/;function ih(n){const e=n.match(mu);return e?e[0]:""}const H_=/^[^=?&#]+/,nm=/^[^&#]+/;class G_{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Z([],{}):new Z([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Tt]=new Z(e,t)),r}parseSegment(){const e=ih(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new ue(Ci(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=ih(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=ih(this.remaining);i&&(r=i,this.capture(r))}e[Ci(t)]=Ci(r)}parseQueryParam(e){const t=function Hf(n){const e=n.match(H_);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function J0(n){const e=n.match(nm);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=No(t),a=No(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=ih(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let a;r.indexOf(":")>-1?(a=r.substr(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Tt);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[Tt]:new Z([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class sh{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Gf(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Gf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ul(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return ul(e,this._root).map(t=>t.value)}}function Gf(n,e){if(n===e.value)return e;for(const t of e.children){const r=Gf(n,t);if(r)return r}return null}function ul(n,e){if(n===e.value)return[e];for(const t of e.children){const r=ul(n,t);if(r.length)return r.unshift(e),r}return[]}class Yi{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Os(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class rm extends sh{constructor(e,t){super(e),this.snapshot=t,uh(this,e)}toString(){return this.snapshot.toString()}}function oh(n,e){const t=function eb(n,e){const l=new cl([],{},{},"",{},Tt,e,null,n.root,-1,{});return new Ac("",new Yi(l,[]))}(n,e),r=new di([new ue("",{})]),i=new di({}),a=new di({}),l=new di({}),d=new di(""),p=new ks(r,i,l,d,a,Tt,e,t.root);return p.snapshot=t.root,new rm(new Yi(p,[]),t)}class ks{constructor(e,t,r,i,a,l,d,p){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=d,this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,It.U)(e=>ti(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,It.U)(e=>ti(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ll(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function ah(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class cl{constructor(e,t,r,i,a,l,d,p,_,I,D){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=d,this.routeConfig=p,this._urlSegment=_,this._lastPathIndex=I,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ti(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ti(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ac extends sh{constructor(e,t){super(t),this.url=e,uh(this,t)}toString(){return qf(this._root)}}function uh(n,e){e.value._routerState=n,e.children.forEach(t=>uh(n,t))}function qf(n){const e=n.children.length>0?` { ${n.children.map(qf).join(", ")} } `:"";return`${n.value}${e}`}function lh(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Zi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Zi(e.params,t.params)||n.params.next(t.params),function jf(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Zi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Zi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function ch(n,e){const t=Zi(n.params,e.params)&&function Se(n,e){return $e(n,e)&&n.every((t,r)=>Zi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||ch(n.parent,e.parent))}function dl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function lo(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return dl(n,r,i);return dl(n,r)})}(n,e,t);return new Yi(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(d=>dl(n,d)),l}}const r=function Rc(n){return new ks(new di(n.url),new di(n.params),new di(n.queryParams),new di(n.fragment),new di(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>dl(n,a));return new Yi(r,i)}}function Wf(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function hl(n){return"object"==typeof n&&null!=n&&n.outlets}function im(n,e,t,r,i){let a={};return r&&zn(r,(l,d)=>{a[d]=Array.isArray(l)?l.map(p=>`${p}`):`${l}`}),new B(t.root===n?e:z_(t.root,n,e),a,i)}function z_(n,e,t){const r={};return zn(n.children,(i,a)=>{r[a]=i===e?t:z_(i,e,t)}),new Z(n.segments,r)}class sm{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Wf(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(hl);if(i&&i!==ol(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class fl{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Q_(n,e,t){if(n||(n=new Z([],{})),0===n.segments.length&&n.hasChildren())return dh(n,e,t);const r=function hh(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],d=t[r];if(hl(d))break;const p=`${d}`,_=r<t.length-1?t[r+1]:null;if(i>0&&void 0===p)break;if(p&&_&&"object"==typeof _&&void 0===_.outlets){if(!zf(p,_,l))return a;r+=2}else{if(!zf(p,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new Z(n.segments.slice(0,r.pathIndex),{});return a.children[Tt]=new Z(n.segments.slice(r.pathIndex),n.children),dh(a,0,i)}return r.match&&0===i.length?new Z(n.segments,{}):r.match&&!n.hasChildren()?fh(n,e,t):r.match?dh(n,0,i):fh(n,e,t)}function dh(n,e,t){if(0===t.length)return new Z(n.segments,{});{const r=function Y_(n){return hl(n[0])?n[0].outlets:{[Tt]:n}}(t),i={};return zn(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=Q_(n.children[l],e,a))}),zn(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new Z(n.segments,i)}}function fh(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(hl(a)){const p=co(a.outlets);return new Z(r,p)}if(0===i&&Wf(t[0])){r.push(new ue(n.segments[e].path,ya(t[0]))),i++;continue}const l=hl(a)?a.outlets[Tt]:`${a}`,d=i<t.length-1?t[i+1]:null;l&&d&&Wf(d)?(r.push(new ue(l,ya(d))),i+=2):(r.push(new ue(l,{})),i++)}return new Z(r,{})}function co(n){const e={};return zn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=fh(new Z([],{}),0,t))}),e}function ya(n){const e={};return zn(n,(t,r)=>e[r]=`${t}`),e}function zf(n,e,t){return n==t.path&&Zi(e,t.parameters)}class um{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),lh(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Os(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),zn(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Os(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),d=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:d})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Os(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Os(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new lu(a.value.snapshot))}),e.children.length&&this.forwardEvent(new Bf(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(lh(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const d=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(d.contexts),l.attachRef=d.componentRef,l.route=d.route.value,l.outlet&&l.outlet.attach(d.componentRef,d.route.value),lh(d.route.value),this.activateChildRoutes(e,null,l.children)}else{const d=function tb(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),p=d?d.module.componentFactoryResolver:null;l.attachRef=null,l.route=i,l.resolver=p,l.outlet&&l.outlet.activateWith(i,p),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class lm{constructor(e,t){this.routes=e,this.module=t}}function _a(n){return"function"==typeof n}function Po(n){return n instanceof B}const yu=Symbol("INITIAL_VALUE");function xc(){return Zt(n=>Ic(n.map(e=>e.pipe((0,Gr.q)(1),Oi(yu)))).pipe(hi((e,t)=>{let r=!1;return t.reduce((i,a,l)=>i!==yu?i:(a===yu&&(r=!0),r||!1!==a&&l!==t.length-1&&!Po(a)?i:a),e)},yu),ki(e=>e!==yu),(0,It.U)(e=>Po(e)?e:!0===e),(0,Gr.q)(1)))}class hm{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Mc,this.attachRef=null}}class Mc{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new hm,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let pl=(()=>{class n{constructor(t,r,i,a,l){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.name=a||Tt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const l=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),d=this.parentContexts.getOrCreateContext(this.name).children,p=new ph(t,d,this.location.injector);this.activated=this.location.createComponent(l,this.location.length,p),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Mc),f.Y36(f.s_b),f.Y36(f._Vd),f.$8M("name"),f.Y36(f.sBO))},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class ph{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ks?this.route:e===Mc?this.childContexts:this.parent.get(e,t)}}let Yf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},directives:[pl],encapsulation:2}),n})();function Nc(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];X_(r,Sr(e,r))}}function X_(n,e){n.children&&Nc(n.children,e)}function Sr(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Qf(n){const e=n.children&&n.children.map(Qf),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Tt&&(t.component=Yf),t}function fs(n){return n.outlet||Tt}function gh(n,e){const t=n.filter(r=>fs(r)===e);return t.push(...n.filter(r=>fs(r)!==e)),t}const mh={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function yh(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},mh):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const a=(e.matcher||em)(t,n,e);if(!a)return Object.assign({},mh);const l={};zn(a.posParams,(p,_)=>{l[_]=p.path});const d=a.consumed.length>0?Object.assign(Object.assign({},l),a.consumed[a.consumed.length-1].parameters):l;return{matched:!0,consumedSegments:a.consumed,lastChild:a.consumed.length,parameters:d,positionalParamSegments:null!==(r=a.posParams)&&void 0!==r?r:{}}}function Xf(n,e,t,r,i="corrected"){if(t.length>0&&function y(n,e,t){return t.some(r=>A(n,e,r)&&fs(r)!==Tt)}(n,t,r)){const l=new Z(e,function g(n,e,t,r){const i={};i[Tt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&fs(a)!==Tt){const l=new Z([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[fs(a)]=l}return i}(n,e,r,new Z(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function w(n,e,t){return t.some(r=>A(n,e,r))}(n,t,r)){const l=new Z(n.segments,function v(n,e,t,r,i,a){const l={};for(const d of r)if(A(n,t,d)&&!i[fs(d)]){const p=new Z([],{});p._sourceSegment=n,p._segmentIndexShift="legacy"===a?n.segments.length:e.length,l[fs(d)]=p}return Object.assign(Object.assign({},i),l)}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const a=new Z(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function A(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function M(n,e,t,r){return!!(fs(n)===r||r!==Tt&&A(e,t,n))&&("**"===n.path||yh(e,n,t).matched)}function K(n,e,t){return 0===e.length&&!n.children[t]}class pe{constructor(e){this.segmentGroup=e||null}}class Ze{constructor(e){this.urlTree=e}}function Le(n){return new Wn.y(e=>e.error(new pe(n)))}function ut(n){return new Wn.y(e=>e.error(new Ze(n)))}function sn(n){return new Wn.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class va{constructor(e,t,r,i,a){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(f.h0i)}apply(){const e=Xf(this.urlTree.root,[],[],this.config).segmentGroup,t=new Z(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Tt).pipe((0,It.U)(a=>this.createUrlTree(Oc(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(fi(a=>{if(a instanceof Ze)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof pe?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Tt).pipe((0,It.U)(i=>this.createUrlTree(Oc(i),e.queryParams,e.fragment))).pipe(fi(i=>{throw i instanceof pe?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new Z([],{[Tt]:e}):e;return new B(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,It.U)(a=>new Z([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,In.D)(i).pipe(vn(a=>{const l=r.children[a],d=gh(t,a);return this.expandSegmentGroup(e,d,l,a).pipe((0,It.U)(p=>({segment:p,outlet:a})))}),hi((a,l)=>(a[l.outlet]=l.segment,a),{}),function eh(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ki((i,a)=>n(i,a,r)):us.y,rl(1),t?Uf(e):au(()=>new su))}())}expandSegment(e,t,r,i,a,l){return(0,In.D)(r).pipe(vn(d=>this.expandSegmentAgainstRoute(e,t,r,d,i,a,l).pipe(fi(_=>{if(_ instanceof pe)return dt(null);throw _}))),Rs(d=>!!d),fi((d,p)=>{if(d instanceof su||"EmptyError"===d.name){if(K(t,i,a))return dt(new Z([],{}));throw new pe(t)}throw d}))}expandSegmentAgainstRoute(e,t,r,i,a,l,d){return M(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):Le(t):Le(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?ut(a):this.lineralizeSegments(r,a).pipe((0,Vn.z)(l=>{const d=new Z(l,{});return this.expandSegment(e,d,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:d,consumedSegments:p,lastChild:_,positionalParamSegments:I}=yh(t,i,a);if(!d)return Le(t);const D=this.applyRedirectCommands(p,i.redirectTo,I);return i.redirectTo.startsWith("/")?ut(D):this.lineralizeSegments(i,D).pipe((0,Vn.z)(x=>this.expandSegment(e,t,r,x.concat(a.slice(_)),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){if("**"===r.path)return r.loadChildren?(r._loadedConfig?dt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,It.U)(x=>(r._loadedConfig=x,new Z(i,{})))):dt(new Z(i,{}));const{matched:l,consumedSegments:d,lastChild:p}=yh(t,r,i);if(!l)return Le(t);const _=i.slice(p);return this.getChildConfig(e,r,i).pipe((0,Vn.z)(D=>{const x=D.module,F=D.routes,{segmentGroup:j,slicedSegments:ee}=Xf(t,d,_,F),ne=new Z(j.segments,j.children);if(0===ee.length&&ne.hasChildren())return this.expandChildren(x,F,ne).pipe((0,It.U)(Ke=>new Z(d,Ke)));if(0===F.length&&0===ee.length)return dt(new Z(d,{}));const je=fs(r)===a;return this.expandSegment(x,ne,F,ee,je?Tt:a,!0).pipe((0,It.U)(We=>new Z(d.concat(We.segments),We.children)))}))}getChildConfig(e,t,r){return t.children?dt(new lm(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?dt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Vn.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,It.U)(a=>(t._loadedConfig=a,a))):function Cn(n){return new Wn.y(e=>e.error(Sc(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(t))):dt(new lm([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?dt(i.map(l=>{const d=e.get(l);let p;if(function Zf(n){return n&&_a(n.canLoad)}(d))p=d.canLoad(t,r);else{if(!_a(d))throw new Error("Invalid CanLoad guard");p=d(t,r)}return qr(p)})).pipe(xc(),(0,bi.b)(l=>{if(!Po(l))return;const d=Sc(`Redirecting to "${this.urlSerializer.serialize(l)}"`);throw d.url=l,d}),(0,It.U)(l=>!0===l)):dt(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return dt(r);if(i.numberOfChildren>1||!i.children[Tt])return sn(e.redirectTo);i=i.children[Tt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new B(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return zn(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const d=i.substring(1);r[a]=t[d]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return zn(t.children,(d,p)=>{l[p]=this.createSegmentGroup(e,d,r,i)}),new Z(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function Oc(n){const e={};for(const r of Object.keys(n.children)){const a=Oc(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function Pc(n){if(1===n.numberOfChildren&&n.children[Tt]){const e=n.children[Tt];return new Z(n.segments.concat(e.segments),e.children)}return n}(new Z(n.segments,e))}class ep{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class _u{constructor(e,t){this.component=e,this.route=t}}function fm(n,e,t){const r=n._root;return kc(r,e?e._root:null,t,[r.value])}function Ea(n,e,t){const r=function gm(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function kc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Os(e);return n.children.forEach(l=>{(function Fc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,d=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const p=function J_(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!$e(n.url,e.url);case"pathParamsOrQueryParamsChange":return!$e(n.url,e.url)||!Zi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ch(n,e)||!Zi(n.queryParams,e.queryParams);default:return!ch(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);p?i.canActivateChecks.push(new ep(r)):(a.data=l.data,a._resolvedData=l._resolvedData),kc(n,e,a.component?d?d.children:null:t,r,i),p&&d&&d.outlet&&d.outlet.isActivated&&i.canDeactivateChecks.push(new _u(d.outlet.component,l))}else l&&tp(e,d,i),i.canActivateChecks.push(new ep(r)),kc(n,null,a.component?d?d.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),zn(a,(l,d)=>tp(l,t.getContext(d),i)),i}function tp(n,e,t){const r=Os(n),i=n.value;zn(r,(a,l)=>{tp(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new _u(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class eS{}function ib(n){return new Wn.y(e=>e.error(n))}class sb{constructor(e,t,r,i,a,l){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=l}recognize(){const e=Xf(this.urlTree.root,[],[],this.config.filter(l=>void 0===l.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Tt);if(null===t)return null;const r=new cl([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Tt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Yi(r,t),a=new Ac(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,r=ll(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const a of Object.keys(t.children)){const l=t.children[a],d=gh(e,a),p=this.processSegmentGroup(d,l,a);if(null===p)return null;r.push(...p)}const i=Lc(r);return function nS(n){n.sort((e,t)=>e.value.outlet===Tt?-1:t.value.outlet===Tt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const a of e){const l=this.processSegmentAgainstRoute(a,t,r,i);if(null!==l)return l}return K(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!M(e,t,r,i))return null;let a,l=[],d=[];if("**"===e.path){const F=r.length>0?ol(r).parameters:{};a=new cl(r,F,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ev(e),fs(e),e.component,e,sS(t),oS(t)+r.length,aS(e))}else{const F=yh(t,e,r);if(!F.matched)return null;l=F.consumedSegments,d=r.slice(F.lastChild),a=new cl(l,F.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ev(e),fs(e),e.component,e,sS(t),oS(t)+l.length,aS(e))}const p=function rS(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:_,slicedSegments:I}=Xf(t,l,d,p.filter(F=>void 0===F.redirectTo),this.relativeLinkResolution);if(0===I.length&&_.hasChildren()){const F=this.processChildren(p,_);return null===F?null:[new Yi(a,F)]}if(0===p.length&&0===I.length)return[new Yi(a,[])];const D=fs(e)===i,x=this.processSegment(p,_,I,D?Tt:i);return null===x?null:[new Yi(a,x)]}}function iS(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Lc(n){const e=[],t=new Set;for(const r of n){if(!iS(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Lc(r.children);e.push(new Yi(r.value,i))}return e.filter(r=>!t.has(r))}function sS(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function oS(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function ev(n){return n.data||{}}function aS(n){return n.resolve||{}}function Vc(n){return Zt(e=>{const t=n(e);return t?(0,In.D)(t).pipe((0,It.U)(()=>e)):dt(e)})}class rv extends class ub{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const rp=new f.OlP("ROUTES");class iv{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,It.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const l=a.create(e);return new lm(sl(l.injector.get(rp,void 0,f.XFs.Self|f.XFs.Optional)).map(Qf),l)}),fi(a=>{throw t._loader$=void 0,a}));return t._loader$=new ou(i,()=>new as.x).pipe(Ro()),t._loader$}loadModuleFactory(e){return qr(e()).pipe((0,Vn.z)(t=>t instanceof f.YKP?dt(t):(0,In.D)(this.compiler.compileModuleAsync(t))))}}class _h{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function sv(n){throw n}function lb(n,e,t){return e.parse("/")}function cb(n,e){return dt(null)}const ov={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},lS={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Qi=(()=>{class n{constructor(t,r,i,a,l,d,p){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=p,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new as.x,this.errorHandler=sv,this.malformedUriErrorHandler=lb,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:cb,afterPreactivation:cb},this.urlHandlingStrategy=new _h,this.routeReuseStrategy=new rv,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=l.get(f.h0i),this.console=l.get(f.c2e);const D=l.get(f.R0b);this.isNgZoneEnabled=D instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(p),this.currentUrlTree=function Ms(){return new B(new Z([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new iv(l,d,x=>this.triggerEvent(new ga(x)),x=>this.triggerEvent(new uu(x))),this.routerState=oh(this.currentUrlTree,this.rootComponentType),this.transitions=new di({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(ki(i=>0!==i.id),(0,It.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Zt(i=>{let a=!1,l=!1;return dt(i).pipe((0,bi.b)(d=>{this.currentNavigation={id:d.id,initialUrl:d.currentRawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Zt(d=>{const p=this.browserUrlTree.toString(),_=!this.navigated||d.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||_)&&this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return mm(d.source)&&(this.browserUrlTree=d.extractedUrl),dt(d).pipe(Zt(D=>{const x=this.transitions.getValue();return r.next(new Yn(D.id,this.serializeUrl(D.extractedUrl),D.source,D.restoredState)),x!==this.transitions.getValue()?ls.E:Promise.resolve(D)}),function Jf(n,e,t,r){return Zt(i=>function Ti(n,e,t,r,i){return new va(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,It.U)(a=>Object.assign(Object.assign({},i),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,bi.b)(D=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:D.urlAfterRedirects})}),function wa(n,e,t,r,i){return(0,Vn.z)(a=>function tS(n,e,t,r,i="emptyOnly",a="legacy"){try{const l=new sb(n,e,t,r,i,a).recognize();return null===l?ib(new eS):dt(l)}catch(l){return ib(l)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),r,i).pipe((0,It.U)(l=>Object.assign(Object.assign({},a),{targetSnapshot:l}))))}(this.rootComponentType,this.config,D=>this.serializeUrl(D),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,bi.b)(D=>{if("eager"===this.urlUpdateStrategy){if(!D.extras.skipLocationChange){const F=this.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);this.setBrowserUrl(F,D)}this.browserUrlTree=D.urlAfterRedirects}const x=new Tc(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);r.next(x)}));if(_&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:x,extractedUrl:F,source:j,restoredState:ee,extras:ne}=d,je=new Yn(x,this.serializeUrl(F),j,ee);r.next(je);const Ye=oh(F,this.rootComponentType).snapshot;return dt(Object.assign(Object.assign({},d),{targetSnapshot:Ye,urlAfterRedirects:F,extras:Object.assign(Object.assign({},ne),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=d.rawUrl,d.resolve(null),ls.E}),Vc(d=>{const{targetSnapshot:p,id:_,extractedUrl:I,rawUrl:D,extras:{skipLocationChange:x,replaceUrl:F}}=d;return this.hooks.beforePreactivation(p,{navigationId:_,appliedUrlTree:I,rawUrlTree:D,skipLocationChange:!!x,replaceUrl:!!F})}),(0,bi.b)(d=>{const p=new Ii(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(p)}),(0,It.U)(d=>Object.assign(Object.assign({},d),{guards:fm(d.targetSnapshot,d.currentSnapshot,this.rootContexts)})),function np(n,e){return(0,Vn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?dt(Object.assign(Object.assign({},t),{guardsResult:!0})):function KD(n,e,t,r){return(0,In.D)(n).pipe((0,Vn.z)(i=>function JD(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?dt(a.map(d=>{const p=Ea(d,e,i);let _;if(function dm(n){return n&&_a(n.canDeactivate)}(p))_=qr(p.canDeactivate(n,e,t,r));else{if(!_a(p))throw new Error("Invalid CanDeactivate guard");_=qr(p(n,e,t,r))}return _.pipe(Rs())})).pipe(xc()):dt(!0)}(i.component,i.route,t,e,r)),Rs(i=>!0!==i,!0))}(l,r,i,n).pipe((0,Vn.z)(d=>d&&function Kf(n){return"boolean"==typeof n}(d)?function ZD(n,e,t,r){return(0,In.D)(e).pipe(vn(i=>Ao(function QD(n,e){return null!==n&&e&&e(new nh(n)),dt(!0)}(i.route.parent,r),function YD(n,e){return null!==n&&e&&e(new rh(n)),dt(!0)}(i.route,r),function rb(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function pm(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Xd(()=>dt(l.guards.map(p=>{const _=Ea(p,l.node,t);let I;if(function cm(n){return n&&_a(n.canActivateChild)}(_))I=qr(_.canActivateChild(r,n));else{if(!_a(_))throw new Error("Invalid CanActivateChild guard");I=qr(_(r,n))}return I.pipe(Rs())})).pipe(xc())));return dt(a).pipe(xc())}(n,i.path,t),function XD(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return dt(!0);const i=r.map(a=>Xd(()=>{const l=Ea(a,e,t);let d;if(function nb(n){return n&&_a(n.canActivate)}(l))d=qr(l.canActivate(e,n));else{if(!_a(l))throw new Error("Invalid CanActivate guard");d=qr(l(e,n))}return d.pipe(Rs())}));return dt(i).pipe(xc())}(n,i.route,t))),Rs(i=>!0!==i,!0))}(r,a,n,e):dt(d)),(0,It.U)(d=>Object.assign(Object.assign({},t),{guardsResult:d})))})}(this.ngModule.injector,d=>this.triggerEvent(d)),(0,bi.b)(d=>{if(Po(d.guardsResult)){const _=Sc(`Redirecting to "${this.serializeUrl(d.guardsResult)}"`);throw _.url=d.guardsResult,_}const p=new cs(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.triggerEvent(p)}),ki(d=>!!d.guardsResult||(this.restoreHistory(d),this.cancelNavigationTransition(d,""),!1)),Vc(d=>{if(d.guards.canActivateChecks.length)return dt(d).pipe((0,bi.b)(p=>{const _=new th(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}),Zt(p=>{let _=!1;return dt(p).pipe(function tv(n,e){return(0,Vn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return dt(t);let a=0;return(0,In.D)(i).pipe(vn(l=>function nv(n,e,t,r){return function uS(n,e,t,r){const i=Object.keys(n);if(0===i.length)return dt({});const a={};return(0,In.D)(i).pipe((0,Vn.z)(l=>function ob(n,e,t,r){const i=Ea(n,e,r);return qr(i.resolve?i.resolve(e,t):i(e,t))}(n[l],e,t,r).pipe((0,bi.b)(d=>{a[l]=d}))),rl(1),(0,Vn.z)(()=>Object.keys(a).length===i.length?dt(a):ls.E))}(n._resolve,n,e,r).pipe((0,It.U)(a=>(n._resolvedData=a,n.data=Object.assign(Object.assign({},n.data),ll(n,t).resolve),null)))}(l.route,r,n,e)),(0,bi.b)(()=>a++),rl(1),(0,Vn.z)(l=>a===i.length?dt(t):ls.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,bi.b)({next:()=>_=!0,complete:()=>{_||(this.restoreHistory(p),this.cancelNavigationTransition(p,"At least one route resolver didn't emit any value."))}}))}),(0,bi.b)(p=>{const _=new pa(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}))}),Vc(d=>{const{targetSnapshot:p,id:_,extractedUrl:I,rawUrl:D,extras:{skipLocationChange:x,replaceUrl:F}}=d;return this.hooks.afterPreactivation(p,{navigationId:_,appliedUrlTree:I,rawUrlTree:D,skipLocationChange:!!x,replaceUrl:!!F})}),(0,It.U)(d=>{const p=function q_(n,e,t){const r=dl(n,e._root,t?t._root:void 0);return new rm(r,e)}(this.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return Object.assign(Object.assign({},d),{targetRouterState:p})}),(0,bi.b)(d=>{this.currentUrlTree=d.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),this.routerState=d.targetRouterState,"deferred"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,d),this.browserUrlTree=d.urlAfterRedirects)}),((n,e,t)=>(0,It.U)(r=>(new um(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,d=>this.triggerEvent(d)),(0,bi.b)({next(){a=!0},complete(){a=!0}}),function il(n){return(0,Hn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var d;a||l||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(d=this.currentNavigation)||void 0===d?void 0:d.id)===i.id&&(this.currentNavigation=null)}),fi(d=>{if(l=!0,function Jg(n){return n&&n[Dc]}(d)){const p=Po(d.url);p||(this.navigated=!0,this.restoreHistory(i,!0));const _=new fa(i.id,this.serializeUrl(i.extractedUrl),d.message);r.next(_),p?setTimeout(()=>{const I=this.urlHandlingStrategy.merge(d.url,this.rawUrlTree),D={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||mm(i.source)};this.scheduleNavigation(I,"imperative",null,D,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const p=new X0(i.id,this.serializeUrl(i.extractedUrl),d);r.next(p);try{i.resolve(this.errorHandler(d))}catch(_){i.reject(_)}}return ls.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const a={replaceUrl:!0},l=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(l){const p=Object.assign({},l);delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(a.state=p)}const d=this.parseUrl(t.url);this.scheduleNavigation(d,r,l,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Nc(t),this.config=t.map(Qf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:d,preserveFragment:p}=r,_=i||this.routerState.root,I=p?this.currentUrlTree.fragment:l;let D=null;switch(d){case"merge":D=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=a||null}return null!==D&&(D=this.removeEmptyProps(D)),function W_(n,e,t,r,i){if(0===t.length)return im(e.root,e.root,e,r,i);const a=function om(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new sm(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const d={};return zn(a.outlets,(p,_)=>{d[_]="string"==typeof p?p.split("/"):p}),[...i,{outlets:d}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((d,p)=>{0==p&&"."===d||(0==p&&""===d?t=!0:".."===d?e++:""!=d&&i.push(d))}),i):[...i,a]},[]);return new sm(t,e,r)}(t);if(a.toRoot())return im(e.root,new Z([],{}),e,r,i);const l=function K_(n,e,t){if(n.isAbsolute)return new fl(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new fl(a,a===e.root,0)}const r=Wf(n.commands[0])?0:1;return function Z_(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new fl(r,!1,i-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(a,e,n),d=l.processChildren?dh(l.segmentGroup,l.index,a.commands):Q_(l.segmentGroup,l.index,a.commands);return im(l.segmentGroup,d,e,r,i)}(_,this.currentUrlTree,t,D,null!=I?I:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Po(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function cS(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},ov):!1===r?Object.assign({},lS):r,Po(t))return fu(this.currentUrlTree,t,i);const a=this.parseUrl(t);return fu(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new ha(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,l){var d,p,_;if(this.disposed)return Promise.resolve(!1);const I=this.transitions.value,D=mm(r)&&I&&!mm(I.source),x=I.rawUrl.toString()===t.toString(),F=I.id===(null===(d=this.currentNavigation)||void 0===d?void 0:d.id);if(D&&x&&F)return Promise.resolve(!0);let ee,ne,je;l?(ee=l.resolve,ne=l.reject,je=l.promise):je=new Promise((Ke,bt)=>{ee=Ke,ne=bt});const Ye=++this.navigationId;let We;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),We=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(p=this.browserPageId)&&void 0!==p?p:0:(null!==(_=this.browserPageId)&&void 0!==_?_:0)+1):We=0,this.setTransition({id:Ye,targetPageId:We,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:ee,reject:ne,promise:je,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),je.catch(Ke=>Promise.reject(Ke))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){var i,a;if("computed"===this.canceledNavigationResolution){const l=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===l?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===l&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(l)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new fa(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function mm(n){return"imperative"!==n}class ym{}class hb{preload(e,t){return dt(null)}}let cv=(()=>{class n{constructor(t,r,i,a){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new iv(i,r,p=>t.triggerEvent(new ga(p)),p=>t.triggerEvent(new uu(p)))}setUpPreloading(){this.subscription=this.router.events.pipe(ki(t=>t instanceof ha),vn(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(f.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const l=a._loadedConfig;i.push(this.processRoutes(l.module,l.routes))}else a.loadChildren&&!a.canLoad?i.push(this.preloadConfig(t,a)):a.children&&i.push(this.processRoutes(t,a.children));return(0,In.D)(i).pipe((0,da.J)(),(0,It.U)(a=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?dt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Vn.z)(a=>(r._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Qi),f.LFG(f.Sil),f.LFG(f.zs3),f.LFG(ym))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),_m=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Yn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ha&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof cu&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new cu(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const gl=new f.OlP("ROUTER_CONFIGURATION"),dv=new f.OlP("ROUTER_FORROOT_GUARD"),hS=[ot,{provide:Bt,useClass:zt},{provide:Qi,useFactory:function mb(n,e,t,r,i,a,l={},d,p){const _=new Qi(null,n,e,t,r,i,sl(a));return d&&(_.urlHandlingStrategy=d),p&&(_.routeReuseStrategy=p),function bm(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,_),l.enableTracing&&_.events.subscribe(I=>{var D,x;null===(D=console.group)||void 0===D||D.call(console,`Router Event: ${I.constructor.name}`),console.log(I.toString()),console.log(I),null===(x=console.groupEnd)||void 0===x||x.call(console)}),_},deps:[Bt,Mc,ot,f.zs3,f.Sil,rp,gl,[class XN{},new f.FiY],[class ab{},new f.FiY]]},Mc,{provide:ks,useFactory:function Im(n){return n.routerState.root},deps:[Qi]},cv,hb,class dS{preload(e,t){return t().pipe(fi(()=>dt(null)))}},{provide:gl,useValue:{enableTracing:!1}}];function vm(){return new f.PXZ("Router",Qi)}let Em=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[hS,wm(t),{provide:dv,useFactory:gb,deps:[[Qi,new f.FiY,new f.tp0]]},{provide:gl,useValue:r||{}},{provide:ye,useFactory:pb,deps:[se,[new f.tBr(Pe),new f.FiY],gl]},{provide:_m,useFactory:fb,deps:[Qi,sc,gl]},{provide:ym,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:hb},{provide:f.PXZ,multi:!0,useFactory:vm},[Cm,{provide:f.ip1,multi:!0,useFactory:hv,deps:[Cm]},{provide:Tm,useFactory:yb,deps:[Cm]},{provide:f.tb,multi:!0,useExisting:Tm}]]}}static forChild(t){return{ngModule:n,providers:[wm(t)]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(dv,8),f.LFG(Qi,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function fb(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new _m(n,e,t)}function pb(n,e,t={}){return t.useHash?new Be(n,e):new qe(n,e)}function gb(n){return"guarded"}function wm(n){return[{provide:f.deG,multi:!0,useValue:n},{provide:rp,multi:!0,useValue:n}]}let Cm=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new as.x}appInitializer(){return this.injector.get(W,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(d=>r=d),a=this.injector.get(Qi),l=this.injector.get(gl);return"disabled"===l.initialNavigation?(a.setUpLocationChangeListener(),r(!0)):"enabled"===l.initialNavigation||"enabledBlocking"===l.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?dt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),a.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(gl),i=this.injector.get(cv),a=this.injector.get(_m),l=this.injector.get(Qi),d=this.injector.get(f.z2F);t===d.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&l.initialNavigation(),i.setUpPreloading(),a.init(),l.resetRootComponentType(d.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function hv(n){return n.appInitializer.bind(n)}function yb(n){return n.bootstrapListener.bind(n)}const Tm=new f.OlP("Router Initializer");var _b=L(732),V=L(2090),Xi=L(9681),ho=L(1877),Fs=L(4859),Dm=L(4986),Tn=L(6351);function Sm(){return(0,Hn.e)((n,e)=>{let t,r=!1;n.subscribe(new Zn.Q(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function fv(n,e=us.y){return n=null!=n?n:vb,(0,Hn.e)((t,r)=>{let i,a=!0;t.subscribe(new Zn.Q(r,l=>{const d=e(l);(a||!n(i,d))&&(a=!1,i=d,r.next(l))}))})}function vb(n,e){return n===e}var wt,ni=L(2011),Ls=(L(5881),L(3942)),be=L(5861),Eb="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Eu={},pv=pv||{},Ht=Eb||self;function sp(){}function Am(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function op(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var jt="closure_uid_"+(1e9*Math.random()>>>0),wb=0;function bb(n,e,t){return n.call.apply(n.bind,arguments)}function Ib(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function ri(n,e,t){return(ri=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?bb:Ib).apply(null,arguments)}function ps(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function pi(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,a){for(var l=Array(arguments.length-2),d=2;d<arguments.length;d++)l[d-2]=arguments[d];return e.prototype[i].apply(r,l)}}function ml(){this.s=this.s,this.o=this.o}ml.prototype.s=!1,ml.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function fS(n){Object.prototype.hasOwnProperty.call(n,jt)&&n[jt]||(n[jt]=++wb)}(this)},ml.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ba=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function ap(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function mv(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Am(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let l=0;l<a;l++)n[i+l]=r[l]}else n.push(r)}}function gi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}gi.prototype.h=function(){this.defaultPrevented=!0};var tP=function(){if(!Ht.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ht.addEventListener("test",sp,e),Ht.removeEventListener("test",sp,e)}catch(t){}return n}();function up(n){return/^[\s\xa0]*$/.test(n)}var pS=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Eh(n,e){return n<e?-1:n>e?1:0}function Bc(){var n=Ht.navigator;return n&&(n=n.userAgent)?n:""}function fo(n){return-1!=Bc().indexOf(n)}function lp(n){return lp[" "](n),n}lp[" "]=sp;var Rm,n,nP=fo("Opera"),wh=fo("Trident")||fo("MSIE"),Cb=fo("Edge"),_v=Cb||wh,Tb=fo("Gecko")&&!(-1!=Bc().toLowerCase().indexOf("webkit")&&!fo("Edge"))&&!(fo("Trident")||fo("MSIE"))&&!fo("Edge"),Db=-1!=Bc().toLowerCase().indexOf("webkit")&&!fo("Edge");function gS(){var n=Ht.document;return n?n.documentMode:void 0}e:{var Sb="",xm=(n=Bc(),Tb?/rv:([^\);]+)(\)|;)/.exec(n):Cb?/Edge\/([\d\.]+)/.exec(n):wh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Db?/WebKit\/(\S+)/.exec(n):nP?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(xm&&(Sb=xm?xm[1]:""),wh){var Mm=gS();if(null!=Mm&&Mm>parseFloat(Sb)){Rm=String(Mm);break e}}Rm=Sb}var mS={};var rP=Ht.document&&wh&&(gS()||parseInt(Rm,10))||void 0;function Nm(n,e){if(gi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Tb){e:{try{lp(e.nodeName);var i=!0;break e}catch(a){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:iP[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Nm.X.h.call(this)}}pi(Nm,gi);var iP={2:"touch",3:"pen",4:"mouse"};Nm.prototype.h=function(){Nm.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Pm="closure_listenable_"+(1e6*Math.random()|0),sP=0;function oP(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++sP,this.ba=this.ea=!1}function Ev(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Rb(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function wu(n){const e={};for(const t in n)e[t]=n[t];return e}const Om="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xb(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<Om.length;a++)t=Om[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function cp(n){this.src=n,this.g={},this.h=0}function dp(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=ba(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(Ev(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function km(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ba&&a.listener==e&&a.capture==!!t&&a.ha==r)return i}return-1}cp.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=km(n,e,r,i);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new oP(e,this.src,a,!!r,i)).ea=t,n.push(e)),e};var hp="closure_lm_"+(1e6*Math.random()|0),wv={};function bu(n,e,t,r,i){if(r&&r.once)return Fm(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)bu(n,e[a],t,r,i);return null}return t=fp(t),n&&n[Pm]?n.N(e,t,op(r)?!!r.capture:!!r,i):bv(n,e,t,!1,r,i)}function bv(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=op(i)?!!i.capture:!!i,d=jc(n);if(d||(n[hp]=d=new cp(n)),(t=d.add(e,t,r,l,a)).proxy)return t;if(r=function _S(){const e=vS;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)tP||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Nb(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Fm(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)Fm(n,e[a],t,r,i);return null}return t=fp(t),n&&n[Pm]?n.O(e,t,op(r)?!!r.capture:!!r,i):bv(n,e,t,!0,r,i)}function Mb(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)Mb(n,e[a],t,r,i);else r=op(r)?!!r.capture:!!r,t=fp(t),n&&n[Pm]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=km(a=n.g[e],t,r,i))&&(Ev(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=jc(n))&&(e=n.g[e.toString()],n=-1,e&&(n=km(e,t,r,i)),(t=-1<n?e[n]:null)&&Lm(t))}function Lm(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Pm])dp(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Nb(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=jc(e))?(dp(t,n),0==t.h&&(t.src=null,e[hp]=null)):Ev(n)}}}function Nb(n){return n in wv?wv[n]:wv[n]="on"+n}function vS(n,e){if(n.ba)n=!0;else{e=new Nm(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&Lm(n),n=t.call(r,e)}return n}function jc(n){return(n=n[hp])instanceof cp?n:null}var yl="__closure_events_fn_"+(1e9*Math.random()>>>0);function fp(n){return"function"==typeof n?n:(n[yl]||(n[yl]=function(e){return n.handleEvent(e)}),n[yl])}function mr(){ml.call(this),this.i=new cp(this),this.P=this,this.I=null}function Or(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new gi(e,n);else if(e instanceof gi)e.target=e.target||n;else{var i=e;xb(e=new gi(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=Iu(l,r,!0,e)&&i}if(i=Iu(l=e.g=n,r,!0,e)&&i,i=Iu(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=Iu(l=e.g=t[a],r,!1,e)&&i}function Iu(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ba&&l.capture==t){var d=l.listener,p=l.ha||l.src;l.ea&&dp(n.i,l),i=!1!==d.call(p,r)&&i}}return i&&!r.defaultPrevented}pi(mr,ml),mr.prototype[Pm]=!0,mr.prototype.removeEventListener=function(n,e,t,r){Mb(this,n,e,t,r)},mr.prototype.M=function(){if(mr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Ev(t[r]);delete n.g[e],n.h--}}this.I=null},mr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},mr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Iv=Ht.JSON.stringify;function Pb(){var n=Dv;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Tv,Vm=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Cv,n=>n.reset());class Cv{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function kb(n){Ht.setTimeout(()=>{throw n},0)}function pp(n,e){Tv||function Fb(){var n=Ht.Promise.resolve(void 0);Tv=function(){n.then(Vb)}}(),Lb||(Tv(),Lb=!0),Dv.add(n,e)}var Lb=!1,Dv=new class Ob{constructor(){this.h=this.g=null}add(e,t){const r=Vm.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Vb(){for(var n;n=Pb();){try{n.h.call(n.g)}catch(t){kb(t)}var e=Vm;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Lb=!1}function Um(n,e){mr.call(this),this.h=n||1,this.g=e||Ht,this.j=ri(this.lb,this),this.l=Date.now()}function Bm(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function Sv(n,e,t){if("function"==typeof n)t&&(n=ri(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ri(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ht.setTimeout(n,e||0)}function Ub(n){n.g=Sv(()=>{n.g=null,n.i&&(n.i=!1,Ub(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}pi(Um,mr),(wt=Um.prototype).ca=!1,wt.R=null,wt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Or(this,"tick"),this.ca&&(Bm(this),this.start()))}},wt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},wt.M=function(){Um.X.M.call(this),Bm(this),delete this.g};class Vs extends ml{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ub(this)}M(){super.M(),this.g&&(Ht.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gp(n){ml.call(this),this.h=n,this.g={}}pi(gp,ml);var Bb=[];function ES(n,e,t,r){Array.isArray(t)||(t&&(Bb[0]=t.toString()),t=Bb);for(var i=0;i<t.length;i++){var a=bu(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function wS(n){Rb(n.g,function(e,t){this.g.hasOwnProperty(t)&&Lm(e)},n),n.g={}}function mp(){this.g=!0}function _l(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function IS(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return Iv(t)}catch(d){return e}}(n,t)+(r?" "+r:"")})}gp.prototype.M=function(){gp.X.M.call(this),wS(this)},gp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},mp.prototype.Aa=function(){this.g=!1},mp.prototype.info=function(){};var $c={},$b=null;function yp(){return $b=$b||new mr}function Hb(n){gi.call(this,$c.Pa,n)}function bh(n){const e=yp();Or(e,new Hb(e))}function Gb(n,e){gi.call(this,$c.STAT_EVENT,n),this.stat=e}function Ji(n){const e=yp();Or(e,new Gb(e,n))}function Av(n,e){gi.call(this,$c.Qa,n),this.size=e}function Ih(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ht.setTimeout(function(){n()},e)}$c.Pa="serverreachability",pi(Hb,gi),$c.STAT_EVENT="statevent",pi(Gb,gi),$c.Qa="timingevent",pi(Av,gi);var jm={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Oo={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function _p(){}function Wb(){}_p.prototype.h=null;var xv,$m={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Hm(){gi.call(this,"d")}function Rv(){gi.call(this,"c")}function Gm(){}function Hc(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new gp(this),this.O=CS,this.T=new Um(n=_v?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new zb}function zb(){this.i=null,this.g="",this.h=!1}pi(Hm,gi),pi(Rv,gi),pi(Gm,_p),Gm.prototype.g=function(){return new XMLHttpRequest},Gm.prototype.i=function(){return{}},xv=new Gm;var CS=45e3,Ch={},Th={};function Mv(n,e,t){n.K=1,n.v=El(Cu(e)),n.s=t,n.P=!0,qm(n,null)}function qm(n,e){n.F=Date.now(),vp(n),n.A=Cu(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),Xb(t.i,"t",r),n.C=0,t=n.l.H,n.h=new zb,n.g=Rp(n.l,t?e:null,!n.s),0<n.N&&(n.L=new Vs(ri(n.La,n,n.g),n.N)),ES(n.S,n.g,"readystatechange",n.ib),e=n.H?wu(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),bh(),function aP(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",d=a.split("&"),p=0;p<d.length;p++){var _=d[p].split("=");if(1<_.length){var I=_[0];_=_[1];var D=I.split("_");l=2<=D.length&&"type"==D[1]?l+(I+"=")+_+"&":l+(I+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function Wm(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function Nv(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=TS(n,t),i==Th){4==e&&(n.o=4,Ji(14),r=!1),_l(n.j,n.m,null,"[Incomplete Response]");break}if(i==Ch){n.o=4,Ji(15),_l(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}_l(n.j,n.m,i,null),Km(n,i)}Wm(n)&&i!=Th&&i!=Ch&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ji(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Zc(e),e.K=!0,Ji(11))):(_l(n.j,n.m,t,"[Invalid Chunked Response]"),vl(n),Ep(n))}function TS(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Th:(t=Number(e.substring(t,r)),isNaN(t)?Ch:(r+=1)+t>e.length?Th:(e=e.substr(r,t),n.C=r+t,e))}function vp(n){n.V=Date.now()+n.O,zm(n,n.O)}function zm(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Ih(ri(n.gb,n),e)}function Pv(n){n.B&&(Ht.clearTimeout(n.B),n.B=null)}function Ep(n){0==n.l.G||n.I||sy(n.l,n)}function vl(n){Pv(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Bm(n.T),wS(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Km(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Ip(t.h,n)))if(!n.J&&Ip(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch(_){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=Ih(ri(t.cb,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;iy(t),ny(t)}Gv(t),Ji(18)}if(1>=Us(t.h)&&t.ja){try{t.ja()}catch(_){}t.ja=void 0}}else Fo(t,11)}else if((n.J||t.g==n)&&iy(t),!up(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let _=i[e];if(t.T=_[0],_=_[1],2==t.G)if("c"==_[0]){t.I=_[1],t.ka=_[2];const I=_[3];null!=I&&(t.ma=I,t.j.info("VER="+t.ma));const D=_[4];null!=D&&(t.Ca=D,t.j.info("SVER="+t.Ca));const x=_[5];null!=x&&"number"==typeof x&&0<x&&(t.J=r=1.5*x,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const F=n.g;if(F){const j=F.g?F.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(j){var a=r.h;a.g||-1==j.indexOf("spdy")&&-1==j.indexOf("quic")&&-1==j.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(Ym(a,a.h),a.h=null))}if(r.D){const ee=F.g?F.g.getResponseHeader("X-HTTP-Session-Id"):null;ee&&(r.za=ee,Kn(r.F,r.D,ee))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=wl(r,r.H?r.ka:null,r.V),l.J){Bv(r.h,l);var d=l,p=r.J;p&&d.setTimeout(p),d.B&&(Pv(d),vp(d)),r.g=l}else Kc(r);0<t.i.length&&ry(t)}else"stop"!=_[0]&&"close"!=_[0]||Fo(t,7);else 3==t.G&&("stop"==_[0]||"close"==_[0]?"stop"==_[0]?Fo(t,7):Dp(t):"noop"!=_[0]&&t.l&&t.l.wa(_),t.A=0)}bh()}catch(_){}}function Ov(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Am(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Zb(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if("undefined"!=typeof Map&&n instanceof Map)return Array.from(n.keys());if(!("undefined"!=typeof Set&&n instanceof Set)){if(Am(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function Kb(n){if(n.W&&"function"==typeof n.W)return n.W();if("undefined"!=typeof Map&&n instanceof Map||"undefined"!=typeof Set&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Am(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(wt=Hc.prototype).setTimeout=function(n){this.O=n},wt.ib=function(n){n=n.target;const e=this.L;e&&3==Ca(n)?e.l():this.La(n)},wt.La=function(n){try{if(n==this.g)e:{const I=Ca(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>I)&&(3!=I||_v||this.g&&(this.h.h||this.g.fa()||sI(this.g)))){this.I||4!=I||7==e||bh(),Pv(this);var t=this.g.aa();this.Y=t;t:if(Wm(this)){var r=sI(this.g);n="";var i=r.length,a=4==Ca(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){vl(this),Ep(this);var l="";break t}this.h.i=new Ht.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function bS(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.U,I,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var d,p=this.g;if((d=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!up(d)){var _=d;break t}}_=null}if(!(t=_)){this.i=!1,this.o=3,Ji(12),vl(this),Ep(this);break e}_l(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Km(this,t)}this.P?(Nv(this,I,l),_v&&this.i&&3==I&&(ES(this.S,this.T,"tick",this.hb),this.T.start())):(_l(this.j,this.m,l,null),Km(this,l)),4==I&&vl(this),this.i&&!this.I&&(4==I?sy(this.l,this):(this.i=!1,vp(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Ji(12)):(this.o=0,Ji(13)),vl(this),Ep(this)}}}catch(I){}},wt.hb=function(){if(this.g){var n=Ca(this.g),e=this.g.fa();this.C<e.length&&(Pv(this),Nv(this,n,e),this.i&&4!=n&&vp(this))}},wt.cancel=function(){this.I=!0,vl(this)},wt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function jb(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(bh(),Ji(17)),vl(this),this.o=2,Ep(this)):zm(this,this.V-n)};var Ia=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Gc(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Gc){this.h=void 0!==e?e:n.h,kv(this,n.j),this.s=n.s,this.g=n.g,Dh(this,n.m),this.l=n.l,e=n.i;var t=new bp;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Fv(this,t),this.o=n.o}else n&&(t=String(n).match(Ia))?(this.h=!!e,kv(this,t[1]||"",!0),this.s=wp(t[2]||""),this.g=wp(t[3]||"",!0),Dh(this,t[4]),this.l=wp(t[5]||"",!0),Fv(this,t[6]||"",!0),this.o=wp(t[7]||"")):(this.h=!!e,this.i=new bp(null,this.h))}function Cu(n){return new Gc(n)}function kv(n,e,t){n.j=t?wp(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Dh(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Fv(n,e,t){e instanceof bp?(n.i=e,function Ah(n,e){e&&!n.j&&(Tu(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Wc(this,r),Xb(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=qc(e,Vv)),n.i=new bp(e,n.h))}function Kn(n,e,t){n.i.set(e,t)}function El(n){return Kn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function wp(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function qc(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Yb),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Yb(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Gc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(qc(e,Lv,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(qc(e,Lv,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(qc(t,"/"==t.charAt(0)?DS:Qb,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",qc(t,SS)),n.join("")};var Lv=/[#\/\?@]/g,Qb=/[#\?:]/g,DS=/[#\?]/g,Vv=/[#\?@]/g,SS=/#/g;function bp(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Tu(n){n.g||(n.g=new Map,n.h=0,n.i&&function Zm(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Wc(n,e){Tu(n),e=Sh(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Uv(n,e){return Tu(n),e=Sh(n,e),n.g.has(e)}function Xb(n,e,t){Wc(n,e),0<t.length&&(n.i=null,n.g.set(Sh(n,e),ap(t)),n.h+=t.length)}function Sh(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Jb(n){this.l=n||RS,n=Ht.PerformanceNavigationTiming?0<(n=Ht.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ht.g&&Ht.g.Ga&&Ht.g.Ga()&&Ht.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(wt=bp.prototype).add=function(n,e){Tu(this),this.i=null,n=Sh(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},wt.forEach=function(n,e){Tu(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},wt.oa=function(){Tu(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},wt.W=function(n){Tu(this);let e=[];if("string"==typeof n)Uv(this,n)&&(e=e.concat(this.g.get(Sh(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},wt.set=function(n,e){return Tu(this),this.i=null,Uv(this,n=Sh(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},wt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},wt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var i=a;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var RS=10;function eI(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Us(n){return n.h?1:n.g?n.g.size:0}function Ip(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Ym(n,e){n.g?n.g.add(e):n.h=e}function Bv(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function jv(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return ap(n.i)}function Qm(){}function xS(){this.g=new Qm}function MS(n,e,t){const r=t||"";try{Ov(n,function(i,a){let l=i;op(i)&&(l=Iv(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Xm(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(a){}}function Rh(n){this.l=n.ac||null,this.j=n.jb||!1}function $v(n,e){mr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Jm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Jb.prototype.cancel=function(){if(this.i=jv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Qm.prototype.stringify=function(n){return Ht.JSON.stringify(n,void 0)},Qm.prototype.parse=function(n){return Ht.JSON.parse(n,void 0)},pi(Rh,_p),Rh.prototype.g=function(){return new $v(this.l,this.j)},Rh.prototype.i=function(n){return function(){return n}}({}),pi($v,mr);var Jm=0;function tI(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Cp(n){n.readyState=4,n.l=null,n.j=null,n.A=null,ey(n)}function ey(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(wt=$v.prototype).open=function(n,e){if(this.readyState!=Jm)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,ey(this)},wt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ht).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},wt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Cp(this)),this.readyState=Jm},wt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,ey(this)),this.g&&(this.readyState=3,ey(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==Ht.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;tI(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},wt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Cp(this):ey(this),3==this.readyState&&tI(this)}},wt.Va=function(n){this.g&&(this.response=this.responseText=n,Cp(this))},wt.Ua=function(n){this.g&&(this.response=n,Cp(this))},wt.ga=function(){this.g&&Cp(this)},wt.setRequestHeader=function(n,e){this.v.append(n,e)},wt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},wt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty($v.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var uP=Ht.JSON.parse;function ar(n){mr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=nI,this.K=this.L=!1}pi(ar,mr);var nI="",rI=/^https?$/i,iI=["POST","PUT"];function po(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,PS(n),Tp(n)}function PS(n){n.D||(n.D=!0,Or(n,"complete"),Or(n,"error"))}function OS(n){if(n.h&&void 0!==pv&&(!n.C[1]||4!=Ca(n)||2!=n.aa()))if(n.v&&4==Ca(n))Sv(n.Ha,0,n);else if(Or(n,"readystatechange"),4==Ca(n)){n.h=!1;try{const d=n.aa();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===d){var i=String(n.H).match(Ia)[1]||null;if(!i&&Ht.self&&Ht.self.location){var a=Ht.self.location.protocol;i=a.substr(0,a.length-1)}r=!rI.test(i?i.toLowerCase():"")}t=r}if(t)Or(n,"complete"),Or(n,"success");else{n.m=6;try{var l=2<Ca(n)?n.g.statusText:""}catch(p){l=""}n.j=l+" ["+n.aa()+"]",PS(n)}}finally{Tp(n)}}}function Tp(n,e){if(n.g){Hv(n);const t=n.g,r=n.C[0]?sp:null;n.g=null,n.C=null,e||Or(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function Hv(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ht.clearTimeout(n.A),n.A=null)}function Ca(n){return n.g?n.g.readyState:0}function sI(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case nI:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function kS(n){let e="";return Rb(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function ty(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=kS(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Kn(n,e,t))}function zc(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function oI(n){this.Ca=0,this.i=[],this.j=new mp,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=zc("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=zc("baseRetryDelayMs",5e3,n),this.bb=zc("retryDelaySeedMs",1e4,n),this.$a=zc("forwardChannelMaxRetries",2,n),this.ta=zc("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new Jb(n&&n.concurrentRequestLimit),this.Fa=new xS,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Dp(n){if(aI(n),3==n.G){var e=n.U++,t=Cu(n.F);Kn(t,"SID",n.I),Kn(t,"RID",e),Kn(t,"TYPE","terminate"),Sp(n,t),(e=new Hc(n,n.j,e,void 0)).K=2,e.v=El(Cu(t)),t=!1,Ht.navigator&&Ht.navigator.sendBeacon&&(t=Ht.navigator.sendBeacon(e.v.toString(),"")),!t&&Ht.Image&&((new Image).src=e.v,t=!0),t||(e.g=Rp(e.l,null),e.g.da(e.v)),e.F=Date.now(),vp(e)}Di(n)}function ny(n){n.g&&(Zc(n),n.g.cancel(),n.g=null)}function aI(n){ny(n),n.u&&(Ht.clearTimeout(n.u),n.u=null),iy(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Ht.clearTimeout(n.m),n.m=null)}function ry(n){eI(n.h)||n.m||(n.m=!0,pp(n.Ja,n),n.C=0)}function uI(n,e){var t;t=e?e.m:n.U++;const r=Cu(n.F);Kn(r,"SID",n.I),Kn(r,"RID",t),Kn(r,"AID",n.T),Sp(n,r),n.o&&n.s&&ty(r,n.o,n.s),t=new Hc(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=Ap(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),Ym(n.h,t),Mv(t,r,e)}function Sp(n,e){n.ia&&Rb(n.ia,function(t,r){Kn(e,r,t)}),n.l&&Ov({},function(t,r){Kn(e,r,t)})}function Ap(n,e,t){t=Math.min(n.i.length,t);var r=n.l?ri(n.l.Ra,n.l,n):null;e:{var i=n.i;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let d=!0;for(let p=0;p<t;p++){let _=i[p].h;const I=i[p].g;if(_-=a,0>_)a=Math.max(0,i[p].h-100),d=!1;else try{MS(I,l,"req"+_+"_")}catch(D){r&&r(I)}}if(d){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function Kc(n){n.g||n.u||(n.Z=1,pp(n.Ia,n),n.A=0)}function Gv(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Ih(ri(n.Ia,n),ko(n,n.A)),n.A++,0))}function Zc(n){null!=n.B&&(Ht.clearTimeout(n.B),n.B=null)}function lI(n){n.g=new Hc(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Cu(n.sa);Kn(e,"RID","rpc"),Kn(e,"SID",n.I),Kn(e,"CI",n.L?"0":"1"),Kn(e,"AID",n.T),Kn(e,"TYPE","xmlhttp"),Sp(n,e),n.o&&n.s&&ty(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=El(Cu(e)),t.s=null,t.P=!0,qm(t,n)}function iy(n){null!=n.v&&(Ht.clearTimeout(n.v),n.v=null)}function sy(n,e){var t=null;if(n.g==e){iy(n),Zc(n),n.g=null;var r=2}else{if(!Ip(n.h,e))return;t=e.D,Bv(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Or(r=yp(),new Av(r,t)),ry(n)}else Kc(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function FS(n,e){return!(Us(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Ih(ri(n.Ja,n,e),ko(n,n.C)),n.C++,0)))}(n,e)||2==r&&Gv(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:Fo(n,5);break;case 4:Fo(n,10);break;case 3:Fo(n,6);break;default:Fo(n,2)}}function ko(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Fo(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=ri(n.kb,n);t||(t=new Gc("//www.google.com/images/cleardot.gif"),Ht.location&&"http"==Ht.location.protocol||kv(t,"https"),El(t)),function NS(n,e){const t=new mp;if(Ht.Image){const r=new Image;r.onload=ps(Xm,t,r,"TestLoadImage: loaded",!0,e),r.onerror=ps(Xm,t,r,"TestLoadImage: error",!1,e),r.onabort=ps(Xm,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=ps(Xm,t,r,"TestLoadImage: timeout",!1,e),Ht.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ji(2);n.G=0,n.l&&n.l.va(e),Di(n),aI(n)}function Di(n){if(n.G=0,n.la=[],n.l){const e=jv(n.h);(0!=e.length||0!=n.i.length)&&(mv(n.la,e),mv(n.la,n.i),n.h.i.length=0,ap(n.i),n.i.length=0),n.l.ua()}}function wl(n,e,t){var r=t instanceof Gc?Cu(t):new Gc(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Dh(r,r.m);else{var i=Ht.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new Gc(null,void 0);r&&kv(a,r),e&&(a.g=e),i&&Dh(a,i),t&&(a.l=t),r=a}return e=n.za,(t=n.D)&&e&&Kn(r,t,e),Kn(r,"VER",n.ma),Sp(n,r),r}function Rp(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ar(t&&n.Da&&!n.ra?new Rh({jb:!0}):n.ra)).Ka(n.H),e}function Bs(){}function xh(){if(wh&&!(10<=Number(rP)))throw Error("Environmental error: no available transport.")}function mi(n,e){mr.call(this),this.g=new oI(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!up(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!up(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Lo(this)}function Yc(n){Hm.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Qc(){Rv.call(this),this.status=1}function Lo(n){this.g=n}(wt=ar.prototype).Ka=function(n){this.L=n},wt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():xv.g(),this.C=function qb(n){return n.h||(n.h=n.i())}(this.u?this.u:xv),this.g.onreadystatechange=ri(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void po(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=Ht.FormData&&n instanceof Ht.FormData,!(0<=ba(iI,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,l]of t)this.g.setRequestHeader(a,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Hv(this),0<this.B&&((this.K=function lP(n){return wh&&function vv(){return function yv(n){var e=mS;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=pS(String(Rm)).split("."),t=pS("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=Eh(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||Eh(0==i[2].length,0==a[2].length)||Eh(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ri(this.qa,this)):this.A=Sv(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){po(this,a)}},wt.qa=function(){void 0!==pv&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Or(this,"timeout"),this.abort(8))},wt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Or(this,"complete"),Or(this,"abort"),Tp(this))},wt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Tp(this,!0)),ar.X.M.call(this)},wt.Ha=function(){this.s||(this.F||this.v||this.l?OS(this):this.fb())},wt.fb=function(){OS(this)},wt.aa=function(){try{return 2<Ca(this)?this.g.status:-1}catch(n){return-1}},wt.fa=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},wt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),uP(e)}},wt.Ea=function(){return this.m},wt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(wt=oI.prototype).ma=8,wt.G=1,wt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new Hc(this,this.j,n,void 0);let a=this.s;if(this.S&&(a?(a=wu(a),xb(a,this.S)):a=this.S),null!==this.o||this.N||(i.H=a,a=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Ap(this,i,e),Kn(t=Cu(this.F),"RID",n),Kn(t,"CVER",22),this.D&&Kn(t,"X-HTTP-Session-Id",this.D),Sp(this,t),a&&(this.N?e="headers="+encodeURIComponent(String(kS(a)))+"&"+e:this.o&&ty(t,this.o,a)),Ym(this.h,i),this.Ya&&Kn(t,"TYPE","init"),this.O?(Kn(t,"$req",e),Kn(t,"SID","null"),i.Z=!0,Mv(i,t,null)):Mv(i,t,e),this.G=2}}else 3==this.G&&(n?uI(this,n):0==this.i.length||eI(this.h)||uI(this))},wt.Ia=function(){if(this.u=null,lI(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Ih(ri(this.eb,this),n)}},wt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Ji(10),ny(this),lI(this))},wt.cb=function(){null!=this.v&&(this.v=null,ny(this),Gv(this),Ji(19))},wt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Ji(2)):(this.j.info("Failed to ping google.com"),Ji(1))},(wt=Bs.prototype).xa=function(){},wt.wa=function(){},wt.va=function(){},wt.ua=function(){},wt.Ra=function(){},xh.prototype.g=function(n,e){return new mi(n,e)},pi(mi,mr),mi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Ji(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=wl(n,null,n.V),ry(n)},mi.prototype.close=function(){Dp(this.g)},mi.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Iv(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&ry(e)},mi.prototype.M=function(){this.g.l=null,delete this.j,Dp(this.g),delete this.g,mi.X.M.call(this)},pi(Yc,Hm),pi(Qc,Rv),pi(Lo,Bs),Lo.prototype.xa=function(){Or(this.g,"a")},Lo.prototype.wa=function(n){Or(this.g,new Yc(n))},Lo.prototype.va=function(n){Or(this.g,new Qc)},Lo.prototype.ua=function(){Or(this.g,"b")},xh.prototype.createWebChannel=xh.prototype.g,mi.prototype.send=mi.prototype.u,mi.prototype.open=mi.prototype.m,mi.prototype.close=mi.prototype.close,jm.NO_ERROR=0,jm.TIMEOUT=8,jm.HTTP_ERROR=6,Oo.COMPLETE="complete",Wb.EventType=$m,$m.OPEN="a",$m.CLOSE="b",$m.ERROR="c",$m.MESSAGE="d",mr.prototype.listen=mr.prototype.N,ar.prototype.listenOnce=ar.prototype.O,ar.prototype.getLastError=ar.prototype.Oa,ar.prototype.getLastErrorCode=ar.prototype.Ea,ar.prototype.getStatus=ar.prototype.aa,ar.prototype.getResponseJson=ar.prototype.Sa,ar.prototype.getResponseText=ar.prototype.fa,ar.prototype.send=ar.prototype.da,ar.prototype.setWithCredentials=ar.prototype.Ka;var Mh=Eu.createWebChannelTransport=function(){return new xh},Nh=Eu.getStatEventTarget=function(){return yp()},bl=Eu.ErrorCode=jm,Ph=Eu.EventType=Oo,Oh=Eu.Event=$c,qv=Eu.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},cI=Eu.FetchXmlHttpFactory=Rh,xp=Eu.WebChannel=Wb,dI=Eu.XhrIo=ar;const Wv="@firebase/firestore";class ii{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ii.UNAUTHENTICATED=new ii(null),ii.GOOGLE_CREDENTIALS=new ii("google-credentials-uid"),ii.FIRST_PARTY=new ii("first-party-uid"),ii.MOCK_USER=new ii("mock-user");let Xc="9.14.0";const Du=new ho.Yd("@firebase/firestore");function oy(){return Du.logLevel}function Ue(n,...e){if(Du.logLevel<=ho.in.DEBUG){const t=e.map(ay);Du.debug(`Firestore (${Xc}): ${n}`,...t)}}function kr(n,...e){if(Du.logLevel<=ho.in.ERROR){const t=e.map(ay);Du.error(`Firestore (${Xc}): ${n}`,...t)}}function Il(n,...e){if(Du.logLevel<=ho.in.WARN){const t=e.map(ay);Du.warn(`Firestore (${Xc}): ${n}`,...t)}}function ay(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function ft(n="Unexpected state"){const e=`FIRESTORE (${Xc}) INTERNAL ASSERTION FAILED: `+n;throw kr(e),new Error(e)}function Ft(n,e){n||ft()}function nt(n,e){return n}const me={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Me extends V.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class si{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class VS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class US{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ii.UNAUTHENTICATED))}shutdown(){}}class zv{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Kv{constructor(e){this.t=e,this.currentUser=ii.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=_=>this.i!==i?(i=this.i,t(_)):Promise.resolve();let l=new si;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new si,e.enqueueRetryable(()=>a(this.currentUser))};const d=()=>{const _=l;e.enqueueRetryable((0,be.Z)(function*(){yield _.promise,yield a(r.currentUser)}))},p=_=>{Ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(_=>p(_)),setTimeout(()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?p(_):(Ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new si)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ft("string"==typeof r.accessToken),new VS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ft(null===e||"string"==typeof e),new ii(e)}}class BS{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=ii.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Ft(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class cP{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new BS(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(ii.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dP{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=a=>{null!=a.error&&Ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.A;return this.A=a.token,Ue("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.T.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.T.getImmediate({optional:!0});a?i(a):Ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ft("string"==typeof t.token),this.A=t.token,new jS(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function fI(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class $S{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=fI(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Gt(n,e){return n<e?-1:n>e?1:0}function Vo(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function pI(n){return n+"\0"}class Qn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Me(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Me(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Me(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Me(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Qn.fromMillis(Date.now())}static fromDate(e){return Qn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Qn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Gt(this.nanoseconds,e.nanoseconds):Gt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Lt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Lt(e)}static min(){return new Lt(new Qn(0,0))}static max(){return new Lt(new Qn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class kh{constructor(e,t,r){void 0===t?t=0:t>e.length&&ft(),void 0===r?r=e.length-t:r>e.length-t&&ft(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===kh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof kh?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class on extends kh{construct(e,t,r){return new on(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Me(me.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new on(t)}static emptyPath(){return new on([])}}const HS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yr extends kh{construct(e,t,r){return new yr(e,t,r)}static isValidIdentifier(e){return HS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new yr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Me(me.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const d=e[i];if("\\"===d){if(i+1===e.length)throw new Me(me.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new Me(me.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else"`"===d?(l=!l,i++):"."!==d||l?(r+=d,i++):(a(),i++)}if(a(),l)throw new Me(me.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yr(t)}static emptyPath(){return new yr([])}}class Xe{constructor(e){this.path=e}static fromPath(e){return new Xe(on.fromString(e))}static fromName(e){return new Xe(on.fromString(e).popFirst(5))}static empty(){return new Xe(on.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===on.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return on.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Xe(new on(e.slice()))}}class uy{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Zv(n){return n.fields.find(e=>2===e.kind)}function Jc(n){return n.fields.filter(e=>2!==e.kind)}uy.UNKNOWN_ID=-1;class Mp{constructor(e,t){this.fieldPath=e,this.kind=t}}class Fh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Fh(0,go.min())}}function Yv(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Lt.fromTimestamp(1e9===r?new Qn(t+1,0):new Qn(t,r));return new go(i,Xe.empty(),e)}function ly(n){return new go(n.readTime,n.key,-1)}class go{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new go(Lt.min(),Xe.empty(),-1)}static max(){return new go(Lt.max(),Xe.empty(),-1)}}function Np(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Xe.comparator(n.documentKey,e.documentKey),0!==t?t:Gt(n.largestBatchId,e.largestBatchId))}const gI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class WS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function mo(n){return cy.apply(this,arguments)}function cy(){return cy=(0,be.Z)(function*(n){if(n.code!==me.FAILED_PRECONDITION||n.message!==gI)throw n;Ue("LocalStore","Unexpectedly lost primary lease")}),cy.apply(this,arguments)}class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ft(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new le((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof le?t:le.resolve(t)}catch(t){return le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):le.reject(t)}static resolve(e){return new le((t,r)=>{t(e)})}static reject(e){return new le((t,r)=>{r(e)})}static waitFor(e){return new le((t,r)=>{let i=0,a=0,l=!1;e.forEach(d=>{++i,d.next(()=>{++a,l&&a===i&&t()},p=>r(p))}),l=!0,a===i&&t()})}static or(e){let t=le.resolve(!1);for(const r of e)t=t.next(i=>i?le.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new le((r,i)=>{const a=e.length,l=new Array(a);let d=0;for(let p=0;p<a;p++){const _=p;t(e[_]).next(I=>{l[_]=I,++d,d===a&&r(l)},I=>i(I))}})}static doWhile(e,t){return new le((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class Lh{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new si,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new ed(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=dy(r.target.error);this.P.reject(new ed(e,i))}}static open(e,t,r,i){try{return new Lh(t,e.transaction(i,r))}catch(a){throw new ed(t,a)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Ue("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new fP(t)}}class Uo{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Uo.D((0,V.z$)())&&kr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ue("SimpleDb","Removing database:",e),td(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,V.hl)())return!1;if(Uo.N())return!0;const e=(0,V.z$)(),t=Uo.D(e),r=0<t&&t<10,i=Uo.k(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static N(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,be.Z)(function*(){return t.db||(Ue("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new ed(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const d=l.target.error;i("VersionError"===d.name?new Me(me.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new Me(me.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new ed(e,d))},a.onupgradeneeded=l=>{Ue("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{Ue("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,be.Z)(function*(){const l="readonly"===t;let d=0;for(;;){++d;try{a.db=yield a.F(e);const p=Lh.open(a.db,e,l?"readonly":"readwrite",r),_=i(p).next(I=>(p.V(),I)).catch(I=>(p.abort(I),le.reject(I))).toPromise();return _.catch(()=>{}),yield p.v,_}catch(p){const _=p,I="FirebaseError"!==_.name&&d<3;if(Ue("SimpleDb","Transaction failed with error:",_.message,"Retrying:",I),a.close(),!I)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Qv{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return td(this.U.delete())}}class ed extends Me{constructor(e,t){super(me.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Su(n){return"IndexedDbTransactionError"===n.name}class fP{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ue("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ue("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),td(r)}add(e){return Ue("SimpleDb","ADD",this.store.name,e,e),td(this.store.add(e))}get(e){return td(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ue("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ue("SimpleDb","DELETE",this.store.name,e),td(this.store.delete(e))}count(){return Ue("SimpleDb","COUNT",this.store.name),td(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.H(i,(l,d)=>{a.push(d)}).next(()=>a)}{const i=this.store.getAll(r.range);return new le((a,l)=>{i.onerror=d=>{l(d.target.error)},i.onsuccess=d=>{a(d.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new le((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Y(e,t){Ue("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(a,l,d)=>d.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new le((r,i)=>{t.onerror=a=>{const l=dy(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(d=>{d?l.continue():r()}):r()}})}H(e,t){const r=[];return new le((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const d=l.target.result;if(!d)return void i();const p=new Qv(d),_=t(d.primaryKey,d.value,p);if(_ instanceof le){const I=_.catch(D=>(p.done(),le.reject(D)));r.push(I)}p.isDone?i():null===p.G?d.continue():d.continue(p.G)}}).next(()=>le.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function td(n){return new le((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=dy(r.target.error);t(i)}})}let Xv=!1;function dy(n){const e=Uo.D((0,V.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Xv||(Xv=!0,setTimeout(()=>{throw r},0)),r}}return n}class zS{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Ue("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,be.Z)(function*(){t.task=null;try{Ue("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Su(r)?Ue("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield mo(r)}yield t.nt(6e4)}))}}class mI{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,be.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,a=!0;return le.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Ue("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,i).next(d=>{i-=d,r.add(l)});a=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(i,a)).next(d=>(Ue("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,a)=>{const l=ly(a);Np(l,r)>0&&(r=l)}),new go(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Fi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function Jv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Cl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function hy(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Fi.at=-1;class _r{constructor(e,t){this.comparator=e,this.root=t||yi.EMPTY}insert(e,t){return new _r(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,yi.BLACK,null,null))}remove(e){return new _r(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fy(this.root,e,this.comparator,!1)}getReverseIterator(){return new fy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fy(this.root,e,this.comparator,!0)}}class fy{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yi{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=null!=r?r:yi.RED,this.left=null!=i?i:yi.EMPTY,this.right=null!=a?a:yi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new yi(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return yi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return yi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ft();const e=this.left.check();if(e!==this.right.check())throw ft();return e+(this.isRed()?0:1)}}yi.EMPTY=null,yi.RED=!0,yi.BLACK=!1,yi.EMPTY=new class{constructor(){this.size=0}get key(){throw ft()}get value(){throw ft()}get color(){throw ft()}get left(){throw ft()}get right(){throw ft()}copy(n,e,t,r,i){return this}insert(n,e,t){return new yi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Fn{constructor(e){this.comparator=e,this.data=new _r(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new py(this.data.getIterator())}getIteratorFrom(e){return new py(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Fn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Fn(this.comparator);return t.data=e,t}}class py{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Vh(n){return n.hasNext()?n.getNext():void 0}class js{constructor(e){this.fields=e,e.sort(yr.comparator)}static empty(){return new js([])}unionWith(e){let t=new Fn(yr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new js(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Vo(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class oi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new oi(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new oi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Gt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}oi.EMPTY_BYTE_STRING=new oi("");const eE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ta(n){if(Ft(!!n),"string"==typeof n){let e=0;const t=eE.exec(n);if(Ft(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:vr(n.seconds),nanos:vr(n.nanos)}}function vr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Tl(n){return"string"==typeof n?oi.fromBase64String(n):oi.fromUint8Array(n)}function gy(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function tE(n){const e=n.mapValue.fields.__previous_value__;return gy(e)?tE(e):e}function Uh(n){const e=Ta(n.mapValue.fields.__local_write_time__.timestampValue);return new Qn(e.seconds,e.nanos)}class yI{constructor(e,t,r,i,a,l,d,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.useFetchStreams=p}}class Au{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Au("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Au&&e.projectId===this.projectId&&e.database===this.database}}function Bh(n){return null==n}function my(n){return 0===n&&1/n==-1/0}function _I(n){return"number"==typeof n&&Number.isInteger(n)&&!my(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Dl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Pp={nullValue:"NULL_VALUE"};function nd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?gy(n)?4:rE(n)?9007199254740991:10:ft()}function Un(n,e){if(n===e)return!0;const t=nd(n);if(t!==nd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Uh(n).isEqual(Uh(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=Ta(r.timestampValue),l=Ta(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Tl(n.bytesValue).isEqual(Tl(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return vr(r.geoPointValue.latitude)===vr(i.geoPointValue.latitude)&&vr(r.geoPointValue.longitude)===vr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return vr(r.integerValue)===vr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=vr(r.doubleValue),l=vr(i.doubleValue);return a===l?my(a)===my(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return Vo(n.arrayValue.values||[],e.arrayValue.values||[],Un);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(Jv(a)!==Jv(l))return!1;for(const d in a)if(a.hasOwnProperty(d)&&(void 0===l[d]||!Un(a[d],l[d])))return!1;return!0}(n,e);default:return ft()}var i}function jh(n,e){return void 0!==(n.values||[]).find(t=>Un(t,e))}function Sl(n,e){if(n===e)return 0;const t=nd(n),r=nd(e);if(t!==r)return Gt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Gt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=vr(i.integerValue||i.doubleValue),d=vr(a.integerValue||a.doubleValue);return l<d?-1:l>d?1:l===d?0:isNaN(l)?isNaN(d)?0:-1:1}(n,e);case 3:return vI(n.timestampValue,e.timestampValue);case 4:return vI(Uh(n),Uh(e));case 5:return Gt(n.stringValue,e.stringValue);case 6:return function(i,a){const l=Tl(i),d=Tl(a);return l.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),d=a.split("/");for(let p=0;p<l.length&&p<d.length;p++){const _=Gt(l[p],d[p]);if(0!==_)return _}return Gt(l.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Gt(vr(i.latitude),vr(a.latitude));return 0!==l?l:Gt(vr(i.longitude),vr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],d=a.values||[];for(let p=0;p<l.length&&p<d.length;++p){const _=Sl(l[p],d[p]);if(_)return _}return Gt(l.length,d.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===Dl.mapValue&&a===Dl.mapValue)return 0;if(i===Dl.mapValue)return 1;if(a===Dl.mapValue)return-1;const l=i.fields||{},d=Object.keys(l),p=a.fields||{},_=Object.keys(p);d.sort(),_.sort();for(let I=0;I<d.length&&I<_.length;++I){const D=Gt(d[I],_[I]);if(0!==D)return D;const x=Sl(l[d[I]],p[_[I]]);if(0!==x)return x}return Gt(d.length,_.length)}(n.mapValue,e.mapValue);default:throw ft()}}function vI(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Gt(n,e);const t=Ta(n),r=Ta(e),i=Gt(t.seconds,r.seconds);return 0!==i?i:Gt(t.nanos,r.nanos)}function rd(n){return nE(n)}function nE(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Ta(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Tl(n.bytesValue).toBase64():"referenceValue"in n?Xe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=nE(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const d of i)l?l=!1:a+=",",a+=`${d}:${nE(r.fields[d])}`;return a+"}"}(n.mapValue):ft();var e}function Al(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function yy(n){return!!n&&"integerValue"in n}function Da(n){return!!n&&"arrayValue"in n}function EI(n){return!!n&&"nullValue"in n}function wI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Op(n){return!!n&&"mapValue"in n}function kp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Cl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=kp(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=kp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function rE(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function pP(n){return"nullValue"in n?Pp:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Al(Au.empty(),Xe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ft()}function bI(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Al(Au.empty(),Xe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Dl:ft()}function _y(n,e){const t=Sl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Bo(n,e){const t=Sl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Si{constructor(e){this.value=e}static empty(){return new Si({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Op(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=kp(t)}setAll(e){let t=yr.emptyPath(),r={},i=[];e.forEach((l,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,r,i),r={},i=[],t=d.popLast()}l?r[d.lastSegment()]=kp(l):i.push(d.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Op(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Un(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Op(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Cl(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Si(kp(this.value))}}function II(n){const e=[];return Cl(n.fields,(t,r)=>{const i=new yr([t]);if(Op(r)){const a=II(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new js(e)}class fn{constructor(e,t,r,i,a,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new fn(e,0,Lt.min(),Lt.min(),Si.empty(),0)}static newFoundDocument(e,t,r){return new fn(e,1,t,Lt.min(),r,0)}static newNoDocument(e,t){return new fn(e,2,t,Lt.min(),Si.empty(),0)}static newUnknownDocument(e,t){return new fn(e,3,t,Lt.min(),Si.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Si.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Si.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Lt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class jo{constructor(e,t=null,r=[],i=[],a=null,l=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=d,this.ht=null}}function yo(n,e=null,t=[],r=[],i=null,a=null,l=null){return new jo(n,e,t,r,i,a,l)}function Rl(n){const e=nt(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+rd(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Bh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>rd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>rd(r)).join(",")),e.ht=t}return e.ht}function Fp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!sE(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Un(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!aE(n.startAt,e.startAt)&&aE(n.endAt,e.endAt)}function vy(n){return Xe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Ey(n,e){return n.filters.filter(t=>t instanceof Fr&&t.field.isEqual(e))}function TI(n,e,t){let r=Pp,i=!0;for(const a of Ey(n,e)){let l=Pp,d=!0;switch(a.op){case"<":case"<=":l=pP(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,d=!1;break;case"!=":case"not-in":l=Pp}_y({value:r,inclusive:i},{value:l,inclusive:d})<0&&(r=l,i=d)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];_y({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function wy(n,e,t){let r=Dl,i=!0;for(const a of Ey(n,e)){let l=Dl,d=!0;switch(a.op){case">=":case">":l=bI(a.value),d=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,d=!1;break;case"!=":case"not-in":l=Dl}Bo({value:r,inclusive:i},{value:l,inclusive:d})>0&&(r=l,i=d)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];Bo({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class Fr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new ZS(e,t,r):"array-contains"===t?new SI(e,r):"in"===t?new by(e,r):"not-in"===t?new QS(e,r):"array-contains-any"===t?new AI(e,r):new Fr(e,t,r)}static lt(e,t,r){return"in"===t?new DI(e,r):new YS(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Sl(t,this.value)):null!==t&&nd(this.value)===nd(t)&&this.ft(Sl(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ft()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class ZS extends Fr{constructor(e,t,r){super(e,t,r),this.key=Xe.fromName(r.referenceValue)}matches(e){const t=Xe.comparator(e.key,this.key);return this.ft(t)}}class DI extends Fr{constructor(e,t){super(e,"in",t),this.keys=iE(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class YS extends Fr{constructor(e,t){super(e,"not-in",t),this.keys=iE(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function iE(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Xe.fromName(r.referenceValue))}class SI extends Fr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Da(t)&&jh(t.arrayValue,this.value)}}class by extends Fr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&jh(this.value.arrayValue,t)}}class QS extends Fr{constructor(e,t){super(e,"not-in",t)}matches(e){if(jh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!jh(this.value.arrayValue,t)}}class AI extends Fr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Da(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>jh(this.value.arrayValue,r))}}class Ru{constructor(e,t){this.position=e,this.inclusive=t}}class xl{constructor(e,t="asc"){this.field=e,this.dir=t}}function sE(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function oE(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?Xe.comparator(Xe.fromName(l.referenceValue),t.key):Sl(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function aE(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Un(n.position[t],e.position[t]))return!1;return!0}class Sa{constructor(e,t=null,r=[],i=[],a=null,l="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=d,this.endAt=p,this._t=null,this.wt=null}}function uE(n,e,t,r,i,a,l,d){return new Sa(n,e,t,r,i,a,l,d)}function id(n){return new Sa(n)}function lE(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Iy(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Cy(n){for(const e of n.filters)if(e.dt())return e.field;return null}function cE(n){return null!==n.collectionGroup}function $h(n){const e=nt(n);if(null===e._t){e._t=[];const t=Cy(e),r=Iy(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new xl(t)),e._t.push(new xl(yr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e._t.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new xl(yr.keyField(),a))}}}return e._t}function es(n){const e=nt(n);if(!e.wt)if("F"===e.limitType)e.wt=yo(e.path,e.collectionGroup,$h(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of $h(e))t.push(new xl(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Ru(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Ru(e.startAt.position,e.startAt.inclusive):null;e.wt=yo(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function Ty(n,e,t){return new Sa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Lp(n,e){return Fp(es(n),es(e))&&n.limitType===e.limitType}function RI(n){return`${Rl(es(n))}|lt:${n.limitType}`}function dE(n){return`Query(target=${function CI(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${rd(r.value)}`;var r}).join(", ")}]`),Bh(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>rd(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>rd(t)).join(",")),`Target(${e})`}(es(n))}; limitType=${n.limitType})`}function hE(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Xe.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const d=oE(i,a,l);return i.inclusive?d<=0:d<0}(t.startAt,$h(t),r)||t.endAt&&!function(i,a,l){const d=oE(i,a,l);return i.inclusive?d>=0:d>0}(t.endAt,$h(t),r)));var t,r}function xI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function MI(n){return(e,t)=>{let r=!1;for(const i of $h(n)){const a=XS(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function XS(n,e,t){const r=n.field.isKeyField()?Xe.comparator(e.key,t.key):function(i,a,l){const d=a.data.field(i),p=l.data.field(i);return null!==d&&null!==p?Sl(d,p):ft()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ft()}}function NI(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:my(e)?"-0":e}}function PI(n){return{integerValue:""+n}}function OI(n,e){return _I(e)?PI(e):NI(n,e)}class Dy{constructor(){this._=void 0}}function JS(n,e,t){return n instanceof sd?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Ml?fE(n,e):n instanceof Nl?pE(n,e):function(r,i){const a=kI(r,i),l=gE(a)+gE(r.yt);return yy(a)&&yy(r.yt)?PI(l):NI(r.It,l)}(n,e)}function eA(n,e,t){return n instanceof Ml?fE(n,e):n instanceof Nl?pE(n,e):t}function kI(n,e){return n instanceof od?yy(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class sd extends Dy{}class Ml extends Dy{constructor(e){super(),this.elements=e}}function fE(n,e){const t=mE(e);for(const r of n.elements)t.some(i=>Un(i,r))||t.push(r);return{arrayValue:{values:t}}}class Nl extends Dy{constructor(e){super(),this.elements=e}}function pE(n,e){let t=mE(e);for(const r of n.elements)t=t.filter(i=>!Un(i,r));return{arrayValue:{values:t}}}class od extends Dy{constructor(e,t){super(),this.It=e,this.yt=t}}function gE(n){return vr(n.integerValue||n.doubleValue)}function mE(n){return Da(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Hh{constructor(e,t){this.field=e,this.transform=t}}class LI{constructor(e,t){this.version=e,this.transformResults=t}}class xn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new xn}static exists(e){return new xn(void 0,e)}static updateTime(e){return new xn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Sy(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Ay{}function ad(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Gh(n.key,xn.none()):new ld(n.key,n.data,xn.none());{const t=n.data,r=Si.empty();let i=new Fn(yr.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);null===l&&a.length>1&&(a=a.popLast(),l=t.field(a)),null===l?r.delete(a):r.set(a,l),i=i.add(a)}return new Pl(n.key,r,new js(i.toArray()),xn.none())}}function gP(n,e,t){n instanceof ld?function(r,i,a){const l=r.value.clone(),d=VI(r.fieldTransforms,i,a.transformResults);l.setAll(d),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Pl?function(r,i,a){if(!Sy(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=VI(r.fieldTransforms,i,a.transformResults),d=i.data;d.setAll(xt(r)),d.setAll(l),i.convertToFoundDocument(a.version,d).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function ud(n,e,t,r){return n instanceof ld?function(i,a,l,d){if(!Sy(i.precondition,a))return l;const p=i.value.clone(),_=UI(i.fieldTransforms,d,a);return p.setAll(_),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof Pl?function(i,a,l,d){if(!Sy(i.precondition,a))return l;const p=UI(i.fieldTransforms,d,a),_=a.data;return _.setAll(xt(i)),_.setAll(p),a.convertToFoundDocument(a.version,_).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(I=>I.field))}(n,e,t,r):(l=t,Sy(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l);var a,l}function mP(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=kI(r.transform,i||null);null!=a&&(null===t&&(t=Si.empty()),t.set(r.field,a))}return t||null}function yE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Vo(t,r,(i,a)=>function FI(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Ml&&r instanceof Ml||t instanceof Nl&&r instanceof Nl?Vo(t.elements,r.elements,Un):t instanceof od&&r instanceof od?Un(t.yt,r.yt):t instanceof sd&&r instanceof sd);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class ld extends Ay{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Pl extends Ay{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function xt(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function VI(n,e,t){const r=new Map;Ft(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,d=e.data.field(a.field);r.set(a.field,eA(l,d,t[i]))}return r}function UI(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,JS(a,l,e))}return r}class Gh extends Ay{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qh extends Ay{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class tA{constructor(e){this.count=e}}var Er,an;function wr(n){switch(n){default:return ft();case me.CANCELLED:case me.UNKNOWN:case me.DEADLINE_EXCEEDED:case me.RESOURCE_EXHAUSTED:case me.INTERNAL:case me.UNAVAILABLE:case me.UNAUTHENTICATED:return!1;case me.INVALID_ARGUMENT:case me.NOT_FOUND:case me.ALREADY_EXISTS:case me.PERMISSION_DENIED:case me.FAILED_PRECONDITION:case me.ABORTED:case me.OUT_OF_RANGE:case me.UNIMPLEMENTED:case me.DATA_LOSS:return!0}}function nA(n){if(void 0===n)return kr("GRPC error has no .code"),me.UNKNOWN;switch(n){case Er.OK:return me.OK;case Er.CANCELLED:return me.CANCELLED;case Er.UNKNOWN:return me.UNKNOWN;case Er.DEADLINE_EXCEEDED:return me.DEADLINE_EXCEEDED;case Er.RESOURCE_EXHAUSTED:return me.RESOURCE_EXHAUSTED;case Er.INTERNAL:return me.INTERNAL;case Er.UNAVAILABLE:return me.UNAVAILABLE;case Er.UNAUTHENTICATED:return me.UNAUTHENTICATED;case Er.INVALID_ARGUMENT:return me.INVALID_ARGUMENT;case Er.NOT_FOUND:return me.NOT_FOUND;case Er.ALREADY_EXISTS:return me.ALREADY_EXISTS;case Er.PERMISSION_DENIED:return me.PERMISSION_DENIED;case Er.FAILED_PRECONDITION:return me.FAILED_PRECONDITION;case Er.ABORTED:return me.ABORTED;case Er.OUT_OF_RANGE:return me.OUT_OF_RANGE;case Er.UNIMPLEMENTED:return me.UNIMPLEMENTED;case Er.DATA_LOSS:return me.DATA_LOSS;default:return ft()}}(an=Er||(Er={}))[an.OK=0]="OK",an[an.CANCELLED=1]="CANCELLED",an[an.UNKNOWN=2]="UNKNOWN",an[an.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",an[an.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",an[an.NOT_FOUND=5]="NOT_FOUND",an[an.ALREADY_EXISTS=6]="ALREADY_EXISTS",an[an.PERMISSION_DENIED=7]="PERMISSION_DENIED",an[an.UNAUTHENTICATED=16]="UNAUTHENTICATED",an[an.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",an[an.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",an[an.ABORTED=10]="ABORTED",an[an.OUT_OF_RANGE=11]="OUT_OF_RANGE",an[an.UNIMPLEMENTED=12]="UNIMPLEMENTED",an[an.INTERNAL=13]="INTERNAL",an[an.UNAVAILABLE=14]="UNAVAILABLE",an[an.DATA_LOSS=15]="DATA_LOSS";class xu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Cl(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return hy(this.inner)}size(){return this.innerSize}}const rA=new _r(Xe.comparator);function gs(){return rA}const _E=new _r(Xe.comparator);function Wh(...n){let e=_E;for(const t of n)e=e.insert(t.key,t);return e}function vE(n){let e=_E;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function $o(){return Vp()}function BI(){return Vp()}function Vp(){return new xu(n=>n.toString(),(n,e)=>n.isEqual(e))}const iA=new _r(Xe.comparator),Up=new Fn(Xe.comparator);function Yt(...n){let e=Up;for(const t of n)e=e.add(t);return e}const sA=new Fn(Gt);function Ry(){return sA}class Ol{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,zh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Ol(Lt.min(),i,Ry(),gs(),Yt())}}class zh{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new zh(r,t,Yt(),Yt(),Yt())}}class Bp{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class EE{constructor(e,t){this.targetId=e,this.At=t}}class jI{constructor(e,t,r=oi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Kh{constructor(){this.Rt=0,this.bt=HI(),this.Pt=oi.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Yt(),t=Yt(),r=Yt();return this.bt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ft()}}),new zh(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=HI()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class jp{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=gs(),this.qt=$I(),this.Kt=new Fn(Gt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:ft()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const a=i.target;if(vy(a))if(0===r){const l=new Xe(a.path);this.jt(t,l,fn.newNoDocument(l,Lt.min()))}else Ft(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((a,l)=>{const d=this.Xt(l);if(d){if(a.current&&vy(d.target)){const p=new Xe(d.target.path);null!==this.Ut.get(p)||this.ee(l,p)||this.jt(l,p,fn.newNoDocument(p,e))}a.Dt&&(t.set(l,a.xt()),a.Nt())}});let r=Yt();this.qt.forEach((a,l)=>{let d=!0;l.forEachWhile(p=>{const _=this.Xt(p);return!_||2===_.purpose||(d=!1,!1)}),d&&(r=r.add(a))}),this.Ut.forEach((a,l)=>l.setReadTime(e));const i=new Ol(e,t,this.Kt,this.Ut,r);return this.Ut=gs(),this.qt=$I(),this.Kt=new Fn(Gt),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new Kh,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new Fn(Gt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Ue("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new Kh),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function $I(){return new _r(Xe.comparator)}function HI(){return new _r(Xe.comparator)}const oA={asc:"ASCENDING",desc:"DESCENDING"},GI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class qI{constructor(e,t){this.databaseId=e,this.gt=t}}function Zh(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function WI(n,e){return n.gt?e.toBase64():e.toUint8Array()}function zI(n,e){return Zh(n,e.toTimestamp())}function _i(n){return Ft(!!n),Lt.fromTimestamp(function(e){const t=Ta(e);return new Qn(t.seconds,t.nanos)}(n))}function wE(n,e){return(t=n,new on(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function aA(n){const e=on.fromString(n);return Ft(Ny(e)),e}function xy(n,e){return wE(n.databaseId,e.path)}function Mu(n,e){const t=aA(e);if(t.get(1)!==n.databaseId.projectId)throw new Me(me.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Me(me.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Xe(ZI(t))}function KI(n,e){return wE(n.databaseId,e)}function bE(n){const e=aA(n);return 4===e.length?on.emptyPath():ZI(e)}function kl(n){return new on(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ZI(n){return Ft(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function YI(n,e,t){return{name:xy(n,e),fields:t.value.mapValue.fields}}function IE(n,e,t){const r=Mu(n,e.name),i=_i(e.updateTime),a=new Si({mapValue:{fields:e.fields}}),l=fn.newFoundDocument(r,i,a);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function Hp(n,e){let t;if(e instanceof ld)t={update:YI(n,e.key,e.value)};else if(e instanceof Gh)t={delete:xy(n,e.key)};else if(e instanceof Pl)t={update:YI(n,e.key,e.data),updateMask:fA(e.fieldMask)};else{if(!(e instanceof qh))return ft();t={verify:xy(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof sd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ml)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Nl)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof od)return{fieldPath:a.field.canonicalString(),increment:l.yt};throw ft()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:zI(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ft()),t;var i}function CE(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?xn.updateTime(_i(i.updateTime)):void 0!==i.exists?xn.exists(i.exists):xn.none():xn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let d=null;"setToServerValue"in l?(Ft("REQUEST_TIME"===l.setToServerValue),d=new sd):"appendMissingElements"in l?d=new Ml(l.appendMissingElements.values||[]):"removeAllFromArray"in l?d=new Nl(l.removeAllFromArray.values||[]):"increment"in l?d=new od(a,l.increment):ft();const p=yr.fromServerFormat(l.fieldPath);return new Hh(p,d)}(n,i)):[];var i;if(e.update){const i=Mu(n,e.update.name),a=new Si({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new js((e.updateMask.fieldPaths||[]).map(_=>yr.fromServerFormat(_)));return new Pl(i,a,l,t,r)}return new ld(i,a,t,r)}if(e.delete){const i=Mu(n,e.delete);return new Gh(i,t)}if(e.verify){const i=Mu(n,e.verify);return new qh(i,t)}return ft()}function QI(n,e){return{documents:[KI(n,e.path)]}}function My(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=KI(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=KI(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(p){if(0===p.length)return;const _=p.map(I=>function(D){if("=="===D.op){if(wI(D.value))return{unaryFilter:{field:Yh(D.field),op:"IS_NAN"}};if(EI(D.value))return{unaryFilter:{field:Yh(D.field),op:"IS_NULL"}}}else if("!="===D.op){if(wI(D.value))return{unaryFilter:{field:Yh(D.field),op:"IS_NOT_NAN"}};if(EI(D.value))return{unaryFilter:{field:Yh(D.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yh(D.field),op:JI(D.op),value:D.value}}}(I));return 1===_.length?_[0]:{compositeFilter:{op:"AND",filters:_}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(p){if(0!==p.length)return p.map(_=>{return{field:Yh((I=_).field),direction:dA(I.dir)};var I})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=(_=e.limit,n.gt||Bh(_)?_:{value:_});var _,d,p;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt={before:!(p=e.endAt).inclusive,values:p.position}),t}function XI(n){let e=bE(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ft(1===r);const I=t.from[0];I.allDescendants?i=I.collectionId:e=e.child(I.collectionId)}let a=[];t.where&&(a=cd(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(I=>{return new xl(dd((D=I).field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));let d=null;t.limit&&(d=function(I){let D;return D="object"==typeof I?I.value:I,Bh(D)?null:D}(t.limit));let p=null;var I;t.startAt&&(p=new Ru((I=t.startAt).values||[],!!I.before));let _=null;return t.endAt&&(_=function(I){return new Ru(I.values||[],!I.before)}(t.endAt)),uE(e,i,l,a,d,"F",p,_)}function cd(n){return n?void 0!==n.unaryFilter?[eC(n)]:void 0!==n.fieldFilter?[hA(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>cd(e)).reduce((e,t)=>e.concat(t)):ft():[]}function dA(n){return oA[n]}function JI(n){return GI[n]}function Yh(n){return{fieldPath:n.canonicalString()}}function dd(n){return yr.fromServerFormat(n.fieldPath)}function hA(n){return Fr.create(dd(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ft()}}(n.fieldFilter.op),n.fieldFilter.value)}function eC(n){switch(n.unaryFilter.op){case"IS_NAN":const e=dd(n.unaryFilter.field);return Fr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=dd(n.unaryFilter.field);return Fr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=dd(n.unaryFilter.field);return Fr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=dd(n.unaryFilter.field);return Fr.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ft()}}function fA(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Ny(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function ts(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=TE(e)),e=tC(n.get(t),e);return TE(e)}function tC(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function TE(n){return n+"\x01\x01"}function Aa(n){const e=n.length;if(Ft(e>=2),2===e)return Ft("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),on.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&ft(),n.charAt(l+1)){case"\x01":const d=n.substring(a,l);let p;0===i.length?p=d:(i+=d,p=i,i=""),r.push(p);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:ft()}a=l+2}return new on(r)}const nC=["userId","batchId"];function Py(n,e){return[n,ts(e)]}function Oy(n,e,t){return[n,ts(e),t]}const pA={},rC=["prefixPath","collectionGroup","readTime","documentId"],gA=["prefixPath","collectionGroup","documentId"],mA=["collectionGroup","readTime","prefixPath","documentId"],yA=["canonicalId","targetId"],_A=["targetId","path"],vA=["path","targetId"],EA=["collectionId","parent"],wA=["indexId","uid"],bA=["uid","sequenceNumber"],iC=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],sC=["indexId","uid","orderedDocumentKey"],IA=["userId","collectionPath","documentId"],CA=["userId","collectionPath","largestBatchId"],oC=["userId","collectionGroup","largestBatchId"],aC=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],TA=[...aC,"documentOverlays"],uC=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ky=uC,DE=[...ky,"indexConfiguration","indexState","indexEntries"];class Fy extends WS{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Wr(n,e){const t=nt(n);return Uo.M(t.ie,e)}class SE{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&gP(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ud(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ud(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=BI();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let d=this.applyToLocalView(l,a.mutatedFields);d=t.has(i.key)?null:d;const p=ad(l,d);null!==p&&r.set(i.key,p),l.isValidDocument()||l.convertToNoDocument(Lt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Yt())}isEqual(e){return this.batchId===e.batchId&&Vo(this.mutations,e.mutations,(t,r)=>yE(t,r))&&Vo(this.baseMutations,e.baseMutations,(t,r)=>yE(t,r))}}class AE{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ft(e.mutations.length===r.length);let i=iA;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new AE(e,t,r,i)}}class Gp{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Fl{constructor(e,t,r,i,a=Lt.min(),l=Lt.min(),d=oi.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=d}withSequenceNumber(e){return new Fl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Fl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Fl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class RE{constructor(e){this.re=e}}function xE(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ly(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:xy(i=n.re,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:Zh(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ll(e.version)};else{if(!e.isUnknownDocument())return ft();r.unknownDocument={path:t.path.toArray(),version:Ll(e.version)}}var i,a;return r}function Ly(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ll(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Qh(n){const e=new Qn(n.seconds,n.nanoseconds);return Lt.fromTimestamp(e)}function hd(n,e){const t=(e.baseMutations||[]).map(a=>CE(n.re,a));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(l.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>CE(n.re,a)),i=Qn.fromMillis(e.localWriteTimeMs);return new SE(e.batchId,i,t,r)}function Nu(n){const e=Qh(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Qh(n.lastLimboFreeSnapshotVersion):Lt.min();let r;var i;return void 0!==n.query.documents?(Ft(1===(i=n.query).documents.length),r=es(id(bE(i.documents[0])))):r=es(XI(n.query)),new Fl(r,n.targetId,0,n.lastListenSequenceNumber,e,t,oi.fromBase64String(n.resumeToken))}function lC(n,e){const t=Ll(e.snapshotVersion),r=Ll(e.lastLimboFreeSnapshotVersion);let i;i=vy(e.target)?QI(n.re,e.target):My(n.re,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Rl(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Vl(n){const e=XI({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Ty(e,e.limit,"L"):e}function fd(n,e){return new Gp(e.largestBatchId,CE(n.re,e.overlayMutation))}function cC(n,e){const t=e.path.lastSegment();return[n,ts(e.path.popLast()),t]}function SA(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Ll(r.readTime),documentKey:ts(r.documentKey.path),largestBatchId:r.largestBatchId}}class dC{getBundleMetadata(e,t){return hC(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Qh(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return hC(e).put({bundleId:(r=t).id,createTime:Ll(_i(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return fC(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Vl(i.bundledQuery),readTime:Qh(i.readTime)};var i})}saveNamedQuery(e,t){return fC(e).put({name:(r=t).name,readTime:Ll(_i(r.readTime)),bundledQuery:r.bundledQuery});var r}}function hC(n){return Wr(n,"bundles")}function fC(n){return Wr(n,"namedQueries")}class Vy{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new Vy(e,t.uid||"")}getOverlay(e,t){return qp(e).get(cC(this.userId,t)).next(r=>r?fd(this.It,r):null)}getOverlays(e,t){const r=$o();return le.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const d=new Gp(t,l);i.push(this.ue(e,d))}),le.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(ts(l.getCollectionPath())));const a=[];return i.forEach(l=>{const d=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(qp(e).Y("collectionPathOverlayIndex",d))}),le.waitFor(a)}getOverlaysForCollection(e,t,r){const i=$o(),a=ts(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return qp(e).W("collectionPathOverlayIndex",l).next(d=>{for(const p of d){const _=fd(this.It,p);i.set(_.getKey(),_)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=$o();let l;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return qp(e).Z({index:"collectionGroupOverlayIndex",range:d},(p,_,I)=>{const D=fd(this.It,_);a.size()<i||D.largestBatchId===l?(a.set(D.getKey(),D),l=D.largestBatchId):I.done()}).next(()=>a)}ue(e,t){return qp(e).put(function(r,i,a){const[l,d,p]=cC(i,a.mutation.key);return{userId:i,collectionPath:d,documentId:p,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Hp(r.re,a.mutation)}}(this.It,this.userId,t))}}function qp(n){return Wr(n,"documentOverlays")}class Ul{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(vr(e.integerValue));else if("doubleValue"in e){const r=vr(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),my(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Tl(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?rE(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):ft()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),Xe.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function pC(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Uy(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=pC(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}Ul.Te=new Ul;class By{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=Uy(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=Uy(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Wp{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class AA{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class Xh{constructor(){this.Be=new By,this.Le=new Wp(this.Be),this.Ue=new AA(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Bl{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Bl(this.indexId,this.documentKey,this.arrayValue,r)}}function pd(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=gC(n.arrayValue,e.arrayValue),0!==t?t:(t=gC(n.directionalValue,e.directionalValue),0!==t?t:Xe.comparator(n.documentKey,e.documentKey)))}function gC(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class RA{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=Zv(e);if(void 0!==t&&!this.ze(t))return!1;const r=Jc(e);let i=0,a=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const l=r[i];if(!this.He(this.je,l)||!this.Je(this.Ge[a++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(a>=this.Ge.length||!this.Je(this.Ge[a++],l))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class ME{constructor(){this.Ye=new NE}addToCollectionParentIndex(e,t){return this.Ye.add(t),le.resolve()}getCollectionParents(e,t){return le.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return le.resolve()}deleteFieldIndex(e,t){return le.resolve()}getDocumentsMatchingTarget(e,t){return le.resolve(null)}getIndexType(e,t){return le.resolve(0)}getFieldIndexes(e,t){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,t){return le.resolve(go.min())}getMinOffsetFromCollectionGroup(e,t){return le.resolve(go.min())}updateCollectionGroup(e,t,r){return le.resolve()}updateIndexEntries(e,t){return le.resolve()}}class NE{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Fn(on.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Fn(on.comparator)).toArray()}}const PE=new Uint8Array(0);class xA{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new NE,this.Ze=new xu(r=>Rl(r),(r,i)=>Fp(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const a={collectionId:r,parent:ts(i)};return mC(e).put(a)}return le.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[pI(t),""],!1,!0);return mC(e).W(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(Aa(l.parent))}return r})}addFieldIndex(e,t){const r=zp(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var l;delete i.indexId;const a=r.add(i);if(t.indexState){const l=xa(e);return a.next(d=>{l.put(SA(d,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=zp(e),i=xa(e),a=Ra(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Ra(e);let i=!0;const a=new Map;return le.forEach(this.tn(t),l=>this.en(e,l).next(d=>{i&&(i=!!d),a.set(l,d)})).next(()=>{if(i){let l=Yt();const d=[];return le.forEach(a,(p,_)=>{var I;Ue("IndexedDbIndexManager",`Using index ${I=p,`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(We=>`${We.fieldPath}:${We.kind}`).join(",")}`} to execute ${Rl(t)}`);const D=function(We,Ke){const bt=Zv(Ke);if(void 0===bt)return null;for(const St of Ey(We,bt.fieldPath))switch(St.op){case"array-contains-any":return St.value.arrayValue.values||[];case"array-contains":return[St.value]}return null}(_,p),x=function(We,Ke){const bt=new Map;for(const St of Jc(Ke))for(const cn of Ey(We,St.fieldPath))switch(cn.op){case"==":case"in":bt.set(St.fieldPath.canonicalString(),cn.value);break;case"not-in":case"!=":return bt.set(St.fieldPath.canonicalString(),cn.value),Array.from(bt.values())}return null}(_,p),F=function(We,Ke){const bt=[];let St=!0;for(const cn of Jc(Ke)){const ai=0===cn.kind?TI(We,cn.fieldPath,We.startAt):wy(We,cn.fieldPath,We.startAt);bt.push(ai.value),St&&(St=ai.inclusive)}return new Ru(bt,St)}(_,p),j=function(We,Ke){const bt=[];let St=!0;for(const cn of Jc(Ke)){const ai=0===cn.kind?wy(We,cn.fieldPath,We.endAt):TI(We,cn.fieldPath,We.endAt);bt.push(ai.value),St&&(St=ai.inclusive)}return new Ru(bt,St)}(_,p),ee=this.nn(p,_,F),ne=this.nn(p,_,j),je=this.sn(p,_,x),Ye=this.rn(p.indexId,D,ee,F.inclusive,ne,j.inclusive,je);return le.forEach(Ye,We=>r.J(We,t.limit).next(Ke=>{Ke.forEach(bt=>{const St=Xe.fromSegments(bt.documentKey);l.has(St)||(l=l.add(St),d.push(St))})}))}).next(()=>d)}return le.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,a,l,d){const p=(null!=t?t.length:1)*Math.max(r.length,a.length),_=p/(null!=t?t.length:1),I=[];for(let D=0;D<p;++D){const x=t?this.on(t[D/_]):PE,F=this.un(e,x,r[D%_],i),j=this.cn(e,x,a[D%_],l),ee=d.map(ne=>this.un(e,x,ne,!0));I.push(...this.createRange(F,j,ee))}return I}un(e,t,r,i){const a=new Bl(e,Xe.empty(),t,r);return i?a:a.Ke()}cn(e,t,r,i){const a=new Bl(e,Xe.empty(),t,r);return i?a.Ke():a}en(e,t){const r=new RA(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const d of a)r.We(d)&&(!l||d.fields.length>l.fields.length)&&(l=d);return l})}getIndexType(e,t){let r=2;return le.forEach(this.tn(t),i=>this.en(e,i).next(a=>{a?0!==r&&a.fields.length<function(l){let d=new Fn(yr.comparator),p=!1;for(const _ of l.filters){const I=_;I.field.isKeyField()||("array-contains"===I.op||"array-contains-any"===I.op?p=!0:d=d.add(I.field))}for(const _ of l.orderBy)_.field.isKeyField()||(d=d.add(_.field));return d.size+(p?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new Xh;for(const i of Jc(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.qe(i.kind);Ul.Te.ce(a,l)}return r.$e()}on(e){const t=new Xh;return Ul.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new Xh;return Ul.Te.ce(Al(this.databaseId,t),r.qe(function(i){const a=Jc(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new Xh);let a=0;for(const l of Jc(e)){const d=r[a++];for(const p of i)if(this.ln(t,l.fieldPath)&&Da(d))i=this.fn(i,l,d);else{const _=p.qe(l.kind);Ul.Te.ce(d,_)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const d of i){const p=new Xh;p.seed(d.$e()),Ul.Te.ce(l,p.qe(t.kind)),a.push(p)}return a}ln(e,t){return!!e.filters.find(r=>r instanceof Fr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=zp(e),i=xa(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(a=>{const l=[];return le.forEach(a,d=>i.get([d.indexId,this.uid]).next(p=>{l.push(function(_,I){const D=I?new Fh(I.sequenceNumber,new go(Qh(I.readTime),new Xe(Aa(I.documentKey)),I.largestBatchId)):Fh.empty(),x=_.fields.map(([F,j])=>new Mp(yr.fromServerFormat(F),j));return new uy(_.indexId,_.collectionGroup,x,D)}(d,p))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Gt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=zp(e),a=xa(e);return this._n(e).next(l=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(d=>le.forEach(d,p=>a.put(SA(p.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return le.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?le.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(d=>(r.set(i.collectionGroup,d),le.forEach(d,p=>this.wn(e,i,p).next(_=>{const I=this.mn(a,p);return _.isEqual(I)?le.resolve():this.gn(e,a,p,_,I)}))))})}yn(e,t,r,i){return Ra(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return Ra(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=Ra(e);let a=new Fn(pd);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(l,d)=>{a=a.add(new Bl(r.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>a)}mn(e,t){let r=new Fn(pd);const i=this.an(t,e);if(null==i)return r;const a=Zv(t);if(null!=a){const l=e.data.field(a.fieldPath);if(Da(l))for(const d of l.arrayValue.values||[])r=r.add(new Bl(t.indexId,e.key,this.on(d),i))}else r=r.add(new Bl(t.indexId,e.key,PE,i));return r}gn(e,t,r,i,a){Ue("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(d,p,_,I,D){const x=d.getIterator(),F=p.getIterator();let j=Vh(x),ee=Vh(F);for(;j||ee;){let ne=!1,je=!1;if(j&&ee){const Ye=_(j,ee);Ye<0?je=!0:Ye>0&&(ne=!0)}else null!=j?je=!0:ne=!0;ne?(I(ee),ee=Vh(F)):je?(D(j),j=Vh(x)):(j=Vh(x),ee=Vh(F))}}(i,a,pd,d=>{l.push(this.yn(e,t,r,d))},d=>{l.push(this.pn(e,t,r,d))}),le.waitFor(l)}_n(e){let t=1;return xa(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,d)=>pd(l,d)).filter((l,d,p)=>!d||0!==pd(l,p[d-1]));const i=[];i.push(e);for(const l of r){const d=pd(l,e),p=pd(l,t);if(0===d)i[0]=e.Ke();else if(d>0&&p<0)i.push(l),i.push(l.Ke());else if(p>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2)a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,PE,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,PE,[]]));return a}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(MA)}getMinOffset(e,t){return le.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||ft())).next(MA)}}function mC(n){return Wr(n,"collectionParents")}function Ra(n){return Wr(n,"indexEntries")}function zp(n){return Wr(n,"indexConfiguration")}function xa(n){return Wr(n,"indexState")}function MA(n){Ft(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Np(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new go(e.readTime,e.documentKey,t)}const OE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ms{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ms(e,ms.DEFAULT_COLLECTION_PERCENTILE,ms.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function NA(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let d=0;const p=r.Z({range:l},(I,D,x)=>(d++,x.delete()));a.push(p.next(()=>{Ft(1===d)}));const _=[];for(const I of t.mutations){const D=Oy(e,I.key.path,t.batchId);a.push(i.delete(D)),_.push(I.key)}return le.waitFor(a).next(()=>_)}function Kp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ft();e=n.noDocument}return JSON.stringify(e).length}ms.DEFAULT_COLLECTION_PERCENTILE=10,ms.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ms.DEFAULT=new ms(41943040,ms.DEFAULT_COLLECTION_PERCENTILE,ms.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ms.DISABLED=new ms(-1,0,0);class kE{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){Ft(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new kE(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ma(e).Z({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=Jh(e),l=Ma(e);return l.add({}).next(d=>{Ft("number"==typeof d);const p=new SE(d,t,r,i),_=function(x,F,j){const ee=j.baseMutations.map(je=>Hp(x.re,je)),ne=j.mutations.map(je=>Hp(x.re,je));return{userId:F,batchId:j.batchId,localWriteTimeMs:j.localWriteTime.toMillis(),baseMutations:ee,mutations:ne}}(this.It,this.userId,p),I=[];let D=new Fn((x,F)=>Gt(x.canonicalString(),F.canonicalString()));for(const x of i){const F=Oy(this.userId,x.key.path,d);D=D.add(x.key.path.popLast()),I.push(l.put(_)),I.push(a.put(F,pA))}return D.forEach(x=>{I.push(this.indexManager.addToCollectionParentIndex(e,x))}),e.addOnCommittedListener(()=>{this.In[d]=p.keys()}),le.waitFor(I).next(()=>p)})}lookupMutationBatch(e,t){return Ma(e).get(t).next(r=>r?(Ft(r.userId===this.userId),hd(this.It,r)):null)}Tn(e,t){return this.In[t]?le.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Ma(e).Z({index:"userMutationsIndex",range:i},(l,d,p)=>{d.userId===this.userId&&(Ft(d.batchId>=r),a=hd(this.It,d)),p.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ma(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ma(e).W("userMutationsIndex",t).next(r=>r.map(i=>hd(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Py(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Jh(e).Z({range:i},(l,d,p)=>{const[_,I,D]=l,x=Aa(I);if(_===this.userId&&t.path.isEqual(x))return Ma(e).get(D).next(F=>{if(!F)throw ft();Ft(F.userId===this.userId),a.push(hd(this.It,F))});p.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Fn(Gt);const i=[];return t.forEach(a=>{const l=Py(this.userId,a.path),d=IDBKeyRange.lowerBound(l),p=Jh(e).Z({range:d},(_,I,D)=>{const[x,F,j]=_,ee=Aa(F);x===this.userId&&a.path.isEqual(ee)?r=r.add(j):D.done()});i.push(p)}),le.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=Py(this.userId,r),l=IDBKeyRange.lowerBound(a);let d=new Fn(Gt);return Jh(e).Z({range:l},(p,_,I)=>{const[D,x,F]=p,j=Aa(x);D===this.userId&&r.isPrefixOf(j)?j.length===i&&(d=d.add(F)):I.done()}).next(()=>this.En(e,d))}En(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Ma(e).get(a).next(l=>{if(null===l)throw ft();Ft(l.userId===this.userId),r.push(hd(this.It,l))}))}),le.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return NA(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),le.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return le.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Jh(e).Z({range:r},(a,l,d)=>{if(a[0]===this.userId){const p=Aa(a[1]);i.push(p)}else d.done()}).next(()=>{Ft(0===i.length)})})}containsKey(e,t){return FE(e,this.userId,t)}Rn(e){return yC(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function FE(n,e,t){const r=Py(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return Jh(n).Z({range:a,X:!0},(d,p,_)=>{const[I,D,x]=d;I===e&&D===i&&(l=!0),_.done()}).next(()=>l)}function Ma(n){return Wr(n,"mutations")}function Jh(n){return Wr(n,"documentMutations")}function yC(n){return Wr(n,"mutationQueues")}class gd{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new gd(0)}static vn(){return new gd(-1)}}class PA{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new gd(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Lt.fromTimestamp(new Qn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ef(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Ft(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return ef(e).Z((l,d)=>{const p=Nu(d);p.sequenceNumber<=t&&null===r.get(p.targetId)&&(i++,a.push(this.removeTargetData(e,p)))}).next(()=>le.waitFor(a)).next(()=>i)}forEachTarget(e,t){return ef(e).Z((r,i)=>{const a=Nu(i);t(a)})}Vn(e){return _C(e).get("targetGlobalKey").next(t=>(Ft(null!==t),t))}Sn(e,t){return _C(e).put("targetGlobalKey",t)}Dn(e,t){return ef(e).put(lC(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Rl(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return ef(e).Z({range:i,index:"queryTargetsIndex"},(l,d,p)=>{const _=Nu(d);Fp(t,_.target)&&(a=_,p.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=jl(e);return t.forEach(l=>{const d=ts(l.path);i.push(a.put({targetId:r,path:d})),i.push(this.referenceDelegate.addReference(e,r,l))}),le.waitFor(i)}removeMatchingKeys(e,t,r){const i=jl(e);return le.forEach(t,a=>{const l=ts(a.path);return le.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=jl(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=jl(e);let a=Yt();return i.Z({range:r,X:!0},(l,d,p)=>{const _=Aa(l[1]),I=new Xe(_);a=a.add(I)}).next(()=>a)}containsKey(e,t){const r=ts(t.path),i=IDBKeyRange.bound([r],[pI(r)],!1,!0);let a=0;return jl(e).Z({index:"documentTargetsIndex",X:!0,range:i},([l,d],p,_)=>{0!==l&&(a++,_.done())}).next(()=>a>0)}se(e,t){return ef(e).get(t).next(r=>r?Nu(r):null)}}function ef(n){return Wr(n,"targets")}function _C(n){return Wr(n,"targetGlobal")}function jl(n){return Wr(n,"targetDocuments")}function vC([n,e],[t,r]){const i=Gt(n,t);return 0===i?Gt(e,r):i}class OA{constructor(e){this.xn=e,this.buffer=new Fn(vC),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();vC(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class kA{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Ue("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,be.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Su(r)?Ue("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield mo(r)}yield t.Fn(3e5)}))}}class Zp{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return le.resolve(Fi.at);const r=new OA(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(OE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),OE):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,a,l,d,p,_;const I=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?(Ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),i=this.params.maximumSequenceNumbersToCollect):i=D,l=Date.now(),this.nthSequenceNumber(e,i))).next(D=>(r=D,d=Date.now(),this.removeTargets(e,r,t))).next(D=>(a=D,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(D=>(_=Date.now(),oy()<=ho.in.DEBUG&&Ue("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-I}ms\n\tDetermined least recently used ${i} in `+(d-l)+`ms\n\tRemoved ${a} targets in `+(p-d)+`ms\n\tRemoved ${D} documents in `+(_-p)+`ms\nTotal Duration: ${_-I}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:D})))}}class EC{constructor(e,t){this.db=e,this.garbageCollector=new Zp(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return Yp(e,r)}removeReference(e,t,r){return Yp(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Yp(e,t)}Gn(e,t){return function(r,i){let a=!1;return yC(r).tt(l=>FE(r,l,i).next(d=>(d&&(a=!0),le.resolve(!d)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Kn(e,(l,d)=>{if(d<=t){const p=this.Gn(e,l).next(_=>{if(!_)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Lt.min()),jl(e).delete([0,ts(l.path)])))});i.push(p)}}).next(()=>le.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Yp(e,t)}Kn(e,t){const r=jl(e);let i,a=Fi.at;return r.Z({index:"documentTargetsIndex"},([l,d],{path:p,sequenceNumber:_})=>{0===l?(a!==Fi.at&&t(new Xe(Aa(i)),a),a=_,i=p):a=Fi.at}).next(()=>{a!==Fi.at&&t(new Xe(Aa(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Yp(n,e){return jl(n).put((r=n.currentSequenceNumber,{targetId:0,path:ts(e.path),sequenceNumber:r}));var r}class LE{constructor(){this.changes=new xu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,fn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?le.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class wC{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return md(e).put(r)}removeEntry(e,t,r){return md(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],Ly(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=fn.newInvalidDocument(t);return md(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Qp(t))},(i,a)=>{r=this.jn(t,a)}).next(()=>r)}Wn(e,t){let r={size:0,document:fn.newInvalidDocument(t)};return md(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Qp(t))},(i,a)=>{r={document:this.jn(t,a),size:Kp(a)}}).next(()=>r)}getEntries(e,t){let r=gs();return this.zn(e,t,(i,a)=>{const l=this.jn(i,a);r=r.insert(i,l)}).next(()=>r)}Hn(e,t){let r=gs(),i=new _r(Xe.comparator);return this.zn(e,t,(a,l)=>{const d=this.jn(a,l);r=r.insert(a,d),i=i.insert(a,Kp(l))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return le.resolve();let i=new Fn(CC);t.forEach(p=>i=i.add(p));const a=IDBKeyRange.bound(Qp(i.first()),Qp(i.last())),l=i.getIterator();let d=l.getNext();return md(e).Z({index:"documentKeyIndex",range:a},(p,_,I)=>{const D=Xe.fromSegments([..._.prefixPath,_.collectionGroup,_.documentId]);for(;d&&CC(d,D)<0;)r(d,null),d=l.getNext();d&&d.isEqual(D)&&(r(d,_),d=l.hasNext()?l.getNext():null),d?I.j(Qp(d)):I.done()}).next(()=>{for(;d;)r(d,null),d=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),Ly(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return md(e).W(IDBKeyRange.bound(i,a,!0)).next(l=>{let d=gs();for(const p of l){const _=this.jn(Xe.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);d=d.insert(_.key,_)}return d})}getAllFromCollectionGroup(e,t,r,i){let a=gs();const l=IC(t,r),d=IC(t,go.max());return md(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,d,!0)},(p,_,I)=>{const D=this.jn(Xe.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);a=a.insert(D.key,D),a.size===i&&I.done()}).next(()=>a)}newChangeBuffer(e){return new FA(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return bC(e).get("remoteDocumentGlobalKey").next(t=>(Ft(!!t),t))}Qn(e,t){return bC(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function DA(n,e){let t;if(e.document)t=IE(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Xe.fromSegments(e.noDocument.path),i=Qh(e.noDocument.readTime);t=fn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ft();{const r=Xe.fromSegments(e.unknownDocument.path),i=Qh(e.unknownDocument.version);t=fn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Qn(r[0],r[1]);return Lt.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Lt.min()))return r}return fn.newInvalidDocument(e)}}function VE(n){return new wC(n)}class FA extends LE{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new xu(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Fn((a,l)=>Gt(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const d=this.Xn.get(a);if(t.push(this.Yn.removeEntry(e,a,d.readTime)),l.isValidDocument()){const p=xE(this.Yn.It,l);i=i.add(a.path.popLast()),r+=Kp(p)-d.size,t.push(this.Yn.addEntry(e,a,p))}else if(r-=d.size,this.trackRemovals){const p=xE(this.Yn.It,l.convertToNoDocument(Lt.min()));t.push(this.Yn.addEntry(e,a,p))}}),i.forEach(a=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Yn.updateMetadata(e,r)),le.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((a,l)=>{this.Xn.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function bC(n){return Wr(n,"remoteDocumentGlobal")}function md(n){return Wr(n,"remoteDocumentsV14")}function Qp(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function IC(n,e){const t=e.documentKey.path.toArray();return[n,Ly(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function CC(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Gt(t[a],r[a]),i)return i;return i=Gt(t.length,r.length),i||(i=Gt(t[t.length-2],r[r.length-2]),i||Gt(t[t.length-1],r[r.length-1]))}class LA{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class tf{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&ud(r.mutation,i,js.empty(),Qn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Yt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Yt()){const i=$o();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let l=Wh();return a.forEach((d,p)=>{l=l.insert(d,p.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=$o();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Yt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,d)=>{t.set(l,d)})})}computeViews(e,t,r,i){let a=gs();const l=Vp(),d=Vp();return t.forEach((p,_)=>{const I=r.get(_.key);i.has(_.key)&&(void 0===I||I.mutation instanceof Pl)?a=a.insert(_.key,_):void 0!==I&&(l.set(_.key,I.mutation.getFieldMask()),ud(I.mutation,_,I.mutation.getFieldMask(),Qn.now()))}),this.recalculateAndSaveOverlays(e,a).next(p=>(p.forEach((_,I)=>l.set(_,I)),t.forEach((_,I)=>{var D;return d.set(_,new LA(I,null!==(D=l.get(_))&&void 0!==D?D:null))}),d))}recalculateAndSaveOverlays(e,t){const r=Vp();let i=new _r((l,d)=>l-d),a=Yt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const d of l)d.keys().forEach(p=>{const _=t.get(p);if(null===_)return;let I=r.get(p)||js.empty();I=d.applyToLocalView(_,I),r.set(p,I);const D=(i.get(d.batchId)||Yt()).add(p);i=i.insert(d.batchId,D)})}).next(()=>{const l=[],d=i.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),_=p.key,I=p.value,D=BI();I.forEach(x=>{if(!a.has(x)){const F=ad(t.get(x),r.get(x));null!==F&&D.set(x,F),a=a.add(x)}}),l.push(this.documentOverlayCache.saveOverlays(e,_,D))}return le.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Xe.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):cE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):le.resolve($o());let d=-1,p=a;return l.next(_=>le.forEach(_,(I,D)=>(d<D.largestBatchId&&(d=D.largestBatchId),a.get(I)?le.resolve():this.getBaseDocument(e,I,D).next(x=>{p=p.insert(I,x)}))).next(()=>this.populateOverlays(e,_,a)).next(()=>this.computeViews(e,p,_,Yt())).next(I=>({batchId:d,changes:vE(I)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Xe(t)).next(r=>{let i=Wh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=Wh();return this.indexManager.getCollectionParents(e,i).next(l=>le.forEach(l,d=>{const p=(_=t,I=d.child(i),new Sa(I,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt));var _,I;return this.getDocumentsMatchingCollectionQuery(e,p,r).next(_=>{_.forEach((I,D)=>{a=a.insert(I,D)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(a=>{a.forEach((d,p)=>{const _=p.getKey();null===i.get(_)&&(i=i.insert(_,fn.newInvalidDocument(_)))});let l=Wh();return i.forEach((d,p)=>{const _=a.get(d);void 0!==_&&ud(_.mutation,p,js.empty(),Qn.now()),hE(t,p)&&(l=l.insert(d,p))}),l})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):le.resolve(fn.newInvalidDocument(t))}}class VA{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return le.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:_i(r.createTime)}),le.resolve()}getNamedQuery(e,t){return le.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:Vl(r.bundledQuery),readTime:_i(r.readTime)}),le.resolve();var r}}class UE{constructor(){this.overlays=new _r(Xe.comparator),this.es=new Map}getOverlay(e,t){return le.resolve(this.overlays.get(t))}getOverlays(e,t){const r=$o();return le.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.ue(e,t,a)}),le.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.es.delete(r)),le.resolve()}getOverlaysForCollection(e,t,r){const i=$o(),a=t.length+1,l=new Xe(t.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const p=d.getNext().value,_=p.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===a&&p.largestBatchId>r&&i.set(p.getKey(),p)}return le.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new _r((_,I)=>_-I);const l=this.overlays.getIterator();for(;l.hasNext();){const _=l.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>r){let I=a.get(_.largestBatchId);null===I&&(I=$o(),a=a.insert(_.largestBatchId,I)),I.set(_.getKey(),_)}}const d=$o(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((_,I)=>d.set(_,I)),!(d.size()>=i)););return le.resolve(d)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new Gp(t,r));let a=this.es.get(t);void 0===a&&(a=Yt(),this.es.set(t,a)),this.es.set(t,a.add(r.key))}}class _o{constructor(){this.ns=new Fn(vi.ss),this.rs=new Fn(vi.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new vi(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new vi(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Xe(new on([])),r=new vi(t,e),i=new vi(t,e+1),a=[];return this.rs.forEachInRange([r,i],l=>{this.cs(l),a.push(l.key)}),a}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Xe(new on([])),r=new vi(t,e),i=new vi(t,e+1);let a=Yt();return this.rs.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new vi(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class vi{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Xe.comparator(e.key,t.key)||Gt(e._s,t._s)}static os(e,t){return Gt(e._s,t._s)||Xe.comparator(e.key,t.key)}}class BE{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Fn(vi.ss)}checkEmpty(e){return le.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.ws;this.ws++;const l=new SE(a,t,r,i);this.mutationQueue.push(l);for(const d of i)this.gs=this.gs.add(new vi(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return le.resolve(l)}lookupMutationBatch(e,t){return le.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),a=i<0?0:i;return le.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new vi(t,0),i=new vi(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],l=>{const d=this.ys(l._s);a.push(d)}),le.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Fn(Gt);return t.forEach(i=>{const a=new vi(i,0),l=new vi(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([a,l],d=>{r=r.add(d._s)})}),le.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Xe.isDocumentKey(a)||(a=a.child(""));const l=new vi(new Xe(a),0);let d=new Fn(Gt);return this.gs.forEachWhile(p=>{const _=p.key.path;return!!r.isPrefixOf(_)&&(_.length===i&&(d=d.add(p._s)),!0)},l),le.resolve(this.Is(d))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ft(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return le.forEach(t.mutations,i=>{const a=new vi(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new vi(t,0),i=this.gs.firstAfterOrEqual(r);return le.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return le.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Xp{constructor(e){this.Es=e,this.docs=new _r(Xe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return le.resolve(r?r.document.mutableCopy():fn.newInvalidDocument(t))}getEntries(e,t){let r=gs();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():fn.newInvalidDocument(i))}),le.resolve(r)}getAllFromCollection(e,t,r){let i=gs();const a=new Xe(t.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:d,value:{document:p}}=l.getNext();if(!t.isPrefixOf(d.path))break;d.path.length>t.length+1||Np(ly(p),r)<=0||(i=i.insert(p.key,p.mutableCopy()))}return le.resolve(i)}getAllFromCollectionGroup(e,t,r,i){ft()}As(e,t){return le.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new UA(this)}getSize(e){return le.resolve(this.size)}}class UA extends LE{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),le.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class BA{constructor(e){this.persistence=e,this.Rs=new xu(t=>Rl(t),Fp),this.lastRemoteSnapshotVersion=Lt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new _o,this.targetCount=0,this.vs=gd.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),le.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new gd(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,le.resolve()}updateTargetData(e,t){return this.Dn(t),le.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Rs.forEach((l,d)=>{d.sequenceNumber<=t&&null===r.get(d.targetId)&&(this.Rs.delete(l),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),le.waitFor(a).next(()=>i)}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return le.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),le.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),le.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),le.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return le.resolve(r)}containsKey(e,t){return le.resolve(this.Ps.containsKey(t))}}class TC{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Fi(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new BA(this),this.indexManager=new ME,this.remoteDocumentCache=new Xp(r=>this.referenceDelegate.xs(r)),this.It=new RE(t),this.Ns=new VA(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new UE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new BE(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ue("MemoryPersistence","Starting transaction:",e);const i=new jy(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(a=>this.referenceDelegate.Os(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ms(e,t){return le.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class jy extends WS{constructor(e){super(),this.currentSequenceNumber=e}}class yd{constructor(e){this.persistence=e,this.Fs=new _o,this.$s=null}static Bs(e){return new yd(e)}get Ls(){if(this.$s)return this.$s;throw ft()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),le.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),le.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),le.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ls.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.Ls,r=>{const i=Xe.fromPath(r);return this.Us(e,i).next(a=>{a||t.removeEntry(i,Lt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return le.or([()=>le.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class jA{constructor(e){this.It=e}$(e,t,r,i){const a=new Lh("createOrUpgrade",t);var d;r<1&&i>=1&&(e.createObjectStore("owner"),(d=e).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",nC,{unique:!0}),d.createObjectStore("documentMutations"),DC(e),function(d){d.createObjectStore("remoteDocuments")}(e));let l=le.resolve();return r<3&&i>=3&&(0!==r&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(e),DC(e)),l=l.next(()=>function(d){const p=d.store("targetGlobal"),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Lt.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",_)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(d,p){return p.store("mutations").W().next(_=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",nC,{unique:!0});const I=p.store("mutations"),D=_.map(x=>I.put(x));return le.waitFor(D)})}(e,a))),l=l.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.qs(a))),r<6&&i>=6&&(l=l.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(a)))),r<7&&i>=7&&(l=l.next(()=>this.Gs(a))),r<8&&i>=8&&(l=l.next(()=>this.Qs(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.js(a))),r<11&&i>=11&&(l=l.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(d){const p=d.createObjectStore("documentOverlays",{keyPath:IA});p.createIndex("collectionPathOverlayIndex",CA,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",oC,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(d){const p=d.createObjectStore("remoteDocumentsV14",{keyPath:rC});p.createIndex("documentKeyIndex",gA),p.createIndex("collectionGroupIndex",mA)}(e)).next(()=>this.Ws(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.zs(e,a))),r<15&&i>=15&&(l=l.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:wA}).createIndex("sequenceNumberIndex",bA,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:iC}).createIndex("documentKeyIndex",sC,{unique:!1})}(e))),l}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=Kp(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>le.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(d=>le.forEach(d,p=>{Ft(p.userId===a.userId);const _=hd(this.It,p);return NA(e,a.userId,_).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Z((l,d)=>{const p=new on(l),_=[0,ts(p)];a.push(t.get(_).next(I=>I?le.resolve():t.put({targetId:0,path:ts(p),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>le.waitFor(a))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:EA});const r=t.store("collectionParents"),i=new NE,a=l=>{if(i.add(l)){const d=l.lastSegment(),p=l.popLast();return r.put({collectionId:d,parent:ts(p)})}};return t.store("remoteDocuments").Z({X:!0},(l,d)=>{const p=new on(l);return a(p.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([l,d,p],_)=>{const I=Aa(d);return a(I.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const a=Nu(i),l=lC(this.It,a);return t.put(l)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((a,l)=>{const d=t.store("remoteDocumentsV14"),p=(_=l,_.document?new Xe(on.fromString(_.document.name).popFirst(5)):_.noDocument?Xe.fromSegments(_.noDocument.path):_.unknownDocument?Xe.fromSegments(_.unknownDocument.path):ft()).path.toArray();var _;const I={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(d.put(I))}).next(()=>le.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=VE(this.It),a=new TC(yd.Bs,this.It.re);return r.W().next(l=>{const d=new Map;return l.forEach(p=>{var _;let I=null!==(_=d.get(p.userId))&&void 0!==_?_:Yt();hd(this.It,p).keys().forEach(D=>I=I.add(D)),d.set(p.userId,I)}),le.forEach(d,(p,_)=>{const I=new ii(_),D=Vy.oe(this.It,I),x=a.getIndexManager(I),F=kE.oe(I,this.It,x,a.referenceDelegate);return new tf(i,F,D,x).recalculateAndSaveOverlaysForDocumentKeys(new Fy(t,Fi.at),p).next()})})}}function DC(n){n.createObjectStore("targetDocuments",{keyPath:_A}).createIndex("documentTargetsIndex",vA,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",yA,{unique:!0}),n.createObjectStore("targetGlobal")}const $y="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Hy{constructor(e,t,r,i,a,l,d,p,_,I,D=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=a,this.window=l,this.document=d,this.Js=_,this.Ys=I,this.Xs=D,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=x=>Promise.resolve(),!Hy.C())throw new Me(me.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new EC(this,i),this.ii=t+"main",this.It=new RE(p),this.ri=new Uo(this.ii,this.Xs,new jA(this.It)),this.Cs=new PA(this.referenceDelegate,this.It),this.remoteDocumentCache=VE(this.It),this.Ns=new dC,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===I&&kr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Me(me.FAILED_PRECONDITION,$y);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Fi(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,be.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,be.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,be.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Jp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Su(e))return Ue("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ue("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return _d(e).get("owner").next(t=>le.resolve(this.mi(t)))}gi(e){return Jp(e).delete(this.clientId)}yi(){var e=this;return(0,be.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Wr(r,"clientMetadata");return i.W().next(a=>{const l=e.Ii(a,18e5),d=a.filter(p=>-1===l.indexOf(p));return le.forEach(d,p=>i.delete(p.clientId)).next(()=>d)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?le.resolve(!0):_d(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Me(me.FAILED_PRECONDITION,$y);return!1}}return!(!this.networkEnabled||!this.inForeground)||Jp(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,d=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&d)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ue("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,be.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Fy(t,Fi.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>Jp(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return kE.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new xA(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return Vy.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ue("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(l=this.Xs)?DE:14===l?ky:13===l?uC:12===l?TA:11===l?aC:void ft();var l;let d;return this.ri.runTransaction(e,i,a,p=>(d=new Fy(p,this.Ss?this.Ss.next():Fi.at),"readwrite-primary"===t?this.fi(d).next(_=>!!_||this.di(d)).next(_=>{if(!_)throw kr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Me(me.FAILED_PRECONDITION,gI);return r(d)}).next(_=>this.wi(d).next(()=>_)):this.Vi(d).next(()=>r(d)))).then(p=>(d.raiseOnCommittedEvent(),p))}Vi(e){return _d(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Me(me.FAILED_PRECONDITION,$y)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return _d(e).put("owner",t)}static C(){return Uo.C()}_i(e){const t=_d(e);return t.get("owner").next(r=>this.mi(r)?(Ue("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):le.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(kr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,V.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Ue("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return kr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){kr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function _d(n){return Wr(n,"owner")}function Jp(n){return Wr(n,"clientMetadata")}function jE(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class $E{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=Yt(),i=Yt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new $E(e,t.fromCache,r,i)}}class $A{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(a=>a||this.Oi(e,t,i,r)).next(a=>a||this.Mi(e,t))}ki(e,t){if(lE(t))return le.resolve(null);let r=es(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Ty(t,null,"F"),r=es(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=Yt(...a);return this.Ni.getDocuments(e,l).next(d=>this.indexManager.getMinOffset(e,r).next(p=>{const _=this.Fi(t,d);return this.$i(t,_,l,p.readTime)?this.ki(e,Ty(t,null,"F")):this.Bi(e,_,t,p)}))})))}Oi(e,t,r,i){return lE(t)||i.isEqual(Lt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(a=>{const l=this.Fi(t,a);return this.$i(t,l,r,i)?this.Mi(e,t):(oy()<=ho.in.DEBUG&&Ue("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),dE(t)),this.Bi(e,l,t,Yv(i,-1)))})}Fi(e,t){let r=new Fn(MI(e));return t.forEach((i,a)=>{hE(e,a)&&(r=r.add(a))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Mi(e,t){return oy()<=ho.in.DEBUG&&Ue("QueryEngine","Using full collection scan to execute query:",dE(t)),this.Ni.getDocumentsMatchingQuery(e,t,go.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class HE{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new _r(Gt),this.qi=new xu(a=>Rl(a),Fp),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tf(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function Gy(n,e,t,r){return new HE(n,e,t,r)}function GE(n,e){return eg.apply(this,arguments)}function eg(){return eg=(0,be.Z)(function*(n,e){const t=nt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],d=[];let p=Yt();for(const _ of i){l.push(_.batchId);for(const I of _.mutations)p=p.add(I.key)}for(const _ of a){d.push(_.batchId);for(const I of _.mutations)p=p.add(I.key)}return t.localDocuments.getDocuments(r,p).next(_=>({ji:_,removedBatchIds:l,addedBatchIds:d}))})})}),eg.apply(this,arguments)}function qE(n,e){const t=nt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,d,p,_){const I=p.batch,D=I.keys();let x=le.resolve();return D.forEach(F=>{x=x.next(()=>_.getEntry(d,F)).next(j=>{const ee=p.docVersions.get(F);Ft(null!==ee),j.version.compareTo(ee)<0&&(I.applyToRemoteDocument(j,p),j.isValidDocument()&&(j.setReadTime(p.commitVersion),_.addEntry(j)))})}),x.next(()=>l.mutationQueue.removeMutationBatch(d,I))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let d=Yt();for(let p=0;p<l.mutationResults.length;++p)l.mutationResults[p].transformResults.length>0&&(d=d.add(l.batch.mutations[p].key));return d}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function SC(n){const e=nt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function HA(n,e){const t=nt(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const d=[];e.targetChanges.forEach((I,D)=>{const x=i.get(D);if(!x)return;d.push(t.Cs.removeMatchingKeys(a,I.removedDocuments,D).next(()=>t.Cs.addMatchingKeys(a,I.addedDocuments,D)));let F=x.withSequenceNumber(a.currentSequenceNumber);var j,ee,ne;e.targetMismatches.has(D)?F=F.withResumeToken(oi.EMPTY_BYTE_STRING,Lt.min()).withLastLimboFreeSnapshotVersion(Lt.min()):I.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(I.resumeToken,r)),i=i.insert(D,F),ee=F,ne=I,(0===(j=x).resumeToken.approximateByteSize()||ee.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=3e8||ne.addedDocuments.size+ne.modifiedDocuments.size+ne.removedDocuments.size>0)&&d.push(t.Cs.updateTargetData(a,F))});let p=gs(),_=Yt();if(e.documentUpdates.forEach(I=>{e.resolvedLimboDocuments.has(I)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,I))}),d.push(AC(a,l,e.documentUpdates).next(I=>{p=I.Wi,_=I.zi})),!r.isEqual(Lt.min())){const I=t.Cs.getLastRemoteSnapshotVersion(a).next(D=>t.Cs.setTargetsMetadata(a,a.currentSequenceNumber,r));d.push(I)}return le.waitFor(d).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,p,_)).next(()=>p)}).then(a=>(t.Ui=i,a))}function AC(n,e,t){let r=Yt(),i=Yt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=gs();return t.forEach((d,p)=>{const _=a.get(d);p.isFoundDocument()!==_.isFoundDocument()&&(i=i.add(d)),p.isNoDocument()&&p.version.isEqual(Lt.min())?(e.removeEntry(d,p.readTime),l=l.insert(d,p)):!_.isValidDocument()||p.version.compareTo(_.version)>0||0===p.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(p),l=l.insert(d,p)):Ue("LocalStore","Ignoring outdated watch update for ",d,". Current version:",_.version," Watch version:",p.version)}),{Wi:l,zi:i}})}function GA(n,e){const t=nt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function vd(n,e){const t=nt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(a=>a?(i=a,le.resolve(i)):t.Cs.allocateTargetId(r).next(l=>(i=new Fl(e,l,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function $l(n,e,t){return qy.apply(this,arguments)}function qy(){return qy=(0,be.Z)(function*(n,e,t){const r=nt(n),i=r.Ui.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Su(l))throw l;Ue("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),qy.apply(this,arguments)}function Wy(n,e,t){const r=nt(n);let i=Lt.min(),a=Yt();return r.persistence.runTransaction("Execute query","readonly",l=>function(d,p,_){const I=nt(d),D=I.qi.get(_);return void 0!==D?le.resolve(I.Ui.get(D)):I.Cs.getTargetData(p,_)}(r,l,es(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(l,d.targetId).next(p=>{a=p})}).next(()=>r.Li.getDocumentsMatchingQuery(l,e,t?i:Lt.min(),t?a:Yt())).next(d=>(RC(r,xI(e),d),{documents:d,Hi:a})))}function WE(n,e){const t=nt(n),r=nt(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.se(a,e).next(l=>l?l.target:null))}function zE(n,e){const t=nt(n),r=t.Ki.get(e)||Lt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,Yv(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(RC(t,e,i),i))}function RC(n,e,t){let r=n.Ki.get(e)||Lt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Ki.set(e,r)}function zy(){return zy=(0,be.Z)(function*(n,e,t,r){const i=nt(n);let a=Yt(),l=gs();for(const _ of t){const I=e.Ji(_.metadata.name);_.document&&(a=a.add(I));const D=e.Yi(_);D.setReadTime(e.Xi(_.metadata.readTime)),l=l.insert(I,D)}const d=i.Gi.newChangeBuffer({trackRemovals:!0}),p=yield vd(i,(_=r,es(id(on.fromString(`__bundle__/docs/${_}`)))));var _;return i.persistence.runTransaction("Apply bundle documents","readwrite",_=>AC(_,d,l).next(I=>(d.apply(_),I)).next(I=>i.Cs.removeMatchingKeysForTargetId(_,p.targetId).next(()=>i.Cs.addMatchingKeys(_,a,p.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(_,I.Wi,I.zi)).next(()=>I.Wi)))}),zy.apply(this,arguments)}function qA(n,e){return Ky.apply(this,arguments)}function Ky(){return Ky=(0,be.Z)(function*(n,e,t=Yt()){const r=yield vd(n,es(Vl(e.bundledQuery))),i=nt(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=_i(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Ns.saveNamedQuery(a,e);const d=r.withResumeToken(oi.EMPTY_BYTE_STRING,l);return i.Ui=i.Ui.insert(d.targetId,d),i.Cs.updateTargetData(a,d).next(()=>i.Cs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Cs.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(a,e))})}),Ky.apply(this,arguments)}function MC(n,e){return`firestore_clients_${n}_${e}`}function Li(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Hl(n,e){return`firestore_targets_${n}_${e}`}class Zy{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Me(i.error.code,i.error.message))),l?new Zy(e,t,i.state,a):(kr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class tg{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Me(r.error.code,r.error.message))),a?new tg(e,r.state,i):(kr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class KE{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Ry();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=_I(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new KE(e,a):(kr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Ed{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Ed(t.clientId,t.onlineState):(kr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ZE{constructor(){this.activeTargetIds=Ry()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ng{constructor(e,t,r,i,a){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new _r(Gt),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=MC(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new ZE),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,be.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const a=e.getItem(MC(e.persistenceKey,i));if(a){const l=KE.Zi(i,a);l&&(e.ur=e.ur.insert(l.clientId,l))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Hl(this.persistenceKey,e));if(r){const i=tg.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Hl(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ue("SharedClientState","READ",e,t),t}setItem(e,t){Ue("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ue("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ue("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void kr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,be.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(a){let l=Fi.at;if(null!=a)try{const d=JSON.parse(a);Ft("number"==typeof d),l=d}catch(d){kr("SharedClientState","Failed to read sequence number from WebStorage",d)}return l}(r.newValue);i!==Fi.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Mr(a)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new Zy(this.currentUser,e,t,r),a=Li(this.persistenceKey,this.currentUser,e);this.setItem(a,i.tr())}Er(e){const t=Li(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=Hl(this.persistenceKey,e),a=new tg(e,t,r);this.setItem(i,a.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return KE.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return Zy.Zi(new ii(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return tg.Zi(i,t)}yr(e){return Ed.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,be.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Ue("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),l=[],d=[];return a.forEach(p=>{i.has(p)||l.push(p)}),i.forEach(p=>{a.has(p)||d.push(p)}),this.syncEngine.Br(l,d).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Ry();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class NC{constructor(){this.Lr=new ZE,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new ZE,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class PC{qr(e){}shutdown(){}}class OC{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Ue("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Ue("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const WA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class YE{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class kC extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,a){const l=this.ho(e,t);Ue("RestConnection","Sending: ",l,r);const d={};return this.lo(d,i,a),this.fo(e,l,d,r).then(p=>(Ue("RestConnection","Received: ",p),p),p=>{throw Il("RestConnection",`${e} failed with error: `,p,"url: ",l,"request:",r),p})}_o(e,t,r,i,a,l){return this.ao(e,t,r,i,a)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Xc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}ho(e,t){return`${this.oo}/v1/${t}:${WA[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((a,l)=>{const d=new dI;d.setWithCredentials(!0),d.listenOnce(Ph.COMPLETE,()=>{var _;try{switch(d.getLastErrorCode()){case bl.NO_ERROR:const I=d.getResponseJson();Ue("Connection","XHR received:",JSON.stringify(I)),a(I);break;case bl.TIMEOUT:Ue("Connection",'RPC "'+e+'" timed out'),l(new Me(me.DEADLINE_EXCEEDED,"Request time out"));break;case bl.HTTP_ERROR:const D=d.getStatus();if(Ue("Connection",'RPC "'+e+'" failed with status:',D,"response text:",d.getResponseText()),D>0){let x=d.getResponseJson();Array.isArray(x)&&(x=x[0]);const F=null===(_=x)||void 0===_?void 0:_.error;if(F&&F.status&&F.message){const j=function(ee){const ne=ee.toLowerCase().replace(/_/g,"-");return Object.values(me).indexOf(ne)>=0?ne:me.UNKNOWN}(F.status);l(new Me(j,F.message))}else l(new Me(me.UNKNOWN,"Server responded with status "+d.getStatus()))}else l(new Me(me.UNAVAILABLE,"Connection failed."));break;default:ft()}}finally{Ue("Connection",'RPC "'+e+'" completed.')}});const p=JSON.stringify(i);d.send(t,"POST",p,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Mh(),l=Nh(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new cI({})),this.lo(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const p=i.join("");Ue("Connection","Creating WebChannel: "+p,d);const _=a.createWebChannel(p,d);let I=!1,D=!1;const x=new YE({Hr:j=>{D?Ue("Connection","Not sending because WebChannel is closed:",j):(I||(Ue("Connection","Opening WebChannel transport."),_.open(),I=!0),Ue("Connection","WebChannel sending:",j),_.send(j))},Jr:()=>_.close()}),F=(j,ee,ne)=>{j.listen(ee,je=>{try{ne(je)}catch(Ye){setTimeout(()=>{throw Ye},0)}})};return F(_,xp.EventType.OPEN,()=>{D||Ue("Connection","WebChannel transport opened.")}),F(_,xp.EventType.CLOSE,()=>{D||(D=!0,Ue("Connection","WebChannel transport closed"),x.io())}),F(_,xp.EventType.ERROR,j=>{D||(D=!0,Il("Connection","WebChannel transport errored:",j),x.io(new Me(me.UNAVAILABLE,"The operation could not be completed")))}),F(_,xp.EventType.MESSAGE,j=>{var ee;if(!D){const ne=j.data[0];Ft(!!ne);const je=ne,Ye=je.error||(null===(ee=je[0])||void 0===ee?void 0:ee.error);if(Ye){Ue("Connection","WebChannel received error:",Ye);const We=Ye.status;let Ke=function(St){const cn=Er[St];if(void 0!==cn)return nA(cn)}(We),bt=Ye.message;void 0===Ke&&(Ke=me.INTERNAL,bt="Unknown error status: "+We+" with message "+Ye.message),D=!0,x.io(new Me(Ke,bt)),_.close()}else Ue("Connection","WebChannel received:",ne),x.ro(ne)}}),F(l,Oh.STAT_EVENT,j=>{j.stat===qv.PROXY?Ue("Connection","Detected buffering proxy"):j.stat===qv.NOPROXY&&Ue("Connection","Detected no buffering proxy")}),setTimeout(()=>{x.so()},0),x}}function QE(){return"undefined"!=typeof window?window:null}function wd(){return"undefined"!=typeof document?document:null}function bd(n){return new qI(n,!0)}class FC{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&Ue("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class XE{constructor(e,t,r,i,a,l,d,p){this.Hs=e,this.vo=r,this.Vo=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new FC(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,be.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,be.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,be.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===me.RESOURCE_EXHAUSTED?(kr(t.toString()),kr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===me.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new Me(me.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,be.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Ue("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Ue("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class zA extends XE{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.It=a}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function uA(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(p=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:ft(),i=e.targetChange.targetIds||[],a=function(p,_){return p.gt?(Ft(void 0===_||"string"==typeof _),oi.fromBase64String(_||"")):(Ft(void 0===_||_ instanceof Uint8Array),oi.fromUint8Array(_||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,d=l&&function(p){const _=void 0===p.code?me.UNKNOWN:nA(p.code);return new Me(_,p.message||"")}(l);t=new jI(r,i,a,d||null)}else if("documentChange"in e){const r=e.documentChange,i=Mu(n,r.document.name),a=_i(r.document.updateTime),l=new Si({mapValue:{fields:r.document.fields}}),d=fn.newFoundDocument(i,a,l);t=new Bp(r.targetIds||[],r.removedTargetIds||[],d.key,d)}else if("documentDelete"in e){const r=e.documentDelete,i=Mu(n,r.document),a=r.readTime?_i(r.readTime):Lt.min(),l=fn.newNoDocument(i,a);t=new Bp([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=Mu(n,r.document);t=new Bp([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ft();{const r=e.filter,a=new tA(r.count||0);t=new EE(r.targetId,a)}}var p;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return Lt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Lt.min():a.readTime?_i(a.readTime):Lt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=kl(this.It),t.addTarget=function(i,a){let l;const d=a.target;return l=vy(d)?{documents:QI(i,d)}:{query:My(i,d)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=WI(i,a.resumeToken):a.snapshotVersion.compareTo(Lt.min())>0&&(l.readTime=Zh(i,a.snapshotVersion.toTimestamp())),l}(this.It,e);const r=function cA(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ft()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=kl(this.It),t.removeTarget=e,this.Bo(t)}}class LC extends XE{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.It=a,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Ft(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function lA(n,e){return n&&n.length>0?(Ft(void 0!==e),n.map(t=>function(r,i){let a=_i(r.updateTime?r.updateTime:i);return a.isEqual(Lt.min())&&(a=_i(i)),new LI(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=_i(e.commitTime);return this.listener.Zo(r,t)}return Ft(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=kl(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Hp(this.It,r))};this.Bo(t)}}class Yy extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.It=i,this.nu=!1}su(){if(this.nu)throw new Me(me.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.ao(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Me(me.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection._o(e,t,r,a,l,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Me(me.UNKNOWN,a.toString())})}terminate(){this.nu=!0}}class ew{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(kr(t),this.ou=!1):Ue("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class tw{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.qr(d=>{r.enqueueAndForget((0,be.Z)(function*(){var p;Na(l)&&(Ue("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,be.Z)(function*(_){const I=nt(_);I._u.add(4),yield nf(I),I.gu.set("Unknown"),I._u.delete(4),yield Qy(I)}),function(_){return p.apply(this,arguments)})(l))}))}),this.gu=new ew(r,i)}}function Qy(n){return nw.apply(this,arguments)}function nw(){return nw=(0,be.Z)(function*(n){if(Na(n))for(const e of n.wu)yield e(!0)}),nw.apply(this,arguments)}function nf(n){return Xy.apply(this,arguments)}function Xy(){return Xy=(0,be.Z)(function*(n){for(const e of n.wu)yield e(!1)}),Xy.apply(this,arguments)}function rg(n,e){const t=nt(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),sw(t)?iw(t):ag(t).ko()&&Jy(t,e))}function ig(n,e){const t=nt(n),r=ag(t);t.du.delete(e),r.ko()&&rw(t,e),0===t.du.size&&(r.ko()?r.Fo():Na(t)&&t.gu.set("Unknown"))}function Jy(n,e){n.yu.Mt(e.targetId),ag(n).zo(e)}function rw(n,e){n.yu.Mt(e),ag(n).Ho(e)}function iw(n){n.yu=new jp({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),ag(n).start(),n.gu.uu()}function sw(n){return Na(n)&&!ag(n).No()&&n.du.size>0}function Na(n){return 0===nt(n)._u.size}function UC(n){n.yu=void 0}function BC(n){return e_.apply(this,arguments)}function e_(){return e_=(0,be.Z)(function*(n){n.du.forEach((e,t)=>{Jy(n,e)})}),e_.apply(this,arguments)}function jC(n,e){return t_.apply(this,arguments)}function t_(){return t_=(0,be.Z)(function*(n,e){UC(n),sw(n)?(n.gu.hu(e),iw(n)):n.gu.set("Unknown")}),t_.apply(this,arguments)}function KA(n,e,t){return ow.apply(this,arguments)}function ow(){return ow=(0,be.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof jI&&2===e.state&&e.cause)try{yield(r=(0,be.Z)(function*(i,a){const l=a.cause;for(const d of a.targetIds)i.du.has(d)&&(yield i.remoteSyncer.rejectListen(d,l),i.du.delete(d),i.yu.removeTarget(d))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Ue("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield aw(n,r)}else if(e instanceof Bp?n.yu.Gt(e):e instanceof EE?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(Lt.min()))try{const r=yield SC(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.yu.te(a);return l.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const _=i.du.get(p);_&&i.du.set(p,_.withResumeToken(d.resumeToken,a))}}),l.targetMismatches.forEach(d=>{const p=i.du.get(d);if(!p)return;i.du.set(d,p.withResumeToken(oi.EMPTY_BYTE_STRING,p.snapshotVersion)),rw(i,d);const _=new Fl(p.target,d,1,p.sequenceNumber);Jy(i,_)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Ue("RemoteStore","Failed to raise snapshot:",r),yield aw(n,r)}var r}),ow.apply(this,arguments)}function aw(n,e,t){return n_.apply(this,arguments)}function n_(){return n_=(0,be.Z)(function*(n,e,t){if(!Su(e))throw e;n._u.add(1),yield nf(n),n.gu.set("Offline"),t||(t=()=>SC(n.localStore)),n.asyncQueue.enqueueRetryable((0,be.Z)(function*(){Ue("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield Qy(n)}))}),n_.apply(this,arguments)}function ZA(n,e){return e().catch(t=>aw(n,t,e))}function sg(n){return $C.apply(this,arguments)}function $C(){return $C=(0,be.Z)(function*(n){const e=nt(n),t=Pu(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;yP(e);)try{const i=yield GA(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,_P(e,i)}catch(i){yield aw(e,i)}YA(e)&&QA(e)}),$C.apply(this,arguments)}function yP(n){return Na(n)&&n.fu.length<10}function _P(n,e){n.fu.push(e);const t=Pu(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function YA(n){return Na(n)&&!Pu(n).No()&&n.fu.length>0}function QA(n){Pu(n).start()}function vP(n){return rf.apply(this,arguments)}function rf(){return rf=(0,be.Z)(function*(n){Pu(n).eu()}),rf.apply(this,arguments)}function EP(n){return og.apply(this,arguments)}function og(){return og=(0,be.Z)(function*(n){const e=Pu(n);for(const t of n.fu)e.Xo(t.mutations)}),og.apply(this,arguments)}function sf(n,e,t){return r_.apply(this,arguments)}function r_(){return r_=(0,be.Z)(function*(n,e,t){const r=n.fu.shift(),i=AE.from(r,e,t);yield ZA(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield sg(n)}),r_.apply(this,arguments)}function XA(n,e){return uw.apply(this,arguments)}function uw(){return uw=(0,be.Z)(function*(n,e){var t;e&&Pu(n).Yo&&(yield(t=(0,be.Z)(function*(r,i){if(wr(a=i.code)&&a!==me.ABORTED){const l=r.fu.shift();Pu(r).Mo(),yield ZA(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield sg(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),YA(n)&&QA(n)}),uw.apply(this,arguments)}function i_(n,e){return s_.apply(this,arguments)}function s_(){return s_=(0,be.Z)(function*(n,e){const t=nt(n);t.asyncQueue.verifyOperationInProgress(),Ue("RemoteStore","RemoteStore received new credentials");const r=Na(t);t._u.add(3),yield nf(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield Qy(t)}),s_.apply(this,arguments)}function o_(n,e){return a_.apply(this,arguments)}function a_(){return a_=(0,be.Z)(function*(n,e){const t=nt(n);e?(t._u.delete(2),yield Qy(t)):e||(t._u.add(2),yield nf(t),t.gu.set("Unknown"))}),a_.apply(this,arguments)}function ag(n){return n.pu||(n.pu=function(e,t,r){const i=nt(e);return i.su(),new zA(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:BC.bind(null,n),Zr:jC.bind(null,n),Wo:KA.bind(null,n)}),n.wu.push(function(){var e=(0,be.Z)(function*(t){t?(n.pu.Mo(),sw(n)?iw(n):n.gu.set("Unknown")):(yield n.pu.stop(),UC(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Pu(n){return n.Iu||(n.Iu=function(e,t,r){const i=nt(e);return i.su(),new LC(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:vP.bind(null,n),Zr:XA.bind(null,n),tu:EP.bind(null,n),Zo:sf.bind(null,n)}),n.wu.push(function(){var e=(0,be.Z)(function*(t){t?(n.Iu.Mo(),yield sg(n)):(yield n.Iu.stop(),n.fu.length>0&&(Ue("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class af{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new si,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,d=new af(e,t,l,i,a);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Me(me.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Id(n,e){if(kr("AsyncQueue",`${e}: ${n}`),Su(n))return new Me(me.UNAVAILABLE,`${e}: ${n}`);throw n}class ug{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Xe.comparator(t.key,r.key):(t,r)=>Xe.comparator(t.key,r.key),this.keyedMap=Wh(),this.sortedSet=new _r(this.comparator)}static emptySet(e){return new ug(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ug)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new ug;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class JA{constructor(){this.Tu=new _r(Xe.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):ft():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class lg{constructor(e,t,r,i,a,l,d,p,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=_}static fromInitialDocuments(e,t,r,i,a){const l=[];return t.forEach(d=>{l.push({type:0,doc:d})}),new lg(e,t,ug.emptySet(t),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class eR{constructor(){this.Au=void 0,this.listeners=[]}}class lw{constructor(){this.queries=new xu(e=>RI(e),Lp),this.onlineState="Unknown",this.Ru=new Set}}function cw(n,e){return HC.apply(this,arguments)}function HC(){return HC=(0,be.Z)(function*(n,e){const t=nt(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new eR),i)try{a.Au=yield t.onListen(r)}catch(l){const d=Id(l,`Initialization of query '${dE(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,a),a.listeners.push(e),e.bu(t.onlineState),a.Au&&e.Pu(a.Au)&&hw(t)}),HC.apply(this,arguments)}function dw(n,e){return cg.apply(this,arguments)}function cg(){return cg=(0,be.Z)(function*(n,e){const t=nt(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),cg.apply(this,arguments)}function tR(n,e){const t=nt(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const d of l.listeners)d.Pu(i)&&(r=!0);l.Au=i}}r&&hw(t)}function $s(n,e,t){const r=nt(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function hw(n){n.Ru.forEach(e=>{e.next()})}class dg{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new lg(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=lg.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class nR{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class GC{constructor(e){this.It=e}Ji(e){return Mu(this.It,e)}Yi(e){return e.metadata.exists?IE(this.It,e.document,!1):fn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return _i(e)}}class fw{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=pw(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=on.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new GC(this.It);for(const i of e)if(i.metadata.queries){const a=r.Ji(i.metadata.name);for(const l of i.metadata.queries){const d=(t.get(l)||Yt()).add(a);t.set(l,d)}}return t}complete(){var e=this;return(0,be.Z)(function*(){const t=yield function xC(n,e,t,r){return zy.apply(this,arguments)}(e.localStore,new GC(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield qA(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function pw(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class gw{constructor(e){this.key=e}}class qC{constructor(e){this.key=e}}class mw{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Yt(),this.mutatedKeys=Yt(),this.Gu=MI(e),this.Qu=new ug(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new JA,i=t?t.Qu:this.Qu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,d=!1;const p="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,_="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((I,D)=>{const x=i.get(I),F=hE(this.query,D)?D:null,j=!!x&&this.mutatedKeys.has(x.key),ee=!!F&&(F.hasLocalMutations||this.mutatedKeys.has(F.key)&&F.hasCommittedMutations);let ne=!1;x&&F?x.data.isEqual(F.data)?j!==ee&&(r.track({type:3,doc:F}),ne=!0):this.Hu(x,F)||(r.track({type:2,doc:F}),ne=!0,(p&&this.Gu(F,p)>0||_&&this.Gu(F,_)<0)&&(d=!0)):!x&&F?(r.track({type:0,doc:F}),ne=!0):x&&!F&&(r.track({type:1,doc:x}),ne=!0,(p||_)&&(d=!0)),ne&&(F?(l=l.add(F),a=ee?a.add(I):a.delete(I)):(l=l.delete(I),a=a.delete(I)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const I="F"===this.query.limitType?l.last():l.first();l=l.delete(I.key),a=a.delete(I.key),r.track({type:1,doc:I})}return{Qu:l,zu:r,$i:d,mutatedKeys:a}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const a=e.zu.Eu();a.sort((_,I)=>function(D,x){const F=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ft()}};return F(D)-F(x)}(_.type,I.type)||this.Gu(_.doc,I.doc)),this.Ju(r);const l=t?this.Yu():[],d=0===this.Ku.size&&this.current?1:0,p=d!==this.qu;return this.qu=d,0!==a.length||p?{snapshot:new lg(this.query,e.Qu,i,a,e.mutatedKeys,0===d,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:l}:{Xu:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new JA,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Yt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new qC(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new gw(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=Yt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return lg.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class WC{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class rR{constructor(e){this.key=e,this.nc=!1}}class iR{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.sc={},this.ic=new xu(d=>RI(d),Lp),this.rc=new Map,this.oc=new Set,this.uc=new _r(Xe.comparator),this.cc=new Map,this.ac=new _o,this.hc={},this.lc=new Map,this.fc=gd.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function yw(n,e){return Hs.apply(this,arguments)}function Hs(){return Hs=(0,be.Z)(function*(n,e){const t=h_(n);let r,i;const a=t.ic.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.ec();else{const l=yield vd(t.localStore,es(e));t.isPrimaryClient&&rg(t.remoteStore,l);const d=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield _w(t,e,r,"current"===d,l.resumeToken)}return i}),Hs.apply(this,arguments)}function _w(n,e,t,r,i){return zC.apply(this,arguments)}function zC(){return zC=(0,be.Z)(function*(n,e,t,r,i){n._c=(D,x,F)=>{return(j=(0,be.Z)(function*(ee,ne,je,Ye){let We=ne.view.Wu(je);We.$i&&(We=yield Wy(ee.localStore,ne.query,!1).then(({documents:St})=>ne.view.Wu(St,We)));const Ke=Ye&&Ye.targetChanges.get(ne.targetId),bt=ne.view.applyChanges(We,ee.isPrimaryClient,Ke);return Tw(ee,ne.targetId,bt.Xu),bt.snapshot}),function(ee,ne,je,Ye){return j.apply(this,arguments)})(n,D,x,F);var j};const a=yield Wy(n.localStore,e,!0),l=new mw(e,a.Hi),d=l.Wu(a.documents),p=zh.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),_=l.applyChanges(d,n.isPrimaryClient,p);Tw(n,t,_.Xu);const I=new WC(e,t,l);return n.ic.set(e,I),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),_.snapshot}),zC.apply(this,arguments)}function sR(n,e){return u_.apply(this,arguments)}function u_(){return u_=(0,be.Z)(function*(n,e){const t=nt(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(a=>!Lp(a,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield $l(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),ig(t.remoteStore,r.targetId),Td(t,r.targetId)}).catch(mo))):(Td(t,r.targetId),yield $l(t.localStore,r.targetId,!0))}),u_.apply(this,arguments)}function vw(){return vw=(0,be.Z)(function*(n,e,t){const r=f_(n);try{const i=yield function(a,l){const d=nt(a),p=Qn.now(),_=l.reduce((x,F)=>x.add(F.key),Yt());let I,D;return d.persistence.runTransaction("Locally write mutations","readwrite",x=>{let F=gs(),j=Yt();return d.Gi.getEntries(x,_).next(ee=>{F=ee,F.forEach((ne,je)=>{je.isValidDocument()||(j=j.add(ne))})}).next(()=>d.localDocuments.getOverlayedDocuments(x,F)).next(ee=>{I=ee;const ne=[];for(const je of l){const Ye=mP(je,I.get(je.key).overlayedDocument);null!=Ye&&ne.push(new Pl(je.key,Ye,II(Ye.value.mapValue),xn.exists(!0)))}return d.mutationQueue.addMutationBatch(x,p,ne,l)}).next(ee=>{D=ee;const ne=ee.applyToLocalDocumentSet(I,j);return d.documentOverlayCache.saveOverlays(x,ee.batchId,ne)})}).then(()=>({batchId:D.batchId,changes:vE(I)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,d){let p=a.hc[a.currentUser.toKey()];p||(p=new _r(Gt)),p=p.insert(l,d),a.hc[a.currentUser.toKey()]=p}(r,i.batchId,t),yield Pa(r,i.changes),yield sg(r.remoteStore)}catch(i){const a=Id(i,"Failed to persist write");t.reject(a)}}),vw.apply(this,arguments)}function Ew(n,e){return ww.apply(this,arguments)}function ww(){return ww=(0,be.Z)(function*(n,e){const t=nt(n);try{const r=yield HA(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.cc.get(a);l&&(Ft(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.nc=!0:i.modifiedDocuments.size>0?Ft(l.nc):i.removedDocuments.size>0&&(Ft(l.nc),l.nc=!1))}),yield Pa(t,r,e)}catch(r){yield mo(r)}}),ww.apply(this,arguments)}function aR(n,e,t){const r=nt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((a,l)=>{const d=l.view.bu(e);d.snapshot&&i.push(d.snapshot)}),function(a,l){const d=nt(a);d.onlineState=l;let p=!1;d.queries.forEach((_,I)=>{for(const D of I.listeners)D.bu(l)&&(p=!0)}),p&&hw(d)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function KC(n,e,t){return l_.apply(this,arguments)}function l_(){return l_=(0,be.Z)(function*(n,e,t){const r=nt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),a=i&&i.key;if(a){let l=new _r(Xe.comparator);l=l.insert(a,fn.newNoDocument(a,Lt.min()));const d=Yt().add(a),p=new Ol(Lt.min(),new Map,new Fn(Gt),l,d);yield Ew(r,p),r.uc=r.uc.remove(a),r.cc.delete(e),QC(r)}else yield $l(r.localStore,e,!1).then(()=>Td(r,e,t)).catch(mo)}),l_.apply(this,arguments)}function uR(n,e){return bw.apply(this,arguments)}function bw(){return bw=(0,be.Z)(function*(n,e){const t=nt(n),r=e.batch.batchId;try{const i=yield qE(t.localStore,e);d_(t,r,null),Cw(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Pa(t,i)}catch(i){yield mo(i)}}),bw.apply(this,arguments)}function ZC(n,e,t){return Cd.apply(this,arguments)}function Cd(){return Cd=(0,be.Z)(function*(n,e,t){const r=nt(n);try{const i=yield function(a,l){const d=nt(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let _;return d.mutationQueue.lookupMutationBatch(p,l).next(I=>(Ft(null!==I),_=I.keys(),d.mutationQueue.removeMutationBatch(p,I))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,_,l)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_)).next(()=>d.localDocuments.getDocuments(p,_))})}(r.localStore,e);d_(r,e,t),Cw(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Pa(r,i)}catch(i){yield mo(i)}}),Cd.apply(this,arguments)}function c_(){return c_=(0,be.Z)(function*(n,e){const t=nt(n);Na(t.remoteStore)||Ue("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=nt(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>l.mutationQueue.getHighestUnacknowledgedBatchId(d))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=Id(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),c_.apply(this,arguments)}function Cw(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function d_(n,e,t){const r=nt(n);let i=r.hc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function Td(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||YC(n,r)})}function YC(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(ig(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),QC(n))}function Tw(n,e,t){for(const r of t)r instanceof gw?(n.ac.addReference(r.key,e),wP(n,r)):r instanceof qC?(Ue("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||YC(n,r.key)):ft()}function wP(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Ue("SyncEngine","New document in limbo: "+t),n.oc.add(r),QC(n))}function QC(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Xe(on.fromString(e)),r=n.fc.next();n.cc.set(r,new rR(t)),n.uc=n.uc.insert(t,r),rg(n.remoteStore,new Fl(es(id(t.path)),r,2,Fi.at))}}function Pa(n,e,t){return Dw.apply(this,arguments)}function Dw(){return Dw=(0,be.Z)(function*(n,e,t){const r=nt(n),i=[],a=[],l=[];var d;r.ic.isEmpty()||(r.ic.forEach((d,p)=>{l.push(r._c(p,e,t).then(_=>{if((_||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(p.targetId,(null==_?void 0:_.fromCache)?"not-current":"current"),_){i.push(_);const I=$E.Ci(p.targetId,_);a.push(I)}}))}),yield Promise.all(l),r.sc.Wo(i),yield(d=(0,be.Z)(function*(p,_){const I=nt(p);try{yield I.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>le.forEach(_,x=>le.forEach(x.Si,F=>I.persistence.referenceDelegate.addReference(D,x.targetId,F)).next(()=>le.forEach(x.Di,F=>I.persistence.referenceDelegate.removeReference(D,x.targetId,F)))))}catch(D){if(!Su(D))throw D;Ue("LocalStore","Failed to update sequence numbers: "+D)}for(const D of _){const x=D.targetId;if(!D.fromCache){const F=I.Ui.get(x),ee=F.withLastLimboFreeSnapshotVersion(F.snapshotVersion);I.Ui=I.Ui.insert(x,ee)}}}),function(p,_){return d.apply(this,arguments)})(r.localStore,a))}),Dw.apply(this,arguments)}function lR(n,e){return Sw.apply(this,arguments)}function Sw(){return Sw=(0,be.Z)(function*(n,e){const t=nt(n);if(!t.currentUser.isEqual(e)){Ue("SyncEngine","User change. New user:",e.toKey());const r=yield GE(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(l=>{l.forEach(d=>{d.reject(new Me(me.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Pa(t,r.ji)}var i}),Sw.apply(this,arguments)}function bP(n,e){const t=nt(n),r=t.cc.get(e);if(r&&r.nc)return Yt().add(r.key);{let i=Yt();const a=t.rc.get(e);if(!a)return i;for(const l of a){const d=t.ic.get(l);i=i.unionWith(d.view.ju)}return i}}function IP(n,e){return XC.apply(this,arguments)}function XC(){return XC=(0,be.Z)(function*(n,e){const t=nt(n),r=yield Wy(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&Tw(t,e.targetId,i.Xu),i}),XC.apply(this,arguments)}function CP(n,e){return JC.apply(this,arguments)}function JC(){return JC=(0,be.Z)(function*(n,e){const t=nt(n);return zE(t.localStore,e).then(r=>Pa(t,r))}),JC.apply(this,arguments)}function cR(n,e,t,r){return uf.apply(this,arguments)}function uf(){return uf=(0,be.Z)(function*(n,e,t,r){const i=nt(n),a=yield function(l,d){const p=nt(l),_=nt(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",I=>_.Tn(I,d).next(D=>D?p.localDocuments.getDocuments(I,D):le.resolve(null)))}(i.localStore,e);var d;null!==a?("pending"===t?yield sg(i.remoteStore):"acknowledged"===t||"rejected"===t?(d_(i,e,r||null),Cw(i,e),d=e,nt(nt(i.localStore).mutationQueue).An(d)):ft(),yield Pa(i,a)):Ue("SyncEngine","Cannot apply mutation batch with id: "+e)}),uf.apply(this,arguments)}function Aw(){return Aw=(0,be.Z)(function*(n,e){const t=nt(n);if(h_(t),f_(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield Rw(t,r.toArray());t.dc=!0,yield o_(t.remoteStore,!0);for(const a of i)rg(t.remoteStore,a)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(Td(t,l),$l(t.localStore,l,!0))),ig(t.remoteStore,l)}),yield i,yield Rw(t,r),function(a){const l=nt(a);l.cc.forEach((d,p)=>{ig(l.remoteStore,p)}),l.ac.fs(),l.cc=new Map,l.uc=new _r(Xe.comparator)}(t),t.dc=!1,yield o_(t.remoteStore,!1)}}),Aw.apply(this,arguments)}function Rw(n,e,t){return Ou.apply(this,arguments)}function Ou(){return Ou=(0,be.Z)(function*(n,e,t){const r=nt(n),i=[],a=[];for(const l of e){let d;const p=r.rc.get(l);if(p&&0!==p.length){d=yield vd(r.localStore,es(p[0]));for(const _ of p){const I=r.ic.get(_),D=yield IP(r,I);D.snapshot&&a.push(D.snapshot)}}else{const _=yield WE(r.localStore,l);d=yield vd(r.localStore,_),yield _w(r,xw(_),l,!1,d.resumeToken)}i.push(d)}return r.sc.Wo(a),i}),Ou.apply(this,arguments)}function xw(n){return uE(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Mw(n){const e=nt(n);return nt(nt(e.localStore).persistence).vi()}function Nw(n,e,t,r){return Pw.apply(this,arguments)}function Pw(){return Pw=(0,be.Z)(function*(n,e,t,r){const i=nt(n);if(i.dc)return void Ue("SyncEngine","Ignoring unexpected query state notification.");const a=i.rc.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield zE(i.localStore,xI(a[0])),d=Ol.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,oi.EMPTY_BYTE_STRING);yield Pa(i,l,d);break}case"rejected":yield $l(i.localStore,e,!0),Td(i,e,r);break;default:ft()}}),Pw.apply(this,arguments)}function Ow(n,e,t){return hg.apply(this,arguments)}function hg(){return hg=(0,be.Z)(function*(n,e,t){const r=h_(n);if(r.dc){for(const i of e){if(r.rc.has(i)){Ue("SyncEngine","Adding an already active target "+i);continue}const a=yield WE(r.localStore,i),l=yield vd(r.localStore,a);yield _w(r,xw(a),l.targetId,!1,l.resumeToken),rg(r.remoteStore,l)}for(const i of t)r.rc.has(i)&&(yield $l(r.localStore,i,!1).then(()=>{ig(r.remoteStore,i),Td(r,i)}).catch(mo))}}),hg.apply(this,arguments)}function h_(n){const e=nt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ew.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=KC.bind(null,e),e.sc.Wo=tR.bind(null,e.eventManager),e.sc.wc=$s.bind(null,e.eventManager),e}function f_(n){const e=nt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ZC.bind(null,e),e}class hR{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,be.Z)(function*(){t.It=bd(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return Gy(this.persistence,new $A,e.initialUser,this.It)}yc(e){return new TC(yd.Bs,this.It)}gc(e){return new NC}terminate(){var e=this;return(0,be.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class fR extends hR{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,be.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield f_(r.Ac.syncEngine),yield sg(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return Gy(this.persistence,new $A,e.initialUser,this.It)}Tc(e,t){return new kA(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new mI(t,this.persistence);return new zS(e.asyncQueue,r)}yc(e){const t=jE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ms.withCacheSize(this.cacheSizeBytes):ms.DEFAULT;return new Hy(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,QE(),wd(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new NC}}class DP extends fR{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,be.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof ng&&(r.sharedClientState.syncEngine={Fr:cR.bind(null,i),$r:Nw.bind(null,i),Br:Ow.bind(null,i),vi:Mw.bind(null,i),Mr:CP.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var a=(0,be.Z)(function*(l){yield function dR(n,e){return Aw.apply(this,arguments)}(r.Ac.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}gc(e){const t=QE();if(!ng.C(t))throw new Me(me.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=jE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ng(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class eT{initialize(e,t){var r=this;return(0,be.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>aR(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=lR.bind(null,r.syncEngine),yield o_(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new lw}createDatastore(e){const t=bd(e.databaseInfo.databaseId),r=new kC(e.databaseInfo);return new Yy(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=d=>aR(this.syncEngine,d,0),l=OC.C()?new OC:new PC,new tw(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,d,p,_){const I=new iR(r,i,a,l,d,p);return _&&(I.dc=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,be.Z)(function*(t){const r=nt(t);Ue("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield nf(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function tT(n,e,t){if(!t)throw new Me(me.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function pR(n,e,t,r){if(!0===e&&!0===r)throw new Me(me.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function kw(n){if(!Xe.isDocumentKey(n))throw new Me(me.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function nT(n){if(Xe.isDocumentKey(n))throw new Me(me.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function p_(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ft()}function dn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Me(me.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=p_(n);throw new Me(me.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function rT(n,e){if(e<=0)throw new Me(me.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const Fw=new Map;class Lw{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Me(me.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Me(me.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,pR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lf{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Lw({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Me(me.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Me(me.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lw(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new US;switch(t.type){case"gapi":return new cP(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Me(me.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Fw.get(e);t&&(Ue("ComponentProvider","Removing Datastore"),Fw.delete(e),t.terminate())}(this),Promise.resolve()}}class Xn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xn(this.firestore,e,this._key)}}class Ai{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ai(this.firestore,e,this._query)}}class Gs extends Ai{constructor(e,t,r){super(e,t,id(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xn(this.firestore,null,new Xe(e))}withConverter(e){return new Gs(this.firestore,e,this._path)}}function gR(n,e,...t){if(n=(0,V.m9)(n),tT("collection","path",e),n instanceof lf){const r=on.fromString(e,...t);return nT(r),new Gs(n,null,r)}{if(!(n instanceof Xn||n instanceof Gs))throw new Me(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(on.fromString(e,...t));return nT(r),new Gs(n.firestore,null,r)}}function Dd(n,e,...t){if(n=(0,V.m9)(n),1===arguments.length&&(e=$S.R()),tT("doc","path",e),n instanceof lf){const r=on.fromString(e,...t);return kw(r),new Xn(n,null,new Xe(r))}{if(!(n instanceof Xn||n instanceof Gs))throw new Me(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(on.fromString(e,...t));return kw(r),new Xn(n.firestore,n instanceof Gs?n.converter:null,new Xe(r))}}function oT(n,e){return n=(0,V.m9)(n),e=(0,V.m9)(e),(n instanceof Xn||n instanceof Gs)&&(e instanceof Xn||e instanceof Gs)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Vw(n,e){return n=(0,V.m9)(n),e=(0,V.m9)(e),n instanceof Ai&&e instanceof Ai&&n.firestore===e.firestore&&Lp(n._query,e._query)&&n.converter===e.converter}function aT(n,e=10240){let t=0;return{read:()=>(0,be.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,be.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class g_{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):kr("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class SP{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new si,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,be.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,be.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,be.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const a=yield e.Cc(i);return new nR(JSON.parse(a),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,be.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,be.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,be.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class _R{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,be.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Me(me.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,be.Z)(function*(a,l){const d=nt(a),p=kl(d.It)+"/documents",_={documents:l.map(F=>xy(d.It,F))},I=yield d._o("BatchGetDocuments",p,_,l.length),D=new Map;I.forEach(F=>{const j=function $p(n,e){return"found"in e?function(t,r){Ft(!!r.found);const i=Mu(t,r.found.name),a=_i(r.found.updateTime),l=new Si({mapValue:{fields:r.found.fields}});return fn.newFoundDocument(i,a,l)}(n,e):"missing"in e?function(t,r){Ft(!!r.missing),Ft(!!r.readTime);const i=Mu(t,r.missing),a=_i(r.readTime);return fn.newNoDocument(i,a)}(n,e):ft()}(d.It,F);D.set(j.key.toString(),j)});const x=[];return l.forEach(F=>{const j=D.get(F.toString());Ft(!!j),x.push(j)}),x}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Gh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,be.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Xe.fromPath(i);e.mutations.push(new qh(a,e.precondition(a)))}),yield(r=(0,be.Z)(function*(i,a){const l=nt(i),d=kl(l.It)+"/documents",p={writes:a.map(_=>Hp(l.It,_))};yield l.ao("Commit",d,p)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ft();t=Lt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Me(me.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Lt.min())?xn.exists(!1):xn.updateTime(t):xn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Lt.min()))throw new Me(me.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return xn.updateTime(t)}return xn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class vR{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.kc=r.maxAttempts,this.xo=new FC(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,be.Z)(function*(){const t=new _R(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Fc(a)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!Bh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!wr(t)}return!1}}class ER{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ii.UNAUTHENTICATED,this.clientId=$S.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,be.Z)(function*(d){Ue("FirestoreClient","Received user=",d.uid),yield a.authCredentialListener(d),a.user=d});return function(d){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Ue("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,be.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Me(me.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new si;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Id(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function uT(n,e){return Uw.apply(this,arguments)}function Uw(){return Uw=(0,be.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ue("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,be.Z)(function*(a){r.isEqual(a)||(yield GE(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),Uw.apply(this,arguments)}function wR(n,e){return lT.apply(this,arguments)}function lT(){return lT=(0,be.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield cT(n);Ue("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>i_(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>i_(e.remoteStore,a)),n.onlineComponents=e}),lT.apply(this,arguments)}function cT(n){return dT.apply(this,arguments)}function dT(){return dT=(0,be.Z)(function*(n){return n.offlineComponents||(Ue("FirestoreClient","Using default OfflineComponentProvider"),yield uT(n,new hR)),n.offlineComponents}),dT.apply(this,arguments)}function Bw(n){return jw.apply(this,arguments)}function jw(){return jw=(0,be.Z)(function*(n){return n.onlineComponents||(Ue("FirestoreClient","Using default OnlineComponentProvider"),yield wR(n,new eT)),n.onlineComponents}),jw.apply(this,arguments)}function bR(n){return cT(n).then(e=>e.persistence)}function $w(n){return cT(n).then(e=>e.localStore)}function hT(n){return Bw(n).then(e=>e.remoteStore)}function fT(n){return Bw(n).then(e=>e.syncEngine)}function o(n){return u.apply(this,arguments)}function u(){return u=(0,be.Z)(function*(n){const e=yield Bw(n),t=e.eventManager;return t.onListen=yw.bind(null,e.syncEngine),t.onUnlisten=sR.bind(null,e.syncEngine),t}),u.apply(this,arguments)}function E(n,e,t={}){const r=new si;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(i,a,l,d,p){const _=new g_({next:D=>{a.enqueueAndForget(()=>dw(i,I));const x=D.docs.has(l);!x&&D.fromCache?p.reject(new Me(me.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&D.fromCache&&d&&"server"===d.source?p.reject(new Me(me.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(D)},error:D=>p.reject(D)}),I=new dg(id(l.path),_,{includeMetadataChanges:!0,Nu:!0});return cw(i,I)}(yield o(n),n.asyncQueue,e,t,r)})),r.promise}function C(n,e,t={}){const r=new si;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(i,a,l,d,p){const _=new g_({next:D=>{a.enqueueAndForget(()=>dw(i,I)),D.fromCache&&"server"===d.source?p.reject(new Me(me.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(D)},error:D=>p.reject(D)}),I=new dg(l,_,{includeMetadataChanges:!0,Nu:!0});return cw(i,I)}(yield o(n),n.asyncQueue,e,t,r)})),r.promise}class X{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new FC(this,"async_queue_retry"),this.Wc=()=>{const t=wd();t&&Ue("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=wd();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=wd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new si;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,be.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!Su(t))throw t;Ue("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,kr("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=af.createAndSchedule(this,e,t,r,a=>this.Yc(a));return this.qc.push(i),i}zc(){this.Kc&&ft()}verifyOperationInProgress(){}Xc(){var e=this;return(0,be.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function te(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class Ce{constructor(){this._progressObserver={},this._taskCompletionResolver=new si,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ke extends lf{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new X,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||nn(this),this._firestoreClient.terminate()}}function rt(n){return n._firestoreClient||nn(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function nn(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new yI(n._databaseId,a,n._persistenceKey,(d=t).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var a,d;n._firestoreClient=new ER(n._authCredentials,n._appCheckCredentials,n._queue,r)}function Gl(n,e,t){const r=new si;return n.asyncQueue.enqueue((0,be.Z)(function*(){try{yield uT(n,t),yield wR(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(l=a).name?l.code===me.FAILED_PRECONDITION||l.code===me.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw a;Il("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var l})).then(()=>r.promise)}function m_(n){if(n._initialized||n._terminated)throw new Me(me.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class vo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vo(oi.fromBase64String(e))}catch(t){throw new Me(me.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new vo(oi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Sd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Me(me.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class fg{constructor(e){this._methodName=e}}class gT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Me(me.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Me(me.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Gt(this._lat,e._lat)||Gt(this._long,e._long)}}const LU=/^__.*__$/;class VU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Pl(e,this.data,this.fieldMask,t,this.fieldTransforms):new ld(e,this.data,t,this.fieldTransforms)}}class RP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Pl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function xP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ft()}}class mT{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new mT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return vT(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(xP(this.sa)&&LU.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class UU{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||bd(e)}da(e,t,r,i=!1){return new mT({sa:e,methodName:t,fa:r,path:yr.emptyPath(),oa:!1,la:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function pg(n){const e=n._freezeSettings(),t=bd(n._databaseId);return new UU(n._databaseId,!!e.ignoreUndefinedProperties,t)}function yT(n,e,t,r,i,a={}){const l=n.da(a.merge||a.mergeFields?2:0,e,t,i);DR("Data must be an object, but it was:",l,r);const d=PP(r,l);let p,_;if(a.merge)p=new js(l.fieldMask),_=l.fieldTransforms;else if(a.mergeFields){const I=[];for(const D of a.mergeFields){const x=SR(e,D,t);if(!l.contains(x))throw new Me(me.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);kP(I,x)||I.push(x)}p=new js(I),_=l.fieldTransforms.filter(D=>p.covers(D.field))}else p=null,_=l.fieldTransforms;return new VU(new Si(d),p,_)}class Zw extends fg{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Zw}}function MP(n,e,t){return new mT({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class IR extends fg{_toFieldTransform(e){return new Hh(e.path,new sd)}isEqual(e){return e instanceof IR}}class BU extends fg{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=MP(this,e,!0),r=this._a.map(a=>gg(a,t)),i=new Ml(r);return new Hh(e.path,i)}isEqual(e){return this===e}}class jU extends fg{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=MP(this,e,!0),r=this._a.map(a=>gg(a,t)),i=new Nl(r);return new Hh(e.path,i)}isEqual(e){return this===e}}class $U extends fg{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new od(e.It,OI(e.It,this.wa));return new Hh(e.path,t)}isEqual(e){return this===e}}function CR(n,e,t,r){const i=n.da(1,e,t);DR("Data must be an object, but it was:",i,r);const a=[],l=Si.empty();Cl(r,(p,_)=>{const I=_T(e,p,t);_=(0,V.m9)(_);const D=i.ca(I);if(_ instanceof Zw)a.push(I);else{const x=gg(_,D);null!=x&&(a.push(I),l.set(I,x))}});const d=new js(a);return new RP(l,d,i.fieldTransforms)}function TR(n,e,t,r,i,a){const l=n.da(1,e,t),d=[SR(e,r,t)],p=[i];if(a.length%2!=0)throw new Me(me.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<a.length;x+=2)d.push(SR(e,a[x])),p.push(a[x+1]);const _=[],I=Si.empty();for(let x=d.length-1;x>=0;--x)if(!kP(_,d[x])){const F=d[x];let j=p[x];j=(0,V.m9)(j);const ee=l.ca(F);if(j instanceof Zw)_.push(F);else{const ne=gg(j,ee);null!=ne&&(_.push(F),I.set(F,ne))}}const D=new js(_);return new RP(I,D,l.fieldTransforms)}function NP(n,e,t,r=!1){return gg(t,n.da(r?4:3,e))}function gg(n,e){if(OP(n=(0,V.m9)(n)))return DR("Unsupported field value:",e,n),PP(n,e);if(n instanceof fg)return function(t,r){if(!xP(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let d=gg(l,r.aa(a));null==d&&(d={nullValue:"NULL_VALUE"}),i.push(d),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,V.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return OI(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Qn.fromDate(t);return{timestampValue:Zh(r.It,i)}}if(t instanceof Qn){const i=new Qn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Zh(r.It,i)}}if(t instanceof gT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof vo)return{bytesValue:WI(r.It,t._byteString)};if(t instanceof Xn){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.ha(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:wE(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${p_(t)}`)}(n,e)}function PP(n,e){const t={};return hy(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Cl(n,(r,i)=>{const a=gg(i,e.ra(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function OP(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Qn||n instanceof gT||n instanceof vo||n instanceof Xn||n instanceof fg)}function DR(n,e,t){if(!OP(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=p_(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function SR(n,e,t){if((e=(0,V.m9)(e))instanceof Sd)return e._internalPath;if("string"==typeof e)return _T(n,e);throw vT("Field path arguments must be of type string or ",n,!1,void 0,t)}const HU=new RegExp("[~\\*/\\[\\]]");function _T(n,e,t){if(e.search(HU)>=0)throw vT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Sd(...e.split("."))._internalPath}catch(r){throw vT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function vT(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(a||l)&&(p+=" (found",a&&(p+=` in field ${r}`),l&&(p+=` in document ${i}`),p+=")"),new Me(me.INVALID_ARGUMENT,d+n+p)}function kP(n,e){return n.some(t=>t.isEqual(e))}class Yw{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Xn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new GU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ET("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class GU extends Yw{data(){return super.data()}}function ET(n,e){return"string"==typeof e?_T(n,e):e instanceof Sd?e._internalPath:e._delegate._internalPath}function FP(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Me(me.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Qw{}function cf(n,...e){for(const t of e)n=t._apply(n);return n}class qU extends Qw{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=pg(e.firestore),r=function(i,a,l,d,p,_,I){let D;if(p.isKeyField()){if("array-contains"===_||"array-contains-any"===_)throw new Me(me.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if("in"===_||"not-in"===_){$P(I,_);const F=[];for(const j of I)F.push(jP(d,i,j));D={arrayValue:{values:F}}}else D=jP(d,i,I)}else"in"!==_&&"not-in"!==_&&"array-contains-any"!==_||$P(I,_),D=NP(l,"where",I,"in"===_||"not-in"===_);const x=Fr.create(p,_,D);return function(F,j){if(j.dt()){const ne=Cy(F);if(null!==ne&&!ne.isEqual(j.field))throw new Me(me.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ne.toString()}' and '${j.field.toString()}'`);const je=Iy(F);null!==je&&HP(0,j.field,je)}const ee=function(ne,je){for(const Ye of ne.filters)if(je.indexOf(Ye.op)>=0)return Ye.op;return null}(F,function(ne){switch(ne){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(j.op));if(null!==ee)throw new Me(me.INVALID_ARGUMENT,ee===j.op?`Invalid query. You cannot use more than one '${j.op.toString()}' filter.`:`Invalid query. You cannot use '${j.op.toString()}' filters with '${ee.toString()}' filters.`)}(i,x),x}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Ai(e.firestore,e.converter,function(i,a){const l=i.filters.concat([a]);return new Sa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),l,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class zU extends Qw{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Me(me.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Me(me.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new xl(i,a);return function(d,p){if(null===Iy(d)){const _=Cy(d);null!==_&&HP(0,_,p.field)}}(r,l),l}(e._query,this.ma,this.pa);return new Ai(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Sa(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class LP extends Qw{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new Ai(e.firestore,e.converter,Ty(e._query,this.Ia,this.Ta))}}class VP extends Qw{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=BP(e,this.type,this.Ea,this.Aa);return new Ai(e.firestore,e.converter,(i=t,new Sa((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class UP extends Qw{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=BP(e,this.type,this.Ea,this.Aa);return new Ai(e.firestore,e.converter,(i=t,new Sa((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function BP(n,e,t,r){if(t[0]=(0,V.m9)(t[0]),t[0]instanceof Yw)return function(i,a,l,d,p){if(!d)throw new Me(me.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const _=[];for(const I of $h(i))if(I.field.isKeyField())_.push(Al(a,d.key));else{const D=d.data.field(I.field);if(gy(D))throw new Me(me.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+I.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===D){const x=I.field.canonicalString();throw new Me(me.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${x}' (used as the orderBy) does not exist.`)}_.push(D)}return new Ru(_,p)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=pg(n.firestore);return function(a,l,d,p,_,I){const D=a.explicitOrderBy;if(_.length>D.length)throw new Me(me.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const x=[];for(let F=0;F<_.length;F++){const j=_[F];if(D[F].field.isKeyField()){if("string"!=typeof j)throw new Me(me.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof j}`);if(!cE(a)&&-1!==j.indexOf("/"))throw new Me(me.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${j}' contains a slash.`);const ee=a.path.child(on.fromString(j));if(!Xe.isDocumentKey(ee))throw new Me(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${ee}' is not because it contains an odd number of segments.`);const ne=new Xe(ee);x.push(Al(l,ne))}else{const ee=NP(d,p,j);x.push(ee)}}return new Ru(x,I)}(n._query,n.firestore._databaseId,i,e,t,r)}}function jP(n,e,t){if("string"==typeof(t=(0,V.m9)(t))){if(""===t)throw new Me(me.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cE(e)&&-1!==t.indexOf("/"))throw new Me(me.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(on.fromString(t));if(!Xe.isDocumentKey(r))throw new Me(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Al(n,new Xe(r))}if(t instanceof Xn)return Al(n,t._key);throw new Me(me.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${p_(t)}.`)}function $P(n,e){if(!Array.isArray(n)||0===n.length)throw new Me(me.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Me(me.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function HP(n,e,t){if(!t.isEqual(e))throw new Me(me.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class AR{convertValue(e,t="none"){switch(nd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Tl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ft()}}convertObject(e,t){const r={};return Cl(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new gT(vr(e.latitude),vr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=tE(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Uh(e));default:return null}}convertTimestamp(e){const t=Ta(e);return new Qn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=on.fromString(e);Ft(Ny(r));const i=new Au(r.get(1),r.get(3)),a=new Xe(r.popFirst(5));return i.isEqual(t)||kr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function wT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class tB extends AR{constructor(e){super(),this.firestore=e}convertBytes(e){return new vo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Xn(this.firestore,null,t)}}class mg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ad extends Yw{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Xw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ET("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Xw extends Ad{data(e={}){return super.data(e)}}class df{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new mg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Xw(this._firestore,this._userDataWriter,r.key,r,new mg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Me(me.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new Xw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new mg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const d=new Xw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new mg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,_=-1;return 0!==l.type&&(p=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),_=a.indexOf(l.doc.key)),{type:nB(l.type),doc:d,oldIndex:p,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function nB(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ft()}}function GP(n,e){return n instanceof Ad&&e instanceof Ad?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof df&&e instanceof df&&n._firestore===e._firestore&&Vw(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class hf extends AR{constructor(e){super(),this.firestore=e}convertBytes(e){return new vo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Xn(this.firestore,null,t)}}function qP(n,e,t){n=dn(n,Xn);const r=dn(n.firestore,ke),i=wT(n.converter,e,t);return y_(r,[yT(pg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,xn.none())])}function WP(n,e,t,...r){n=dn(n,Xn);const i=dn(n.firestore,ke),a=pg(i);let l;return l="string"==typeof(e=(0,V.m9)(e))||e instanceof Sd?TR(a,"updateDoc",n._key,e,t,r):CR(a,"updateDoc",n._key,e),y_(i,[l.toMutation(n._key,xn.exists(!0))])}function zP(n,...e){var t,r,i;n=(0,V.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||te(e[l])||(a=e[l],l++);const d={includeMetadataChanges:a.includeMetadataChanges};if(te(e[l])){const D=e[l];e[l]=null===(t=D.next)||void 0===t?void 0:t.bind(D),e[l+1]=null===(r=D.error)||void 0===r?void 0:r.bind(D),e[l+2]=null===(i=D.complete)||void 0===i?void 0:i.bind(D)}let p,_,I;if(n instanceof Xn)_=dn(n.firestore,ke),I=id(n._key.path),p={next:D=>{e[l]&&e[l](RR(_,n,D))},error:e[l+1],complete:e[l+2]};else{const D=dn(n,Ai);_=dn(D.firestore,ke),I=D._query;const x=new hf(_);p={next:F=>{e[l]&&e[l](new df(_,x,D,F))},error:e[l+1],complete:e[l+2]},FP(n._query)}return function(D,x,F,j){const ee=new g_(j),ne=new dg(x,ee,F);return D.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return cw(yield o(D),ne)})),()=>{ee.bc(),D.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return dw(yield o(D),ne)}))}}(rt(_),I,d,p)}function y_(n,e){return function(t,r){const i=new si;return t.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function oR(n,e,t){return vw.apply(this,arguments)}(yield fT(t),r,i)})),i.promise}(rt(n),e)}function RR(n,e,t){const r=t.docs.get(e._key),i=new hf(n);return new Ad(n,i,e._key,r,new mg(t.hasPendingWrites,t.fromCache),e.converter)}const hB={maxAttempts:5};class KP{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=pg(e)}set(e,t,r){this._verifyNotCommitted();const i=ff(e,this._firestore),a=wT(i.converter,t,r),l=yT(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,xn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=ff(e,this._firestore);let l;return l="string"==typeof(t=(0,V.m9)(t))||t instanceof Sd?TR(this._dataReader,"WriteBatch.update",a._key,t,r,i):CR(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,xn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ff(e,this._firestore);return this._mutations=this._mutations.concat(new Gh(t._key,xn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Me(me.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ff(n,e){if((n=(0,V.m9)(n)).firestore!==e)throw new Me(me.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class fB extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=pg(e)}get(e){const t=ff(e,this._firestore),r=new tB(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ft();const a=i[0];if(a.isFoundDocument())return new Yw(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new Yw(this._firestore,r,t._key,null,t.converter);throw ft()})}set(e,t,r){const i=ff(e,this._firestore),a=wT(i.converter,t,r),l=yT(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=ff(e,this._firestore);let l;return l="string"==typeof(t=(0,V.m9)(t))||t instanceof Sd?TR(this._dataReader,"Transaction.update",a._key,t,r,i):CR(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=ff(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ff(e,this._firestore),r=new hf(this._firestore);return super.get(e).then(i=>new Ad(this._firestore,r,t._key,i._document,new mg(!1,!1),t.converter))}}function xR(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Me("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function YP(){if("undefined"==typeof Uint8Array)throw new Me("unimplemented","Uint8Arrays are not available in this environment.")}function QP(){if(!function KS(){return"undefined"!=typeof atob}())throw new Me("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Xc=Xi.SDK_VERSION,(0,Xi._registerComponent)(new Fs.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),l=new ke(new Kv(t.getProvider("auth-internal")),new dP(t.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Me(me.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Au(d.options.projectId,p)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,Xi.registerVersion)(Wv,"3.7.3",n),(0,Xi.registerVersion)(Wv,"3.7.3","esm2017")}();class Jw{constructor(e){this._delegate=e}static fromBase64String(e){return QP(),new Jw(vo.fromBase64String(e))}static fromUint8Array(e){return YP(),new Jw(vo.fromUint8Array(e))}toBase64(){return QP(),this._delegate.toBase64()}toUint8Array(){return YP(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function MR(n){return function bB(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class IB{enableIndexedDbPersistence(e,t){return function Mn(n,e){m_(n=dn(n,ke));const t=rt(n),r=n._freezeSettings(),i=new eT;return Gl(t,i,new fR(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function qs(n){m_(n=dn(n,ke));const e=rt(n),t=n._freezeSettings(),r=new eT;return Gl(e,r,new DP(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Hw(n){if(n._initialized&&!n._terminated)throw new Me(me.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new si;return n._queue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{yield(t=(0,be.Z)(function*(r){if(!Uo.C())return Promise.resolve();const i=r+"main";yield Uo.delete(i)}),function(r){return t.apply(this,arguments)})(jE(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class XP{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Au||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Il("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function iT(n,e,t,r={}){var i;const a=(n=dn(n,lf))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&Il("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,d;if("string"==typeof r.mockUserToken)l=r.mockUserToken,d=ii.MOCK_USER;else{l=(0,V.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new Me(me.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new ii(p)}n._authCredentials=new zv(new VS(l,d))}}(this._delegate,e,t,r)}enableNetwork(){return function qw(n){return function c(n){return n.asyncQueue.enqueue((0,be.Z)(function*(){const e=yield bR(n),t=yield hT(n);return e.setNetworkEnabled(!0),function(r){const i=nt(r);return i._u.delete(0),Qy(i)}(t)}))}(rt(n=dn(n,ke)))}(this._delegate)}disableNetwork(){return function Ww(n){return function h(n){return n.asyncQueue.enqueue((0,be.Z)(function*(){const e=yield bR(n),t=yield hT(n);return e.setNetworkEnabled(!1),(r=(0,be.Z)(function*(i){const a=nt(i);a._u.add(0),yield nf(a),a.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(rt(n=dn(n,ke)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,pR("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Gw(n){return function(e){const t=new si;return e.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function Iw(n,e){return c_.apply(this,arguments)}(yield fT(e),t)})),t.promise}(rt(n=dn(n,ke)))}(this._delegate)}onSnapshotsInSync(e){return function dB(n,e){return function R(n,e){const t=new g_(e);return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return r=yield o(n),i=t,nt(r).Ru.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return r=yield o(n),i=t,void nt(r).Ru.delete(i);var r,i}))}}(rt(n=dn(n,ke)),te(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Me("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new __(this,gR(this._delegate,e))}catch(t){throw Ws(t,"collection()","Firestore.collection()")}}doc(e){try{return new Oa(this,Dd(this._delegate,e))}catch(t){throw Ws(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new zs(this,function sT(n,e){if(n=dn(n,lf),tT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Me(me.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ai(n,null,(t=e,new Sa(on.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ws(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function pB(n,e,t){n=dn(n,ke);const r=Object.assign(Object.assign({},hB),t);return function(i){if(i.maxAttempts<1)throw new Me(me.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,l){const d=new si;return i.asyncQueue.enqueueAndForget((0,be.Z)(function*(){const p=yield function s(n){return Bw(n).then(e=>e.datastore)}(i);new vR(i.asyncQueue,p,l,a,d).run()})),d.promise}(rt(n),i=>e(new fB(n,i)),r)}(this._delegate,t=>e(new JP(this,t)))}batch(){return rt(this._delegate),new eO(new KP(this._delegate,e=>y_(this._delegate,e)))}loadBundle(e){return function zw(n,e){const t=rt(n=dn(n,ke)),r=new Ce;return function N(n,e,t,r){const i=function(a,l){let d;return d="string"==typeof a?(new TextEncoder).encode(a):a,p=function(p,_){if(p instanceof Uint8Array)return aT(p,_);if(p instanceof ArrayBuffer)return aT(new Uint8Array(p),_);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new SP(p,l);var p}(t,bd(e));n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){!function TP(n,e,t){const r=nt(n);var i;(i=(0,be.Z)(function*(a,l,d){try{const p=yield l.getMetadata();if(yield function(x,F){const j=nt(x),ee=_i(F.createTime);return j.persistence.runTransaction("hasNewerBundle","readonly",ne=>j.Ns.getBundleMetadata(ne,F.id)).then(ne=>!!ne&&ne.createTime.compareTo(ee)>=0)}(a.localStore,p))return yield l.close(),d._completeWith({taskState:"Success",documentsLoaded:(x=p).totalDocuments,bytesLoaded:x.totalBytes,totalDocuments:x.totalDocuments,totalBytes:x.totalBytes}),Promise.resolve(new Set);d._updateProgress(pw(p));const _=new fw(p,a.localStore,l.It);let I=yield l.mc();for(;I;){const x=yield _.Fu(I);x&&d._updateProgress(x),I=yield l.mc()}const D=yield _.complete();return yield Pa(a,D.Lu,void 0),yield function(x,F){const j=nt(x);return j.persistence.runTransaction("Save bundle","readwrite",ee=>j.Ns.saveBundleMetadata(ee,F))}(a.localStore,p),d._completeWith(D.progress),Promise.resolve(D.Bu)}catch(p){return Il("SyncEngine",`Loading bundle failed with ${p}`),d._failWith(p),Promise.resolve(new Set)}var x}),function(a,l,d){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield fT(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Kw(n,e){return function U(n,e){return n.asyncQueue.enqueue((0,be.Z)(function*(){return function(t,r){const i=nt(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ns.getNamedQuery(a,r))}(yield $w(n),e)}))}(rt(n=dn(n,ke)),e).then(t=>t?new Ai(n,null,t.query):null)}(this._delegate,e).then(t=>t?new zs(this,t):null)}}class bT extends AR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jw(new vo(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Oa.forKey(t,this.firestore,null)}}class JP{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new bT(e)}get(e){const t=_g(e);return this._delegate.get(t).then(r=>new e0(this._firestore,new Ad(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=_g(e);return r?(xR("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=_g(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=_g(e);return this._delegate.delete(t),this}}class eO{constructor(e){this._delegate=e}set(e,t,r){const i=_g(e);return r?(xR("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=_g(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=_g(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class yg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Xw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new t0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=yg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new yg(e,new bT(e),t),i.set(t,a)),a}}yg.INSTANCES=new WeakMap;class Oa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new bT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Me("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Oa(t,new Xn(t._delegate,r,new Xe(e)))}static forKey(e,t,r){return new Oa(t,new Xn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new __(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new __(this.firestore,gR(this._delegate,e))}catch(t){throw Ws(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,V.m9)(e))instanceof Xn&&oT(this._delegate,e)}set(e,t){t=xR("DocumentReference.set",t);try{return t?qP(this._delegate,e,t):qP(this._delegate,e)}catch(r){throw Ws(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?WP(this._delegate,e):WP(this._delegate,e,t,...r)}catch(i){throw Ws(i,"updateDoc()","DocumentReference.update()")}}delete(){return function lB(n){return y_(dn(n.firestore,ke),[new Gh(n._key,xn.none())])}(this._delegate)}onSnapshot(...e){const t=tO(e),r=nO(e,i=>new e0(this.firestore,new Ad(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return zP(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function iB(n){n=dn(n,Xn);const e=dn(n.firestore,ke),t=rt(e),r=new hf(e);return function m(n,e){const t=new si;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(r=(0,be.Z)(function*(i,a,l){try{const d=yield function(p,_){const I=nt(p);return I.persistence.runTransaction("read document","readonly",D=>I.localDocuments.getDocument(D,_))}(i,a);d.isFoundDocument()?l.resolve(d):d.isNoDocument()?l.resolve(null):l.reject(new Me(me.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const p=Id(d,`Failed to get document '${a} from cache`);l.reject(p)}}),function(i,a,l){return r.apply(this,arguments)})(yield $w(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Ad(e,r,n._key,i,new mg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function sB(n){n=dn(n,Xn);const e=dn(n.firestore,ke);return E(rt(e),n._key,{source:"server"}).then(t=>RR(e,n,t))}(this._delegate):function rB(n){n=dn(n,Xn);const e=dn(n.firestore,ke);return E(rt(e),n._key).then(t=>RR(e,n,t))}(this._delegate),t.then(r=>new e0(this.firestore,new Ad(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Oa(this.firestore,this._delegate.withConverter(e?yg.getInstance(this.firestore,e):null))}}function Ws(n,e,t){return n.message=n.message.replace(e,t),n}function tO(n){for(const e of n)if("object"==typeof e&&!MR(e))return e;return{}}function nO(n,e){var t,r;let i;return i=MR(n[0])?n[0]:MR(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class e0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Oa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return GP(this._delegate,e._delegate)}}class t0 extends e0{data(e){const t=this._delegate.data(e);return function hI(n,e){n||ft()}(void 0!==t),t}}class zs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new bT(e)}where(e,t,r){try{return new zs(this.firestore,cf(this._delegate,function WU(n,e,t){const r=e,i=ET("where",n);return new qU(i,r,t)}(e,t,r)))}catch(i){throw Ws(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new zs(this.firestore,cf(this._delegate,function KU(n,e="asc"){const t=e,r=ET("orderBy",n);return new zU(r,t)}(e,t)))}catch(r){throw Ws(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new zs(this.firestore,cf(this._delegate,function ZU(n){return rT("limit",n),new LP("limit",n,"F")}(e)))}catch(t){throw Ws(t,"limit()","Query.limit()")}}limitToLast(e){try{return new zs(this.firestore,cf(this._delegate,function YU(n){return rT("limitToLast",n),new LP("limitToLast",n,"L")}(e)))}catch(t){throw Ws(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new zs(this.firestore,cf(this._delegate,function QU(...n){return new VP("startAt",n,!0)}(...e)))}catch(t){throw Ws(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new zs(this.firestore,cf(this._delegate,function XU(...n){return new VP("startAfter",n,!1)}(...e)))}catch(t){throw Ws(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new zs(this.firestore,cf(this._delegate,function JU(...n){return new UP("endBefore",n,!1)}(...e)))}catch(t){throw Ws(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new zs(this.firestore,cf(this._delegate,function eB(...n){return new UP("endAt",n,!0)}(...e)))}catch(t){throw Ws(t,"endAt()","Query.endAt()")}}isEqual(e){return Vw(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function aB(n){n=dn(n,Ai);const e=dn(n.firestore,ke),t=rt(e),r=new hf(e);return function b(n,e){const t=new si;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(r=(0,be.Z)(function*(i,a,l){try{const d=yield Wy(i,a,!0),p=new mw(a,d.Hi),_=p.Wu(d.documents),I=p.applyChanges(_,!1);l.resolve(I.snapshot)}catch(d){const p=Id(d,`Failed to execute query '${a} against cache`);l.reject(p)}}),function(i,a,l){return r.apply(this,arguments)})(yield $w(n),e,t);var r})),t.promise}(t,n._query).then(i=>new df(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function uB(n){n=dn(n,Ai);const e=dn(n.firestore,ke),t=rt(e),r=new hf(e);return C(t,n._query,{source:"server"}).then(i=>new df(e,r,n,i))}(this._delegate):function oB(n){n=dn(n,Ai);const e=dn(n.firestore,ke),t=rt(e),r=new hf(e);return FP(n._query),C(t,n._query).then(i=>new df(e,r,n,i))}(this._delegate),t.then(r=>new NR(this.firestore,new df(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=tO(e),r=nO(e,i=>new NR(this.firestore,new df(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return zP(this._delegate,t,r)}withConverter(e){return new zs(this.firestore,this._delegate.withConverter(e?yg.getInstance(this.firestore,e):null))}}class TB{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new t0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class NR{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new zs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new t0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new TB(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new t0(this._firestore,r))})}isEqual(e){return GP(this._delegate,e._delegate)}}class __ extends zs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Oa(this.firestore,e):null}doc(e){try{return new Oa(this.firestore,void 0===e?Dd(this._delegate):Dd(this._delegate,e))}catch(t){throw Ws(t,"doc()","CollectionReference.doc()")}}add(e){return function cB(n,e){const t=dn(n.firestore,ke),r=Dd(n),i=wT(n.converter,e);return y_(t,[yT(pg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,xn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Oa(this.firestore,t))}isEqual(e){return oT(this._delegate,e._delegate)}withConverter(e){return new __(this.firestore,this._delegate.withConverter(e?yg.getInstance(this.firestore,e):null))}}function _g(n){return dn(n,Xn)}class PR{constructor(...e){this._delegate=new Sd(...e)}static documentId(){return new PR(yr.keyField().canonicalString())}isEqual(e){return(e=(0,V.m9)(e))instanceof Sd&&this._delegate._internalPath.isEqual(e._internalPath)}}class vg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function mB(){return new IR("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new vg(e)}static delete(){const e=function gB(){return new Zw("deleteField")}();return e._methodName="FieldValue.delete",new vg(e)}static arrayUnion(...e){const t=function yB(...n){return new BU("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new vg(t)}static arrayRemove(...e){const t=function _B(...n){return new jU("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new vg(t)}static increment(e){const t=function vB(n){return new $U("increment",n)}(e);return t._methodName="FieldValue.increment",new vg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const DB={Firestore:XP,GeoPoint:gT,Timestamp:Qn,Blob:Jw,Transaction:JP,WriteBatch:eO,DocumentReference:Oa,DocumentSnapshot:e0,Query:zs,QueryDocumentSnapshot:t0,QuerySnapshot:NR,CollectionReference:__,FieldPath:PR,FieldValue:vg,setLogLevel:function CB(n){!function LS(n){Du.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function AB(n){(function SB(n,e){n.INTERNAL.registerComponent(new Fs.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},DB)))})(n,(e,t)=>new XP(e,t,new IB)),n.registerVersion("@firebase/firestore-compat","0.2.3")}(Ls.Z);var OR=L(6451),n0=L(5363),RB=L(6063);class xB extends as.x{constructor(e=1/0,t=1/0,r=RB.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let d=0;for(let p=1;p<r.length&&r[p]<=l;p+=2)d=p;d&&r.splice(0,d+1)}}}var rO=L(3099);function iO(n,e,t){var r,i;let a,l=!1;return n&&"object"==typeof n?(a=null!==(r=n.bufferSize)&&void 0!==r?r:1/0,e=null!==(i=n.windowTime)&&void 0!==i?i:1/0,l=!!n.refCount,t=n.scheduler):a=null!=n?n:1/0,(0,rO.B)({connector:()=>new xB(a,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:l})}function sO(n,e){return(0,nl.m)(e)?Zt(()=>n,e):Zt(()=>n)}var kR=L(9468);L(5867);const LR=new Map,aO={activated:!1,tokenObservers:[]},kB={initialized:!1,enabled:!1};function ns(n){return LR.get(n)||Object.assign({},aO)}function CT(){return kB}class jB{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,be.Z)(function*(){t.stop();try{t.pending=new V.BH,yield function $B(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new V.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ks=new V.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function lO(n){if(!ns(n).activated)throw Ks.create("use-before-activation",{appName:n.name})}function BR(n,e){return jR.apply(this,arguments)}function jR(){return jR=(0,be.Z)(function*({url:n,body:e},t){var r,i;const a={"Content-Type":"application/json"},l=t.getImmediate({optional:!0});if(l){const F=yield l.getHeartbeatsHeader();F&&(a["X-Firebase-Client"]=F)}const d={method:"POST",body:JSON.stringify(e),headers:a};let p,_;try{p=yield fetch(n,d)}catch(F){throw Ks.create("fetch-network-error",{originalErrorMessage:null===(r=F)||void 0===r?void 0:r.message})}if(200!==p.status)throw Ks.create("fetch-status-error",{httpStatus:p.status});try{_=yield p.json()}catch(F){throw Ks.create("fetch-parse-error",{originalErrorMessage:null===(i=F)||void 0===i?void 0:i.message})}const I=_.ttl.match(/^([\d.]+)(s)$/);if(!I||!I[2]||isNaN(Number(I[1])))throw Ks.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${_.ttl}`});const D=1e3*Number(I[1]),x=Date.now();return{token:_.token,expireTimeMillis:x+D,issuedAtTimeMillis:x}}),jR.apply(this,arguments)}function WB(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const r0="firebase-app-check-store";let ST=null;function dO(){return ST||(ST=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var a;e(Ks.create("storage-open",{originalErrorMessage:null===(a=i.target.error)||void 0===a?void 0:a.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(r0,{keyPath:"compositeKey"})}}catch(r){e(Ks.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),ST)}function $R(){return $R=(0,be.Z)(function*(n,e){const r=(yield dO()).transaction(r0,"readwrite"),a=r.objectStore(r0).put({compositeKey:n,value:e});return new Promise((l,d)=>{a.onsuccess=p=>{l()},r.onerror=p=>{var _;d(Ks.create("storage-set",{originalErrorMessage:null===(_=p.target.error)||void 0===_?void 0:_.message}))}})}),$R.apply(this,arguments)}const s0=new ho.Yd("@firebase/app-check");function qR(n,e){return(0,V.hl)()?function YB(n,e){return function hO(n,e){return $R.apply(this,arguments)}(function pO(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{s0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function gO(){return CT().enabled}function mO(){return zR.apply(this,arguments)}function zR(){return zR=(0,be.Z)(function*(){const n=CT();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),zR.apply(this,arguments)}const n2={error:"UNKNOWN_ERROR"};function r2(n){return V.US.encodeString(JSON.stringify(n),!1)}function AT(n){return KR.apply(this,arguments)}function KR(){return KR=(0,be.Z)(function*(n,e=!1){const t=n.app;lO(t);const r=ns(t);let a,i=r.token;if(i&&!v_(i)&&(r.token=void 0,i=void 0),!i){const p=yield r.cachedTokenPromise;p&&(v_(p)?i=p:yield qR(t,void 0))}if(!e&&i&&v_(i))return{token:i.token};let d,l=!1;if(gO()){r.exchangeTokenPromise||(r.exchangeTokenPromise=BR(WB(t,yield mO()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const p=yield r.exchangeTokenPromise;return yield qR(t,p),r.token=p,{token:p.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield ns(t).exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?s0.warn(p.message):s0.error(p),a=p}return i?a?d=v_(i)?{token:i.token,internalError:a}:vO(a):(d={token:i.token},r.token=i,yield qR(t,i)):d=vO(a),l&&_O(t,d),d}),KR.apply(this,arguments)}function YR(n,e){const t=ns(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function yO(n){const{app:e}=n,t=ns(e);let r=t.tokenRefresher;r||(r=function i2(n){const{app:e}=n;return new jB((0,be.Z)(function*(){let r;if(r=ns(e).token?yield AT(n,!0):yield AT(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=ns(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function _O(n,e){const t=ns(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function v_(n){return n.expireTimeMillis-Date.now()>0}function vO(n){return{token:r2(n2),error:n}}class s2{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=ns(this.app);for(const t of e)YR(this.app,t.next);return Promise.resolve()}}const SO="app-check-internal";!function v2(){(0,Xi._registerComponent)(new Fs.wA("app-check",n=>function o2(n,e){return new s2(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(SO).initialize()})),(0,Xi._registerComponent)(new Fs.wA(SO,n=>function a2(n){return{getToken:e=>AT(n,e),addTokenListener:e=>function ZR(n,e,t,r){const{app:i}=n,a=ns(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&v_(a.token)){const d=a.token;Promise.resolve().then(()=>{t({token:d.token}),yO(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>yO(n))}(n,"INTERNAL",e),removeTokenListener:e=>YR(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Xi.registerVersion)("@firebase/app-check","0.5.17")}();class o0{constructor(){return(0,Tn.vb)("app-check")}}"undefined"!=typeof window&&window;var xT=L(127);const tx=new f.OlP("angularfire2.auth.use-emulator"),nx=new f.OlP("angularfire2.auth.settings"),rx=new f.OlP("angularfire2.auth.tenant-id"),ix=new f.OlP("angularfire2.auth.langugage-code"),sx=new f.OlP("angularfire2.auth.use-device-language"),ox=new f.OlP("angularfire.auth.persistence"),ax=(n,e,t,r,i,a,l,d)=>(0,ni.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=e.runOutsideAngular(()=>n.auth());if(t&&p.useEmulator(...t),r&&(p.tenantId=r),p.languageCode=i,a&&p.useDeviceLanguage(),l)for(const[_,I]of Object.entries(l))p.settings[_]=I;return d&&p.setPersistence(d),p},[t,r,i,a,l,d]);let a0=(()=>{class n{constructor(t,r,i,a,l,d,p,_,I,D,x,F){const j=new as.x,ee=dt(void 0).pipe((0,n0.Q)(l.outsideAngular),Zt(()=>a.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,5881)))),(0,It.U)(()=>(0,ni.on)(t,a,r)),(0,It.U)(ne=>ax(ne,a,d,_,I,D,p,x)),iO({bufferSize:1,refCount:!1}));if(ic(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=dt(null);else{ee.pipe(Rs()).subscribe();const je=ee.pipe(Zt(Ke=>Ke.getRedirectResult().then(bt=>bt,()=>null)),Tn.iC,iO({bufferSize:1,refCount:!1})),Ye=ee.pipe(Zt(Ke=>new Wn.y(bt=>({unsubscribe:a.runOutsideAngular(()=>Ke.onAuthStateChanged(St=>bt.next(St),St=>bt.error(St),()=>bt.complete()))})))),We=ee.pipe(Zt(Ke=>new Wn.y(bt=>({unsubscribe:a.runOutsideAngular(()=>Ke.onIdTokenChanged(St=>bt.next(St),St=>bt.error(St),()=>bt.complete()))}))));this.authState=je.pipe(sO(Ye),(0,kR.R)(l.outsideAngular),(0,n0.Q)(l.insideAngular)),this.user=je.pipe(sO(We),(0,kR.R)(l.outsideAngular),(0,n0.Q)(l.insideAngular)),this.idToken=this.user.pipe(Zt(Ke=>Ke?(0,In.D)(Ke.getIdToken()):dt(null))),this.idTokenResult=this.user.pipe(Zt(Ke=>Ke?(0,In.D)(Ke.getIdTokenResult()):dt(null))),this.credential=(0,OR.T)(je,j,this.authState.pipe(ki(Ke=>!Ke))).pipe((0,It.U)(Ke=>(null==Ke?void 0:Ke.user)?Ke:null),(0,kR.R)(l.outsideAngular),(0,n0.Q)(l.insideAngular))}return(0,ni.pX)(this,ee,a,{spy:{apply:(ne,je,Ye)=>{(ne.startsWith("signIn")||ne.startsWith("createUser"))&&Ye.then(We=>j.next(We))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ni.Dh),f.LFG(ni.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Tn.HU),f.LFG(tx,8),f.LFG(nx,8),f.LFG(rx,8),f.LFG(ix,8),f.LFG(sx,8),f.LFG(ox,8),f.LFG(o0,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),T2=(()=>{class n{constructor(){xT.Z.registerVersion("angularfire",Tn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[a0]}),n})();function RO(n,e){return function D2(n,e=Dm.z){return new Wn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function ux(n,e){return RO(n,e).pipe((0,It.U)(t=>({payload:t,type:"query"})))}function MT(n,e){return ux(n,e).pipe(Oi(void 0),Sm(),(0,It.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,d)=>{const p=i.find(I=>I.doc.ref.isEqual(l.ref)),_=null==t?void 0:t.payload.docs.find(I=>I.ref.isEqual(l.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(l.metadata)||!p&&_&&JSON.stringify(_.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:l}})}),a}))}function xO(n,e,t){return MT(n,t).pipe(hi((r,i)=>function A2(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function R2(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return lx(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return lx(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return lx(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),fv(),(0,It.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function lx(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function MO(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class NO{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=MT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,It.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Oi(void 0),Sm(),ki(([r,i])=>i.length>0||!r),(0,It.U)(([r,i])=>i),Tn.iC)}auditTrail(e){return this.stateChanges(e).pipe(hi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=MO(e);return xO(this.query,t,this.afs.schedulers.outsideAngular).pipe(Tn.iC)}valueChanges(e={}){return ux(this.query,this.afs.schedulers.outsideAngular).pipe((0,It.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Tn.iC)}get(e){return(0,In.D)(this.query.get(e)).pipe(Tn.iC)}add(e){return this.ref.add(e)}doc(e){return new PO(this.ref.doc(e),this.afs)}}class PO{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=FO(r,t);return new NO(i,a,this.afs)}snapshotChanges(){return function S2(n,e){return RO(n,e).pipe(Oi(void 0),Sm(),(0,It.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Tn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,It.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,In.D)(this.ref.get(e)).pipe(Tn.iC)}}class x2{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?MT(this.query,this.afs.schedulers.outsideAngular).pipe((0,It.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ki(t=>t.length>0),Tn.iC):MT(this.query,this.afs.schedulers.outsideAngular).pipe(Tn.iC)}auditTrail(e){return this.stateChanges(e).pipe(hi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=MO(e);return xO(this.query,t,this.afs.schedulers.outsideAngular).pipe(Tn.iC)}valueChanges(e={}){return ux(this.query,this.afs.schedulers.outsideAngular).pipe((0,It.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Tn.iC)}get(e){return(0,In.D)(this.query.get(e)).pipe(Tn.iC)}}const OO=new f.OlP("angularfire2.enableFirestorePersistence"),kO=new f.OlP("angularfire2.firestore.persistenceSettings"),M2=new f.OlP("angularfire2.firestore.settings"),N2=new f.OlP("angularfire2.firestore.use-emulator");function FO(n,e=(t=>t)){return{query:e(n),ref:n}}let LO=(()=>{class n{constructor(t,r,i,a,l,d,p,_,I,D,x,F,j,ee,ne,je,Ye){this.schedulers=p;const We=(0,ni.on)(t,d,r),Ke=I;D&&ax(We,d,x,j,ee,ne,F,je),[this.firestore,this.persistenceEnabled$]=(0,ni.cc)(`${We.name}.firestore`,"AngularFirestore",We.name,()=>{const bt=d.runOutsideAngular(()=>We.firestore());if(a&&bt.settings(a),Ke&&bt.useEmulator(...Ke),i&&!ic(l)){const St=()=>{try{return(0,In.D)(bt.enablePersistence(_||void 0).then(()=>!0,()=>!1))}catch(cn){return"undefined"!=typeof console&&console.warn(cn),dt(!1)}};return[bt,d.runOutsideAngular(St)]}return[bt,dt(!1)]},[a,Ke,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=FO(i,r),d=this.schedulers.ngZone.run(()=>a);return new NO(d,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new x2(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new PO(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ni.Dh),f.LFG(ni.xv,8),f.LFG(OO,8),f.LFG(M2,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Tn.HU),f.LFG(kO,8),f.LFG(N2,8),f.LFG(a0,8),f.LFG(tx,8),f.LFG(nx,8),f.LFG(rx,8),f.LFG(ix,8),f.LFG(sx,8),f.LFG(ox,8),f.LFG(o0,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),P2=(()=>{class n{constructor(){xT.Z.registerVersion("angularfire",Tn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:OO,useValue:!0},{provide:kO,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[LO]}),n})(),Eg=(()=>{class n{constructor(t,r,i,a){this.afs=t,this.afAuth=r,this.router=i,this.ngZone=a,this.afAuth.authState.subscribe(l=>{l?(this.userData=l,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{this.SetUserData(i.user),this.afAuth.authState.subscribe(a=>{a&&this.router.navigate(["dashboard"])})}).catch(i=>{window.alert(i.message)})}SignUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r).then(i=>{this.SendVerificationMail(),this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}GoogleAuth(){return this.AuthLogin(new _b.Q).then(t=>{this.router.navigate(["dashboard"])})}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(r=>{this.router.navigate(["dashboard"]),this.SetUserData(r.user)}).catch(r=>{window.alert(r)})}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(LO),f.LFG(a0),f.LFG(Qi),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),O2=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Eg))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-sign-in"]],decls:24,vars:0,consts:[[1,"authContainer"],[1,"authBlock"],[1,"formGroup"],["type","text","placeholder","Username/email","required","",1,"formControl"],["userName",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPassword",""],["type","button","value","Log in",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],[1,"forgotPassword"],["routerLink","/forgot-password"],[1,"redirectToLogin"],["routerLink","/register-user",1,"redirect"]],template:function(t,r){if(1&t){const i=f.EpF();f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"h3"),f._uU(3,"Sign In"),f.qZA(),f.TgZ(4,"div",2),f._UZ(5,"input",3,4),f.qZA(),f.TgZ(7,"div",2),f._UZ(8,"input",5,6),f.qZA(),f.TgZ(10,"div",2),f.TgZ(11,"input",7),f.NdJ("click",function(){f.CHM(i);const l=f.MAs(6),d=f.MAs(9);return r.authService.SignIn(l.value,d.value)}),f.qZA(),f.qZA(),f.TgZ(12,"div",2),f.TgZ(13,"span",8),f.TgZ(14,"span",9),f._uU(15,"Or"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(16,"div",10),f.TgZ(17,"span",11),f._uU(18,"Forgot Password?"),f.qZA(),f.qZA(),f.TgZ(19,"div",12),f.TgZ(20,"span"),f._uU(21,"Don't have an account?"),f.TgZ(22,"span",13),f._uU(23," Sign Up"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()}},styles:[".authContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;min-height:100vh}.authContainer[_ngcontent-%COMP%]   .authBlock[_ngcontent-%COMP%]{border:1px solid #E91E63}"]}),n})(),k2=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Eg))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-sign-up"]],decls:26,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["userEmail",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPwd",""],["type","button","value","Sign Up",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],["type","button",1,"btn","googleBtn",3,"click"],[1,"fab","fa-google-plus-g"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,r){if(1&t){const i=f.EpF();f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"div",2),f.TgZ(3,"h3"),f._uU(4,"Sign Up"),f.qZA(),f.TgZ(5,"div",3),f._UZ(6,"input",4,5),f.qZA(),f.TgZ(8,"div",3),f._UZ(9,"input",6,7),f.qZA(),f.TgZ(11,"div",3),f.TgZ(12,"input",8),f.NdJ("click",function(){f.CHM(i);const l=f.MAs(7),d=f.MAs(10);return r.authService.SignUp(l.value,d.value)}),f.qZA(),f.qZA(),f.TgZ(13,"div",3),f.TgZ(14,"span",9),f.TgZ(15,"span",10),f._uU(16,"Or"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(17,"div",3),f.TgZ(18,"button",11),f.NdJ("click",function(){return r.authService.GoogleAuth()}),f._UZ(19,"i",12),f._uU(20," Continue with Google "),f.qZA(),f.qZA(),f.qZA(),f.TgZ(21,"div",13),f.TgZ(22,"span"),f._uU(23,"Already have an account? "),f.TgZ(24,"span",14),f._uU(25,"Log In"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()}},styles:[""]}),n})();function F2(n,e){if(1&n&&(f.TgZ(0,"div",4),f.TgZ(1,"div",18),f.TgZ(2,"div",19),f._UZ(3,"img",20),f.TgZ(4,"div",21),f.TgZ(5,"h1"),f._uU(6,"Hello: "),f.TgZ(7,"strong"),f._uU(8),f.qZA(),f.qZA(),f.TgZ(9,"p"),f._uU(10,"User ID: "),f.TgZ(11,"strong"),f._uU(12),f.qZA(),f.qZA(),f.TgZ(13,"p"),f._uU(14,"Email: "),f.TgZ(15,"strong"),f._uU(16),f.qZA(),f.qZA(),f.TgZ(17,"p"),f._uU(18,"Email Verified: "),f.TgZ(19,"strong"),f._uU(20),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&n){const t=e.ngIf;f.xp6(3),f.s9C("src",t.photoURL?t.photoURL:"/assets/dummy-user.png",f.LSH),f.s9C("alt",t.displayName),f.xp6(5),f.Oqu(t.displayName?t.displayName:"User"),f.xp6(4),f.Oqu(t.uid),f.xp6(4),f.Oqu(t.email),f.xp6(4),f.Oqu(t.emailVerified)}}let L2=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Eg))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-dashboard"]],decls:22,vars:1,consts:[[1,"navbar","navbar-dark","fixed-top","bg-dark","flex-md-nowrap","p-0","shadow"],[1,"navbar-brand","col-sm-3","col-md-2","mr-0"],["src","assets/logo-positronx-white.svg","alt","positronX.io Logo",1,"brand-logo"],[1,"container-fluid"],[1,"row"],[1,"col-md-2","d-md-block","bg-light","sidebar"],[1,"sidebar-sticky"],[1,"nav","flex-column"],[1,"nav-item"],[1,"nav-link","active"],[1,"fas","fa-user"],[1,"nav-link",3,"click"],[1,"fas","fa-sign-out-alt"],["role","main",1,"col-md-9","ml-sm-auto","col-lg-10","px-4"],[1,"inner-adjust"],[1,"pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],["class","row",4,"ngIf"],[1,"col-md-12"],[1,"media"],[1,"align-self-start","mr-5","img-thumbnail","rounded-circle",3,"src","alt"],[1,"media-body"]],template:function(t,r){1&t&&(f.TgZ(0,"nav",0),f.TgZ(1,"a",1),f._UZ(2,"img",2),f.qZA(),f.qZA(),f.TgZ(3,"div",3),f.TgZ(4,"div",4),f.TgZ(5,"nav",5),f.TgZ(6,"div",6),f.TgZ(7,"ul",7),f.TgZ(8,"li",8),f.TgZ(9,"a",9),f._UZ(10,"i",10),f._uU(11,"User Profile "),f.qZA(),f.qZA(),f.TgZ(12,"li",8),f.TgZ(13,"a",11),f.NdJ("click",function(){return r.authService.SignOut()}),f._UZ(14,"i",12),f._uU(15,"Log out "),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(16,"main",13),f.TgZ(17,"div",14),f.TgZ(18,"div",15),f.TgZ(19,"h1",16),f._uU(20,"User Profile"),f.qZA(),f.qZA(),f.YNc(21,F2,21,6,"div",17),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&t&&(f.xp6(21),f.Q6J("ngIf",r.authService.userData))},directives:[Qr],styles:[""]}),n})(),V2=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Eg))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-forgot-password"]],decls:17,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"text-center"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["passwordResetEmail",""],["type","submit","value","Reset Password",1,"btn","btnPrimary",3,"click"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,r){if(1&t){const i=f.EpF();f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"div",2),f.TgZ(3,"h3"),f._uU(4,"Reset Password"),f.qZA(),f.TgZ(5,"p",3),f._uU(6,"Please enter your email address to request a password reset."),f.qZA(),f.TgZ(7,"div",4),f._UZ(8,"input",5,6),f.qZA(),f.TgZ(10,"div",4),f.TgZ(11,"input",7),f.NdJ("click",function(){f.CHM(i);const l=f.MAs(9);return r.authService.ForgotPassword(l.value)}),f.qZA(),f.qZA(),f.qZA(),f.TgZ(12,"div",8),f.TgZ(13,"span"),f._uU(14,"Go back to ? "),f.TgZ(15,"span",9),f._uU(16,"Log In"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()}},styles:[""]}),n})();function U2(n,e){if(1&n&&(f.TgZ(0,"div",4),f.TgZ(1,"p",9),f._uU(2,"We have sent a confirmation email to "),f.TgZ(3,"strong"),f._uU(4),f.qZA(),f._uU(5,"."),f.qZA(),f.TgZ(6,"p",9),f._uU(7,"Please check your email and click on the link to verfiy your email address."),f.qZA(),f.qZA()),2&n){const t=e.ngIf;f.xp6(4),f.Oqu(t.email)}}const B2=[{path:"",redirectTo:"/sign-in",pathMatch:"full"},{path:"sign-in",component:O2},{path:"register-user",component:k2},{path:"dashboard",component:L2,canActivate:[(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return!0!==this.authService.isLoggedIn&&this.router.navigate(["sign-in"]),!0}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Eg),f.LFG(Qi))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()]},{path:"forgot-password",component:V2},{path:"verify-email-address",component:(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Eg))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-verify-email"]],decls:15,vars:1,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],["class","formGroup",4,"ngIf"],[1,"formGroup"],["type","button",1,"btn","btnPrimary",3,"click"],[1,"fas","fa-redo-alt"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"],[1,"text-center"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"div",2),f.TgZ(3,"h3"),f._uU(4,"Thank You for Registering"),f.qZA(),f.YNc(5,U2,8,1,"div",3),f.TgZ(6,"div",4),f.TgZ(7,"button",5),f.NdJ("click",function(){return r.authService.SendVerificationMail()}),f._UZ(8,"i",6),f._uU(9," Resend Verification Email "),f.qZA(),f.qZA(),f.qZA(),f.TgZ(10,"div",7),f.TgZ(11,"span"),f._uU(12,"Go back to?"),f.TgZ(13,"span",8),f._uU(14," Sign in"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&t&&(f.xp6(5),f.Q6J("ngIf",r.authService.userData))},directives:[Qr],styles:[""]}),n})()}];let j2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[Em.forChild(B2)],Em]}),n})();const $2=[];let H2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[Em.forRoot($2),j2],Em]}),n})();let G2=(()=>{class n{constructor(){this.title="Bucket List",this.version="0"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},directives:[pl],styles:[""]}),n})();class UO{}const Rd="*";function BO(n,e=null){return{type:2,steps:n,options:e}}function jO(n){return{type:6,styles:n,offset:null}}function $O(n){Promise.resolve(null).then(n)}class E_{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){$O(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class HO{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const a=this.players.length;0==a?$O(()=>this._onFinish()):this.players.forEach(l=>{l.onDone(()=>{++t==a&&this._onFinish()}),l.onDestroy(()=>{++r==a&&this._onDestroy()}),l.onStart(()=>{++i==a&&this._onStart()})}),this.totalTime=this.players.reduce((l,d)=>Math.max(l,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function GO(){return"undefined"!=typeof window&&void 0!==window.document}function dx(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function pf(n){switch(n.length){case 0:return new E_;case 1:return n[0];default:return new HO(n)}}function qO(n,e,t,r,i={},a={}){const l=[],d=[];let p=-1,_=null;if(r.forEach(I=>{const D=I.offset,x=D==p,F=x&&_||{};Object.keys(I).forEach(j=>{let ee=j,ne=I[j];if("offset"!==j)switch(ee=e.normalizePropertyName(ee,l),ne){case"!":ne=i[j];break;case Rd:ne=a[j];break;default:ne=e.normalizeStyleValue(j,ee,ne,l)}F[ee]=ne}),x||d.push(F),_=F,p=D}),l.length){const I="\n - ";throw new Error(`Unable to animate due to the following errors:${I}${l.join(I)}`)}return d}function hx(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&fx(t,"start",n)));break;case"done":n.onDone(()=>r(t&&fx(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&fx(t,"destroy",n)))}}function fx(n,e,t){const r=t.totalTime,a=px(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),l=n._data;return null!=l&&(a._data=l),a}function px(n,e,t,r,i="",a=0,l){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:a,disabled:!!l}}function Ho(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function WO(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let gx=(n,e)=>!1,zO=(n,e,t)=>[];(dx()||"undefined"!=typeof Element)&&(gx=GO()?(n,e)=>{for(;e&&e!==document.documentElement;){if(e===n)return!0;e=e.parentNode||e.host}return!1}:(n,e)=>n.contains(e),zO=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let wg=null,KO=!1;function mx(n){wg||(wg=function z2(){return"undefined"!=typeof document?document.body:null}()||{},KO=!!wg.style&&"WebkitAppearance"in wg.style);let e=!0;return wg.style&&!function W2(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in wg.style,!e&&KO&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in wg.style)),e}const yx=gx,_x=zO;function ZO(n){const e={};return Object.keys(n).forEach(t=>{const r=t.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=n[t]}),e}let YO=(()=>{class n{validateStyleProperty(t){return mx(t)}matchesElement(t,r){return!1}containsElement(t,r){return yx(t,r)}query(t,r,i){return _x(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,a,l,d=[],p){return new E_(i,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),vx=(()=>{class n{}return n.NOOP=new YO,n})();const Ex="ng-enter",NT="ng-leave",PT="ng-trigger",OT=".ng-trigger",XO="ng-animating",wx=".ng-animating";function bg(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:bx(parseFloat(e[1]),e[2])}function bx(n,e){return"s"===e?1e3*n:n}function kT(n,e,t){return n.hasOwnProperty("duration")?n:function Y2(n,e,t){let i,a=0,l="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return e.push(`The provided timing value "${n}" is invalid.`),{duration:0,delay:0,easing:""};i=bx(parseFloat(d[1]),d[2]);const p=d[3];null!=p&&(a=bx(parseFloat(p),d[4]));const _=d[5];_&&(l=_)}else i=n;if(!t){let d=!1,p=e.length;i<0&&(e.push("Duration values below 0 are not allowed for this animation step."),d=!0),a<0&&(e.push("Delay values below 0 are not allowed for this animation step."),d=!0),d&&e.splice(p,0,`The provided timing value "${n}" is invalid.`)}return{duration:i,delay:a,easing:l}}(n,e,t)}function w_(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function gf(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else w_(n,t);return t}function ek(n,e,t){return t?e+":"+t+";":""}function tk(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=ek(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=ek(0,J2(t),n.style[t]));n.setAttribute("style",e)}function ql(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=Cx(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),dx()&&tk(n))}function Ig(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=Cx(t);n.style[r]=""}),dx()&&tk(n))}function u0(n){return Array.isArray(n)?1==n.length?n[0]:BO(n):n}const Ix=new RegExp("{{\\s*(.+?)\\s*}}","g");function nk(n){let e=[];if("string"==typeof n){let t;for(;t=Ix.exec(n);)e.push(t[1]);Ix.lastIndex=0}return e}function FT(n,e,t){const r=n.toString(),i=r.replace(Ix,(a,l)=>{let d=e[l];return e.hasOwnProperty(l)||(t.push(`Please provide a value for the animation param ${l}`),d=""),d.toString()});return i==r?n:i}function LT(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const X2=/-+([a-z0-9])/g;function Cx(n){return n.replace(X2,(...e)=>e[1].toUpperCase())}function J2(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function rk(n,e){return 0===n||0===e}function ik(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let a=e[0],l=[];if(r.forEach(d=>{a.hasOwnProperty(d)||l.push(d),a[d]=t[d]}),l.length)for(var i=1;i<e.length;i++){let d=e[i];l.forEach(function(p){d[p]=Tx(n,p)})}}return e}function Go(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function Tx(n,e){return window.getComputedStyle(n)[e]}function ej(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function tj(n,e,t){if(":"==n[0]){const p=function nj(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(`The transition alias value "${n}" is not supported`),"* => *"}}(n,t);if("function"==typeof p)return void e.push(p);n=p}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(`The provided transition expression "${n}" is not supported`),e;const i=r[1],a=r[2],l=r[3];e.push(sk(i,l));"<"==a[0]&&!("*"==i&&"*"==l)&&e.push(sk(l,i))}(r,t,e)):t.push(n),t}const UT=new Set(["true","1"]),BT=new Set(["false","0"]);function sk(n,e){const t=UT.has(n)||BT.has(n),r=UT.has(e)||BT.has(e);return(i,a)=>{let l="*"==n||n==i,d="*"==e||e==a;return!l&&t&&"boolean"==typeof i&&(l=i?UT.has(n):BT.has(n)),!d&&r&&"boolean"==typeof a&&(d=a?UT.has(e):BT.has(e)),l&&d}}const rj=new RegExp("s*:selfs*,?","g");function Dx(n,e,t){return new ij(n).build(e,t)}class ij{constructor(e){this._driver=e}build(e,t){const r=new aj(t);return this._resetContextStyleTimingState(r),Go(this,u0(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const a=[],l=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(d=>{if(this._resetContextStyleTimingState(t),0==d.type){const p=d,_=p.name;_.toString().split(/\s*,\s*/).forEach(I=>{p.name=I,a.push(this.visitState(p,t))}),p.name=_}else if(1==d.type){const p=this.visitTransition(d,t);r+=p.queryCount,i+=p.depCount,l.push(p)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:a,transitions:l,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const a=new Set,l=i||{};if(r.styles.forEach(d=>{if(jT(d)){const p=d;Object.keys(p).forEach(_=>{nk(p[_]).forEach(I=>{l.hasOwnProperty(I)||a.add(I)})})}}),a.size){const d=LT(a.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${d.join(", ")}`)}}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Go(this,u0(e.animation),t);return{type:1,matchers:ej(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Cg(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Go(this,r,t)),options:Cg(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const a=e.steps.map(l=>{t.currentTime=r;const d=Go(this,l,t);return i=Math.max(i,t.currentTime),d});return t.currentTime=i,{type:3,steps:a,options:Cg(e.options)}}visitAnimate(e,t){const r=function lj(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return Sx(kT(n,e).duration,0,"");const r=n;if(r.split(/\s+/).some(a=>"{"==a.charAt(0)&&"{"==a.charAt(1))){const a=Sx(0,0,"");return a.dynamic=!0,a.strValue=r,a}return t=t||kT(r,e),Sx(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,a=e.styles?e.styles:jO({});if(5==a.type)i=this.visitKeyframes(a,t);else{let l=e.styles,d=!1;if(!l){d=!0;const _={};r.easing&&(_.easing=r.easing),l=jO(_)}t.currentTime+=r.duration+r.delay;const p=this.visitStyle(l,t);p.isEmptyStep=d,i=p}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(l=>{"string"==typeof l?l==Rd?r.push(l):t.errors.push(`The provided style string value ${l} is not allowed.`):r.push(l)}):r.push(e.styles);let i=!1,a=null;return r.forEach(l=>{if(jT(l)){const d=l,p=d.easing;if(p&&(a=p,delete d.easing),!i)for(let _ in d)if(d[_].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:a,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,a=t.currentTime;r&&a>0&&(a-=r.duration+r.delay),e.styles.forEach(l=>{"string"!=typeof l&&Object.keys(l).forEach(d=>{if(!this._driver.validateStyleProperty(d))return void t.errors.push(`The provided animation property "${d}" is not a supported CSS property for animations`);const p=t.collectedStyles[t.currentQuerySelector],_=p[d];let I=!0;_&&(a!=i&&a>=_.startTime&&i<=_.endTime&&(t.errors.push(`The CSS property "${d}" that exists between the times of "${_.startTime}ms" and "${_.endTime}ms" is also being animated in a parallel animation between the times of "${a}ms" and "${i}ms"`),I=!1),a=_.startTime),I&&(p[d]={startTime:a,endTime:i}),t.options&&function Q2(n,e,t){const r=e.params||{},i=nk(n);i.length&&i.forEach(a=>{r.hasOwnProperty(a)||t.push(`Unable to resolve the local animation param ${a} in the given list of values`)})}(l[d],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),r;let a=0;const l=[];let d=!1,p=!1,_=0;const I=e.steps.map(je=>{const Ye=this._makeStyleAst(je,t);let We=null!=Ye.offset?Ye.offset:function uj(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(jT(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(jT(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(Ye.styles),Ke=0;return null!=We&&(a++,Ke=Ye.offset=We),p=p||Ke<0||Ke>1,d=d||Ke<_,_=Ke,l.push(Ke),Ye});p&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),d&&t.errors.push("Please ensure that all keyframe offsets are in order");const D=e.steps.length;let x=0;a>0&&a<D?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==a&&(x=1/(D-1));const F=D-1,j=t.currentTime,ee=t.currentAnimateTimings,ne=ee.duration;return I.forEach((je,Ye)=>{const We=x>0?Ye==F?1:x*Ye:l[Ye],Ke=We*ne;t.currentTime=j+ee.delay+Ke,ee.duration=Ke,this._validateStyleAst(je,t),je.offset=We,r.styles.push(je)}),r}visitReference(e,t){return{type:8,animation:Go(this,u0(e.animation),t),options:Cg(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Cg(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Cg(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[a,l]=function sj(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(rj,"")),n=n.replace(/@\*/g,OT).replace(/@\w+/g,t=>OT+"-"+t.substr(1)).replace(/:animating/g,wx),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+a:a,Ho(t.collectedStyles,t.currentQuerySelector,{});const d=Go(this,u0(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:a,limit:i.limit||0,optional:!!i.optional,includeSelf:l,animation:d,originalSelector:e.selector,options:Cg(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:kT(e.timings,t.errors,!0);return{type:12,animation:Go(this,u0(e.animation),t),timings:r,options:null}}}class aj{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function jT(n){return!Array.isArray(n)&&"object"==typeof n}function Cg(n){return n?(n=w_(n)).params&&(n.params=function oj(n){return n?w_(n):null}(n.params)):n={},n}function Sx(n,e,t){return{duration:n,delay:e,easing:t}}function Ax(n,e,t,r,i,a,l=null,d=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:a,totalTime:i+a,easing:l,subTimeline:d}}class $T{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const hj=new RegExp(":enter","g"),pj=new RegExp(":leave","g");function Rx(n,e,t,r,i,a={},l={},d,p,_=[]){return(new gj).buildKeyframes(n,e,t,r,i,a,l,d,p,_)}class gj{buildKeyframes(e,t,r,i,a,l,d,p,_,I=[]){_=_||new $T;const D=new xx(e,t,_,i,a,I,[]);D.options=p,D.currentTimeline.setStyles([l],null,D.errors,p),Go(this,r,D);const x=D.timelines.filter(F=>F.containsAnimation());if(Object.keys(d).length){let F;for(let j=x.length-1;j>=0;j--){const ee=x[j];if(ee.element===t){F=ee;break}}F&&!F.allowOnlyTimelineStyles()&&F.setStyles([d],null,D.errors,p)}return x.length?x.map(F=>F.buildKeyframes()):[Ax(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),a=t.currentTimeline.currentTime,l=this._visitSubInstructions(r,i,i.options);a!=l&&t.transformIntoNewTimeline(l)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let a=t.currentTimeline.currentTime;const l=null!=r.duration?bg(r.duration):null,d=null!=r.delay?bg(r.delay):null;return 0!==l&&e.forEach(p=>{const _=t.appendInstructionToTimeline(p,l,d);a=Math.max(a,_.duration+_.delay)}),a}visitReference(e,t){t.updateOptions(e.options,!0),Go(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const a=e.options;if(a&&(a.params||a.delay)&&(i=t.createSubContext(a),i.transformIntoNewTimeline(),null!=a.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=HT);const l=bg(a.delay);i.delayNextStep(l)}e.steps.length&&(e.steps.forEach(l=>Go(this,l,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const a=e.options&&e.options.delay?bg(e.options.delay):0;e.steps.forEach(l=>{const d=t.createSubContext(e.options);a&&d.delayNextStep(a),Go(this,l,d),i=Math.max(i,d.currentTimeline.currentTime),r.push(d.currentTimeline)}),r.forEach(l=>t.currentTimeline.mergeTimelineCollectedStyles(l)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return kT(t.params?FT(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const a=e.style;5==a.type?this.visitKeyframes(a,t):(t.incrementTime(r.duration),this.visitStyle(a,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const a=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(a):r.setStyles(e.styles,a,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,a=r.duration,d=t.createSubContext().currentTimeline;d.easing=r.easing,e.styles.forEach(p=>{d.forwardTime((p.offset||0)*a),d.setStyles(p.styles,p.easing,t.errors,t.options),d.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(d),t.transformIntoNewTimeline(i+a),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},a=i.delay?bg(i.delay):0;a&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=HT);let l=r;const d=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=d.length;let p=null;d.forEach((_,I)=>{t.currentQueryIndex=I;const D=t.createSubContext(e.options,_);a&&D.delayNextStep(a),_===t.element&&(p=D.currentTimeline),Go(this,e.animation,D),D.currentTimeline.applyStylesToKeyframe(),l=Math.max(l,D.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(l),p&&(t.currentTimeline.mergeTimelineCollectedStyles(p),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,a=e.timings,l=Math.abs(a.duration),d=l*(t.currentQueryTotal-1);let p=l*t.currentQueryIndex;switch(a.duration<0?"reverse":a.easing){case"reverse":p=d-p;break;case"full":p=r.currentStaggerTime}const I=t.currentTimeline;p&&I.delayNextStep(p);const D=I.currentTime;Go(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-D+(i.startTime-r.currentTimeline.startTime)}}const HT={};class xx{constructor(e,t,r,i,a,l,d,p){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=a,this.errors=l,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=HT,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new GT(this._driver,t,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=bg(r.duration)),null!=r.delay&&(i.delay=bg(r.delay));const a=r.params;if(a){let l=i.params;l||(l=this.options.params={}),Object.keys(a).forEach(d=>{(!t||!l.hasOwnProperty(d))&&(l[d]=FT(a[d],l,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,a=new xx(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(e),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}transformIntoNewTimeline(e){return this.previousNode=HT,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},a=new mj(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(a),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,a,l){let d=[];if(i&&d.push(this.element),e.length>0){e=(e=e.replace(hj,"."+this._enterClassName)).replace(pj,"."+this._leaveClassName);let _=this._driver.query(this.element,e,1!=r);0!==r&&(_=r<0?_.slice(_.length+r,_.length):_.slice(0,r)),d.push(..._)}return!a&&0==d.length&&l.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),d}}class GT{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new GT(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Rd,this._currentKeyframe[t]=Rd}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const a=i&&i.params||{},l=function yj(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(a=>{t[a]=Rd})):gf(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(l).forEach(d=>{const p=FT(l[d],a,r);this._pendingStyles[d]=p,this._localTimelineStyles.hasOwnProperty(d)||(this._backFill[d]=this._globalTimelineStyles.hasOwnProperty(d)?this._globalTimelineStyles[d]:Rd),this._updateStyle(d,p)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((d,p)=>{const _=gf(d,!0);Object.keys(_).forEach(I=>{const D=_[I];"!"==D?e.add(I):D==Rd&&t.add(I)}),r||(_.offset=p/this.duration),i.push(_)});const a=e.size?LT(e.values()):[],l=t.size?LT(t.values()):[];if(r){const d=i[0],p=w_(d);d.offset=0,p.offset=1,i=[d,p]}return Ax(this.element,i,a,l,this.duration,this.startTime,this.easing,!1)}}class mj extends GT{constructor(e,t,r,i,a,l,d=!1){super(e,t,l.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=a,this._stretchStartingKeyframe=d,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const a=[],l=r+t,d=t/l,p=gf(e[0],!1);p.offset=0,a.push(p);const _=gf(e[0],!1);_.offset=uk(d),a.push(_);const I=e.length-1;for(let D=1;D<=I;D++){let x=gf(e[D],!1);x.offset=uk((t+x.offset*r)/l),a.push(x)}r=l,t=0,i="",e=a}return Ax(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function uk(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class Mx{}class _j extends Mx{normalizePropertyName(e,t){return Cx(e)}normalizeStyleValue(e,t,r,i){let a="";const l=r.toString().trim();if(vj[t]&&0!==r&&"0"!==r)if("number"==typeof r)a="px";else{const d=r.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&i.push(`Please provide a CSS unit value for ${e}:${r}`)}return l+a}}const vj=(()=>function Ej(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function lk(n,e,t,r,i,a,l,d,p,_,I,D,x){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:a,toState:r,toStyles:l,timelines:d,queriedElements:p,preStyleProps:_,postStyleProps:I,totalTime:D,errors:x}}const Nx={};class ck{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function wj(n,e,t,r,i){return n.some(a=>a(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],a=this._stateStyles[e],l=i?i.buildStyles(t,r):{};return a?a.buildStyles(t,r):l}build(e,t,r,i,a,l,d,p,_,I){const D=[],x=this.ast.options&&this.ast.options.params||Nx,j=this.buildStyles(r,d&&d.params||Nx,D),ee=p&&p.params||Nx,ne=this.buildStyles(i,ee,D),je=new Set,Ye=new Map,We=new Map,Ke="void"===i,bt={params:Object.assign(Object.assign({},x),ee)},St=I?[]:Rx(e,t,this.ast.animation,a,l,j,ne,bt,_,D);let cn=0;if(St.forEach(Ko=>{cn=Math.max(Ko.duration+Ko.delay,cn)}),D.length)return lk(t,this._triggerName,r,i,Ke,j,ne,[],[],Ye,We,cn,D);St.forEach(Ko=>{const Od=Ko.element,RU=Ho(Ye,Od,{});Ko.preStyleProps.forEach(Vg=>RU[Vg]=!0);const Q0=Ho(We,Od,{});Ko.postStyleProps.forEach(Vg=>Q0[Vg]=!0),Od!==t&&je.add(Od)});const ai=LT(je.values());return lk(t,this._triggerName,r,i,Ke,j,ne,St,ai,Ye,We,cn)}}class bj{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=w_(this.defaultParams);return Object.keys(e).forEach(a=>{const l=e[a];null!=l&&(i[a]=l)}),this.styles.styles.forEach(a=>{if("string"!=typeof a){const l=a;Object.keys(l).forEach(d=>{let p=l[d];p.length>1&&(p=FT(p,i,t));const _=this.normalizer.normalizePropertyName(d,t);p=this.normalizer.normalizeStyleValue(d,_,p,t),r[_]=p})}}),r}}class Cj{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new bj(i.style,i.options&&i.options.params||{},r)}),dk(this.states,"true","1"),dk(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new ck(e,i,this.states))}),this.fallbackTransition=function Tj(n,e,t){return new ck(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(l,d)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(l=>l.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function dk(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const Dj=new $T;class Sj{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],i=Dx(this._driver,t,r);if(r.length)throw new Error(`Unable to build the animation due to the following errors: ${r.join("\n")}`);this._animations[e]=i}_buildPlayer(e,t,r){const i=e.element,a=qO(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,a,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],a=this._animations[e];let l;const d=new Map;if(a?(l=Rx(this._driver,t,a,Ex,NT,{},{},r,Dj,i),l.forEach(I=>{const D=Ho(d,I.element,{});I.postStyleProps.forEach(x=>D[x]=null)})):(i.push("The requested animation doesn't exist or has already been destroyed"),l=[]),i.length)throw new Error(`Unable to create the animation due to the following errors: ${i.join("\n")}`);d.forEach((I,D)=>{Object.keys(I).forEach(x=>{I[x]=this._driver.computeStyle(D,x,Rd)})});const _=pf(l.map(I=>{const D=d.get(I.element);return this._buildPlayer(I,{},D)}));return this._playersById[e]=_,_.onDestroy(()=>this.destroy(e)),this.players.push(_),_}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error(`Unable to find the timeline player referenced by ${e}`);return t}listen(e,t,r,i){const a=px(t,"","","");return hx(this._getPlayer(e),r,a,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const a=this._getPlayer(e);switch(r){case"play":a.play();break;case"pause":a.pause();break;case"reset":a.reset();break;case"restart":a.restart();break;case"finish":a.finish();break;case"init":a.init();break;case"setPosition":a.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const hk="ng-animate-queued",Px="ng-animate-disabled",Nj=[],fk={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Pj={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ka="__ng_removed";class Ox{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function Lj(n){return null!=n?n:null}(r?e.value:e),r){const a=w_(e);delete a.value,this.options=a}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const l0="void",kx=new Ox(l0);class Oj{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Fa(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${r}" because the animation trigger "${t}" doesn't exist!`);if(null==r||0==r.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if(!function Vj(n){return"start"==n||"done"==n}(r))throw new Error(`The provided animation trigger event "${r}" for the animation trigger "${t}" is not supported!`);const a=Ho(this._elementListeners,e,[]),l={name:t,phase:r,callback:i};a.push(l);const d=Ho(this._engine.statesByElement,e,{});return d.hasOwnProperty(t)||(Fa(e,PT),Fa(e,PT+"-"+t),d[t]=kx),()=>{this._engine.afterFlush(()=>{const p=a.indexOf(l);p>=0&&a.splice(p,1),this._triggers[t]||delete d[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,r,i=!0){const a=this._getTrigger(t),l=new Fx(this.id,t,e);let d=this._engine.statesByElement.get(e);d||(Fa(e,PT),Fa(e,PT+"-"+t),this._engine.statesByElement.set(e,d={}));let p=d[t];const _=new Ox(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&p&&_.absorbOptions(p.options),d[t]=_,p||(p=kx),_.value!==l0&&p.value===_.value){if(!function jj(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const a=t[i];if(!e.hasOwnProperty(a)||n[a]!==e[a])return!1}return!0}(p.params,_.params)){const ee=[],ne=a.matchStyles(p.value,p.params,ee),je=a.matchStyles(_.value,_.params,ee);ee.length?this._engine.reportError(ee):this._engine.afterFlush(()=>{Ig(e,ne),ql(e,je)})}return}const x=Ho(this._engine.playersByElement,e,[]);x.forEach(ee=>{ee.namespaceId==this.id&&ee.triggerName==t&&ee.queued&&ee.destroy()});let F=a.matchTransition(p.value,_.value,e,_.params),j=!1;if(!F){if(!i)return;F=a.fallbackTransition,j=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:F,fromState:p,toState:_,player:l,isFallbackTransition:j}),j||(Fa(e,hk),l.onStart(()=>{b_(e,hk)})),l.onDone(()=>{let ee=this.players.indexOf(l);ee>=0&&this.players.splice(ee,1);const ne=this._engine.playersByElement.get(e);if(ne){let je=ne.indexOf(l);je>=0&&ne.splice(je,1)}}),this.players.push(l),x.push(l),l}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,OT,!0);r.forEach(i=>{if(i[ka])return;const a=this._engine.fetchNamespacesByElement(i);a.size?a.forEach(l=>l.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const a=this._engine.statesByElement.get(e),l=new Map;if(a){const d=[];if(Object.keys(a).forEach(p=>{if(l.set(p,a[p].value),this._triggers[p]){const _=this.trigger(e,p,l0,i);_&&d.push(_)}}),d.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,l),r&&pf(d).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(a=>{const l=a.name;if(i.has(l))return;i.add(l);const p=this._triggers[l].fallbackTransition,_=r[l]||kx,I=new Ox(l0),D=new Fx(this.id,l,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:l,transition:p,fromState:_,toState:I,player:D,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const a=r.players.length?r.playersByQueriedElement.get(e):[];if(a&&a.length)i=!0;else{let l=e;for(;l=l.parentNode;)if(r.statesByElement.get(l)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const a=e[ka];(!a||a===fk)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Fa(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const a=r.element,l=this._elementListeners.get(a);l&&l.forEach(d=>{if(d.name==r.triggerName){const p=px(a,r.triggerName,r.fromState.value,r.toState.value);p._data=e,hx(r.player,d.phase,p,d.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const a=r.transition.ast.depCount,l=i.transition.ast.depCount;return 0==a||0==l?a-l:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class kj{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,a)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new Oj(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList.length-1;if(r>=0){let i=!1;for(let a=r;a>=0;a--)if(this.driver.containsElement(this._namespaceList[a].hostElement,t)){this._namespaceList.splice(a+1,0,e),i=!0;break}i||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let a=0;a<i.length;a++){const l=r[i[a]].namespaceId;if(l){const d=this._fetchNamespace(l);d&&t.add(d)}}}return t}trigger(e,t,r,i){if(qT(t)){const a=this._fetchNamespace(e);if(a)return a.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!qT(t))return;const a=t[ka];if(a&&a.setForRemoval){a.setForRemoval=!1,a.setForMove=!0;const l=this.collectedLeaveElements.indexOf(t);l>=0&&this.collectedLeaveElements.splice(l,1)}if(e){const l=this._fetchNamespace(e);l&&l.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Fa(e,Px)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),b_(e,Px))}removeNode(e,t,r,i){if(qT(t)){const a=e?this._fetchNamespace(e):null;if(a?a.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const l=this.namespacesByHostElement.get(t);l&&l.id!==e&&l.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,a){this.collectedLeaveElements.push(t),t[ka]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:a}}listen(e,t,r,i,a){return qT(t)?this._fetchNamespace(e).listen(t,r,i,a):()=>{}}_buildInstruction(e,t,r,i,a){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,a)}destroyInnerAnimations(e){let t=this.driver.query(e,OT,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,wx,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return pf(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[ka];if(r&&r.setForRemoval){if(e[ka]=fk,r.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(r.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(Px))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Fa(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?pf(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${e.join("\n")}`)}_flushAnimations(e,t){const r=new $T,i=[],a=new Map,l=[],d=new Map,p=new Map,_=new Map,I=new Set;this.disabledNodes.forEach(Et=>{I.add(Et);const Mt=this.driver.query(Et,".ng-animate-queued",!0);for(let Ut=0;Ut<Mt.length;Ut++)I.add(Mt[Ut])});const D=this.bodyNode,x=Array.from(this.statesByElement.keys()),F=mk(x,this.collectedEnterElements),j=new Map;let ee=0;F.forEach((Et,Mt)=>{const Ut=Ex+ee++;j.set(Mt,Ut),Et.forEach(Dn=>Fa(Dn,Ut))});const ne=[],je=new Set,Ye=new Set;for(let Et=0;Et<this.collectedLeaveElements.length;Et++){const Mt=this.collectedLeaveElements[Et],Ut=Mt[ka];Ut&&Ut.setForRemoval&&(ne.push(Mt),je.add(Mt),Ut.hasAnimation?this.driver.query(Mt,".ng-star-inserted",!0).forEach(Dn=>je.add(Dn)):Ye.add(Mt))}const We=new Map,Ke=mk(x,Array.from(je));Ke.forEach((Et,Mt)=>{const Ut=NT+ee++;We.set(Mt,Ut),Et.forEach(Dn=>Fa(Dn,Ut))}),e.push(()=>{F.forEach((Et,Mt)=>{const Ut=j.get(Mt);Et.forEach(Dn=>b_(Dn,Ut))}),Ke.forEach((Et,Mt)=>{const Ut=We.get(Mt);Et.forEach(Dn=>b_(Dn,Ut))}),ne.forEach(Et=>{this.processLeaveNode(Et)})});const bt=[],St=[];for(let Et=this._namespaceList.length-1;Et>=0;Et--)this._namespaceList[Et].drainQueuedTransitions(t).forEach(Ut=>{const Dn=Ut.player,Bi=Ut.element;if(bt.push(Dn),this.collectedEnterElements.length){const Js=Bi[ka];if(Js&&Js.setForMove){if(Js.previousTriggersValues&&Js.previousTriggersValues.has(Ut.triggerName)){const Ug=Js.previousTriggersValues.get(Ut.triggerName),Mf=this.statesByElement.get(Ut.element);Mf&&Mf[Ut.triggerName]&&(Mf[Ut.triggerName].value=Ug)}return void Dn.destroy()}}const ec=!D||!this.driver.containsElement(D,Bi),Zo=We.get(Bi),xf=j.get(Bi),Ur=this._buildInstruction(Ut,r,xf,Zo,ec);if(Ur.errors&&Ur.errors.length)return void St.push(Ur);if(ec)return Dn.onStart(()=>Ig(Bi,Ur.fromStyles)),Dn.onDestroy(()=>ql(Bi,Ur.toStyles)),void i.push(Dn);if(Ut.isFallbackTransition)return Dn.onStart(()=>Ig(Bi,Ur.fromStyles)),Dn.onDestroy(()=>ql(Bi,Ur.toStyles)),void i.push(Dn);const NU=[];Ur.timelines.forEach(Js=>{Js.stretchStartingKeyframe=!0,this.disabledNodes.has(Js.element)||NU.push(Js)}),Ur.timelines=NU,r.append(Bi,Ur.timelines),l.push({instruction:Ur,player:Dn,element:Bi}),Ur.queriedElements.forEach(Js=>Ho(d,Js,[]).push(Dn)),Ur.preStyleProps.forEach((Js,Ug)=>{const Mf=Object.keys(Js);if(Mf.length){let Bg=p.get(Ug);Bg||p.set(Ug,Bg=new Set),Mf.forEach(QN=>Bg.add(QN))}}),Ur.postStyleProps.forEach((Js,Ug)=>{const Mf=Object.keys(Js);let Bg=_.get(Ug);Bg||_.set(Ug,Bg=new Set),Mf.forEach(QN=>Bg.add(QN))})});if(St.length){const Et=[];St.forEach(Mt=>{Et.push(`@${Mt.triggerName} has failed due to:\n`),Mt.errors.forEach(Ut=>Et.push(`- ${Ut}\n`))}),bt.forEach(Mt=>Mt.destroy()),this.reportError(Et)}const cn=new Map,ai=new Map;l.forEach(Et=>{const Mt=Et.element;r.has(Mt)&&(ai.set(Mt,Mt),this._beforeAnimationBuild(Et.player.namespaceId,Et.instruction,cn))}),i.forEach(Et=>{const Mt=Et.element;this._getPreviousPlayers(Mt,!1,Et.namespaceId,Et.triggerName,null).forEach(Dn=>{Ho(cn,Mt,[]).push(Dn),Dn.destroy()})});const Ko=ne.filter(Et=>_k(Et,p,_)),Od=new Map;gk(Od,this.driver,Ye,_,Rd).forEach(Et=>{_k(Et,p,_)&&Ko.push(Et)});const Q0=new Map;F.forEach((Et,Mt)=>{gk(Q0,this.driver,new Set(Et),p,"!")}),Ko.forEach(Et=>{const Mt=Od.get(Et),Ut=Q0.get(Et);Od.set(Et,Object.assign(Object.assign({},Mt),Ut))});const Vg=[],xU=[],MU={};l.forEach(Et=>{const{element:Mt,player:Ut,instruction:Dn}=Et;if(r.has(Mt)){if(I.has(Mt))return Ut.onDestroy(()=>ql(Mt,Dn.toStyles)),Ut.disabled=!0,Ut.overrideTotalTime(Dn.totalTime),void i.push(Ut);let Bi=MU;if(ai.size>1){let Zo=Mt;const xf=[];for(;Zo=Zo.parentNode;){const Ur=ai.get(Zo);if(Ur){Bi=Ur;break}xf.push(Zo)}xf.forEach(Ur=>ai.set(Ur,Bi))}const ec=this._buildAnimation(Ut.namespaceId,Dn,cn,a,Q0,Od);if(Ut.setRealPlayer(ec),Bi===MU)Vg.push(Ut);else{const Zo=this.playersByElement.get(Bi);Zo&&Zo.length&&(Ut.parentPlayer=pf(Zo)),i.push(Ut)}}else Ig(Mt,Dn.fromStyles),Ut.onDestroy(()=>ql(Mt,Dn.toStyles)),xU.push(Ut),I.has(Mt)&&i.push(Ut)}),xU.forEach(Et=>{const Mt=a.get(Et.element);if(Mt&&Mt.length){const Ut=pf(Mt);Et.setRealPlayer(Ut)}}),i.forEach(Et=>{Et.parentPlayer?Et.syncPlayerEvents(Et.parentPlayer):Et.destroy()});for(let Et=0;Et<ne.length;Et++){const Mt=ne[Et],Ut=Mt[ka];if(b_(Mt,NT),Ut&&Ut.hasAnimation)continue;let Dn=[];if(d.size){let ec=d.get(Mt);ec&&ec.length&&Dn.push(...ec);let Zo=this.driver.query(Mt,wx,!0);for(let xf=0;xf<Zo.length;xf++){let Ur=d.get(Zo[xf]);Ur&&Ur.length&&Dn.push(...Ur)}}const Bi=Dn.filter(ec=>!ec.destroyed);Bi.length?Uj(this,Mt,Bi):this.processLeaveNode(Mt)}return ne.length=0,Vg.forEach(Et=>{this.players.push(Et),Et.onDone(()=>{Et.destroy();const Mt=this.players.indexOf(Et);this.players.splice(Mt,1)}),Et.play()}),Vg}elementContainsData(e,t){let r=!1;const i=t[ka];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,a){let l=[];if(t){const d=this.playersByQueriedElement.get(e);d&&(l=d)}else{const d=this.playersByElement.get(e);if(d){const p=!a||a==l0;d.forEach(_=>{_.queued||!p&&_.triggerName!=i||l.push(_)})}}return(r||i)&&(l=l.filter(d=>!(r&&r!=d.namespaceId||i&&i!=d.triggerName))),l}_beforeAnimationBuild(e,t,r){const a=t.element,l=t.isRemovalTransition?void 0:e,d=t.isRemovalTransition?void 0:t.triggerName;for(const p of t.timelines){const _=p.element,I=_!==a,D=Ho(r,_,[]);this._getPreviousPlayers(_,I,l,d,t.toState).forEach(F=>{const j=F.getRealPlayer();j.beforeDestroy&&j.beforeDestroy(),F.destroy(),D.push(F)})}Ig(a,t.fromStyles)}_buildAnimation(e,t,r,i,a,l){const d=t.triggerName,p=t.element,_=[],I=new Set,D=new Set,x=t.timelines.map(j=>{const ee=j.element;I.add(ee);const ne=ee[ka];if(ne&&ne.removedBeforeQueried)return new E_(j.duration,j.delay);const je=ee!==p,Ye=function Bj(n){const e=[];return yk(n,e),e}((r.get(ee)||Nj).map(cn=>cn.getRealPlayer())).filter(cn=>!!cn.element&&cn.element===ee),We=a.get(ee),Ke=l.get(ee),bt=qO(0,this._normalizer,0,j.keyframes,We,Ke),St=this._buildPlayer(j,bt,Ye);if(j.subTimeline&&i&&D.add(ee),je){const cn=new Fx(e,d,ee);cn.setRealPlayer(St),_.push(cn)}return St});_.forEach(j=>{Ho(this.playersByQueriedElement,j.element,[]).push(j),j.onDone(()=>function Fj(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,j.element,j))}),I.forEach(j=>Fa(j,XO));const F=pf(x);return F.onDestroy(()=>{I.forEach(j=>b_(j,XO)),ql(p,t.toStyles)}),D.forEach(j=>{Ho(i,j,[]).push(F)}),F}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new E_(e.duration,e.delay)}}class Fx{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new E_,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>hx(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Ho(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function qT(n){return n&&1===n.nodeType}function pk(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function gk(n,e,t,r,i){const a=[];t.forEach(p=>a.push(pk(p)));const l=[];r.forEach((p,_)=>{const I={};p.forEach(D=>{const x=I[D]=e.computeStyle(_,D,i);(!x||0==x.length)&&(_[ka]=Pj,l.push(_))}),n.set(_,I)});let d=0;return t.forEach(p=>pk(p,a[d++])),l}function mk(n,e){const t=new Map;if(n.forEach(d=>t.set(d,[])),0==e.length)return t;const i=new Set(e),a=new Map;function l(d){if(!d)return 1;let p=a.get(d);if(p)return p;const _=d.parentNode;return p=t.has(_)?_:i.has(_)?1:l(_),a.set(d,p),p}return e.forEach(d=>{const p=l(d);1!==p&&t.get(p).push(d)}),t}function Fa(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function b_(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function Uj(n,e,t){pf(t).onDone(()=>n.processLeaveNode(e))}function yk(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof HO?yk(r.players,e):e.push(r)}}function _k(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(a=>i.add(a)):e.set(n,r),t.delete(n),!0}class WT{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,a)=>{},this._transitionEngine=new kj(e,t,r),this._timelineEngine=new Sj(e,t,r),this._transitionEngine.onRemovalComplete=(i,a)=>this.onRemovalComplete(i,a)}registerTrigger(e,t,r,i,a){const l=e+"-"+i;let d=this._triggerCache[l];if(!d){const p=[],_=Dx(this._driver,a,p);if(p.length)throw new Error(`The animation trigger "${i}" has failed to build due to the following errors:\n - ${p.join("\n - ")}`);d=function Ij(n,e,t){return new Cj(n,e,t)}(i,_,this._normalizer),this._triggerCache[l]=d}this._transitionEngine.registerTrigger(t,i,d)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[a,l]=WO(r);this._timelineEngine.command(a,t,l,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,a){if("@"==r.charAt(0)){const[l,d]=WO(r);return this._timelineEngine.listen(l,t,d,a)}return this._transitionEngine.listen(e,t,r,i,a)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function vk(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=Lx(e[0]),e.length>1&&(r=Lx(e[e.length-1]))):e&&(t=Lx(e)),t||r?new $j(n,t,r):null}let $j=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let a=n.initialStylesByElement.get(t);a||n.initialStylesByElement.set(t,a={}),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&ql(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ql(this._element,this._initialStyles),this._endStyles&&(ql(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Ig(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ig(this._element,this._endStyles),this._endStyles=null),ql(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function Lx(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];Hj(i)&&(e=e||{},e[i]=n[i])}return e}function Hj(n){return"display"===n||"position"===n}const Ek="animation",wk="animationend";class Wj{constructor(e,t,r,i,a,l,d){this._element=e,this._name=t,this._duration=r,this._delay=i,this._easing=a,this._fillMode=l,this._onDoneFn=d,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=p=>this._handleCallback(p)}apply(){(function zj(n,e){const t=Ux(n,"").trim();let r=0;t.length&&(r=function Zj(n,e){let t=0;for(let r=0;r<n.length;r++)n.charAt(r)===e&&t++;return t}(t,",")+1,e=`${t}, ${e}`),zT(n,"",e)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),Ck(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){bk(this._element,this._name,"paused")}resume(){bk(this._element,this._name,"running")}setPosition(e){const t=Ik(this._element,this._name);this._position=e*this._duration,zT(this._element,"Delay",`-${this._position}ms`,t)}getPosition(){return this._position}_handleCallback(e){const t=e._ngTestManualTimestamp||Date.now(),r=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&r>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),Ck(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function Kj(n,e){const r=Ux(n,"").split(","),i=Vx(r,e);i>=0&&(r.splice(i,1),zT(n,"",r.join(",")))}(this._element,this._name))}}function bk(n,e,t){zT(n,"PlayState",t,Ik(n,e))}function Ik(n,e){const t=Ux(n,"");return t.indexOf(",")>0?Vx(t.split(","),e):Vx([t],e)}function Vx(n,e){for(let t=0;t<n.length;t++)if(n[t].indexOf(e)>=0)return t;return-1}function Ck(n,e,t){t?n.removeEventListener(wk,e):n.addEventListener(wk,e)}function zT(n,e,t,r){const i=Ek+e;if(null!=r){const a=n.style[i];if(a.length){const l=a.split(",");l[r]=t,t=l.join(",")}}n.style[i]=t}function Ux(n,e){return n.style[Ek+e]||""}class Tk{constructor(e,t,r,i,a,l,d,p){this.element=e,this.keyframes=t,this.animationName=r,this._duration=i,this._delay=a,this._finalStyles=d,this._specialStyles=p,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=l||"linear",this.totalTime=i+a,this._buildStyler()}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(e=>e()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(e){this._styler.setPosition(e)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Wj(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}beforeDestroy(){this.init();const e={};if(this.hasStarted()){const t=this._state>=3;Object.keys(this._finalStyles).forEach(r=>{"offset"!=r&&(e[r]=t?this._finalStyles[r]:Tx(this.element,r))})}this.currentSnapshot=e}}class Xj extends E_{constructor(e,t){super(),this.element=e,this._startingStyles={},this.__initialized=!1,this._styles=ZO(t)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(e=>{this._startingStyles[e]=this.element.style[e]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(e=>this.element.style.setProperty(e,this._styles[e])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(e=>{const t=this._startingStyles[e];t?this.element.style.setProperty(e,t):this.element.style.removeProperty(e)}),this._startingStyles=null,super.destroy())}}class Sk{constructor(){this._count=0}validateStyleProperty(e){return mx(e)}matchesElement(e,t){return!1}containsElement(e,t){return yx(e,t)}query(e,t,r){return _x(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}buildKeyframeElement(e,t,r){r=r.map(d=>ZO(d));let i=`@keyframes ${t} {\n`,a="";r.forEach(d=>{a=" ";const p=parseFloat(d.offset);i+=`${a}${100*p}% {\n`,a+=" ",Object.keys(d).forEach(_=>{const I=d[_];switch(_){case"offset":return;case"easing":return void(I&&(i+=`${a}animation-timing-function: ${I};\n`));default:return void(i+=`${a}${_}: ${I};\n`)}}),i+=`${a}}\n`}),i+="}\n";const l=document.createElement("style");return l.textContent=i,l}animate(e,t,r,i,a,l=[],d){const p=l.filter(ne=>ne instanceof Tk),_={};rk(r,i)&&p.forEach(ne=>{let je=ne.currentSnapshot;Object.keys(je).forEach(Ye=>_[Ye]=je[Ye])});const I=function t$(n){let e={};return n&&(Array.isArray(n)?n:[n]).forEach(r=>{Object.keys(r).forEach(i=>{"offset"==i||"easing"==i||(e[i]=r[i])})}),e}(t=ik(e,t,_));if(0==r)return new Xj(e,I);const D="gen_css_kf_"+this._count++,x=this.buildKeyframeElement(e,D,t);(function e$(n){var e;const t=null===(e=n.getRootNode)||void 0===e?void 0:e.call(n);return"undefined"!=typeof ShadowRoot&&t instanceof ShadowRoot?t:document.head})(e).appendChild(x);const j=vk(e,t),ee=new Tk(e,t,D,r,i,a,I,j);return ee.onDestroy(()=>function n$(n){n.parentNode.removeChild(n)}(x)),ee}}class Rk{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:Tx(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class r${constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(xk().toString()),this._cssKeyframesDriver=new Sk}validateStyleProperty(e){return mx(e)}matchesElement(e,t){return!1}containsElement(e,t){return yx(e,t)}query(e,t,r){return _x(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}overrideWebAnimationsSupport(e){this._isNativeImpl=e}animate(e,t,r,i,a,l=[],d){if(!d&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,r,i,a,l);const I={duration:r,delay:i,fill:0==i?"both":"forwards"};a&&(I.easing=a);const D={},x=l.filter(j=>j instanceof Rk);rk(r,i)&&x.forEach(j=>{let ee=j.currentSnapshot;Object.keys(ee).forEach(ne=>D[ne]=ee[ne])});const F=vk(e,t=ik(e,t=t.map(j=>gf(j,!1)),D));return new Rk(e,t,I,F)}}function xk(){return GO()&&Element.prototype.animate||{}}let s$=(()=>{class n extends UO{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:f.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?BO(t):t;return Mk(this._renderer,null,r,"register",[i]),new o$(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.FYo),f.LFG(fe))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class o$ extends class q2{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new a$(this._id,e,t||{},this._renderer)}}class a${constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return Mk(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function Mk(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const Nk="@.disabled";let u$=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(a,l)=>{const d=null==l?void 0:l.parentNode(a);d&&l.removeChild(d,a)}}createRenderer(t,r){const a=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let I=this._rendererCache.get(a);return I||(I=new Pk("",a,this.engine),this._rendererCache.set(a,I)),I}const l=r.id,d=r.id+"-"+this._currentId;this._currentId++,this.engine.register(d,t);const p=I=>{Array.isArray(I)?I.forEach(p):this.engine.registerTrigger(l,d,t,I.name,I)};return r.data.animation.forEach(p),new l$(this,d,a,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(a=>{const[l,d]=a;l(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.FYo),f.LFG(WT),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Pk{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==Nk?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class l$ extends Pk{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==Nk?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function c$(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let a=t.substr(1),l="";return"@"!=a.charAt(0)&&([a,l]=function d$(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(a)),this.engine.listen(this.namespaceId,i,a,l,d=>{this.factory.scheduleListenerCallback(d._data||-1,r,d)})}return this.delegate.listen(e,t,r)}}let h$=(()=>{class n extends WT{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(fe),f.LFG(vx),f.LFG(Mx))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Ok=new f.OlP("AnimationModuleType"),kk=[{provide:UO,useClass:s$},{provide:Mx,useFactory:function p$(){return new _j}},{provide:WT,useClass:h$},{provide:f.FYo,useFactory:function g$(n,e,t){return new u$(n,e,t)},deps:[ei,WT,f.R0b]}],Fk=[{provide:vx,useFactory:function f$(){return function i$(){return"function"==typeof xk()}()?new r$:new Sk}},{provide:Ok,useValue:"BrowserAnimations"},...kk],m$=[{provide:vx,useClass:YO},{provide:Ok,useValue:"NoopAnimations"},...kk];let y$=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?m$:Fk}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:Fk,imports:[zd]}),n})();var _$=L(233),v$=L(5032);function Lk(...n){const e=(0,As.jO)(n);return(0,Hn.e)((t,r)=>{const i=n.length,a=new Array(i);let l=n.map(()=>!1),d=!1;for(let p=0;p<i;p++)(0,Pi.Xf)(n[p]).subscribe(new Zn.Q(r,_=>{a[p]=_,!d&&!l[p]&&(l[p]=!0,(d=l.every(us.y))&&(l=null))},v$.Z));t.subscribe(new Zn.Q(r,p=>{if(d){const _=[p,...a];r.next(e?e(..._):_)}}))})}const c0={},Vk="@ngrx/store/init";let I_=(()=>{class n extends di{constructor(){super({type:Vk})}next(t){if("function"==typeof t)throw new TypeError("\n        Dispatch expected an object, instead it received a function.\n        If you're using the createAction function, make sure to invoke the function\n        before dispatching the action. For example, someAction should be someAction().");if(void 0===t)throw new TypeError("Actions must be objects");if(void 0===t.type)throw new TypeError("Actions must have a type property");super.next(t)}complete(){}ngOnDestroy(){super.complete()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const T$=[I_],Uk=new f.OlP("@ngrx/store Internal Root Guard"),Bk=new f.OlP("@ngrx/store Internal Initial State"),$x=new f.OlP("@ngrx/store Initial State"),jk=new f.OlP("@ngrx/store Reducer Factory"),$k=new f.OlP("@ngrx/store Internal Reducer Factory Provider"),Hk=new f.OlP("@ngrx/store Initial Reducers"),Hx=new f.OlP("@ngrx/store Internal Initial Reducers"),Gk=new f.OlP("@ngrx/store Store Features"),qk=new f.OlP("@ngrx/store Internal Store Reducers"),Gx=new f.OlP("@ngrx/store Internal Feature Reducers"),Wk=new f.OlP("@ngrx/store Internal Feature Configs"),zk=new f.OlP("@ngrx/store Internal Store Features"),Kk=new f.OlP("@ngrx/store Internal Feature Reducers Token"),Zk=new f.OlP("@ngrx/store Feature Reducers"),Yk=new f.OlP("@ngrx/store User Provided Meta Reducers"),ZT=new f.OlP("@ngrx/store Meta Reducers"),Qk=new f.OlP("@ngrx/store Internal Resolved Meta Reducers"),Xk=new f.OlP("@ngrx/store User Runtime Checks Config"),Jk=new f.OlP("@ngrx/store Internal User Runtime Checks Config"),d0=new f.OlP("@ngrx/store Internal Runtime Checks"),qx=new f.OlP("@ngrx/store Check if Action types are unique");function Wx(n,e={}){const t=Object.keys(n),r={};for(let a=0;a<t.length;a++){const l=t[a];"function"==typeof n[l]&&(r[l]=n[l])}const i=Object.keys(r);return function(l,d){l=void 0===l?e:l;let p=!1;const _={};for(let I=0;I<i.length;I++){const D=i[I],F=l[D],j=(0,r[D])(F,d);_[D]=j,p=p||j!==F}return p?_:l}}function e1(...n){return function(e){if(0===n.length)return e;const t=n[n.length-1];return n.slice(0,-1).reduceRight((i,a)=>a(i),t(e))}}function t1(n,e){return Array.isArray(e)&&e.length>0&&(n=e1.apply(null,[...e,n])),(t,r)=>{const i=n(t);return(a,l)=>i(a=void 0===a?r:a,l)}}class zx extends Wn.y{}class n1 extends I_{}let YT=(()=>{class n extends di{constructor(t,r,i,a){super(a(i,r)),this.dispatcher=t,this.initialState=r,this.reducers=i,this.reducerFactory=a}get currentReducers(){return this.reducers}addFeature(t){this.addFeatures([t])}addFeatures(t){const r=t.reduce((i,{reducers:a,reducerFactory:l,metaReducers:d,initialState:p,key:_})=>{const I="function"==typeof a?function S$(n){const e=Array.isArray(n)&&n.length>0?e1(...n):t=>t;return(t,r)=>(t=e(t),(i,a)=>t(i=void 0===i?r:i,a))}(d)(a,p):t1(l,d)(a,p);return i[_]=I,i},{});this.addReducers(r)}removeFeature(t){this.removeFeatures([t])}removeFeatures(t){this.removeReducers(t.map(r=>r.key))}addReducer(t,r){this.addReducers({[t]:r})}addReducers(t){this.reducers=Object.assign(Object.assign({},this.reducers),t),this.updateReducers(Object.keys(t))}removeReducer(t){this.removeReducers([t])}removeReducers(t){t.forEach(r=>{this.reducers=function D$(n,e){return Object.keys(n).filter(t=>t!==e).reduce((t,r)=>Object.assign(t,{[r]:n[r]}),{})}(this.reducers,r)}),this.updateReducers(t)}updateReducers(t){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:"@ngrx/store/update-reducers",features:t})}ngOnDestroy(){this.complete()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(n1),f.LFG($x),f.LFG(Hk),f.LFG(jk))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const R$=[YT,{provide:zx,useExisting:YT},{provide:n1,useExisting:I_}];let Kx=(()=>{class n extends as.x{ngOnDestroy(){this.complete()}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const x$=[Kx];class r1 extends Wn.y{}let i1=(()=>{class n extends di{constructor(t,r,i,a){super(a);const _=t.pipe((0,n0.Q)(_$.N)).pipe(Lk(r)).pipe(hi(M$,{state:a}));this.stateSubscription=_.subscribe(({state:I,action:D})=>{this.next(I),i.next(D)})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}}return n.INIT=Vk,n.\u0275fac=function(t){return new(t||n)(f.LFG(I_),f.LFG(zx),f.LFG(Kx),f.LFG($x))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function M$(n={state:void 0},[e,t]){const{state:r}=n;return{state:t(r,e),action:e}}const N$=[i1,{provide:r1,useExisting:i1}];let Zx=(()=>{class n extends Wn.y{constructor(t,r,i){super(),this.actionsObserver=r,this.reducerManager=i,this.source=t}select(t,...r){return O$.call(null,t,...r)(this)}lift(t){const r=new n(this,this.actionsObserver,this.reducerManager);return r.operator=t,r}dispatch(t){this.actionsObserver.next(t)}next(t){this.actionsObserver.next(t)}error(t){this.actionsObserver.error(t)}complete(){this.actionsObserver.complete()}addReducer(t,r){this.reducerManager.addReducer(t,r)}removeReducer(t){this.reducerManager.removeReducer(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(r1),f.LFG(I_),f.LFG(YT))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const P$=[Zx];function O$(n,e,...t){return function(i){let a;if("string"==typeof n){const l=[e,...t].filter(Boolean);a=i.pipe(function E$(...n){const e=n.length;if(0===e)throw new Error("list of properties cannot be empty.");return(0,It.U)(t=>{let r=t;for(let i=0;i<e;i++){const a=null==r?void 0:r[n[i]];if(void 0===a)return;r=a}return r})}(n,...l))}else{if("function"!=typeof n)throw new TypeError(`Unexpected type '${typeof n}' in select operator, expected 'string' or 'function'`);a=i.pipe((0,It.U)(l=>n(l,e)))}return a.pipe(fv())}}const Yx="https://ngrx.io/guide/store/configuration/runtime-checks";function s1(n){return void 0===n}function o1(n){return null===n}function a1(n){return Array.isArray(n)}function u1(n){return"object"==typeof n&&null!==n}function Qx(n){return"function"==typeof n}function eM(n){Object.freeze(n);const e=Qx(n);return Object.getOwnPropertyNames(n).forEach(t=>{if(!t.startsWith("\u0275")&&function B$(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(n,t)&&(!e||"caller"!==t&&"callee"!==t&&"arguments"!==t)){const r=n[t];(u1(r)||Qx(r))&&!Object.isFrozen(r)&&eM(r)}}),n}function tM(n,e=[]){return(s1(n)||o1(n))&&0===e.length?{path:["root"],value:n}:Object.keys(n).reduce((r,i)=>{if(r)return r;const a=n[i];return function U$(n){return Qx(n)&&n.hasOwnProperty("\u0275cmp")}(a)?r:!(s1(a)||o1(a)||function L$(n){return"number"==typeof n}(a)||function F$(n){return"boolean"==typeof n}(a)||function k$(n){return"string"==typeof n}(a)||a1(a))&&(function l1(n){if(!function V$(n){return u1(n)&&!a1(n)}(n))return!1;const e=Object.getPrototypeOf(n);return e===Object.prototype||null===e}(a)?tM(a,[...e,i]):{path:[...e,i],value:a})},!1)}function h1(n,e){if(!1===n)return;const t=n.path.join("."),r=new Error(`Detected unserializable ${e} at "${t}". ${Yx}#strict${e}serializability`);throw r.value=n.value,r.unserializablePath=t,r}function Q$(n){return(0,f.X6Q)()?Object.assign({strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!0,strictActionImmutability:!0,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1},n):{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function X$({strictActionSerializability:n,strictStateSerializability:e}){return t=>n||e?function Z$(n,e){return function(t,r){e.action(r)&&h1(tM(r),"action");const i=n(t,r);return e.state()&&h1(tM(i),"state"),i}}(t,{action:r=>n&&!nM(r),state:()=>e}):t}function J$({strictActionImmutability:n,strictStateImmutability:e}){return t=>n||e?function K$(n,e){return function(t,r){const i=e.action(r)?eM(r):r,a=n(t,i);return e.state()?eM(a):a}}(t,{action:r=>n&&!nM(r),state:()=>e}):t}function nM(n){return n.type.startsWith("@ngrx")}function eH({strictActionWithinNgZone:n}){return e=>n?function Y$(n,e){return function(t,r){if(e.action(r)&&!f.R0b.isInAngularZone())throw new Error(`Action '${r.type}' running outside NgZone. ${Yx}#strictactionwithinngzone`);return n(t,r)}}(e,{action:t=>n&&!nM(t)}):e}function tH(n){return[{provide:Jk,useValue:n},{provide:Xk,useFactory:nH,deps:[Jk]},{provide:d0,deps:[Xk],useFactory:Q$},{provide:ZT,multi:!0,deps:[d0],useFactory:J$},{provide:ZT,multi:!0,deps:[d0],useFactory:X$},{provide:ZT,multi:!0,deps:[d0],useFactory:eH}]}function f1(){return[{provide:qx,multi:!0,deps:[d0],useFactory:rH}]}function nH(n){return n}function rH(n){if(!n.strictActionTypeUniqueness)return;const e=Object.entries(c0).filter(([,t])=>t>1).map(([t])=>t);if(e.length)throw new Error(`Action types are registered more than once, ${e.map(t=>`"${t}"`).join(", ")}. ${Yx}#strictactiontypeuniqueness`)}let p1=(()=>{class n{constructor(t,r,i,a,l,d){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(I_),f.LFG(zx),f.LFG(Kx),f.LFG(Zx),f.LFG(Uk,8),f.LFG(qx,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})(),iH=(()=>{class n{constructor(t,r,i,a,l){this.features=t,this.featureReducers=r,this.reducerManager=i;const d=t.map((p,_)=>{const D=r.shift()[_];return Object.assign(Object.assign({},p),{reducers:D,initialState:g1(p.initialState)})});i.addFeatures(d)}ngOnDestroy(){this.reducerManager.removeFeatures(this.features)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(zk),f.LFG(Zk),f.LFG(YT),f.LFG(p1),f.LFG(qx,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})(),sH=(()=>{class n{static forRoot(t,r={}){return{ngModule:p1,providers:[{provide:Uk,useFactory:cH,deps:[[Zx,new f.FiY,new f.tp0]]},{provide:Bk,useValue:r.initialState},{provide:$x,useFactory:g1,deps:[Bk]},{provide:Hx,useValue:t},{provide:qk,useExisting:t instanceof f.OlP?t:Hx},{provide:Hk,deps:[f.zs3,Hx,[new f.tBr(qk)]],useFactory:oH},{provide:Yk,useValue:r.metaReducers?r.metaReducers:[]},{provide:Qk,deps:[ZT,Yk],useFactory:lH},{provide:$k,useValue:r.reducerFactory?r.reducerFactory:Wx},{provide:jk,deps:[$k,Qk],useFactory:t1},T$,R$,x$,N$,P$,tH(r.runtimeChecks),f1()]}}static forFeature(t,r,i={}){return{ngModule:iH,providers:[{provide:Wk,multi:!0,useValue:t instanceof Object?{}:i},{provide:Gk,multi:!0,useValue:{key:t instanceof Object?t.name:t,reducerFactory:i instanceof f.OlP||!i.reducerFactory?Wx:i.reducerFactory,metaReducers:i instanceof f.OlP||!i.metaReducers?[]:i.metaReducers,initialState:i instanceof f.OlP||!i.initialState?void 0:i.initialState}},{provide:zk,deps:[f.zs3,Wk,Gk],useFactory:aH},{provide:Gx,multi:!0,useValue:t instanceof Object?t.reducer:r},{provide:Kk,multi:!0,useExisting:r instanceof f.OlP?r:Gx},{provide:Zk,multi:!0,deps:[f.zs3,Gx,[new f.tBr(Kk)]],useFactory:uH},f1()]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function oH(n,e){return e instanceof f.OlP?n.get(e):e}function aH(n,e,t){return t.map((r,i)=>{if(e[i]instanceof f.OlP){const a=n.get(e[i]);return{key:r.key,reducerFactory:a.reducerFactory?a.reducerFactory:Wx,metaReducers:a.metaReducers?a.metaReducers:[],initialState:a.initialState}}return r})}function uH(n,e){return e.map(r=>r instanceof f.OlP?n.get(r):r)}function g1(n){return"function"==typeof n?n():n}function lH(n,e){return n.concat(e)}function cH(n){if(n)throw new TypeError("StoreModule.forRoot() called twice. Feature modules should use StoreModule.forFeature() instead.");return"guarded"}const m1="firebasestorage.googleapis.com",y1="storageBucket";class Lr extends V.ZR{constructor(e,t,r=0){super(rM(e),`Firebase Storage: ${t} (${rM(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Lr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return rM(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function rM(n){return"storage/"+n}function iM(){return new Lr("unknown","An unknown error occurred, please check the error payload for server response.")}function _1(){return new Lr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function v1(){return new Lr("canceled","User canceled the upload/download.")}function E1(){return new Lr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function C_(n){return new Lr("invalid-argument",n)}function w1(){return new Lr("app-deleted","The Firebase app was deleted.")}function b1(n){return new Lr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function h0(n,e){return new Lr("invalid-format","String does not match format '"+n+"': "+e)}function f0(n){throw new Lr("internal-error","Internal error: "+n)}class ys{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ys.makeFromUrl(e,t)}catch(i){return new ys(e,"")}if(""===r.path)return r;throw function wH(n){return new Lr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+i+"(/(.*))?$","i");function _(Ke){Ke.path_=decodeURIComponent(Ke.path)}const D=t.replace(/[.]/g,"\\."),We=[{regex:d,indices:{bucket:1,path:3},postModify:function a(Ke){"/"===Ke.path.charAt(Ke.path.length-1)&&(Ke.path_=Ke.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${D}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:_},{regex:new RegExp(`^https?://${t===m1?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:_}];for(let Ke=0;Ke<We.length;Ke++){const bt=We[Ke],St=bt.regex.exec(e);if(St){let ai=St[bt.indices.path];ai||(ai=""),r=new ys(St[bt.indices.bucket],ai),bt.postModify(r);break}}if(null==r)throw function EH(n){return new Lr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class DH{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function QT(n){return"string"==typeof n||n instanceof String}function I1(n){return sM()&&n instanceof Blob}function sM(){return"undefined"!=typeof Blob&&!(0,V.UG)()}function oM(n,e,t,r){if(r<e)throw C_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw C_(`Invalid value for '${n}'. Expected ${t} or less.`)}function xd(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function C1(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var mf=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(mf||(mf={})),mf))();function T1(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),a=-1!==e.indexOf(n);return t||i||a}class NH{constructor(e,t,r,i,a,l,d,p,_,I,D,x=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=d,this.errorCallback_=p,this.timeout_=_,this.progressCallback_=I,this.connectionFactory_=D,this.retry=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((F,j)=>{this.resolve_=F,this.reject_=j,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());!function RH(n){return void 0!==n}(p)?a():a(p)}catch(p){l(p)}else if(null!==d){const p=iM();p.serverResponse=d.getErrorText(),l(this.errorCallback_?this.errorCallback_(d,p):p)}else l(i.canceled?this.appDelete_?w1():v1():_1())};this.canceled_?t(0,new XT(!1,null,!0)):this.backoffId_=function SH(n,e,t){let r=1,i=null,a=null,l=!1,d=0;function p(){return 2===d}let _=!1;function I(...ne){_||(_=!0,e.apply(null,ne))}function D(ne){i=setTimeout(()=>{i=null,n(F,p())},ne)}function x(){a&&clearTimeout(a)}function F(ne,...je){if(_)return void x();if(ne)return x(),void I.call(null,ne,...je);if(p()||l)return x(),void I.call(null,ne,...je);let We;r<64&&(r*=2),1===d?(d=2,We=0):We=1e3*(r+Math.random()),D(We)}let j=!1;function ee(ne){j||(j=!0,x(),!_&&(null!==i?(ne||(d=2),clearTimeout(i),D(0)):ne||(d=1)))}return D(0),a=setTimeout(()=>{l=!0,ee(!0)},t),ee}((r,i)=>{if(i)return void r(!1,new XT(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const d=a.getErrorCode()===mf.NO_ERROR,p=a.getStatus();if((!d||T1(p,this.additionalRetryCodes_))&&this.retry){const I=a.getErrorCode()===mf.ABORT;return void r(!1,new XT(!1,null,I))}const _=-1!==this.successCodes_.indexOf(p);r(!0,new XT(_,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function AH(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class XT{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function UH(...n){const e=function VH(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(sM())return new Blob(n);throw new Lr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const qo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class aM{constructor(e,t){this.data=e,this.contentType=t||null}}function uM(n,e){switch(n){case qo.RAW:return new aM(D1(e));case qo.BASE64:case qo.BASE64URL:return new aM(S1(n,e));case qo.DATA_URL:return new aM(function HH(n){const e=new A1(n);return e.base64?S1(qo.BASE64,e.rest):function $H(n){let e;try{e=decodeURIComponent(n)}catch(t){throw h0(qo.DATA_URL,"Malformed data URL.")}return D1(e)}(e.rest)}(e),function GH(n){return new A1(n).contentType}(e))}throw iM()}function D1(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function S1(n,e){switch(n){case qo.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw h0(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case qo.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw h0(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function jH(n){if("undefined"==typeof atob)throw function TH(n){return new Lr("unsupported-environment",`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:h0(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class A1{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw h0(qo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function qH(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Wl{constructor(e,t){let r=0,i="";I1(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(I1(this.data_)){const i=function BH(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Wl(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Wl(r,!0)}}static getBlob(...e){if(sM()){const t=e.map(r=>r instanceof Wl?r.data_:r);return new Wl(UH.apply(null,t))}{const t=e.map(l=>QT(l)?uM(qo.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(l=>{for(let d=0;d<l.length;d++)i[a++]=l[d]}),new Wl(i,!0)}}uploadData(){return this.data_}}function lM(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function MH(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function R1(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function KH(n,e){return e}class Zs{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||KH}}let JT=null;function p0(){if(JT)return JT;const n=[];n.push(new Zs("bucket")),n.push(new Zs("generation")),n.push(new Zs("metageneration")),n.push(new Zs("name","fullPath",!0));const t=new Zs("name");t.xform=function e(a,l){return function ZH(n){return!QT(n)||n.length<2?n:R1(n)}(l)},n.push(t);const i=new Zs("size");return i.xform=function r(a,l){return void 0!==l?Number(l):l},n.push(i),n.push(new Zs("timeCreated")),n.push(new Zs("updated")),n.push(new Zs("md5Hash",null,!0)),n.push(new Zs("cacheControl",null,!0)),n.push(new Zs("contentDisposition",null,!0)),n.push(new Zs("contentEncoding",null,!0)),n.push(new Zs("contentLanguage",null,!0)),n.push(new Zs("contentType",null,!0)),n.push(new Zs("metadata","customMetadata",!0)),JT=n,JT}function x1(n,e,t){const r=lM(e);return null===r?null:function QH(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const l=t[a];r[l.local]=l.xform(r,e[l.server])}return function YH(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new ys(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function cM(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const M1="prefixes";class zl{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Kl(n){if(!n)throw iM()}function eD(n,e){return function t(r,i){const a=x1(n,i,e);return Kl(null!==a),a}}function T_(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function _H(){return new Lr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function yH(){return new Lr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function mH(n){return new Lr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function vH(n){return new Lr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function g0(n){const e=T_(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function gH(n){return new Lr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function P1(n,e,t){const i=xd(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,d=new zl(i,"GET",eD(n,t),l);return d.errorHandler=g0(e),d}function rG(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const d=xd(e.bucketOnlyServerUrl(),n.host,n._protocol),_=n.maxOperationRetryTime,I=new zl(d,"GET",function tG(n,e){return function t(r,i){const a=function eG(n,e,t){const r=lM(t);return null===r?null:function JH(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[M1])for(const i of t[M1]){const a=i.replace(/\/$/,""),l=n._makeStorageReference(new ys(e,a));r.prefixes.push(l)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new ys(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return Kl(null!==a),a}}(n,e.bucket),_);return I.urlParams=a,I.errorHandler=T_(e),I}function k1(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function aG(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class tD{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function dM(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){Kl(!1)}return Kl(!!t&&-1!==(e||["active"]).indexOf(t)),t}const dG={STATE_CHANGED:"state_changed"},Ys={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function hM(n){switch(n){case"running":case"pausing":case"canceling":return Ys.RUNNING;case"paused":return Ys.PAUSED;case"success":return Ys.SUCCESS;case"canceled":return Ys.CANCELED;default:return Ys.ERROR}}class hG{constructor(e,t,r){if(function xH(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function D_(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class pG extends class fG{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=mf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=mf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=mf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw f0("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw f0("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw f0("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw f0("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw f0("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function ku(){return new pG}class U1{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=p0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(T1(i.status,[])){if(!a)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=_1()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function uG(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l=k1(e,r,i),d={name:l.fullPath},p=xd(a,n.host,n._protocol),I={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},D=cM(l,t),j=new zl(p,"POST",function F(ee){let ne;dM(ee);try{ne=ee.getResponseHeader("X-Goog-Upload-URL")}catch(je){Kl(!1)}return Kl(QT(ne)),ne},n.maxUploadRetryTime);return j.urlParams=d,j.headers=I,j.body=D,j.errorHandler=T_(e),j}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ku,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function lG(n,e,t,r){const p=new zl(t,"POST",function a(_){const I=dM(_,["active","final"]);let D=null;try{D=_.getResponseHeader("X-Goog-Upload-Size-Received")}catch(F){Kl(!1)}D||Kl(!1);const x=Number(D);return Kl(!isNaN(x)),new tD(x,r.size(),"final"===I)},n.maxUploadRetryTime);return p.headers={"X-Goog-Upload-Command":"query"},p.errorHandler=T_(e),p}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,ku,t,r);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new tD(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let l;try{l=function cG(n,e,t,r,i,a,l,d){const p=new tD(0,0);if(l?(p.current=l.current,p.total=l.total):(p.current=0,p.total=r.size()),r.size()!==p.total)throw function IH(){return new Lr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const _=p.total-p.current;let I=_;i>0&&(I=Math.min(I,i));const D=p.current;let F="";F=0===I?"finalize":_===I?"upload, finalize":"upload";const j={"X-Goog-Upload-Command":F,"X-Goog-Upload-Offset":`${p.current}`},ee=r.slice(D,D+I);if(null===ee)throw E1();const We=new zl(t,"POST",function ne(Ke,bt){const St=dM(Ke,["active","final"]),cn=p.current+I,ai=r.size();let Ko;return Ko="final"===St?eD(e,a)(Ke,bt):null,new tD(cn,ai,"final"===St,Ko)},e.maxUploadRetryTime);return We.headers=j,We.body=ee.uploadData(),We.progressCallback=d||null,We.errorHandler=T_(n),We}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(p){return this._error=p,void this._transition("error")}const d=this._ref.storage._makeRequest(l,ku,i,a,!1);this._request=d,d.getPromise().then(p=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(p.current),p.finalized?(this._metadata=p.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=P1(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,ku,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function F1(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},p=function d(){let We="";for(let Ke=0;Ke<2;Ke++)We+=Math.random().toString().slice(2);return We}();l["Content-Type"]="multipart/related; boundary="+p;const _=k1(e,r,i),I=cM(_,t),F=Wl.getBlob("--"+p+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+I+"\r\n--"+p+"\r\nContent-Type: "+_.contentType+"\r\n\r\n",r,"\r\n--"+p+"--");if(null===F)throw E1();const j={name:_.fullPath},ee=xd(a,n.host,n._protocol),je=n.maxUploadRetryTime,Ye=new zl(ee,"POST",eD(n,t),je);return Ye.urlParams=j,Ye.headers=l,Ye.body=F.uploadData(),Ye.errorHandler=T_(e),Ye}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ku,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=v1(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=hM(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new hG(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(hM(this._state)){case Ys.SUCCESS:D_(this._resolve.bind(null,this.snapshot))();break;case Ys.CANCELED:case Ys.ERROR:D_(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(hM(this._state)){case Ys.RUNNING:case Ys.PAUSED:e.next&&D_(e.next.bind(e,this.snapshot))();break;case Ys.SUCCESS:e.complete&&D_(e.complete.bind(e))();break;default:e.error&&D_(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Tg{constructor(e,t){this._service=e,this._location=t instanceof ys?t:ys.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Tg(e,t)}get root(){const e=new ys(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return R1(this._location.path)}get storage(){return this._service}get parent(){const e=function WH(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ys(this._location.bucket,e);return new Tg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw b1(e)}}function j1(n,e,t){return fM.apply(this,arguments)}function fM(){return fM=(0,be.Z)(function*(n,e,t){const i=yield $1(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield j1(n,e,i.nextPageToken))}),fM.apply(this,arguments)}function $1(n,e){null!=e&&"number"==typeof e.maxResults&&oM("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=rG(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,ku)}function DG(n){n._throwIfRoot("getDownloadURL");const e=function iG(n,e,t){const i=xd(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,d=new zl(i,"GET",function nG(n,e){return function t(r,i){const a=x1(n,i,e);return Kl(null!==a),function XH(n,e,t,r){const i=lM(e);if(null===i||!QT(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const l=encodeURIComponent;return a.split(",").map(_=>{const D=n.fullPath;return xd("/b/"+l(n.bucket)+"/o/"+l(D),t,r)+C1({alt:"media",token:_})})[0]}(a,i,n.host,n._protocol)}}(n,t),l);return d.errorHandler=g0(e),d}(n.storage,n._location,p0());return n.storage.makeRequestWithTokens(e,ku).then(t=>{if(null===t)throw function CH(){return new Lr("no-download-url","The given file does not have any download URLs.")}();return t})}function H1(n,e){const t=function zH(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new ys(n._location.bucket,t);return new Tg(n.storage,r)}function G1(n,e){if(n instanceof pM){const t=n;if(null==t._bucket)throw function bH(){return new Lr("no-default-bucket","No default bucket found. Did you set the '"+y1+"' property when initializing the app?")}();const r=new Tg(t,t._bucket);return null!=e?G1(r,e):r}return void 0!==e?H1(n,e):n}function xG(n,e){if(e&&function AG(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof pM)return function RG(n,e){return new Tg(n,e)}(n,e);throw C_("To use ref(service, url), the first argument must be a Storage instance.")}return G1(n,e)}function q1(n,e){const t=null==e?void 0:e[y1];return null==t?null:ys.makeFromBucketSpec(t,n)}class pM{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=m1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ys.makeFromBucketSpec(i,this._host):q1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ys.makeFromBucketSpec(this._url,e):q1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){oM("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){oM("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,be.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,be.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Tg(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new DH(w1());{const l=function LH(n,e,t,r,i,a,l=!0){const d=C1(n.urlParams),p=n.url+d,_=Object.assign({},n.headers);return function kH(n,e){e&&(n["X-Firebase-GMPID"]=e)}(_,e),function PH(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(_,t),function OH(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(_,a),function FH(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(_,r),new NH(p,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,a);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,be.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const W1="@firebase/storage";function Z1(n,e){return xG(n=(0,V.m9)(n),e)}function BG(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new pM(t,r,i,e,Xi.SDK_VERSION)}!function jG(){(0,Xi._registerComponent)(new Fs.wA("storage",BG,"PUBLIC").setMultipleInstances(!0)),(0,Xi.registerVersion)(W1,"0.9.14",""),(0,Xi.registerVersion)(W1,"0.9.14","esm2017")}();class nD{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Q1{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new nD(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new nD(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?l=>t(new nD(l,this,this._ref)):{next:t.next?l=>t.next(new nD(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class X1{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Md(e,this._service))}get items(){return this._delegate.items.map(e=>new Md(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Md{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function UG(n,e){return H1(n,e)}(this._delegate,e);return new Md(t,this.storage)}get root(){return new Md(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Md(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new Q1(function NG(n,e,t){return function wG(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new U1(n,new Wl(e),t)}(n=(0,V.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=qo.RAW,r){this._throwIfRoot("putString");const i=uM(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new Q1(new U1(this._delegate,new Wl(i.data,!0),a),this)}listAll(){return function FG(n){return function IG(n){const e={prefixes:[],items:[]};return j1(n,e).then(()=>e)}(n=(0,V.m9)(n))}(this._delegate).then(e=>new X1(e,this.storage))}list(e){return function kG(n,e){return $1(n=(0,V.m9)(n),e)}(this._delegate,e||void 0).then(t=>new X1(t,this.storage))}getMetadata(){return function PG(n){return function CG(n){n._throwIfRoot("getMetadata");const e=P1(n.storage,n._location,p0());return n.storage.makeRequestWithTokens(e,ku)}(n=(0,V.m9)(n))}(this._delegate)}updateMetadata(e){return function OG(n,e){return function TG(n,e){n._throwIfRoot("updateMetadata");const t=function sG(n,e,t,r){const a=xd(e.fullServerUrl(),n.host,n._protocol),d=cM(t,r),_=n.maxOperationRetryTime,I=new zl(a,"PATCH",eD(n,r),_);return I.headers={"Content-Type":"application/json; charset=utf-8"},I.body=d,I.errorHandler=g0(e),I}(n.storage,n._location,e,p0());return n.storage.makeRequestWithTokens(t,ku)}(n=(0,V.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function LG(n){return DG(n=(0,V.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function VG(n){return function SG(n){n._throwIfRoot("deleteObject");const e=function oG(n,e){const r=xd(e.fullServerUrl(),n.host,n._protocol),d=new zl(r,"DELETE",function l(p,_){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=g0(e),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,ku)}(n=(0,V.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw b1(e)}}class J1{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(eF(e))throw C_("ref() expected a child path but got a URL, use refFromURL instead.");return new Md(Z1(this._delegate,e),this)}refFromURL(e){if(!eF(e))throw C_("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ys.makeFromUrl(e,this._delegate.host)}catch(t){throw C_("refFromUrl() expected a valid full URL but got an invalid one.")}return new Md(Z1(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function Y1(n,e,t,r={}){!function MG(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,V.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function eF(n){return/^[A-Za-z]+:\/\//.test(n)}function qG(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new J1(t,r)}function tF(n){const e=function zG(n){return new Wn.y(e=>{const t=l=>e.next(l);t(n.snapshot);const a=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){a()}}).pipe(function dH(n,e=Dm.z){return(0,Hn.e)((t,r)=>{let i=null,a=null,l=null;const d=()=>{if(i){i.unsubscribe(),i=null;const _=a;a=null,r.next(_)}};function p(){const _=l+n,I=e.now();if(I<_)return i=this.schedule(void 0,_-I),void r.add(i);d()}t.subscribe(new Zn.Q(r,_=>{a=_,l=e.now(),i||(i=e.schedule(p,n),r.add(i))},()=>{d(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,It.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function rD(n){return{getDownloadURL:()=>dt(void 0).pipe(Tn.fc,Zt(()=>n.getDownloadURL()),Tn.iC),getMetadata:()=>dt(void 0).pipe(Tn.fc,Zt(()=>n.getMetadata()),Tn.iC),delete:()=>(0,In.D)(n.delete()),child:e=>rD(n.child(e)),updateMetadata:e=>(0,In.D)(n.updateMetadata(e)),put:(e,t)=>tF(n.put(e,t)),putString:(e,t,r)=>tF(n.putString(e,t,r)),list:e=>(0,In.D)(n.list(e)),listAll:()=>(0,In.D)(n.listAll())}}!function WG(n){const e={TaskState:Ys,TaskEvent:dG,StringFormat:qo,Storage:J1,Reference:Md};n.INTERNAL.registerComponent(new Fs.wA("storage-compat",qG,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.22")}(Ls.Z);const KG=new f.OlP("angularfire2.storageBucket"),ZG=new f.OlP("angularfire2.storage.maxUploadRetryTime"),YG=new f.OlP("angularfire2.storage.maxOperationRetryTime"),QG=new f.OlP("angularfire2.storage.use-emulator");let XG=(()=>{class n{constructor(t,r,i,a,l,d,p,_,I,D){const x=(0,ni.on)(t,l,r);this.storage=(0,ni.cc)(`${x.name}.storage.${i}`,"AngularFireStorage",x.name,()=>{const F=l.runOutsideAngular(()=>x.storage(i||void 0)),j=I;return j&&F.useEmulator(...j),p&&F.setMaxUploadRetryTime(p),_&&F.setMaxOperationRetryTime(_),F},[p,_])}ref(t){return rD(this.storage.ref(t))}refFromURL(t){return rD(this.storage.refFromURL(t))}upload(t,r,i){return rD(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ni.Dh),f.LFG(ni.xv,8),f.LFG(KG,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Tn.HU),f.LFG(ZG,8),f.LFG(YG,8),f.LFG(QG,8),f.LFG(o0,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),JG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})(),eq=(()=>{class n{constructor(){xT.Z.registerVersion("angularfire",Tn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[XG],imports:[JG]}),n})();const nF="@firebase/database",rF="0.13.10";let gM="";function iF(n){gM=n}class nq{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,V.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,V.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class rq{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,V.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const sF=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new nq(e)}}catch(e){}return new rq},Dg=sF("localStorage"),mM=sF("sessionStorage"),S_=new ho.Yd("@firebase/database"),oF=function(){let n=1;return function(){return n++}}(),aF=function(n){const e=(0,V.dS)(n),t=new V.gQ;t.update(e);const r=t.digest();return V.US.encodeByteArray(r)},m0=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=m0.apply(null,r):e+="object"==typeof r?(0,V.Wl)(r):r,e+=" "}return e};let Sg=null,uF=!0;const lF=function(n,e){(0,V.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(S_.logLevel=ho.in.VERBOSE,Sg=S_.log.bind(S_),e&&mM.set("logging_enabled",!0)):"function"==typeof n?Sg=n:(Sg=null,mM.remove("logging_enabled"))},Vi=function(...n){if(!0===uF&&(uF=!1,null===Sg&&!0===mM.get("logging_enabled")&&lF(!0)),Sg){const e=m0.apply(null,n);Sg(e)}},y0=function(n){return function(...e){Vi(n,...e)}},yM=function(...n){const e="FIREBASE INTERNAL ERROR: "+m0(...n);S_.error(e)},Zl=function(...n){const e=`FIREBASE FATAL ERROR: ${m0(...n)}`;throw S_.error(e),new Error(e)},_s=function(...n){const e="FIREBASE WARNING: "+m0(...n);S_.warn(e)},iD=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Nd="[MIN_NAME]",Yl="[MAX_NAME]",Ag=function(n,e){if(n===e)return 0;if(n===Nd||e===Yl)return-1;if(e===Nd||n===Yl)return 1;{const t=sD(n),r=sD(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},oq=function(n,e){return n===e?0:n<e?-1:1},_0=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,V.Wl)(e))},_M=function(n){if("object"!=typeof n||null===n)return(0,V.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,V.Wl)(e[r]),t+=":",t+=_M(n[e[r]]);return t+="}",t},cF=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Ui(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const dF=function(n){(0,V.hu)(!iD(n),"Invalid JSON number");const r=1023;let i,a,l,d,p;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=d+r,l=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const _=[];for(p=52;p;p-=1)_.push(l%2?1:0),l=Math.floor(l/2);for(p=11;p;p-=1)_.push(a%2?1:0),a=Math.floor(a/2);_.push(i?1:0),_.reverse();const I=_.join("");let D="";for(p=0;p<64;p+=8){let x=parseInt(I.substr(p,8),2).toString(16);1===x.length&&(x="0"+x),D+=x}return D.toLowerCase()},cq=new RegExp("^-?(0*)\\d{1,10}$"),hF=-2147483648,vM=2147483647,sD=function(n){if(cq.test(n)){const e=Number(n);if(e>=hF&&e<=vM)return e}return null},A_=function(n){try{n()}catch(e){setTimeout(()=>{throw _s("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},v0=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class hq{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){_s(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class fq{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Vi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',_s(e)}}let E0=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const yF=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,EF="websocket",wF="long_polling";class wM{constructor(e,t,r,i,a=!1,l="",d=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Dg.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Dg.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function bF(n,e,t){let r;if((0,V.hu)("string"==typeof e,"typeof type must == string"),(0,V.hu)("object"==typeof t,"typeof params must == object"),e===EF)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==wF)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function pq(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Ui(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class gq{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,V.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,V.p$)(this.counters_)}}const bM={},IM={};function CM(n){const e=n.toString();return bM[e]||(bM[e]=new gq),bM[e]}class yq{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&A_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class yf{constructor(e,t,r,i,a,l,d){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=y0(e),this.stats_=CM(t),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),bF(t,wF,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new yq(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,V.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new TM((...a)=>{const[l,d,p,_,I]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=d,this.password=p;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,d]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,d)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&yF.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){yf.forceAllow_=!0}static forceDisallow(){yf.forceDisallow_=!0}static isAvailable(){return!((0,V.Yr)()||!yf.forceAllow_&&(yf.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,V.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,V.h$)(t),i=cF(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,V.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,V.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class TM{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,V.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=oF(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=TM.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(d){Vi("frame writing exception"),d.stack&&Vi(d.stack),Vi(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Vi("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,V.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Vi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let aD=null;"undefined"!=typeof MozWebSocket?aD=MozWebSocket:"undefined"!=typeof WebSocket&&(aD=WebSocket);let R_=(()=>{class n{constructor(t,r,i,a,l,d,p){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=y0(this.connId),this.stats_=CM(r),this.connURL=n.connectionURL_(r,d,p,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,l){const d={v:"5"};return!(0,V.Yr)()&&"undefined"!=typeof location&&location.hostname&&yF.test(location.hostname)&&(d.r="f"),r&&(d.s=r),i&&(d.ls=i),a&&(d.ac=a),l&&(d.p=l),bF(t,EF,d)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Dg.set("previous_websocket_failure",!0);try{let i;if((0,V.Yr)()){i={headers:{"User-Agent":`Firebase/5/${gM}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,d=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;d&&(i.proxy={origin:d})}this.mySock=new aD(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==aD&&!n.forceDisallow_}static previouslyFailed(){return Dg.isInMemoryStorage||!0===Dg.get("previous_websocket_failure")}markConnectionHealthy(){Dg.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,V.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,V.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,V.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=cF(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),RF=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[yf,R_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=R_&&R_.isAvailable();let i=r&&!R_.previouslyFailed();if(t.webSocketOnly&&(r||_s("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[R_];else{const a=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class FF{constructor(e,t,r,i,a,l,d,p,_,I){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=d,this.onDisconnect_=p,this.onKill_=_,this.lastSessionId=I,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=y0("c:"+this.id+":"),this.transportManager_=new RF(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=v0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=_0("t",e),r=_0("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=_0("t",e),r=_0("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=_0("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?yM("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):yM("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&_s("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),v0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):v0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Dg.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class LF{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class VF{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,V.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,V.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class uD extends VF{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,V.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new uD}getInitialEvent(e){return(0,V.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Bn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Nn(){return new Bn("")}function un(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function _f(n){return n.pieces_.length-n.pieceNum_}function Jn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Bn(n.pieces_,e)}function SM(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function w0(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function jF(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Bn(e,0)}function Ar(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Bn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Bn(t,0)}function ln(n){return n.pieceNum_>=n.pieces_.length}function Qs(n,e){const t=un(n),r=un(e);if(null===t)return e;if(t===r)return Qs(Jn(n),Jn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Uq(n,e){const t=w0(n,0),r=w0(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=Ag(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function AM(n,e){if(_f(n)!==_f(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function La(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(_f(n)>_f(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class Bq{constructor(e,t){this.errorPrefix_=t,this.parts_=w0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,V.ug)(this.parts_[r]);$F(this)}}function $F(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Rg(n))}function Rg(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class RM extends VF{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new RM}getInitialEvent(e){return(0,V.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const b0=1e3;let cD,xg=(()=>{class n extends LF{constructor(t,r,i,a,l,d,p,_){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=d,this.appCheckTokenProvider_=p,this.authOverride_=_,this.id=n.nextPersistentConnectionId_++,this.log_=y0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=b0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,_&&!(0,V.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");RM.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&uD.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,V.Wl)(l)),(0,V.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new V.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:d=>{const p=d.d;"ok"===d.s?r.resolve(p):r.reject(p)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,d=t._path.toString();this.log_("Listen called for "+d+" "+l),this.listens.has(d)||this.listens.set(d,new Map),(0,V.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,V.hu)(!this.listens.get(d).has(l),"listen() called twice for same path/queryId.");const p={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(d).set(l,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,p=>{const _=p.d,I=p.s;n.warnOnListenWarnings_(_,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",p),"ok"!==I&&this.removeListen_(i,a),t.onComplete&&t.onComplete(I,_))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,V.r3)(t,"w")){const i=(0,V.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();_s(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,V.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,V.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,d=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,V.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,d=>{a&&setTimeout(()=>{a(d.s,d.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const d={p:r,d:i};void 0!==l&&(d.h=l),this.outstandingPuts_.push({action:t,request:d,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,V.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):yM("Unrecognized action received from server: "+(0,V.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,V.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=b0,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=b0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=b0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,be.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,d=t.lastSessionId;let p=!1,_=null;const I=function(){_?_.close():(p=!0,a())};t.realtime_={close:I,sendRequest:function(F){(0,V.hu)(_,"sendRequest call when we're not connected not allowed."),_.sendRequest(F)}};const x=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[F,j]=yield Promise.all([t.authTokenProvider_.getToken(x),t.appCheckTokenProvider_.getToken(x)]);p?Vi("getToken() completed but was canceled"):(Vi("getToken() completed. Creating connection."),t.authToken_=F&&F.accessToken,t.appCheckToken_=j&&j.token,_=new FF(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,ee=>{_s(ee+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},d))}catch(F){t.log_("Failed to get token: "+F),p||(t.repoInfo_.nodeAdmin&&_s(F),I())}}})()}interrupt(t){Vi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Vi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,V.xb)(this.interruptReasons_)&&(this.reconnectDelay_=b0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>_M(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new Bn(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Vi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Vi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,V.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+gM.replace(/\./g,"-")]=1,(0,V.uI)()?t["framework.cordova"]=1:(0,V.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=uD.getInstance().currentlyOnline();return(0,V.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class hn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new hn(e,t)}}class lD{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new hn(Nd,e),i=new hn(Nd,t);return 0!==this.compare(r,i)}minPost(){return hn.MIN}}class qF extends lD{static get __EMPTY_NODE(){return cD}static set __EMPTY_NODE(e){cD=e}compare(e,t){return Ag(e.name,t.name)}isDefinedOn(e){throw(0,V.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return hn.MIN}maxPost(){return new hn(Yl,cD)}makePost(e,t){return(0,V.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new hn(e,cD)}toString(){return".key"}}const Ql=new qF;class dD{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let MM,Fu=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=a?a:Eo.EMPTY_NODE,this.right=null!=l?l:Eo.EMPTY_NODE}copy(t,r,i,a,l){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=a?a:this.left,null!=l?l:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Eo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Eo.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Eo{constructor(e,t=Eo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Eo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Fu.BLACK,null,null))}remove(e){return new Eo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Fu.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new dD(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new dD(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new dD(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new dD(this.root_,null,this.comparator_,!0,e)}}function Kq(n,e){return Ag(n.name,e.name)}function xM(n,e){return Ag(n,e)}Eo.EMPTY_NODE=new class zq{copy(e,t,r,i,a){return this}insert(e,t,r){return new Fu(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const WF=function(n){return"number"==typeof n?"number:"+dF(n):"string:"+n},zF=function(n){if(n.isLeafNode()){const e=n.val();(0,V.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,V.r3)(e,".sv"),"Priority must be a string or number.")}else(0,V.hu)(n===MM||n.isEmpty(),"priority of unexpected type.");(0,V.hu)(n===MM||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let KF,ZF,YF,x_=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,V.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),zF(this.priorityNode_)}static set __childrenNodeConstructor(t){KF=t}static get __childrenNodeConstructor(){return KF}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return ln(t)?this:".priority"===un(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=un(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,V.hu)(".priority"!==i||1===_f(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Jn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+WF(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?dF(this.value_):this.value_,this.lazyHash_=aF(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,V.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,V.hu)(a>=0,"Unknown leaf type: "+r),(0,V.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const ur=new class Xq extends lD{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Ag(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return hn.MIN}maxPost(){return new hn(Yl,new x_("[PRIORITY-POST]",YF))}makePost(e,t){const r=ZF(e);return new hn(t,new x_("[PRIORITY-POST]",r))}toString(){return".priority"}},Jq=Math.log(2);class eW{constructor(e){this.count=parseInt(Math.log(e+1)/Jq,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const hD=function(n,e,t,r){n.sort(e);const i=function(p,_){const I=_-p;let D,x;if(0===I)return null;if(1===I)return D=n[p],x=t?t(D):D,new Fu(x,D.node,Fu.BLACK,null,null);{const F=parseInt(I/2,10)+p,j=i(p,F),ee=i(F+1,_);return D=n[F],x=t?t(D):D,new Fu(x,D.node,Fu.BLACK,j,ee)}},d=function(p){let _=null,I=null,D=n.length;const x=function(j,ee){const ne=D-j,je=D;D-=j;const Ye=i(ne+1,je),We=n[ne],Ke=t?t(We):We;F(new Fu(Ke,We.node,ee,null,Ye))},F=function(j){_?(_.left=j,_=j):(I=j,_=j)};for(let j=0;j<p.count;++j){const ee=p.nextBitIsOne(),ne=Math.pow(2,p.count-(j+1));ee?x(ne,Fu.BLACK):(x(ne,Fu.BLACK),x(ne,Fu.RED))}return I}(new eW(n.length));return new Eo(r||e,d)};let NM;const M_={};class Pd{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,V.hu)(M_&&ur,"ChildrenNode.ts has not been loaded"),NM=NM||new Pd({".priority":M_},{".priority":ur}),NM}get(e){const t=(0,V.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Eo?t:null}hasIndex(e){return(0,V.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,V.hu)(e!==Ql,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(hn.Wrap);let d,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();d=i?hD(r,e.getCompare()):M_;const p=e.toString(),_=Object.assign({},this.indexSet_);_[p]=e;const I=Object.assign({},this.indexes_);return I[p]=d,new Pd(I,_)}addToIndexes(e,t){const r=(0,V.UI)(this.indexes_,(i,a)=>{const l=(0,V.DV)(this.indexSet_,a);if((0,V.hu)(l,"Missing index implementation for "+a),i===M_){if(l.isDefinedOn(e.node)){const d=[],p=t.getIterator(hn.Wrap);let _=p.getNext();for(;_;)_.name!==e.name&&d.push(_),_=p.getNext();return d.push(e),hD(d,l.getCompare())}return M_}{const d=t.get(e.name);let p=i;return d&&(p=p.remove(new hn(e.name,d))),p.insert(e,e.node)}});return new Pd(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,V.UI)(this.indexes_,i=>{if(i===M_)return i;{const a=t.get(e.name);return a?i.remove(new hn(e.name,a)):i}});return new Pd(r,this.indexSet_)}}let I0,Xt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&zF(this.priorityNode_),this.children_.isEmpty()&&(0,V.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return I0||(I0=new n(new Eo(xM),null,Pd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||I0}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?I0:r}}getChild(t){const r=un(t);return null===r?this:this.getImmediateChild(r).getChild(Jn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,V.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new hn(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const d=a.isEmpty()?I0:this.priorityNode_;return new n(a,d,l)}}updateChild(t,r){const i=un(t);if(null===i)return r;{(0,V.hu)(".priority"!==un(t)||1===_f(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Jn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(ur,(d,p)=>{r[d]=p.val(t),i++,l&&n.INTEGER_REGEXP_.test(d)?a=Math.max(a,Number(d)):l=!1}),!t&&l&&a<2*i){const d=[];for(const p in r)d[p]=r[p];return d}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+WF(this.getPriority().val())+":"),this.forEachChild(ur,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":aF(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new hn(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new hn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new hn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,hn.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,hn.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===C0?-1:0}withIndex(t){if(t===Ql||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Ql||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(ur),a=r.getIterator(ur);let l=i.getNext(),d=a.getNext();for(;l&&d;){if(l.name!==d.name||!l.node.equals(d.node))return!1;l=i.getNext(),d=a.getNext()}return null===l&&null===d}return!1}return!1}}resolveIndex_(t){return t===Ql?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const C0=new class tW extends Xt{constructor(){super(new Eo(xM),Xt.EMPTY_NODE,Pd.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Xt.EMPTY_NODE}isEmpty(){return!1}};function Vr(n,e=null){if(null===n)return Xt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,V.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new x_(n,Vr(e));if(n instanceof Array){let t=Xt.EMPTY_NODE;return Ui(n,(r,i)=>{if((0,V.r3)(n,r)&&"."!==r.substring(0,1)){const a=Vr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Vr(e))}{const t=[];let r=!1;if(Ui(n,(l,d)=>{if("."!==l.substring(0,1)){const p=Vr(d);p.isEmpty()||(r=r||!p.getPriority().isEmpty(),t.push(new hn(l,p)))}}),0===t.length)return Xt.EMPTY_NODE;const a=hD(t,Kq,l=>l.name,xM);if(r){const l=hD(t,ur.getCompare());return new Xt(a,Vr(e),new Pd({".priority":l},{".priority":ur}))}return new Xt(a,Vr(e),Pd.Default)}}Object.defineProperties(hn,{MIN:{value:new hn(Nd,Xt.EMPTY_NODE)},MAX:{value:new hn(Yl,C0)}}),qF.__EMPTY_NODE=Xt.EMPTY_NODE,x_.__childrenNodeConstructor=Xt,function Zq(n){MM=n}(C0),function Qq(n){YF=n}(C0),function Yq(n){ZF=n}(Vr);class PM extends lD{constructor(e){super(),this.indexPath_=e,(0,V.hu)(!ln(e)&&".priority"!==un(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Ag(e.name,t.name):a}makePost(e,t){const r=Vr(e),i=Xt.EMPTY_NODE.updateChild(this.indexPath_,r);return new hn(t,i)}maxPost(){const e=Xt.EMPTY_NODE.updateChild(this.indexPath_,C0);return new hn(Yl,e)}toString(){return w0(this.indexPath_,0).join("/")}}const OM=new class rW extends lD{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Ag(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return hn.MIN}maxPost(){return hn.MAX}makePost(e,t){const r=Vr(e);return new hn(t,r)}toString(){return".value"}},N_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",iW=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=N_.charAt(t%64),t=Math.floor(t/64);(0,V.hu)(0===t,"Cannot push at time == 0");let l=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=N_.charAt(e[i]);return(0,V.hu)(20===l.length,"nextPushId: Length should be 20."),l}}(),JF=function(n){if(n===""+vM)return"-";const e=sD(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let l=0;l<t.length;l++)t[l]=n.charAt(l);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Yl;const a=N_.charAt(N_.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},eL=function(n){if(n===""+hF)return Nd;const e=sD(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+vM:(delete t[t.length-1],t.join("")):(t[t.length-1]=N_.charAt(N_.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function tL(n){return{type:"value",snapshotNode:n}}function P_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function T0(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function D0(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class FM{constructor(e){this.index_=e}updateChild(e,t,r,i,a,l){(0,V.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=e.getImmediateChild(t);return d.getChild(i).equals(r.getChild(i))&&d.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(T0(t,d)):(0,V.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?l.trackChildChange(P_(t,r)):l.trackChildChange(D0(t,r,d))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(ur,(i,a)=>{t.hasChild(i)||r.trackChildChange(T0(i,a))}),t.isLeafNode()||t.forEachChild(ur,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||r.trackChildChange(D0(i,a,l))}else r.trackChildChange(P_(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Xt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class S0{constructor(e){this.indexedFilter_=new FM(e.getIndex()),this.index_=e.getIndex(),this.startPost_=S0.getStartPost_(e),this.endPost_=S0.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,l){return this.matches(new hn(t,r))||(r=Xt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Xt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Xt.EMPTY_NODE);const a=this;return t.forEachChild(ur,(l,d)=>{a.matches(new hn(l,d))||(i=i.updateImmediateChild(l,Xt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class oW{constructor(e){this.rangedFilter_=new S0(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,l){return this.rangedFilter_.matches(new hn(t,r))||(r=Xt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,l):this.fullLimitUpdateChild_(e,t,r,a,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Xt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Xt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const d=a.getNext();let p;if(p=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),d)<=0:this.index_.compare(d,this.rangedFilter_.getEndPost())<=0,!p)break;i=i.updateImmediateChild(d.name,d.node),l++}}else{let a,l,d,p;if(i=t.withIndex(this.index_),i=i.updatePriority(Xt.EMPTY_NODE),this.reverse_){p=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();const D=this.index_.getCompare();d=(x,F)=>D(F,x)}else p=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),d=this.index_.getCompare();let _=0,I=!1;for(;p.hasNext();){const D=p.getNext();!I&&d(a,D)<=0&&(I=!0),I&&_<this.limit_&&d(D,l)<=0?_++:i=i.updateImmediateChild(D.name,Xt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let l;if(this.reverse_){const D=this.index_.getCompare();l=(x,F)=>D(F,x)}else l=this.index_.getCompare();const d=e;(0,V.hu)(d.numChildren()===this.limit_,"");const p=new hn(t,r),_=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),I=this.rangedFilter_.matches(p);if(d.hasChild(t)){const D=d.getImmediateChild(t);let x=i.getChildAfterChild(this.index_,_,this.reverse_);for(;null!=x&&(x.name===t||d.hasChild(x.name));)x=i.getChildAfterChild(this.index_,x,this.reverse_);const F=null==x?1:l(x,p);if(I&&!r.isEmpty()&&F>=0)return null!=a&&a.trackChildChange(D0(t,r,D)),d.updateImmediateChild(t,r);{null!=a&&a.trackChildChange(T0(t,D));const ee=d.updateImmediateChild(t,Xt.EMPTY_NODE);return null!=x&&this.rangedFilter_.matches(x)?(null!=a&&a.trackChildChange(P_(x.name,x.node)),ee.updateImmediateChild(x.name,x.node)):ee}}return r.isEmpty()?e:I&&l(_,p)>=0?(null!=a&&(a.trackChildChange(T0(_.name,_.node)),a.trackChildChange(P_(t,r))),d.updateImmediateChild(t,r).updateImmediateChild(_.name,Xt.EMPTY_NODE)):e}}class fD{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ur}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,V.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,V.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Nd}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,V.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,V.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Yl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,V.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ur}copy(){const e=new fD;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function LM(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function VM(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function pD(n,e){const t=n.copy();return t.index_=e,t}function nL(n){const e={};if(n.isDefault())return e;let t;return n.index_===ur?t="$priority":n.index_===OM?t="$value":n.index_===Ql?t="$key":((0,V.hu)(n.index_ instanceof PM,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,V.Wl)(t),n.startSet_&&(e.startAt=(0,V.Wl)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,V.Wl)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,V.Wl)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,V.Wl)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function rL(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==ur&&(e.i=n.index_.toString()),e}class gD extends LF{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=y0("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,V.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=gD.getListenId_(e,r),d={};this.listens_[l]=d;const p=nL(e._queryParams);this.restRequest_(a+".json",p,(_,I)=>{let D=I;if(404===_&&(D=null,_=null),null===_&&this.onDataUpdate_(a,D,!1,r),(0,V.DV)(this.listens_,l)===d){let x;x=_?401===_?"permission_denied":"rest_error:"+_:"ok",i(x,null)}})}unlisten(e,t){const r=gD.getListenId_(e,t);delete this.listens_[r]}get(e){const t=nL(e._queryParams),r=e._path.toString(),i=new V.BH;return this.restRequest_(r+".json",t,(a,l)=>{let d=l;404===a&&(d=null,a=null),null===a?(this.onDataUpdate_(r,d,!1,null),i.resolve(d)):i.reject(new Error(d))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,V.xO)(t);this.log_("Sending REST request for "+l);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(r&&4===d.readyState){this.log_("REST Response for "+l+" received. status:",d.status,"response:",d.responseText);let p=null;if(d.status>=200&&d.status<300){try{p=(0,V.cI)(d.responseText)}catch(_){_s("Failed to parse JSON response for "+l+": "+d.responseText)}r(null,p)}else 401!==d.status&&404!==d.status&&_s("Got unsuccessful REST response for "+l+" Status: "+d.status),r(d.status);r=null}},d.open("GET",l,!0),d.send()})}}class hW{constructor(){this.rootNode_=Xt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function mD(){return{value:null,children:new Map}}function O_(n,e,t){if(ln(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=un(e);n.children.has(r)||n.children.set(r,mD()),O_(n.children.get(r),e=Jn(e),t)}}function UM(n,e){if(ln(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(ur,(r,i)=>{O_(n,new Bn(r),i)}),UM(n,e)}}if(n.children.size>0){const t=un(e);return e=Jn(e),n.children.has(t)&&UM(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function BM(n,e,t){null!==n.value?t(e,n.value):function fW(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{BM(i,new Bn(e.toString()+"/"+r),t)})}class pW{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Ui(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class yW{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new pW(e);const r=1e4+2e4*Math.random();v0(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Ui(e,(i,a)=>{a>0&&(0,V.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),v0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Va=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Va||(Va={})),Va))();function HM(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class yD{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Va.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(ln(this.path)){if(null!=this.affectedTree.value)return(0,V.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Bn(e));return new yD(Nn(),t,this.revert)}}return(0,V.hu)(un(this.path)===e,"operationForChild called for unrelated child."),new yD(Jn(this.path),this.affectedTree,this.revert)}}class A0{constructor(e,t){this.source=e,this.path=t,this.type=Va.LISTEN_COMPLETE}operationForChild(e){return ln(this.path)?new A0(this.source,Nn()):new A0(this.source,Jn(this.path))}}class Mg{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Va.OVERWRITE}operationForChild(e){return ln(this.path)?new Mg(this.source,Nn(),this.snap.getImmediateChild(e)):new Mg(this.source,Jn(this.path),this.snap)}}class k_{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Va.MERGE}operationForChild(e){if(ln(this.path)){const t=this.children.subtree(new Bn(e));return t.isEmpty()?null:t.value?new Mg(this.source,Nn(),t.value):new k_(this.source,Nn(),t)}return(0,V.hu)(un(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new k_(this.source,Jn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class vf{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ln(e))return this.isFullyInitialized()&&!this.filtered_;const t=un(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class _W{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function R0(n,e,t,r,i,a){const l=r.filter(d=>d.type===t);l.sort((d,p)=>function wW(n,e,t){if(null==e.childName||null==t.childName)throw(0,V.g5)("Should only compare child_ events.");const r=new hn(e.childName,e.snapshotNode),i=new hn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,d,p)),l.forEach(d=>{const p=function EW(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,d,a);i.forEach(_=>{_.respondsTo(d.type)&&e.push(_.createEvent(p,n.query_))})})}function _D(n,e){return{eventCache:n,serverCache:e}}function x0(n,e,t,r){return _D(new vf(e,t,r),n.serverCache)}function sL(n,e,t,r){return _D(n.eventCache,new vf(e,t,r))}function vD(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Ng(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let GM;class lr{constructor(e,t=(()=>(GM||(GM=new Eo(oq)),GM))()){this.value=e,this.children=t}static fromObject(e){let t=new lr(null);return Ui(e,(r,i)=>{t=t.set(new Bn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Nn(),value:this.value};if(ln(e))return null;{const r=un(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Jn(e),t);return null!=a?{path:Ar(new Bn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ln(e))return this;{const t=un(e),r=this.children.get(t);return null!==r?r.subtree(Jn(e)):new lr(null)}}set(e,t){if(ln(e))return new lr(t,this.children);{const r=un(e),a=(this.children.get(r)||new lr(null)).set(Jn(e),t),l=this.children.insert(r,a);return new lr(this.value,l)}}remove(e){if(ln(e))return this.children.isEmpty()?new lr(null):new lr(null,this.children);{const t=un(e),r=this.children.get(t);if(r){const i=r.remove(Jn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new lr(null):new lr(this.value,a)}return this}}get(e){if(ln(e))return this.value;{const t=un(e),r=this.children.get(t);return r?r.get(Jn(e)):null}}setTree(e,t){if(ln(e))return t;{const r=un(e),a=(this.children.get(r)||new lr(null)).setTree(Jn(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new lr(this.value,l)}}fold(e){return this.fold_(Nn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(Ar(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Nn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(ln(e))return null;{const a=un(e),l=this.children.get(a);return l?l.findOnPath_(Jn(e),Ar(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Nn(),t)}foreachOnPath_(e,t,r){if(ln(e))return this;{this.value&&r(t,this.value);const i=un(e),a=this.children.get(i);return a?a.foreachOnPath_(Jn(e),Ar(t,i),r):new lr(null)}}foreach(e){this.foreach_(Nn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Ar(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Lu{constructor(e){this.writeTree_=e}static empty(){return new Lu(new lr(null))}}function M0(n,e,t){if(ln(e))return new Lu(new lr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=Qs(i,e);return a=a.updateChild(l,t),new Lu(n.writeTree_.set(i,a))}{const i=new lr(t),a=n.writeTree_.setTree(e,i);return new Lu(a)}}}function qM(n,e,t){let r=n;return Ui(t,(i,a)=>{r=M0(r,Ar(e,i),a)}),r}function oL(n,e){if(ln(e))return Lu.empty();{const t=n.writeTree_.setTree(e,new lr(null));return new Lu(t)}}function WM(n,e){return null!=Pg(n,e)}function Pg(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Qs(t.path,e)):null}function aL(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(ur,(r,i)=>{e.push(new hn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new hn(r,i.value))}),e}function Ef(n,e){if(ln(e))return n;{const t=Pg(n,e);return new Lu(null!=t?new lr(t):n.writeTree_.subtree(e))}}function zM(n){return n.writeTree_.isEmpty()}function F_(n,e){return uL(Nn(),n.writeTree_,e)}function uL(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,V.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=uL(Ar(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Ar(n,".priority"),r)),t}}function ED(n,e){return fL(e,n)}function SW(n,e){if(n.snap)return La(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&La(Ar(n.path,t),e))return!0;return!1}function RW(n){return n.visible}function lL(n,e,t){let r=Lu.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let d;if(a.snap)La(t,l)?(d=Qs(t,l),r=M0(r,d,a.snap)):La(l,t)&&(d=Qs(l,t),r=M0(r,Nn(),a.snap.getChild(d)));else{if(!a.children)throw(0,V.g5)("WriteRecord should have .snap or .children");if(La(t,l))d=Qs(t,l),r=qM(r,d,a.children);else if(La(l,t))if(d=Qs(l,t),ln(d))r=qM(r,Nn(),a.children);else{const p=(0,V.DV)(a.children,un(d));if(p){const _=p.getChild(Jn(d));r=M0(r,Nn(),_)}}}}}return r}function cL(n,e,t,r,i){if(r||i){const a=Ef(n.visibleWrites,e);return!i&&zM(a)?t:i||null!=t||WM(a,Nn())?F_(lL(n.allWrites,function(_){return(_.visible||i)&&(!r||!~r.indexOf(_.writeId))&&(La(_.path,e)||La(e,_.path))},e),t||Xt.EMPTY_NODE):null}{const a=Pg(n.visibleWrites,e);if(null!=a)return a;{const l=Ef(n.visibleWrites,e);return zM(l)?t:null!=t||WM(l,Nn())?F_(l,t||Xt.EMPTY_NODE):null}}}function wD(n,e,t,r){return cL(n.writeTree,n.treePath,e,t,r)}function KM(n,e){return function xW(n,e,t){let r=Xt.EMPTY_NODE;const i=Pg(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ur,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=Ef(n.visibleWrites,e);return t.forEachChild(ur,(l,d)=>{const p=F_(Ef(a,new Bn(l)),d);r=r.updateImmediateChild(l,p)}),aL(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return aL(Ef(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function dL(n,e,t,r){return function MW(n,e,t,r,i){(0,V.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=Ar(e,t);if(WM(n.visibleWrites,a))return null;{const l=Ef(n.visibleWrites,a);return zM(l)?i.getChild(t):F_(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function bD(n,e){return function PW(n,e){return Pg(n.visibleWrites,e)}(n.writeTree,Ar(n.treePath,e))}function ZM(n,e,t){return function NW(n,e,t,r){const i=Ar(e,t),a=Pg(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?F_(Ef(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function hL(n,e){return fL(Ar(n.treePath,e),n.writeTree)}function fL(n,e){return{treePath:n,writeTree:e}}class LW{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,V.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,V.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,D0(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,T0(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,P_(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,V.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,D0(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const pL=new class VW{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class YM{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new vf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ZM(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ng(this.viewCache_),a=function FW(n,e,t,r,i,a){return function OW(n,e,t,r,i,a,l){let d;const p=Ef(n.visibleWrites,e),_=Pg(p,Nn());if(null!=_)d=_;else{if(null==t)return[];d=F_(p,t)}if(d=d.withIndex(l),d.isEmpty()||d.isLeafNode())return[];{const I=[],D=l.getCompare(),x=a?d.getReverseIteratorFrom(r,l):d.getIteratorFrom(r,l);let F=x.getNext();for(;F&&I.length<i;)0!==D(F,r)&&I.push(F),F=x.getNext();return I}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function gL(n,e,t,r,i,a){const l=e.eventCache;if(null!=bD(r,t))return e;{let d,p;if(ln(t))if((0,V.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const _=Ng(e),D=KM(r,_ instanceof Xt?_:Xt.EMPTY_NODE);d=n.filter.updateFullNode(e.eventCache.getNode(),D,a)}else{const _=wD(r,Ng(e));d=n.filter.updateFullNode(e.eventCache.getNode(),_,a)}else{const _=un(t);if(".priority"===_){(0,V.hu)(1===_f(t),"Can't have a priority with additional path components");const I=l.getNode();p=e.serverCache.getNode();const D=dL(r,t,I,p);d=null!=D?n.filter.updatePriority(I,D):l.getNode()}else{const I=Jn(t);let D;if(l.isCompleteForChild(_)){p=e.serverCache.getNode();const x=dL(r,t,l.getNode(),p);D=null!=x?l.getNode().getImmediateChild(_).updateChild(I,x):l.getNode().getImmediateChild(_)}else D=ZM(r,_,e.serverCache);d=null!=D?n.filter.updateChild(l.getNode(),_,D,I,i,a):l.getNode()}}return x0(e,d,l.isFullyInitialized()||ln(t),n.filter.filtersNodes())}}function ID(n,e,t,r,i,a,l,d){const p=e.serverCache;let _;const I=l?n.filter:n.filter.getIndexedFilter();if(ln(t))_=I.updateFullNode(p.getNode(),r,null);else if(I.filtersNodes()&&!p.isFiltered()){const F=p.getNode().updateChild(t,r);_=I.updateFullNode(p.getNode(),F,null)}else{const F=un(t);if(!p.isCompleteForPath(t)&&_f(t)>1)return e;const j=Jn(t),ne=p.getNode().getImmediateChild(F).updateChild(j,r);_=".priority"===F?I.updatePriority(p.getNode(),ne):I.updateChild(p.getNode(),F,ne,j,pL,null)}const D=sL(e,_,p.isFullyInitialized()||ln(t),I.filtersNodes());return gL(n,D,t,i,new YM(i,D,a),d)}function QM(n,e,t,r,i,a,l){const d=e.eventCache;let p,_;const I=new YM(i,e,a);if(ln(t))_=n.filter.updateFullNode(e.eventCache.getNode(),r,l),p=x0(e,_,!0,n.filter.filtersNodes());else{const D=un(t);if(".priority"===D)_=n.filter.updatePriority(e.eventCache.getNode(),r),p=x0(e,_,d.isFullyInitialized(),d.isFiltered());else{const x=Jn(t),F=d.getNode().getImmediateChild(D);let j;if(ln(x))j=r;else{const ee=I.getCompleteChild(D);j=null!=ee?".priority"===SM(x)&&ee.getChild(jF(x)).isEmpty()?ee:ee.updateChild(x,r):Xt.EMPTY_NODE}p=F.equals(j)?e:x0(e,n.filter.updateChild(d.getNode(),D,j,x,I,l),d.isFullyInitialized(),n.filter.filtersNodes())}}return p}function mL(n,e){return n.eventCache.isCompleteForChild(e)}function yL(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function XM(n,e,t,r,i,a,l,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let _,p=e;_=ln(t)?r:new lr(null).setTree(t,r);const I=e.serverCache.getNode();return _.children.inorderTraversal((D,x)=>{if(I.hasChild(D)){const j=yL(0,e.serverCache.getNode().getImmediateChild(D),x);p=ID(n,p,new Bn(D),j,i,a,l,d)}}),_.children.inorderTraversal((D,x)=>{const F=!e.serverCache.isCompleteForChild(D)&&null===x.value;if(!I.hasChild(D)&&!F){const ee=yL(0,e.serverCache.getNode().getImmediateChild(D),x);p=ID(n,p,new Bn(D),ee,i,a,l,d)}}),p}class zW{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new FM(r.getIndex()),a=function aW(n){return n.loadsAllData()?new FM(n.getIndex()):n.hasLimit()?new oW(n):new S0(n)}(r);this.processor_=function UW(n){return{filter:n}}(a);const l=t.serverCache,d=t.eventCache,p=i.updateFullNode(Xt.EMPTY_NODE,l.getNode(),null),_=a.updateFullNode(Xt.EMPTY_NODE,d.getNode(),null),I=new vf(p,l.isFullyInitialized(),i.filtersNodes()),D=new vf(_,d.isFullyInitialized(),a.filtersNodes());this.viewCache_=_D(D,I),this.eventGenerator_=new _W(this.query_)}get query(){return this.query_}}function YW(n,e){const t=Ng(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!ln(e)&&!t.getImmediateChild(un(e)).isEmpty())?t.getChild(e):null}function _L(n){return 0===n.eventRegistrations_.length}function vL(n,e,t){const r=[];if(t){(0,V.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function EL(n,e,t,r){e.type===Va.MERGE&&null!==e.source.queryId&&((0,V.hu)(Ng(n.viewCache_),"We should always have a full cache before handling merges"),(0,V.hu)(vD(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function jW(n,e,t,r,i){const a=new LW;let l,d;if(t.type===Va.OVERWRITE){const _=t;_.source.fromUser?l=QM(n,e,_.path,_.snap,r,i,a):((0,V.hu)(_.source.fromServer,"Unknown source."),d=_.source.tagged||e.serverCache.isFiltered()&&!ln(_.path),l=ID(n,e,_.path,_.snap,r,i,d,a))}else if(t.type===Va.MERGE){const _=t;_.source.fromUser?l=function HW(n,e,t,r,i,a,l){let d=e;return r.foreach((p,_)=>{const I=Ar(t,p);mL(e,un(I))&&(d=QM(n,d,I,_,i,a,l))}),r.foreach((p,_)=>{const I=Ar(t,p);mL(e,un(I))||(d=QM(n,d,I,_,i,a,l))}),d}(n,e,_.path,_.children,r,i,a):((0,V.hu)(_.source.fromServer,"Unknown source."),d=_.source.tagged||e.serverCache.isFiltered(),l=XM(n,e,_.path,_.children,r,i,d,a))}else if(t.type===Va.ACK_USER_WRITE){const _=t;l=_.revert?function WW(n,e,t,r,i,a){let l;if(null!=bD(r,t))return e;{const d=new YM(r,e,i),p=e.eventCache.getNode();let _;if(ln(t)||".priority"===un(t)){let I;if(e.serverCache.isFullyInitialized())I=wD(r,Ng(e));else{const D=e.serverCache.getNode();(0,V.hu)(D instanceof Xt,"serverChildren would be complete if leaf node"),I=KM(r,D)}_=n.filter.updateFullNode(p,I,a)}else{const I=un(t);let D=ZM(r,I,e.serverCache);null==D&&e.serverCache.isCompleteForChild(I)&&(D=p.getImmediateChild(I)),_=null!=D?n.filter.updateChild(p,I,D,Jn(t),d,a):e.eventCache.getNode().hasChild(I)?n.filter.updateChild(p,I,Xt.EMPTY_NODE,Jn(t),d,a):p,_.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=wD(r,Ng(e)),l.isLeafNode()&&(_=n.filter.updateFullNode(_,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=bD(r,Nn()),x0(e,_,l,n.filter.filtersNodes())}}(n,e,_.path,r,i,a):function GW(n,e,t,r,i,a,l){if(null!=bD(i,t))return e;const d=e.serverCache.isFiltered(),p=e.serverCache;if(null!=r.value){if(ln(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return ID(n,e,t,p.getNode().getChild(t),i,a,d,l);if(ln(t)){let _=new lr(null);return p.getNode().forEachChild(Ql,(I,D)=>{_=_.set(new Bn(I),D)}),XM(n,e,t,_,i,a,d,l)}return e}{let _=new lr(null);return r.foreach((I,D)=>{const x=Ar(t,I);p.isCompleteForPath(x)&&(_=_.set(I,p.getNode().getChild(x)))}),XM(n,e,t,_,i,a,d,l)}}(n,e,_.path,_.affectedTree,r,i,a)}else{if(t.type!==Va.LISTEN_COMPLETE)throw(0,V.g5)("Unknown operation type: "+t.type);l=function qW(n,e,t,r,i){const a=e.serverCache;return gL(n,sL(e,a.getNode(),a.isFullyInitialized()||ln(t),a.isFiltered()),t,r,pL,i)}(n,e,t.path,r,a)}const p=a.getChanges();return function $W(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=vD(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(tL(vD(e)))}}(e,l,p),{viewCache:l,changes:p}}(n.processor_,i,e,t,r);return function BW(n,e){(0,V.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,V.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,V.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,wL(n,a.changes,a.viewCache.eventCache.getNode(),null)}function wL(n,e,t,r){return function vW(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function sW(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),R0(n,i,"child_removed",e,r,t),R0(n,i,"child_added",e,r,t),R0(n,i,"child_moved",a,r,t),R0(n,i,"child_changed",e,r,t),R0(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let CD,DD;class bL{constructor(){this.views=new Map}}function JM(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,V.hu)(null!=a,"SyncTree gave us an op for an invalid query."),EL(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(EL(l,e,t,r));return a}}function IL(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let d=wD(t,i?r:null),p=!1;d?p=!0:r instanceof Xt?(d=KM(t,r),p=!1):(d=Xt.EMPTY_NODE,p=!1);const _=_D(new vf(d,p,!1),new vf(r,i,!1));return new zW(e,_)}return l}function CL(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function wf(n,e){let t=null;for(const r of n.views.values())t=t||YW(r,e);return t}function TL(n,e){return e._queryParams.loadsAllData()?TD(n):n.views.get(e._queryIdentifier)}function DL(n,e){return null!=TL(n,e)}function bf(n){return null!=TD(n)}function TD(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let o3=1;class SL{constructor(e){this.listenProvider_=e,this.syncPointTree_=new lr(null),this.pendingWriteTree_=function kW(){return{visibleWrites:Lu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function eN(n,e,t,r,i){return function IW(n,e,t,r,i){(0,V.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=M0(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?L_(n,new Mg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function If(n,e,t=!1){const r=function TW(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function DW(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);(0,V.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const d=n.allWrites[l];d.visible&&(l>=t&&SW(d,r.path)?i=!1:La(r.path,d.path)&&(a=!0)),l--}return!!i&&(a?(function AW(n){n.visibleWrites=lL(n.allWrites,RW,Nn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=oL(n.visibleWrites,r.path):Ui(r.children,p=>{n.visibleWrites=oL(n.visibleWrites,Ar(r.path,p))}),!0))}(n.pendingWriteTree_,e)){let a=new lr(null);return null!=r.snap?a=a.set(Nn(),!0):Ui(r.children,l=>{a=a.set(new Bn(l),!0)}),L_(n,new yD(r.path,a,t))}return[]}function N0(n,e,t){return L_(n,new Mg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function SD(n,e,t,r,i=!1){const a=e._path,l=n.syncPointTree_.get(a);let d=[];if(l&&("default"===e._queryIdentifier||DL(l,e))){const p=function r3(n,e,t,r){const i=e._queryIdentifier,a=[];let l=[];const d=bf(n);if("default"===i)for(const[p,_]of n.views.entries())l=l.concat(vL(_,t,r)),_L(_)&&(n.views.delete(p),_.query._queryParams.loadsAllData()||a.push(_.query));else{const p=n.views.get(i);p&&(l=l.concat(vL(p,t,r)),_L(p)&&(n.views.delete(i),p.query._queryParams.loadsAllData()||a.push(p.query)))}return d&&!bf(n)&&a.push(new(function e3(){return(0,V.hu)(CD,"Reference.ts has not been loaded"),CD}())(e._repo,e._path)),{removed:a,events:l}}(l,e,t,r);(function t3(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const _=p.removed;if(d=p.events,!i){const I=-1!==_.findIndex(x=>x._queryParams.loadsAllData()),D=n.syncPointTree_.findOnPath(a,(x,F)=>bf(F));if(I&&!D){const x=n.syncPointTree_.subtree(a);if(!x.isEmpty()){const F=function f3(n){return n.fold((e,t,r)=>{if(t&&bf(t))return[TD(t)];{let i=[];return t&&(i=CL(t)),Ui(r,(a,l)=>{i=i.concat(l)}),i}})}(x);for(let j=0;j<F.length;++j){const ee=F[j],ne=ee.query,je=ML(n,ee);n.listenProvider_.startListening(O0(ne),P0(n,ne),je.hashFn,je.onComplete)}}}!D&&_.length>0&&!r&&(I?n.listenProvider_.stopListening(O0(e),null):_.forEach(x=>{const F=n.queryToTagMap.get(RD(x));n.listenProvider_.stopListening(O0(x),F)}))}!function p3(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=RD(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,_)}return d}function AL(n,e,t,r){const i=nN(n,r);if(null!=i){const a=rN(i),l=a.path,d=a.queryId,p=Qs(l,e);return iN(n,l,new Mg(HM(d),p,t))}return[]}function tN(n,e,t,r=!1){const i=e._path;let a=null,l=!1;n.syncPointTree_.foreachOnPath(i,(x,F)=>{const j=Qs(x,i);a=a||wf(F,j),l=l||bf(F)});let p,d=n.syncPointTree_.get(i);d?(l=l||bf(d),a=a||wf(d,Nn())):(d=new bL,n.syncPointTree_=n.syncPointTree_.set(i,d)),null!=a?p=!0:(p=!1,a=Xt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((F,j)=>{const ee=wf(j,Nn());ee&&(a=a.updateImmediateChild(F,ee))}));const _=DL(d,e);if(!_&&!e._queryParams.loadsAllData()){const x=RD(e);(0,V.hu)(!n.queryToTagMap.has(x),"View does not exist, but we have a tag");const F=function g3(){return o3++}();n.queryToTagMap.set(x,F),n.tagToQueryMap.set(F,x)}let D=function n3(n,e,t,r,i,a){const l=IL(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function QW(n,e){n.eventRegistrations_.push(e)}(l,t),function XW(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(ur,(a,l)=>{r.push(P_(a,l))}),t.isFullyInitialized()&&r.push(tL(t.getNode())),wL(n,r,t.getNode(),e)}(l,t)}(d,e,t,ED(n.pendingWriteTree_,i),a,p);if(!_&&!l&&!r){const x=TL(d,e);D=D.concat(function m3(n,e,t){const r=e._path,i=P0(n,e),a=ML(n,t),l=n.listenProvider_.startListening(O0(e),i,a.hashFn,a.onComplete),d=n.syncPointTree_.subtree(r);if(i)(0,V.hu)(!bf(d.value),"If we're adding a query, it shouldn't be shadowed");else{const p=d.fold((_,I,D)=>{if(!ln(_)&&I&&bf(I))return[TD(I).query];{let x=[];return I&&(x=x.concat(CL(I).map(F=>F.query))),Ui(D,(F,j)=>{x=x.concat(j)}),x}});for(let _=0;_<p.length;++_){const I=p[_];n.listenProvider_.stopListening(O0(I),P0(n,I))}}return l}(n,e,x))}return D}function AD(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,d)=>{const _=wf(d,Qs(l,e));if(_)return _});return cL(i,e,a,t,!0)}function L_(n,e){return RL(e,n.syncPointTree_,null,ED(n.pendingWriteTree_,Nn()))}function RL(n,e,t,r){if(ln(n.path))return xL(n,e,t,r);{const i=e.get(Nn());null==t&&null!=i&&(t=wf(i,Nn()));let a=[];const l=un(n.path),d=n.operationForChild(l),p=e.children.get(l);if(p&&d){const _=t?t.getImmediateChild(l):null,I=hL(r,l);a=a.concat(RL(d,p,_,I))}return i&&(a=a.concat(JM(i,n,r,t))),a}}function xL(n,e,t,r){const i=e.get(Nn());null==t&&null!=i&&(t=wf(i,Nn()));let a=[];return e.children.inorderTraversal((l,d)=>{const p=t?t.getImmediateChild(l):null,_=hL(r,l),I=n.operationForChild(l);I&&(a=a.concat(xL(I,d,p,_)))}),i&&(a=a.concat(JM(i,n,r,t))),a}function ML(n,e){const t=e.query,r=P0(n,t);return{hashFn:()=>(function KW(n){return n.viewCache_.serverCache.getNode()}(e)||Xt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function c3(n,e,t){const r=nN(n,t);if(r){const i=rN(r),a=i.path,l=i.queryId,d=Qs(a,e);return iN(n,a,new A0(HM(l),d))}return[]}(n,t._path,r):function l3(n,e){return L_(n,new A0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function lq(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return SD(n,t,null,a)}}}}function P0(n,e){const t=RD(e);return n.queryToTagMap.get(t)}function RD(n){return n._path.toString()+"$"+n._queryIdentifier}function nN(n,e){return n.tagToQueryMap.get(e)}function rN(n){const e=n.indexOf("$");return(0,V.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Bn(n.substr(0,e))}}function iN(n,e,t){const r=n.syncPointTree_.get(e);return(0,V.hu)(r,"Missing sync point for query tag that we're tracking"),JM(r,t,ED(n.pendingWriteTree_,e),null)}function O0(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function s3(){return(0,V.hu)(DD,"Reference.ts has not been loaded"),DD}())(n._repo,n._path):n}class sN{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new sN(t)}node(){return this.node_}}class oN{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Ar(this.path_,e);return new oN(this.syncTree_,t)}node(){return AD(this.syncTree_,this.path_)}}const NL=function(n,e,t){return n&&"object"==typeof n?((0,V.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?_3(n[".sv"],e,t):"object"==typeof n[".sv"]?v3(n[".sv"],e):void(0,V.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},_3=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,V.hu)(!1,"Unexpected server value: "+n)},v3=function(n,e,t){n.hasOwnProperty("increment")||(0,V.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,V.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,V.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},PL=function(n,e,t,r){return uN(e,new oN(t,n),r)},aN=function(n,e,t){return uN(n,new sN(e),t)};function uN(n,e,t){const r=n.getPriority().val(),i=NL(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,d=NL(l.getValue(),e,t);return d!==l.getValue()||i!==l.getPriority().val()?new x_(d,Vr(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new x_(i))),l.forEachChild(ur,(d,p)=>{const _=uN(p,e.getImmediateChild(d),t);_!==p&&(a=a.updateImmediateChild(d,_))}),a}}class lN{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function xD(n,e){let t=e instanceof Bn?e:new Bn(e),r=n,i=un(t);for(;null!==i;){const a=(0,V.DV)(r.node.children,i)||{children:{},childCount:0};r=new lN(i,r,a),t=Jn(t),i=un(t)}return r}function Og(n){return n.node.value}function cN(n,e){n.node.value=e,dN(n)}function OL(n){return n.node.childCount>0}function MD(n,e){Ui(n.node.children,(t,r)=>{e(new lN(t,n,r))})}function kL(n,e,t,r){t&&!r&&e(n),MD(n,i=>{kL(i,e,!0,r)}),t&&r&&e(n)}function k0(n){return new Bn(null===n.parent?n.name:k0(n.parent)+"/"+n.name)}function dN(n){null!==n.parent&&function b3(n,e,t){const r=function E3(n){return void 0===Og(n)&&!OL(n)}(t),i=(0,V.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,dN(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,dN(n))}(n.parent,n.name,n)}const I3=/[\[\].#$\/\u0000-\u001F\u007F]/,C3=/[\[\].#$\u0000-\u001F\u007F]/,hN=10485760,ND=function(n){return"string"==typeof n&&0!==n.length&&!I3.test(n)},FL=function(n){return"string"==typeof n&&0!==n.length&&!C3.test(n)},F0=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!iD(n)||n&&"object"==typeof n&&(0,V.r3)(n,".sv")},Xl=function(n,e,t,r){r&&void 0===e||L0((0,V.gK)(n,"value"),e,t)},L0=function(n,e,t){const r=t instanceof Bn?new Bq(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Rg(r));if("function"==typeof e)throw new Error(n+"contains a function "+Rg(r)+" with contents = "+e.toString());if(iD(e))throw new Error(n+"contains "+e.toString()+" "+Rg(r));if("string"==typeof e&&e.length>hN/3&&(0,V.ug)(e)>hN)throw new Error(n+"contains a string greater than "+hN+" utf8 bytes "+Rg(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Ui(e,(l,d)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!ND(l)))throw new Error(n+" contains an invalid key ("+l+") "+Rg(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function jq(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,V.ug)(e),$F(n)})(r,l),L0(n,d,r),function $q(n){const e=n.parts_.pop();n.byteLength_-=(0,V.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+Rg(r)+" in addition to actual children.")}},LL=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,V.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Ui(e,(l,d)=>{const p=new Bn(l);if(L0(i,d,Ar(t,p)),".priority"===SM(p)&&!F0(d))throw new Error(i+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(p)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=w0(r);for(let l=0;l<a.length;l++)if((".priority"!==a[l]||l!==a.length-1)&&!ND(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(Uq);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&La(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},fN=function(n,e,t){if(!t||void 0!==e){if(iD(e))throw new Error((0,V.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!F0(e))throw new Error((0,V.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},V0=function(n,e,t,r){if(!(r&&void 0===t||ND(t)))throw new Error((0,V.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},U0=function(n,e,t,r){if(!(r&&void 0===t||FL(t)))throw new Error((0,V.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ua=function(n,e){if(".info"===un(e))throw new Error(n+" failed = Can't modify data under /.info/")},VL=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!ND(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),FL(n)}(t))throw new Error((0,V.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class A3{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function PD(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!AM(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function UL(n,e,t){PD(n,t),BL(n,r=>AM(r,e))}function Wo(n,e,t){PD(n,t),BL(n,r=>La(r,e)||La(e,r))}function BL(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(R3(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function R3(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Sg&&Vi("event: "+t.toString()),A_(r)}}}const jL="repo_interrupt";class M3{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new A3,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=mD(),this.transactionQueueTree_=new lN,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function $L(n){const t=n.infoData_.getNode(new Bn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function B0(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:$L(n)})}function HL(n,e,t,r,i){n.dataUpdateCount++;const a=new Bn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const p=(0,V.UI)(t,_=>Vr(_));l=function d3(n,e,t,r){const i=nN(n,r);if(i){const a=rN(i),l=a.path,d=a.queryId,p=Qs(l,e),_=lr.fromObject(t);return iN(n,l,new k_(HM(d),p,_))}return[]}(n.serverSyncTree_,a,p,i)}else{const p=Vr(t);l=AL(n.serverSyncTree_,a,p,i)}else if(r){const p=(0,V.UI)(t,_=>Vr(_));l=function u3(n,e,t){const r=lr.fromObject(t);return L_(n,new k_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,p)}else{const p=Vr(t);l=N0(n.serverSyncTree_,a,p)}let d=a;l.length>0&&(d=U_(n,a)),Wo(n.eventQueue_,d,l)}function GL(n,e){pN(n,"connected",e),!1===e&&function F3(n){V_(n,"onDisconnectEvents");const e=B0(n),t=mD();BM(n.onDisconnect_,Nn(),(i,a)=>{const l=PL(i,a,n.serverSyncTree_,e);O_(t,i,l)});let r=[];BM(t,Nn(),(i,a)=>{r=r.concat(N0(n.serverSyncTree_,i,a));const l=_N(n,i);U_(n,l)}),n.onDisconnect_=mD(),Wo(n.eventQueue_,Nn(),r)}(n)}function pN(n,e,t){const r=new Bn("/.info/"+e),i=Vr(t);n.infoData_.updateSnapshot(r,i);const a=N0(n.infoSyncTree_,r,i);Wo(n.eventQueue_,r,a)}function OD(n){return n.nextWriteId_++}function gN(n,e,t,r,i){V_(n,"set",{path:e.toString(),value:t,priority:r});const a=B0(n),l=Vr(t,r),d=AD(n.serverSyncTree_,e),p=aN(l,d,a),_=OD(n),I=eN(n.serverSyncTree_,e,p,_,!0);PD(n.eventQueue_,I),n.server_.put(e.toString(),l.val(!0),(x,F)=>{const j="ok"===x;j||_s("set at "+e+" failed: "+x);const ee=If(n.serverSyncTree_,_,!j);Wo(n.eventQueue_,e,ee),Cf(0,i,x,F)});const D=_N(n,e);U_(n,D),Wo(n.eventQueue_,D,[])}function L3(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&UM(n.onDisconnect_,e),Cf(0,t,r,i)})}function qL(n,e,t,r){const i=Vr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,l)=>{"ok"===a&&O_(n.onDisconnect_,e,i),Cf(0,r,a,l)})}function mN(n,e,t){let r;r=".info"===un(e._path)?SD(n.infoSyncTree_,e,t):SD(n.serverSyncTree_,e,t),UL(n.eventQueue_,e._path,r)}function WL(n){n.persistentConnection_&&n.persistentConnection_.interrupt(jL)}function V_(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Vi(t,...e)}function Cf(n,e,t,r){e&&A_(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const l=new Error(a);l.code=i,e(l)}})}function yN(n,e,t){return AD(n.serverSyncTree_,e,t)||Xt.EMPTY_NODE}function kD(n,e=n.transactionQueueTree_){if(e||FD(n,e),Og(e)){const t=KL(n,e);(0,V.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function H3(n,e,t){const r=t.map(_=>_.currentWriteId),i=yN(n,e,r);let a=i;const l=i.hash();for(let _=0;_<t.length;_++){const I=t[_];(0,V.hu)(0===I.status,"tryToSendTransactionQueue_: items in queue should all be run."),I.status=1,I.retryCount++;const D=Qs(e,I.path);a=a.updateChild(D,I.currentOutputSnapshotRaw)}const d=a.val(!0),p=e;n.server_.put(p.toString(),d,_=>{V_(n,"transaction put response",{path:p.toString(),status:_});let I=[];if("ok"===_){const D=[];for(let x=0;x<t.length;x++)t[x].status=2,I=I.concat(If(n.serverSyncTree_,t[x].currentWriteId)),t[x].onComplete&&D.push(()=>t[x].onComplete(null,!0,t[x].currentOutputSnapshotResolved)),t[x].unwatcher();FD(n,xD(n.transactionQueueTree_,e)),kD(n,n.transactionQueueTree_),Wo(n.eventQueue_,e,I);for(let x=0;x<D.length;x++)A_(D[x])}else{if("datastale"===_)for(let D=0;D<t.length;D++)t[D].status=3===t[D].status?4:0;else{_s("transaction at "+p.toString()+" failed: "+_);for(let D=0;D<t.length;D++)t[D].status=4,t[D].abortReason=_}U_(n,e)}},l)}(n,k0(e),t)}else OL(e)&&MD(e,t=>{kD(n,t)})}function U_(n,e){const t=zL(n,e),r=k0(t);return function G3(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const p=e[d],_=Qs(t,p.path);let D,I=!1;if((0,V.hu)(null!==_,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)I=!0,D=p.abortReason,i=i.concat(If(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=25)I=!0,D="maxretry",i=i.concat(If(n.serverSyncTree_,p.currentWriteId,!0));else{const x=yN(n,p.path,l);p.currentInputSnapshot=x;const F=e[d].update(x.val());if(void 0!==F){L0("transaction failed: Data returned ",F,p.path);let j=Vr(F);"object"==typeof F&&null!=F&&(0,V.r3)(F,".priority")||(j=j.updatePriority(x.getPriority()));const ne=p.currentWriteId,je=B0(n),Ye=aN(j,x,je);p.currentOutputSnapshotRaw=j,p.currentOutputSnapshotResolved=Ye,p.currentWriteId=OD(n),l.splice(l.indexOf(ne),1),i=i.concat(eN(n.serverSyncTree_,p.path,Ye,p.currentWriteId,p.applyLocally)),i=i.concat(If(n.serverSyncTree_,ne,!0))}else I=!0,D="nodata",i=i.concat(If(n.serverSyncTree_,p.currentWriteId,!0))}Wo(n.eventQueue_,t,i),i=[],I&&(e[d].status=2,setTimeout(e[d].unwatcher,Math.floor(0)),e[d].onComplete&&r.push("nodata"===D?()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot):()=>e[d].onComplete(new Error(D),!1,null)))}FD(n,n.transactionQueueTree_);for(let d=0;d<r.length;d++)A_(r[d]);kD(n,n.transactionQueueTree_)}(n,KL(n,t),r),r}function zL(n,e){let t,r=n.transactionQueueTree_;for(t=un(e);null!==t&&void 0===Og(r);)r=xD(r,t),t=un(e=Jn(e));return r}function KL(n,e){const t=[];return ZL(n,e,t),t.sort((r,i)=>r.order-i.order),t}function ZL(n,e,t){const r=Og(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);MD(e,i=>{ZL(n,i,t)})}function FD(n,e){const t=Og(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,cN(e,t.length>0?t:void 0)}MD(e,r=>{FD(n,r)})}function _N(n,e){const t=k0(zL(n,e)),r=xD(n.transactionQueueTree_,e);return function w3(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{vN(n,i)}),vN(n,r),kL(r,i=>{vN(n,i)}),t}function vN(n,e){const t=Og(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,V.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,V.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(If(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?cN(e,void 0):t.length=a+1,Wo(n.eventQueue_,k0(e),i);for(let l=0;l<r.length;l++)A_(r[l])}}const EN=function(n,e){const t=z3(n),r=t.namespace;return"firebase.com"===t.domain&&Zl(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Zl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&_s("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new wM(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Bn(t.pathString)}},z3=function(n){let e="",t="",r="",i="",a="",l=!0,d="https",p=443;if("string"==typeof n){let _=n.indexOf("//");_>=0&&(d=n.substring(0,_-1),n=n.substring(_+2));let I=n.indexOf("/");-1===I&&(I=n.length);let D=n.indexOf("?");-1===D&&(D=n.length),e=n.substring(0,Math.min(I,D)),I<D&&(i=function q3(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}e+="/"+i}return e}(n.substring(I,D)));const x=function W3(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):_s(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,D)));_=e.indexOf(":"),_>=0?(l="https"===d||"wss"===d,p=parseInt(e.substring(_+1),10)):_=e.length;const F=e.slice(0,_);if("localhost"===F.toLowerCase())t="localhost";else if(F.split(".").length<=2)t=F;else{const j=e.indexOf(".");r=e.substring(0,j).toLowerCase(),t=e.substring(j+1),a=r}"ns"in x&&(a=x.ns)}return{host:e,port:p,domain:t,subdomain:r,secure:l,scheme:d,pathString:i,namespace:a}};class YL{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,V.Wl)(this.snapshot.exportVal())}}class QL{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class wN{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,V.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class XL{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new V.BH;return L3(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Ua("OnDisconnect.remove",this._path);const e=new V.BH;return qL(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Ua("OnDisconnect.set",this._path),Xl("OnDisconnect.set",e,this._path,!1);const t=new V.BH;return qL(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Ua("OnDisconnect.setWithPriority",this._path),Xl("OnDisconnect.setWithPriority",e,this._path,!1),fN("OnDisconnect.setWithPriority",t,!1);const r=new V.BH;return function V3(n,e,t,r,i){const a=Vr(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,d)=>{"ok"===l&&O_(n.onDisconnect_,e,a),Cf(0,i,l,d)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Ua("OnDisconnect.update",this._path),LL("OnDisconnect.update",e,this._path,!1);const t=new V.BH;return function U3(n,e,t,r){if((0,V.xb)(t))return Vi("onDisconnect().update() called with empty data.  Don't do anything."),void Cf(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Ui(t,(l,d)=>{const p=Vr(d);O_(n.onDisconnect_,Ar(e,l),p)}),Cf(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class wo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return ln(this._path)?null:SM(this._path)}get ref(){return new Ba(this._repo,this._path)}get _queryIdentifier(){const e=rL(this._queryParams),t=_M(e);return"{}"===t?"default":t}get _queryObject(){return rL(this._queryParams)}isEqual(e){if(!((e=(0,V.m9)(e))instanceof wo))return!1;const t=this._repo===e._repo,r=AM(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Vq(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function LD(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Tf(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Ql){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Nd)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Yl)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===ur){if(null!=e&&!F0(e)||null!=t&&!F0(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,V.hu)(n.getIndex()instanceof PM||n.getIndex()===OM,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function VD(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ba extends wo{constructor(e,t){super(e,t,new fD,!1)}get parent(){const e=jF(this._path);return null===e?null:new Ba(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class kg{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Bn(e),r=Fg(this.ref,e);return new kg(this._node.getChild(t),r,ur)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new kg(i,Fg(this.ref,r),ur)))}hasChild(e){const t=new Bn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function JL(n,e){return(n=(0,V.m9)(n))._checkNotDeleted("ref"),void 0!==e?Fg(n._root,e):n._root}function eV(n,e){(n=(0,V.m9)(n))._checkNotDeleted("refFromURL");const t=EN(e,n._repo.repoInfo_.nodeAdmin);VL("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Zl("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),JL(n,t.path.toString())}function Fg(n,e){return null===un((n=(0,V.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),U0("child","path",t,!1)):U0("child","path",e,!1),new Ba(n._repo,Ar(n._path,e));var t}function bN(n,e){n=(0,V.m9)(n),Ua("set",n._path),Xl("set",e,n._path,!1);const t=new V.BH;return gN(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function X3(n,e){LL("update",e,n._path,!1);const t=new V.BH;return function k3(n,e,t,r){V_(n,"update",{path:e.toString(),value:t});let i=!0;const a=B0(n),l={};if(Ui(t,(d,p)=>{i=!1,l[d]=PL(Ar(e,d),Vr(p),n.serverSyncTree_,a)}),i)Vi("update() called with empty data.  Don't do anything."),Cf(0,r,"ok",void 0);else{const d=OD(n),p=function a3(n,e,t,r){!function CW(n,e,t,r){(0,V.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=qM(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=lr.fromObject(t);return L_(n,new k_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,d);PD(n.eventQueue_,p),n.server_.merge(e.toString(),t,(_,I)=>{const D="ok"===_;D||_s("update at "+e+" failed: "+_);const x=If(n.serverSyncTree_,d,!D),F=x.length>0?U_(n,e):e;Wo(n.eventQueue_,F,x),Cf(0,r,_,I)}),Ui(t,_=>{const I=_N(n,Ar(e,_));U_(n,I)}),Wo(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function J3(n){n=(0,V.m9)(n);const e=new wN(()=>{}),t=new j0(e);return function O3(n,e,t){const r=function h3(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(_,I)=>{const D=Qs(_,t);r=r||wf(I,D)});let i=n.syncPointTree_.get(t);i?r=r||wf(i,Nn()):(i=new bL,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,l=a?new vf(r,!0,!1):null;return function ZW(n){return vD(n.viewCache_)}(IL(i,e,ED(n.pendingWriteTree_,e._path),a?l.getNode():Xt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const a=Vr(i).withIndex(e._queryParams.getIndex());let l;if(tN(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())l=N0(n.serverSyncTree_,e._path,a);else{const d=P0(n.serverSyncTree_,e);l=AL(n.serverSyncTree_,e._path,a,d)}return Wo(n.eventQueue_,e._path,l),SD(n.serverSyncTree_,e,t,null,!0),a},i=>(V_(n,"get for query "+(0,V.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new kg(r,new Ba(n._repo,n._path),n._queryParams.getIndex()))}class j0{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new YL("value",this,new kg(e.snapshotNode,new Ba(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new QL(this,e,t):null}matches(e){return e instanceof j0&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class UD{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new QL(this,e,t):null}createEvent(e,t){(0,V.hu)(null!=e.childName,"Child events should have a childName.");const r=Fg(new Ba(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new YL(e.type,this,new kg(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof UD&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function $0(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const p=t,_=(I,D)=>{mN(n._repo,n,d),p(I,D)};_.userCallback=t.userCallback,_.context=t.context,t=_}const l=new wN(t,a||void 0),d="value"===e?new j0(l):new UD(e,l);return function B3(n,e,t){let r;r=".info"===un(e._path)?tN(n.infoSyncTree_,e,t):tN(n.serverSyncTree_,e,t),UL(n.eventQueue_,e._path,r)}(n._repo,n,d),()=>mN(n._repo,n,d)}function IN(n,e,t,r){return $0(n,"value",e,t,r)}function tV(n,e,t,r){return $0(n,"child_added",e,t,r)}function nV(n,e,t,r){return $0(n,"child_changed",e,t,r)}function rV(n,e,t,r){return $0(n,"child_moved",e,t,r)}function iV(n,e,t,r){return $0(n,"child_removed",e,t,r)}function sV(n,e,t){let r=null;const i=t?new wN(t):null;"value"===e?r=new j0(i):e&&(r=new UD(e,i)),mN(n._repo,n,r)}class Vu{}class oV extends Vu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Xl("endAt",this._value,e._path,!0);const t=VM(e._queryParams,this._value,this._key);if(VD(t),Tf(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new wo(e._repo,e._path,t,e._orderByCalled)}}class tz extends Vu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Xl("endBefore",this._value,e._path,!1);const t=function dW(n,e,t){let r,i;return n.index_===Ql?("string"==typeof e&&(e=eL(e)),i=VM(n,e,t)):(r=null==t?Nd:eL(t),i=VM(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(VD(t),Tf(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new wo(e._repo,e._path,t,e._orderByCalled)}}class aV extends Vu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Xl("startAt",this._value,e._path,!0);const t=LM(e._queryParams,this._value,this._key);if(VD(t),Tf(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new wo(e._repo,e._path,t,e._orderByCalled)}}class iz extends Vu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Xl("startAfter",this._value,e._path,!1);const t=function cW(n,e,t){let r;if(n.index_===Ql)"string"==typeof e&&(e=JF(e)),r=LM(n,e,t);else{let i;i=null==t?Yl:JF(t),r=LM(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(VD(t),Tf(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new wo(e._repo,e._path,t,e._orderByCalled)}}class oz extends Vu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new wo(e._repo,e._path,function uW(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class uz extends Vu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new wo(e._repo,e._path,function lW(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class cz extends Vu{constructor(e){super(),this._path=e}_apply(e){LD(e,"orderByChild");const t=new Bn(this._path);if(ln(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new PM(t),i=pD(e._queryParams,r);return Tf(i),new wo(e._repo,e._path,i,!0)}}class hz extends Vu{_apply(e){LD(e,"orderByKey");const t=pD(e._queryParams,Ql);return Tf(t),new wo(e._repo,e._path,t,!0)}}class pz extends Vu{_apply(e){LD(e,"orderByPriority");const t=pD(e._queryParams,ur);return Tf(t),new wo(e._repo,e._path,t,!0)}}class mz extends Vu{_apply(e){LD(e,"orderByValue");const t=pD(e._queryParams,OM);return Tf(t),new wo(e._repo,e._path,t,!0)}}class _z extends Vu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Xl("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new oV(this._value,this._key)._apply(new aV(this._value,this._key)._apply(e))}}function Uu(n,...e){let t=(0,V.m9)(n);for(const r of e)t=r._apply(t);return t}(function JW(n){(0,V.hu)(!CD,"__referenceConstructor has already been defined"),CD=n})(Ba),function i3(n){(0,V.hu)(!DD,"__referenceConstructor has already been defined"),DD=n}(Ba);const CN={};function lV(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||Zl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Vi("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,_,l=EN(a,i),d=l.repoInfo;"undefined"!=typeof process&&process.env&&(_=process.env.FIREBASE_DATABASE_EMULATOR_HOST),_?(p=!0,a=`http://${_}?ns=${d.namespace}`,l=EN(a,i),d=l.repoInfo):p=!l.repoInfo.secure;const I=i&&p?new E0(E0.OWNER):new fq(n.name,n.options,e);VL("Invalid Firebase Database URL",l),ln(l.path)||Zl("Database URL must point to the root of a Firebase Database (not including a child path).");const D=function Iz(n,e,t,r){let i=CN[e.name];i||(i={},CN[e.name]=i);let a=i[n.toURLString()];return a&&Zl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new M3(n,false,t,r),i[n.toURLString()]=a,a}(d,n,I,new hq(n.name,t));return new Tz(D,n)}class Tz{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function N3(n,e,t){if(n.stats_=CM(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new gD(n.repoInfo_,(r,i,a,l)=>{HL(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>GL(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,V.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new xg(n.repoInfo_,e,(r,i,a,l)=>{HL(n,r,i,a,l)},r=>{GL(n,r)},r=>{!function P3(n,e){Ui(e,(t,r)=>{pN(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function mq(n,e){const t=n.toString();return IM[t]||(IM[t]=e()),IM[t]}(n.repoInfo_,()=>new yW(n.stats_,n.server_)),n.infoData_=new hW,n.infoSyncTree_=new SL({startListening:(r,i,a,l)=>{let d=[];const p=n.infoData_.getNode(r._path);return p.isEmpty()||(d=N0(n.infoSyncTree_,r._path,p),setTimeout(()=>{l("ok")},0)),d},stopListening:()=>{}}),pN(n,"connected",!1),n.serverSyncTree_=new SL({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(d,p)=>{const _=l(d,p);Wo(n.eventQueue_,r._path,_)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ba(this._repo,Nn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function bz(n,e){const t=CN[e];(!t||t[n.key]!==n)&&Zl(`Database ${e}(${n.repoInfo_}) has already been deleted.`),WL(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Zl("Cannot call "+e+" on a deleted database.")}}function cV(){RF.IS_TRANSPORT_INITIALIZED&&_s("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Dz(){cV(),yf.forceDisallow()}function Sz(){cV(),R_.forceDisallow(),yf.forceAllow()}function xz(n,e){lF(n,e)}const Nz={".sv":"timestamp"};class kz{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}xg.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},xg.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function Mz(n){iF(Xi.SDK_VERSION),(0,Xi._registerComponent)(new Fs.wA("database",(e,{instanceIdentifier:t})=>lV(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Xi.registerVersion)(nF,rF,n),(0,Xi.registerVersion)(nF,rF,"esm2017")}();const Uz=new ho.Yd("@firebase/database-compat"),hV=function(n){Uz.warn("FIREBASE WARNING: "+n)};class $z{constructor(e){this._delegate=e}cancel(e){(0,V.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,V.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,V.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,V.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,V.Dv)("OnDisconnect.set",1,2,arguments.length),(0,V.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,V.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,V.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,V.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,hV("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,V.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class Hz{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,V.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Df{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,V.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,V.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,V.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,V.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,V.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),U0("DataSnapshot.child","path",e,!1),new Df(this._database,this._delegate.child(e))}hasChild(e){return(0,V.Dv)("DataSnapshot.hasChild",1,1,arguments.length),U0("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,V.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,V.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,V.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Df(this._database,t)))}hasChildren(){return(0,V.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,V.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,V.Dv)("DataSnapshot.ref",0,0,arguments.length),new zo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class rs{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,V.Dv)("Query.on",2,4,arguments.length),(0,V.Wj)("Query.on","callback",t,!1);const l=rs.getCancelAndContextArgs_("Query.on",r,i),d=(_,I)=>{t.call(l.context,new Df(this.database,_),I)};d.userCallback=t,d.context=l.context;const p=null===(a=l.cancel)||void 0===a?void 0:a.bind(l.context);switch(e){case"value":return IN(this._delegate,d,p),t;case"child_added":return tV(this._delegate,d,p),t;case"child_removed":return iV(this._delegate,d,p),t;case"child_changed":return nV(this._delegate,d,p),t;case"child_moved":return rV(this._delegate,d,p),t;default:throw new Error((0,V.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,V.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,V.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,V.Wj)("Query.off","callback",t,!0),(0,V.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,sV(this._delegate,e,i)}else sV(this._delegate,e)}get(){return J3(this._delegate).then(e=>new Df(this.database,e))}once(e,t,r,i){(0,V.Dv)("Query.once",1,4,arguments.length),(0,V.Wj)("Query.once","callback",t,!0);const a=rs.getCancelAndContextArgs_("Query.once",r,i),l=new V.BH,d=(_,I)=>{const D=new Df(this.database,_);t&&t.call(a.context,D,I),l.resolve(D)};d.userCallback=t,d.context=a.context;const p=_=>{a.cancel&&a.cancel.call(a.context,_),l.reject(_)};switch(e){case"value":IN(this._delegate,d,p,{onlyOnce:!0});break;case"child_added":tV(this._delegate,d,p,{onlyOnce:!0});break;case"child_removed":iV(this._delegate,d,p,{onlyOnce:!0});break;case"child_changed":nV(this._delegate,d,p,{onlyOnce:!0});break;case"child_moved":rV(this._delegate,d,p,{onlyOnce:!0});break;default:throw new Error((0,V.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,V.Dv)("Query.limitToFirst",1,1,arguments.length),new rs(this.database,Uu(this._delegate,function az(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new oz(n)}(e)))}limitToLast(e){return(0,V.Dv)("Query.limitToLast",1,1,arguments.length),new rs(this.database,Uu(this._delegate,function lz(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new uz(n)}(e)))}orderByChild(e){return(0,V.Dv)("Query.orderByChild",1,1,arguments.length),new rs(this.database,Uu(this._delegate,function dz(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return U0("orderByChild","path",n,!1),new cz(n)}(e)))}orderByKey(){return(0,V.Dv)("Query.orderByKey",0,0,arguments.length),new rs(this.database,Uu(this._delegate,function fz(){return new hz}()))}orderByPriority(){return(0,V.Dv)("Query.orderByPriority",0,0,arguments.length),new rs(this.database,Uu(this._delegate,function gz(){return new pz}()))}orderByValue(){return(0,V.Dv)("Query.orderByValue",0,0,arguments.length),new rs(this.database,Uu(this._delegate,function yz(){return new mz}()))}startAt(e=null,t){return(0,V.Dv)("Query.startAt",0,2,arguments.length),new rs(this.database,Uu(this._delegate,function rz(n=null,e){return V0("startAt","key",e,!0),new aV(n,e)}(e,t)))}startAfter(e=null,t){return(0,V.Dv)("Query.startAfter",0,2,arguments.length),new rs(this.database,Uu(this._delegate,function sz(n,e){return V0("startAfter","key",e,!0),new iz(n,e)}(e,t)))}endAt(e=null,t){return(0,V.Dv)("Query.endAt",0,2,arguments.length),new rs(this.database,Uu(this._delegate,function ez(n,e){return V0("endAt","key",e,!0),new oV(n,e)}(e,t)))}endBefore(e=null,t){return(0,V.Dv)("Query.endBefore",0,2,arguments.length),new rs(this.database,Uu(this._delegate,function nz(n,e){return V0("endBefore","key",e,!0),new tz(n,e)}(e,t)))}equalTo(e,t){return(0,V.Dv)("Query.equalTo",1,2,arguments.length),new rs(this.database,Uu(this._delegate,function vz(n,e){return V0("equalTo","key",e,!0),new _z(n,e)}(e,t)))}toString(){return(0,V.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,V.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,V.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof rs))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,V.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,V.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,V.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new zo(this.database,new Ba(this._delegate._repo,this._delegate._path))}}class zo extends rs{constructor(e,t){super(e,new wo(t._repo,t._path,new fD,!1)),this.database=e,this._delegate=t}getKey(){return(0,V.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,V.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new zo(this.database,Fg(this._delegate,e))}getParent(){(0,V.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new zo(this.database,e):null}getRoot(){return(0,V.Dv)("Reference.root",0,0,arguments.length),new zo(this.database,this._delegate.root)}set(e,t){(0,V.Dv)("Reference.set",1,2,arguments.length),(0,V.Wj)("Reference.set","onComplete",t,!0);const r=bN(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,V.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,hV("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ua("Reference.update",this._delegate._path),(0,V.Wj)("Reference.update","onComplete",t,!0);const r=X3(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,V.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,V.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function Q3(n,e,t){if(Ua("setWithPriority",n._path),Xl("setWithPriority",e,n._path,!1),fN("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new V.BH;return gN(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,V.Dv)("Reference.remove",0,1,arguments.length),(0,V.Wj)("Reference.remove","onComplete",e,!0);const t=function Z3(n){return Ua("remove",n._path),bN(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,V.Dv)("Reference.transaction",1,3,arguments.length),(0,V.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,V.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,V.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function Fz(n,e,t){var r;if(n=(0,V.m9)(n),Ua("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,a=new V.BH,d=IN(n,()=>{});return function $3(n,e,t,r,i,a){V_(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:oF(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=yN(n,e,void 0);l.currentInputSnapshot=d;const p=l.update(d.val());if(void 0===p)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{L0("transaction failed: Data returned ",p,l.path),l.status=0;const _=xD(n.transactionQueueTree_,e),I=Og(_)||[];let D;I.push(l),cN(_,I),"object"==typeof p&&null!==p&&(0,V.r3)(p,".priority")?(D=(0,V.DV)(p,".priority"),(0,V.hu)(F0(D),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):D=(AD(n.serverSyncTree_,e)||Xt.EMPTY_NODE).getPriority().val();const x=B0(n),F=Vr(p,D),j=aN(F,d,x);l.currentOutputSnapshotRaw=F,l.currentOutputSnapshotResolved=j,l.currentWriteId=OD(n);const ee=eN(n.serverSyncTree_,e,j,l.currentWriteId,l.applyLocally);Wo(n.eventQueue_,e,ee),kD(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(p,_,I)=>{let D=null;p?a.reject(p):(D=new kg(I,new Ba(n._repo,n._path),ur),a.resolve(new kz(_,D)))},d,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new Hz(a.committed,new Df(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,V.Dv)("Reference.setPriority",1,2,arguments.length),(0,V.Wj)("Reference.setPriority","onComplete",t,!0);const r=function Y3(n,e){n=(0,V.m9)(n),Ua("setPriority",n._path),fN("setPriority",e,!1);const t=new V.BH;return gN(n._repo,Ar(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,V.Dv)("Reference.push",0,2,arguments.length),(0,V.Wj)("Reference.push","onComplete",t,!0);const r=function K3(n,e){n=(0,V.m9)(n),Ua("push",n._path),Xl("push",e,n._path,!0);const t=$L(n._repo),r=iW(t),i=Fg(n,r),a=Fg(n,r);let l;return l=null!=e?bN(a,e).then(()=>a):Promise.resolve(a),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new zo(this.database,l));t&&i.then(()=>t(null),l=>t(l));const a=new zo(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return Ua("Reference.onDisconnect",this._delegate._path),new $z(new XL(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class H0{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Dz,forceLongPolling:Sz}}useEmulator(e,t,r={}){!function dV(n,e,t,r={}){(n=(0,V.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Zl("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Zl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new E0(E0.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,V.Sg)(r.mockUserToken,n.app.options.projectId);a=new E0(l)}!function wz(n,e,t,r){n.repoInfo_=new wM(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,V.Dv)("database.ref",0,1,arguments.length),e instanceof zo){const t=eV(this._delegate,e.toString());return new zo(this,t)}{const t=JL(this._delegate,e);return new zo(this,t)}}refFromURL(e){(0,V.Dv)("database.refFromURL",1,1,arguments.length);const r=eV(this._delegate,e);return new zo(this,r)}goOffline(){return(0,V.Dv)("database.goOffline",0,0,arguments.length),function Az(n){(n=(0,V.m9)(n))._checkNotDeleted("goOffline"),WL(n._repo)}(this._delegate)}goOnline(){return(0,V.Dv)("database.goOnline",0,0,arguments.length),function Rz(n){(n=(0,V.m9)(n))._checkNotDeleted("goOnline"),function j3(n){n.persistentConnection_&&n.persistentConnection_.resume(jL)}(n._repo)}(this._delegate)}}H0.ServerValue={TIMESTAMP:function Pz(){return Nz}(),increment:n=>function Oz(n){return{".sv":{increment:n}}}(n)};var qz=Object.freeze({__proto__:null,initStandalone:function Gz({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){iF(t);const l=new Fs.zt("auth-internal",new Fs.H0("database-standalone"));return l.setComponent(new Fs.wA("auth-internal",()=>r,"PRIVATE")),{instance:new H0(lV(n,l,void 0,e,a),n),namespace:i}}});const Wz=H0.ServerValue;function fV(n){return null==n}function pV(n){return"function"==typeof n.set}function gV(n,e){return pV(e)?e:n.ref(e)}function mV(n,e){if(function Kz(n){return"string"==typeof n}(n))return e.stringCase();if(pV(n))return e.firebaseCase();if(function Zz(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function G0(n,e,t="on",r=Dm.z){return new Wn.y(i=>{let a=null;return a=n[t](e,(l,d)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:d})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,It.U)(i=>{const{snapshot:a,prevKey:l}=i;let d=null;return a.exists()&&(d=a.key),{type:e,payload:a,prevKey:l,key:d}}),(0,rO.B)())}function yV(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function Xz(n,e){const{payload:t,prevKey:r,key:i}=e,a=yV(n,i),l=function Qz(n,e){if(fV(e))return 0;{const t=yV(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let d=null;e.payload.forEach(p=>{const _={payload:p,type:"value",prevKey:d,key:p.key};return d=p.key,n=[...n,_],!1})}return n;case"child_added":if(a>-1){const d=n[a-1];(d&&d.key||null)!==r&&(n=n.filter(p=>p.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(d=>d.payload.key!==t.key);case"child_changed":return n.map(d=>d.payload.key===i?e:d);case"child_moved":if(a>-1){const d=n.splice(a,1)[0];return(n=n.slice()).splice(l,0,d),n}return n;default:return n}}function _V(n){return(fV(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function vV(n,e,t){return function Yz(n,e,t){return G0(n,"value","once",t).pipe(Zt(r=>{const i=[dt(r)];return e.forEach(a=>i.push(G0(n,a,"on",t))),(0,OR.T)(...i).pipe(hi(Xz,[]))}),fv())}(n,e=_V(e),t)}function EV(n,e,t){const r=(e=_V(e)).map(i=>G0(n,i,"on",t));return(0,OR.T)(...r)}function wV(n,e){return function(r,i){return mV(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function n6(n){return function(t){return t?mV(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function bV(n,e){return function(){return G0(n,"value","on",e)}}!function zz(n){n.INTERNAL.registerComponent(new Fs.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new H0(i,r)},"PUBLIC").setServiceProps({Reference:zo,Query:rs,Database:H0,DataSnapshot:Df,enableLogging:xz,INTERNAL:qz,ServerValue:Wz}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.10")}(Ls.Z);const s6=new f.OlP("angularfire2.realtimeDatabaseURL"),o6=new f.OlP("angularfire2.database.use-emulator");let a6=(()=>{class n{constructor(t,r,i,a,l,d,p,_,I,D,x,F,j,ee,ne){this.schedulers=d;const je=p,Ye=(0,ni.on)(t,l,r);_&&ax(Ye,l,I,x,F,j,D,ee),this.database=(0,ni.cc)(`${Ye.name}.database.${i}`,"AngularFireDatabase",Ye.name,()=>{const We=l.runOutsideAngular(()=>Ye.database(i||void 0));return je&&We.useEmulator(...je),We},[je])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>gV(this.database,t));let a=i;return r&&(a=r(i)),function r6(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:wV(r,"update"),set:wV(r,"set"),push:i=>r.push(i),remove:n6(r),snapshotChanges:i=>vV(n,i,t).pipe(Tn.iC),stateChanges:i=>EV(n,i,t).pipe(Tn.iC),auditTrail:i=>function Jz(n,e,t){return function t6(n,e,t){return function e6(n,e){return G0(n,"value","on",e).pipe((0,It.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(Lk(e),(0,It.U)(([i,a])=>{const l=i.lastKeyToLoad,d=a.map(p=>p.key);return{actions:a,lastKeyToLoad:l,loadedKeys:d}}),function tq(n){return(0,Hn.e)((e,t)=>{let r=!1,i=0;e.subscribe(new Zn.Q(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,It.U)(i=>i.actions))}(n,EV(n,e).pipe(hi((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(Tn.iC),valueChanges:(i,a)=>vV(n,i,t).pipe((0,It.U)(d=>d.map(p=>a&&a.idField?Object.assign(Object.assign({},p.payload.val()),{[a.idField]:p.key}):p.payload.val())),Tn.iC)}}(a,this)}object(t){return function i6(n,e){return{query:n,snapshotChanges:()=>bV(n,e.schedulers.outsideAngular)().pipe(Tn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>bV(n,e.schedulers.outsideAngular)().pipe(Tn.iC,(0,It.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>gV(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ni.Dh),f.LFG(ni.xv,8),f.LFG(s6,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Tn.HU),f.LFG(o6,8),f.LFG(a0,8),f.LFG(tx,8),f.LFG(nx,8),f.LFG(rx,8),f.LFG(ix,8),f.LFG(sx,8),f.LFG(ox,8),f.LFG(o0,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),u6=(()=>{class n{constructor(){xT.Z.registerVersion("angularfire",Tn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[a6]}),n})();const IV_firebase={apiKey:"AIzaSyCfdiLoDIsAo1ewtncbFHOGQeeat7zHC2Y",authDomain:"bucketlist-357db.firebaseapp.com",projectId:"bucketlist-357db",storageBucket:"bucketlist-357db.appspot.com",messagingSenderId:"751601651493",appId:"1:751601651493:web:0670c4b49f746203f314cc",measurementId:"G-Y7F8EB76T7"};let dU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const $N=new f.OlP("NgModelWithFormControlWarning");let AU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[dU]]}),n})(),ZN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[AU]}),n})(),YN=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:$N,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[AU]}),n})(),aK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[xi,ZN,YN]]}),n})(),uK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[G2]}),n.\u0275inj=f.cJS({providers:[Eg],imports:[[zd,xi,H2,y$,sH.forRoot({},{}),ni.hO.initializeApp(IV_firebase),T2,P2,eq,u6,ZN,YN,aK],ZN,YN]}),n})();(0,f.G48)(),dc().bootstrapModule(uK).catch(n=>console.error(n))},5867:(it,Ee,L)=>{L.d(Ee,{C6:()=>f.getApps,Mq:()=>f.getApp});var f=L(9681);(0,f.registerVersion)("firebase","9.14.0","app")},127:(it,Ee,L)=>{L.d(Ee,{Z:()=>f.Z});var f=L(3942);f.Z.registerVersion("firebase","9.14.0","app-compat")},5881:(it,Ee,L)=>{L.r(Ee);var f=L(5861),G=L(3942),k=L(732),ie=L(2090),fe=(L(9681),L(1877),L(4859));function se(){return window}function Q(){return(Q=(0,f.Z)(function*(H,O,$){var ae;const{BuildInfo:Ne}=se();(0,k.ap)(O.sessionId,"AuthEvent did not contain a session ID");const st=yield ve(O.sessionId),at={};return(0,k.aq)()?at.ibi=Ne.packageName:(0,k.ar)()?at.apn=Ne.packageName:(0,k.as)(H,"operation-not-supported-in-this-environment"),Ne.displayName&&(at.appDisplayName=Ne.displayName),at.sessionId=st,(0,k.at)(H,$,O.type,void 0,null!==(ae=O.eventId)&&void 0!==ae?ae:void 0,at)})).apply(this,arguments)}function ze(){return(ze=(0,f.Z)(function*(H){const{BuildInfo:O}=se(),$={};(0,k.aq)()?$.iosBundleId=O.packageName:(0,k.ar)()?$.androidPackageName=O.packageName:(0,k.as)(H,"operation-not-supported-in-this-environment"),yield(0,k.au)(H,$)})).apply(this,arguments)}function He(){return(He=(0,f.Z)(function*(H,O,$){const{cordova:ae}=se();let Ne=()=>{};try{yield new Promise((st,at)=>{let kt=null;function ht(){var Vt;st();const Hr=null===(Vt=ae.plugins.browsertab)||void 0===Vt?void 0:Vt.close;"function"==typeof Hr&&Hr(),"function"==typeof(null==$?void 0:$.close)&&$.close()}function pn(){kt||(kt=window.setTimeout(()=>{at((0,k.aw)(H,"redirect-cancelled-by-user"))},2e3))}function gr(){"visible"===(null==document?void 0:document.visibilityState)&&pn()}O.addPassiveListener(ht),document.addEventListener("resume",pn,!1),(0,k.ar)()&&document.addEventListener("visibilitychange",gr,!1),Ne=()=>{O.removePassiveListener(ht),document.removeEventListener("resume",pn,!1),document.removeEventListener("visibilitychange",gr,!1),kt&&window.clearTimeout(kt)}})}finally{Ne()}})).apply(this,arguments)}function ve(H){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,f.Z)(function*(H){const O=qe(H),$=yield crypto.subtle.digest("SHA-256",O);return Array.from(new Uint8Array($)).map(Ne=>Ne.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function qe(H){if((0,k.ap)(/[0-9a-zA-Z]+/.test(H),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(H);const O=new ArrayBuffer(H.length),$=new Uint8Array(O);for(let ae=0;ae<H.length;ae++)$[ae]=H.charCodeAt(ae);return $}class ot extends k.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(O=>{this.resolveInialized=O})}addPassiveListener(O){this.passiveListeners.add(O)}removePassiveListener(O){this.passiveListeners.delete(O)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(O){return this.resolveInialized(),this.passiveListeners.forEach($=>$(O)),super.onEvent(O)}initialized(){var O=this;return(0,f.Z)(function*(){yield O.initPromise})()}}function Qe(H){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,f.Z)(function*(H){const O=yield ge()._get(_e(H));return O&&(yield ge()._remove(_e(H))),O})).apply(this,arguments)}function re(){const H=[],O="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let $=0;$<20;$++){const ae=Math.floor(Math.random()*O.length);H.push(O.charAt(ae))}return H.join("")}function ge(){return(0,k.az)(k.b)}function _e(H){return(0,k.aA)("authEvent",H.config.apiKey,H.name)}function At(H){if(!(null==H?void 0:H.includes("?")))return{};const[O,...$]=H.split("?");return(0,ie.zd)($.join("?"))}function Nt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,k.aw)("no-auth-event")}}function dr(){var H;return(null===(H=null==self?void 0:self.location)||void 0===H?void 0:H.protocol)||null}function jn(H=(0,ie.z$)()){return!("file:"!==dr()&&"ionic:"!==dr()&&"capacitor:"!==dr()||!H.toLowerCase().match(/iphone|ipad|ipod|android/))}function jr(){try{const H=self.localStorage,O=k.aI();if(H)return H.setItem(O,"1"),H.removeItem(O),!function Es(H=(0,ie.z$)()){return function Pn(){return(0,ie.w1)()&&11===(null==document?void 0:document.documentMode)}()||function En(H=(0,ie.z$)()){return/Edge\/\d+/.test(H)}(H)}()||(0,ie.hl)()}catch(H){return ui()&&(0,ie.hl)()}return!1}function ui(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Fe(){return(function zr(){return"http:"===dr()||"https:"===dr()}()||(0,ie.ru)()||jn())&&!function Br(){return(0,ie.b$)()||(0,ie.UG)()}()&&jr()&&!ui()}function hr(){return jn()&&"undefined"!=typeof document}function Rr(){return(Rr=(0,f.Z)(function*(){return!!hr()&&new Promise(H=>{const O=setTimeout(()=>{H(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(O),H(!0)})})})).apply(this,arguments)}const yn={LOCAL:"local",NONE:"none",SESSION:"session"},li=k.ax,Kr="persistence";function Sn(H){return $r.apply(this,arguments)}function $r(){return($r=(0,f.Z)(function*(H){yield H._initializationPromise;const O=Qt(),$=k.aA(Kr,H.config.apiKey,H.name);O&&O.setItem($,H._getPersistence())})).apply(this,arguments)}function Qt(){var H;try{return(null===(H=function rn(){return"undefined"!=typeof window?window:null}())||void 0===H?void 0:H.sessionStorage)||null}catch(O){return null}}const yt=k.ax;class gt{constructor(){this.browserResolver=k.az(k.k),this.cordovaResolver=k.az(class br{constructor(){this._redirectPersistence=k.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=k.aB,this._overrideRedirectResult=k.aC}_initialize(O){var $=this;return(0,f.Z)(function*(){const ae=O._key();let Ne=$.eventManagers.get(ae);return Ne||(Ne=new ot(O),$.eventManagers.set(ae,Ne),$.attachCallbackListeners(O,Ne)),Ne})()}_openPopup(O){(0,k.as)(O,"operation-not-supported-in-this-environment")}_openRedirect(O,$,ae,Ne){var st=this;return(0,f.Z)(function*(){!function ye(H){var O,$,ae,Ne,st,at,kt,ht,pn,gr;const Vt=se();(0,k.ax)("function"==typeof(null===(O=null==Vt?void 0:Vt.universalLinks)||void 0===O?void 0:O.subscribe),H,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,k.ax)(void 0!==(null===($=null==Vt?void 0:Vt.BuildInfo)||void 0===$?void 0:$.packageName),H,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,k.ax)("function"==typeof(null===(st=null===(Ne=null===(ae=null==Vt?void 0:Vt.cordova)||void 0===ae?void 0:ae.plugins)||void 0===Ne?void 0:Ne.browsertab)||void 0===st?void 0:st.openUrl),H,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.ax)("function"==typeof(null===(ht=null===(kt=null===(at=null==Vt?void 0:Vt.cordova)||void 0===at?void 0:at.plugins)||void 0===kt?void 0:kt.browsertab)||void 0===ht?void 0:ht.isAvailable),H,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.ax)("function"==typeof(null===(gr=null===(pn=null==Vt?void 0:Vt.cordova)||void 0===pn?void 0:pn.InAppBrowser)||void 0===gr?void 0:gr.open),H,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(O);const at=yield st._initialize(O);yield at.initialized(),at.resetRedirect(),(0,k.aD)(),yield st._originValidation(O);const kt=function Re(H,O,$=null){return{type:O,eventId:$,urlResponse:null,sessionId:re(),postBody:null,tenantId:H.tenantId,error:(0,k.aw)(H,"no-auth-event")}}(O,ae,Ne);yield function lt(H,O){return ge()._set(_e(H),O)}(O,kt);const ht=yield function W(H,O,$){return Q.apply(this,arguments)}(O,kt,$),pn=yield function De(H){const{cordova:O}=se();return new Promise($=>{O.plugins.browsertab.isAvailable(ae=>{let Ne=null;ae?O.plugins.browsertab.openUrl(H):Ne=O.InAppBrowser.open(H,(0,k.av)()?"_blank":"_system","location=yes"),$(Ne)})})}(ht);return function Ve(H,O,$){return He.apply(this,arguments)}(O,at,pn)})()}_isIframeWebStorageSupported(O,$){throw new Error("Method not implemented.")}_originValidation(O){const $=O._key();return this.originValidationPromises[$]||(this.originValidationPromises[$]=function oe(H){return ze.apply(this,arguments)}(O)),this.originValidationPromises[$]}attachCallbackListeners(O,$){const{universalLinks:ae,handleOpenURL:Ne,BuildInfo:st}=se(),at=setTimeout((0,f.Z)(function*(){yield Qe(O),$.onEvent(Nt())}),500),kt=function(){var gr=(0,f.Z)(function*(Vt){clearTimeout(at);const Hr=yield Qe(O);let ss=null;Hr&&(null==Vt?void 0:Vt.url)&&(ss=function Y(H,O){var $,ae;const Ne=function ce(H){const O=At(H),$=O.link?decodeURIComponent(O.link):void 0,ae=At($).link,Ne=O.deep_link_id?decodeURIComponent(O.deep_link_id):void 0;return At(Ne).link||Ne||ae||$||H}(O);if(Ne.includes("/__/auth/callback")){const st=At(Ne),at=st.firebaseError?function Oe(H){try{return JSON.parse(H)}catch(O){return null}}(decodeURIComponent(st.firebaseError)):null,kt=null===(ae=null===($=null==at?void 0:at.code)||void 0===$?void 0:$.split("auth/"))||void 0===ae?void 0:ae[1],ht=kt?(0,k.aw)(kt):null;return ht?{type:H.type,eventId:H.eventId,tenantId:H.tenantId,error:ht,urlResponse:null,sessionId:null,postBody:null}:{type:H.type,eventId:H.eventId,tenantId:H.tenantId,sessionId:H.sessionId,urlResponse:Ne,postBody:null}}return null}(Hr,Vt.url)),$.onEvent(ss||Nt())});return function(Hr){return gr.apply(this,arguments)}}();void 0!==ae&&"function"==typeof ae.subscribe&&ae.subscribe(null,kt);const ht=Ne,pn=`${st.packageName.toLowerCase()}://`;se().handleOpenURL=function(){var gr=(0,f.Z)(function*(Vt){if(Vt.toLowerCase().startsWith(pn)&&kt({url:Vt}),"function"==typeof ht)try{ht(Vt)}catch(Hr){console.error(Hr)}});return function(Vt){return gr.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=k.a,this._completeRedirectFn=k.aB,this._overrideRedirectResult=k.aC}_initialize(O){var $=this;return(0,f.Z)(function*(){return yield $.selectUnderlyingResolver(),$.assertedUnderlyingResolver._initialize(O)})()}_openPopup(O,$,ae,Ne){var st=this;return(0,f.Z)(function*(){return yield st.selectUnderlyingResolver(),st.assertedUnderlyingResolver._openPopup(O,$,ae,Ne)})()}_openRedirect(O,$,ae,Ne){var st=this;return(0,f.Z)(function*(){return yield st.selectUnderlyingResolver(),st.assertedUnderlyingResolver._openRedirect(O,$,ae,Ne)})()}_isIframeWebStorageSupported(O,$){this.assertedUnderlyingResolver._isIframeWebStorageSupported(O,$)}_originValidation(O){return this.assertedUnderlyingResolver._originValidation(O)}get _shouldInitProactively(){return hr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return yt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var O=this;return(0,f.Z)(function*(){if(O.underlyingResolver)return;const $=yield function mt(){return Rr.apply(this,arguments)}();O.underlyingResolver=$?O.cordovaResolver:O.browserResolver})()}}function is(H){return H.unwrap()}function Ct(H){return fr(H)}function fr(H){const{_tokenResponse:O}=H instanceof ie.ZR?H.customData:H;if(!O)return null;if(!(H instanceof ie.ZR)&&"temporaryProof"in O&&"phoneNumber"in O)return k.P.credentialFromResult(H);const $=O.providerId;if(!$||$===k.o.PASSWORD)return null;let ae;switch($){case k.o.GOOGLE:ae=k.Q;break;case k.o.FACEBOOK:ae=k.N;break;case k.o.GITHUB:ae=k.T;break;case k.o.TWITTER:ae=k.W;break;default:const{oauthIdToken:Ne,oauthAccessToken:st,oauthTokenSecret:at,pendingToken:kt,nonce:ht}=O;return st||at||Ne||kt?kt?$.startsWith("saml.")?k.aL._create($,kt):k.J._fromParams({providerId:$,signInMethod:$,pendingToken:kt,idToken:Ne,accessToken:st}):new k.U($).credential({idToken:Ne,accessToken:st,rawNonce:ht}):null}return H instanceof ie.ZR?ae.credentialFromError(H):ae.credentialFromResult(H)}function bn(H,O){return O.catch($=>{throw $ instanceof ie.ZR&&function wn(H,O){var $,ae;const Ne=null===($=O.customData)||void 0===$?void 0:$._tokenResponse;if("auth/multi-factor-auth-required"===(null===(ae=O)||void 0===ae?void 0:ae.code))O.resolver=new Kt(H,k.an(H,O));else if(Ne){const st=fr(O),at=O;st&&(at.credential=st,at.tenantId=Ne.tenantId||void 0,at.email=Ne.email||void 0,at.phoneNumber=Ne.phoneNumber||void 0)}}(H,$),$}).then($=>{const Ne=$.user;return{operationType:$.operationType,credential:Ct($),additionalUserInfo:k.al($),user:tr.getOrCreate(Ne)}})}function _t(H,O){return pr.apply(this,arguments)}function pr(){return(pr=(0,f.Z)(function*(H,O){const $=yield O;return{verificationId:$.verificationId,confirm:ae=>bn(H,$.confirm(ae))}})).apply(this,arguments)}class Kt{constructor(O,$){this.resolver=$,this.auth=function Zr(H){return H.wrapped()}(O)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(O){return bn(is(this.auth),this.resolver.resolveSignIn(O))}}class tr{constructor(O){this._delegate=O,this.multiFactor=k.ao(O)}static getOrCreate(O){return tr.USER_MAP.has(O)||tr.USER_MAP.set(O,new tr(O)),tr.USER_MAP.get(O)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(O){return this._delegate.getIdTokenResult(O)}getIdToken(O){return this._delegate.getIdToken(O)}linkAndRetrieveDataWithCredential(O){return this.linkWithCredential(O)}linkWithCredential(O){var $=this;return(0,f.Z)(function*(){return bn($.auth,k.Z($._delegate,O))})()}linkWithPhoneNumber(O,$){var ae=this;return(0,f.Z)(function*(){return _t(ae.auth,k.l(ae._delegate,O,$))})()}linkWithPopup(O){var $=this;return(0,f.Z)(function*(){return bn($.auth,k.d($._delegate,O,gt))})()}linkWithRedirect(O){var $=this;return(0,f.Z)(function*(){return yield Sn(k.aE($.auth)),k.g($._delegate,O,gt)})()}reauthenticateAndRetrieveDataWithCredential(O){return this.reauthenticateWithCredential(O)}reauthenticateWithCredential(O){var $=this;return(0,f.Z)(function*(){return bn($.auth,k._($._delegate,O))})()}reauthenticateWithPhoneNumber(O,$){return _t(this.auth,k.r(this._delegate,O,$))}reauthenticateWithPopup(O){return bn(this.auth,k.e(this._delegate,O,gt))}reauthenticateWithRedirect(O){var $=this;return(0,f.Z)(function*(){return yield Sn(k.aE($.auth)),k.h($._delegate,O,gt)})()}sendEmailVerification(O){return k.ab(this._delegate,O)}unlink(O){var $=this;return(0,f.Z)(function*(){return yield k.ak($._delegate,O),$})()}updateEmail(O){return k.ag(this._delegate,O)}updatePassword(O){return k.ah(this._delegate,O)}updatePhoneNumber(O){return k.u(this._delegate,O)}updateProfile(O){return k.af(this._delegate,O)}verifyBeforeUpdateEmail(O,$){return k.ac(this._delegate,O,$)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}tr.USER_MAP=new WeakMap;const Je=k.ax;let Te=(()=>{class H{constructor($,ae){if(this.app=$,ae.isInitialized())return this._delegate=ae.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ne}=$.options;Je(Ne,"invalid-api-key",{appName:$.name}),Je(Ne,"invalid-api-key",{appName:$.name});const st="undefined"!=typeof window?gt:void 0;this._delegate=ae.initialize({options:{persistence:Pt(Ne,$.name),popupRedirectResolver:st}}),this._delegate._updateErrorMap(k.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?tr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode($){this._delegate.languageCode=$}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId($){this._delegate.tenantId=$}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator($,ae){k.G(this._delegate,$,ae)}applyActionCode($){return k.a2(this._delegate,$)}checkActionCode($){return k.a3(this._delegate,$)}confirmPasswordReset($,ae){return k.a1(this._delegate,$,ae)}createUserWithEmailAndPassword($,ae){var Ne=this;return(0,f.Z)(function*(){return bn(Ne._delegate,k.a5(Ne._delegate,$,ae))})()}fetchProvidersForEmail($){return this.fetchSignInMethodsForEmail($)}fetchSignInMethodsForEmail($){return k.aa(this._delegate,$)}isSignInWithEmailLink($){return k.a8(this._delegate,$)}getRedirectResult(){var $=this;return(0,f.Z)(function*(){Je(Fe(),$._delegate,"operation-not-supported-in-this-environment");const ae=yield k.j($._delegate,gt);return ae?bn($._delegate,Promise.resolve(ae)):{credential:null,user:null}})()}addFrameworkForLogging($){!function er(H,O){(0,k.aE)(H)._logFramework(O)}(this._delegate,$)}onAuthStateChanged($,ae,Ne){const{next:st,error:at,complete:kt}=et($,ae,Ne);return this._delegate.onAuthStateChanged(st,at,kt)}onIdTokenChanged($,ae,Ne){const{next:st,error:at,complete:kt}=et($,ae,Ne);return this._delegate.onIdTokenChanged(st,at,kt)}sendSignInLinkToEmail($,ae){return k.a7(this._delegate,$,ae)}sendPasswordResetEmail($,ae){return k.a0(this._delegate,$,ae||void 0)}setPersistence($){var ae=this;return(0,f.Z)(function*(){let Ne;switch(function Ir(H,O){li(Object.values(yn).includes(O),H,"invalid-persistence-type"),(0,ie.b$)()?li(O!==yn.SESSION,H,"unsupported-persistence-type"):(0,ie.UG)()?li(O===yn.NONE,H,"unsupported-persistence-type"):ui()?li(O===yn.NONE||O===yn.LOCAL&&(0,ie.hl)(),H,"unsupported-persistence-type"):li(O===yn.NONE||jr(),H,"unsupported-persistence-type")}(ae._delegate,$),$){case yn.SESSION:Ne=k.a;break;case yn.LOCAL:Ne=(yield k.az(k.i)._isAvailable())?k.i:k.b;break;case yn.NONE:Ne=k.L;break;default:return k.as("argument-error",{appName:ae._delegate.name})}return ae._delegate.setPersistence(Ne)})()}signInAndRetrieveDataWithCredential($){return this.signInWithCredential($)}signInAnonymously(){return bn(this._delegate,k.X(this._delegate))}signInWithCredential($){return bn(this._delegate,k.Y(this._delegate,$))}signInWithCustomToken($){return bn(this._delegate,k.$(this._delegate,$))}signInWithEmailAndPassword($,ae){return bn(this._delegate,k.a6(this._delegate,$,ae))}signInWithEmailLink($,ae){return bn(this._delegate,k.a9(this._delegate,$,ae))}signInWithPhoneNumber($,ae){return _t(this._delegate,k.s(this._delegate,$,ae))}signInWithPopup($){var ae=this;return(0,f.Z)(function*(){return Je(Fe(),ae._delegate,"operation-not-supported-in-this-environment"),bn(ae._delegate,k.c(ae._delegate,$,gt))})()}signInWithRedirect($){var ae=this;return(0,f.Z)(function*(){return Je(Fe(),ae._delegate,"operation-not-supported-in-this-environment"),yield Sn(ae._delegate),k.f(ae._delegate,$,gt)})()}updateCurrentUser($){return this._delegate.updateCurrentUser($)}verifyPasswordResetCode($){return k.a4(this._delegate,$)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return H.Persistence=yn,H})();function et(H,O,$){let ae=H;"function"!=typeof H&&({next:ae,error:O,complete:$}=H);const Ne=ae;return{next:at=>Ne(at&&tr.getOrCreate(at)),error:O,complete:$}}function Pt(H,O){const $=function bo(H,O){const $=Qt();if(!$)return[];const ae=k.aA(Kr,H,O);switch($.getItem(ae)){case yn.NONE:return[k.L];case yn.LOCAL:return[k.i,k.a];case yn.SESSION:return[k.a];default:return[]}}(H,O);if("undefined"!=typeof self&&!$.includes(k.i)&&$.push(k.i),"undefined"!=typeof window)for(const ae of[k.b,k.a])$.includes(ae)||$.push(ae);return $.includes(k.L)||$.push(k.L),$}class Ot{constructor(){this.providerId="phone",this._delegate=new k.P(is(G.Z.auth()))}static credential(O,$){return k.P.credential(O,$)}verifyPhoneNumber(O,$){return this._delegate.verifyPhoneNumber(O,$)}unwrap(){return this._delegate}}Ot.PHONE_SIGN_IN_METHOD=k.P.PHONE_SIGN_IN_METHOD,Ot.PROVIDER_ID=k.P.PROVIDER_ID;const tn=k.ax;class z{constructor(O,$,ae=G.Z.app()){var Ne;tn(null===(Ne=ae.options)||void 0===Ne?void 0:Ne.apiKey,"invalid-api-key",{appName:ae.name}),this._delegate=new k.R(O,$,ae.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function J(H){H.INTERNAL.registerComponent(new fe.wA("auth-compat",O=>{const $=O.getProvider("app-compat").getImmediate(),ae=O.getProvider("auth");return new Te($,ae)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:k.A.EMAIL_SIGNIN,PASSWORD_RESET:k.A.PASSWORD_RESET,RECOVER_EMAIL:k.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:k.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:k.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:k.A.VERIFY_EMAIL}},EmailAuthProvider:k.M,FacebookAuthProvider:k.N,GithubAuthProvider:k.T,GoogleAuthProvider:k.Q,OAuthProvider:k.U,SAMLAuthProvider:k.V,PhoneAuthProvider:Ot,PhoneMultiFactorGenerator:k.m,RecaptchaVerifier:z,TwitterAuthProvider:k.W,Auth:Te,AuthCredential:k.H,Error:ie.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),H.registerVersion("@firebase/auth-compat","0.2.24")}(G.Z)},8306:(it,Ee,L)=>{L.d(Ee,{y:()=>W});var f=L(930),G=L(727),k=L(8822),ie=L(4671);var fe=L(2416),se=L(576),he=L(2806);let W=(()=>{class De{constructor(He){He&&(this._subscribe=He)}lift(He){const ye=new De;return ye.source=this,ye.operator=He,ye}subscribe(He,ye,ve){const Pe=function ze(De){return De&&De instanceof f.Lv||function oe(De){return De&&(0,se.m)(De.next)&&(0,se.m)(De.error)&&(0,se.m)(De.complete)}(De)&&(0,G.Nn)(De)}(He)?He:new f.Hp(He,ye,ve);return(0,he.x)(()=>{const{operator:qe,source:Be}=this;Pe.add(qe?qe.call(Pe,Be):Be?this._subscribe(Pe):this._trySubscribe(Pe))}),Pe}_trySubscribe(He){try{return this._subscribe(He)}catch(ye){He.error(ye)}}forEach(He,ye){return new(ye=Q(ye))((ve,Pe)=>{let qe;qe=this.subscribe(Be=>{try{He(Be)}catch(ot){Pe(ot),null==qe||qe.unsubscribe()}},Pe,ve)})}_subscribe(He){var ye;return null===(ye=this.source)||void 0===ye?void 0:ye.subscribe(He)}[k.L](){return this}pipe(...He){return function we(De){return 0===De.length?ie.y:1===De.length?De[0]:function(He){return De.reduce((ye,ve)=>ve(ye),He)}}(He)(this)}toPromise(He){return new(He=Q(He))((ye,ve)=>{let Pe;this.subscribe(qe=>Pe=qe,qe=>ve(qe),()=>ye(Pe))})}}return De.create=Ve=>new De(Ve),De})();function Q(De){var Ve;return null!==(Ve=null!=De?De:fe.v.Promise)&&void 0!==Ve?Ve:Promise}},7579:(it,Ee,L)=>{L.d(Ee,{x:()=>fe});var f=L(8306),G=L(727);const ie=(0,L(3888).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var de=L(8737),we=L(2806);let fe=(()=>{class he extends f.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Q){const oe=new se(this,this);return oe.operator=Q,oe}_throwIfClosed(){if(this.closed)throw new ie}next(Q){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const oe=this.observers.slice();for(const ze of oe)ze.next(Q)}})}error(Q){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Q;const{observers:oe}=this;for(;oe.length;)oe.shift().error(Q)}})}complete(){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Q}=this;for(;Q.length;)Q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var Q;return(null===(Q=this.observers)||void 0===Q?void 0:Q.length)>0}_trySubscribe(Q){return this._throwIfClosed(),super._trySubscribe(Q)}_subscribe(Q){return this._throwIfClosed(),this._checkFinalizedStatuses(Q),this._innerSubscribe(Q)}_innerSubscribe(Q){const{hasError:oe,isStopped:ze,observers:De}=this;return oe||ze?G.Lc:(De.push(Q),new G.w0(()=>(0,de.P)(De,Q)))}_checkFinalizedStatuses(Q){const{hasError:oe,thrownError:ze,isStopped:De}=this;oe?Q.error(ze):De&&Q.complete()}asObservable(){const Q=new f.y;return Q.source=this,Q}}return he.create=(W,Q)=>new se(W,Q),he})();class se extends fe{constructor(W,Q){super(),this.destination=W,this.source=Q}next(W){var Q,oe;null===(oe=null===(Q=this.destination)||void 0===Q?void 0:Q.next)||void 0===oe||oe.call(Q,W)}error(W){var Q,oe;null===(oe=null===(Q=this.destination)||void 0===Q?void 0:Q.error)||void 0===oe||oe.call(Q,W)}complete(){var W,Q;null===(Q=null===(W=this.destination)||void 0===W?void 0:W.complete)||void 0===Q||Q.call(W)}_subscribe(W){var Q,oe;return null!==(oe=null===(Q=this.source)||void 0===Q?void 0:Q.subscribe(W))&&void 0!==oe?oe:G.Lc}}},930:(it,Ee,L)=>{L.d(Ee,{Hp:()=>ze,Lv:()=>oe});var f=L(576),G=L(727),k=L(2416),ie=L(7849),de=L(5032);const we=he("C",void 0,void 0);function he(ve,Pe,qe){return{kind:ve,value:Pe,error:qe}}var W=L(3410),Q=L(2806);class oe extends G.w0{constructor(Pe){super(),this.isStopped=!1,Pe?(this.destination=Pe,(0,G.Nn)(Pe)&&Pe.add(this)):this.destination=ye}static create(Pe,qe,Be){return new ze(Pe,qe,Be)}next(Pe){this.isStopped?He(function se(ve){return he("N",ve,void 0)}(Pe),this):this._next(Pe)}error(Pe){this.isStopped?He(function fe(ve){return he("E",void 0,ve)}(Pe),this):(this.isStopped=!0,this._error(Pe))}complete(){this.isStopped?He(we,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Pe){this.destination.next(Pe)}_error(Pe){try{this.destination.error(Pe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class ze extends oe{constructor(Pe,qe,Be){let ot;if(super(),(0,f.m)(Pe))ot=Pe;else if(Pe){let Re;({next:ot,error:qe,complete:Be}=Pe),this&&k.v.useDeprecatedNextContext?(Re=Object.create(Pe),Re.unsubscribe=()=>this.unsubscribe()):Re=Pe,ot=null==ot?void 0:ot.bind(Re),qe=null==qe?void 0:qe.bind(Re),Be=null==Be?void 0:Be.bind(Re)}this.destination={next:ot?De(ot):de.Z,error:De(null!=qe?qe:Ve),complete:Be?De(Be):de.Z}}}function De(ve,Pe){return(...qe)=>{try{ve(...qe)}catch(Be){k.v.useDeprecatedSynchronousErrorHandling?(0,Q.O)(Be):(0,ie.h)(Be)}}}function Ve(ve){throw ve}function He(ve,Pe){const{onStoppedNotification:qe}=k.v;qe&&W.z.setTimeout(()=>qe(ve,Pe))}const ye={closed:!0,next:de.Z,error:Ve,complete:de.Z}},727:(it,Ee,L)=>{L.d(Ee,{Lc:()=>we,w0:()=>de,Nn:()=>fe});var f=L(576);const k=(0,L(3888).d)(he=>function(Q){he(this),this.message=Q?`${Q.length} errors occurred during unsubscription:\n${Q.map((oe,ze)=>`${ze+1}) ${oe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Q});var ie=L(8737);class de{constructor(W){this.initialTeardown=W,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let W;if(!this.closed){this.closed=!0;const{_parentage:Q}=this;if(Q)if(this._parentage=null,Array.isArray(Q))for(const De of Q)De.remove(this);else Q.remove(this);const{initialTeardown:oe}=this;if((0,f.m)(oe))try{oe()}catch(De){W=De instanceof k?De.errors:[De]}const{_teardowns:ze}=this;if(ze){this._teardowns=null;for(const De of ze)try{se(De)}catch(Ve){W=null!=W?W:[],Ve instanceof k?W=[...W,...Ve.errors]:W.push(Ve)}}if(W)throw new k(W)}}add(W){var Q;if(W&&W!==this)if(this.closed)se(W);else{if(W instanceof de){if(W.closed||W._hasParent(this))return;W._addParent(this)}(this._teardowns=null!==(Q=this._teardowns)&&void 0!==Q?Q:[]).push(W)}}_hasParent(W){const{_parentage:Q}=this;return Q===W||Array.isArray(Q)&&Q.includes(W)}_addParent(W){const{_parentage:Q}=this;this._parentage=Array.isArray(Q)?(Q.push(W),Q):Q?[Q,W]:W}_removeParent(W){const{_parentage:Q}=this;Q===W?this._parentage=null:Array.isArray(Q)&&(0,ie.P)(Q,W)}remove(W){const{_teardowns:Q}=this;Q&&(0,ie.P)(Q,W),W instanceof de&&W._removeParent(this)}}de.EMPTY=(()=>{const he=new de;return he.closed=!0,he})();const we=de.EMPTY;function fe(he){return he instanceof de||he&&"closed"in he&&(0,f.m)(he.remove)&&(0,f.m)(he.add)&&(0,f.m)(he.unsubscribe)}function se(he){(0,f.m)(he)?he():he.unsubscribe()}},2416:(it,Ee,L)=>{L.d(Ee,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(it,Ee,L)=>{L.d(Ee,{E:()=>G});const G=new(L(8306).y)(de=>de.complete())},8996:(it,Ee,L)=>{L.d(Ee,{D:()=>ot});var f=L(8421),G=L(5363),k=L(9468),we=L(8306),se=L(2202),he=L(576),W=L(9672);function oe(Re,lt){if(!Re)throw new Error("Iterable cannot be null");return new we.y(Qe=>{(0,W.f)(Qe,lt,()=>{const Ie=Re[Symbol.asyncIterator]();(0,W.f)(Qe,lt,()=>{Ie.next().then(Y=>{Y.done?Qe.complete():Qe.next(Y.value)})},0,!0)})})}var ze=L(3670),De=L(8239),Ve=L(1144),He=L(6495),ye=L(2206),ve=L(4532),Pe=L(3260);function ot(Re,lt){return lt?function Be(Re,lt){if(null!=Re){if((0,ze.c)(Re))return function ie(Re,lt){return(0,f.Xf)(Re).pipe((0,k.R)(lt),(0,G.Q)(lt))}(Re,lt);if((0,Ve.z)(Re))return function fe(Re,lt){return new we.y(Qe=>{let Ie=0;return lt.schedule(function(){Ie===Re.length?Qe.complete():(Qe.next(Re[Ie++]),Qe.closed||this.schedule())})})}(Re,lt);if((0,De.t)(Re))return function de(Re,lt){return(0,f.Xf)(Re).pipe((0,k.R)(lt),(0,G.Q)(lt))}(Re,lt);if((0,ye.D)(Re))return oe(Re,lt);if((0,He.T)(Re))return function Q(Re,lt){return new we.y(Qe=>{let Ie;return(0,W.f)(Qe,lt,()=>{Ie=Re[se.h](),(0,W.f)(Qe,lt,()=>{let Y,re;try{({value:Y,done:re}=Ie.next())}catch(ge){return void Qe.error(ge)}re?Qe.complete():Qe.next(Y)},0,!0)}),()=>(0,he.m)(null==Ie?void 0:Ie.return)&&Ie.return()})}(Re,lt);if((0,Pe.L)(Re))return function qe(Re,lt){return oe((0,Pe.Q)(Re),lt)}(Re,lt)}throw(0,ve.z)(Re)}(Re,lt):(0,f.Xf)(Re)}},8421:(it,Ee,L)=>{L.d(Ee,{Xf:()=>ze});var f=L(5987),G=L(1144),k=L(8239),ie=L(8306),de=L(3670),we=L(2206),fe=L(4532),se=L(6495),he=L(3260),W=L(576),Q=L(7849),oe=L(8822);function ze(Be){if(Be instanceof ie.y)return Be;if(null!=Be){if((0,de.c)(Be))return function De(Be){return new ie.y(ot=>{const Re=Be[oe.L]();if((0,W.m)(Re.subscribe))return Re.subscribe(ot);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Be);if((0,G.z)(Be))return function Ve(Be){return new ie.y(ot=>{for(let Re=0;Re<Be.length&&!ot.closed;Re++)ot.next(Be[Re]);ot.complete()})}(Be);if((0,k.t)(Be))return function He(Be){return new ie.y(ot=>{Be.then(Re=>{ot.closed||(ot.next(Re),ot.complete())},Re=>ot.error(Re)).then(null,Q.h)})}(Be);if((0,we.D)(Be))return ve(Be);if((0,se.T)(Be))return function ye(Be){return new ie.y(ot=>{for(const Re of Be)if(ot.next(Re),ot.closed)return;ot.complete()})}(Be);if((0,he.L)(Be))return function Pe(Be){return ve((0,he.Q)(Be))}(Be)}throw(0,fe.z)(Be)}function ve(Be){return new ie.y(ot=>{(function qe(Be,ot){var Re,lt,Qe,Ie;return(0,f.mG)(this,void 0,void 0,function*(){try{for(Re=(0,f.KL)(Be);!(lt=yield Re.next()).done;)if(ot.next(lt.value),ot.closed)return}catch(Y){Qe={error:Y}}finally{try{lt&&!lt.done&&(Ie=Re.return)&&(yield Ie.call(Re))}finally{if(Qe)throw Qe.error}}ot.complete()})})(Be,ot).catch(Re=>ot.error(Re))})}},6451:(it,Ee,L)=>{L.d(Ee,{T:()=>we});var f=L(8189),G=L(8421),k=L(515),ie=L(7669),de=L(8996);function we(...fe){const se=(0,ie.yG)(fe),he=(0,ie._6)(fe,1/0),W=fe;return W.length?1===W.length?(0,G.Xf)(W[0]):(0,f.J)(he)((0,de.D)(W,se)):k.E}},5403:(it,Ee,L)=>{L.d(Ee,{Q:()=>G});var f=L(930);class G extends f.Lv{constructor(ie,de,we,fe,se){super(ie),this.onFinalize=se,this._next=de?function(he){try{de(he)}catch(W){ie.error(W)}}:super._next,this._error=fe?function(he){try{fe(he)}catch(W){ie.error(W)}finally{this.unsubscribe()}}:super._error,this._complete=we?function(){try{we()}catch(he){ie.error(he)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ie;const{closed:de}=this;super.unsubscribe(),!de&&(null===(ie=this.onFinalize)||void 0===ie||ie.call(this))}}},4004:(it,Ee,L)=>{L.d(Ee,{U:()=>k});var f=L(4482),G=L(5403);function k(ie,de){return(0,f.e)((we,fe)=>{let se=0;we.subscribe(new G.Q(fe,he=>{fe.next(ie.call(de,he,se++))}))})}},8189:(it,Ee,L)=>{L.d(Ee,{J:()=>k});var f=L(5577),G=L(4671);function k(ie=1/0){return(0,f.z)(G.y,ie)}},5577:(it,Ee,L)=>{L.d(Ee,{z:()=>se});var f=L(4004),G=L(8421),k=L(4482),ie=L(9672),de=L(5403),fe=L(576);function se(he,W,Q=1/0){return(0,fe.m)(W)?se((oe,ze)=>(0,f.U)((De,Ve)=>W(oe,De,ze,Ve))((0,G.Xf)(he(oe,ze))),Q):("number"==typeof W&&(Q=W),(0,k.e)((oe,ze)=>function we(he,W,Q,oe,ze,De,Ve,He){const ye=[];let ve=0,Pe=0,qe=!1;const Be=()=>{qe&&!ye.length&&!ve&&W.complete()},ot=lt=>ve<oe?Re(lt):ye.push(lt),Re=lt=>{De&&W.next(lt),ve++;let Qe=!1;(0,G.Xf)(Q(lt,Pe++)).subscribe(new de.Q(W,Ie=>{null==ze||ze(Ie),De?ot(Ie):W.next(Ie)},()=>{Qe=!0},void 0,()=>{if(Qe)try{for(ve--;ye.length&&ve<oe;){const Ie=ye.shift();Ve?(0,ie.f)(W,Ve,()=>Re(Ie)):Re(Ie)}Be()}catch(Ie){W.error(Ie)}}))};return he.subscribe(new de.Q(W,ot,()=>{qe=!0,Be()})),()=>{null==He||He()}}(oe,ze,he,Q)))}},5363:(it,Ee,L)=>{L.d(Ee,{Q:()=>ie});var f=L(9672),G=L(4482),k=L(5403);function ie(de,we=0){return(0,G.e)((fe,se)=>{fe.subscribe(new k.Q(se,he=>(0,f.f)(se,de,()=>se.next(he),we),()=>(0,f.f)(se,de,()=>se.complete(),we),he=>(0,f.f)(se,de,()=>se.error(he),we)))})}},3099:(it,Ee,L)=>{L.d(Ee,{B:()=>we});var f=L(8996),G=L(5698),k=L(7579),ie=L(930),de=L(4482);function we(se={}){const{connector:he=(()=>new k.x),resetOnError:W=!0,resetOnComplete:Q=!0,resetOnRefCountZero:oe=!0}=se;return ze=>{let De=null,Ve=null,He=null,ye=0,ve=!1,Pe=!1;const qe=()=>{null==Ve||Ve.unsubscribe(),Ve=null},Be=()=>{qe(),De=He=null,ve=Pe=!1},ot=()=>{const Re=De;Be(),null==Re||Re.unsubscribe()};return(0,de.e)((Re,lt)=>{ye++,!Pe&&!ve&&qe();const Qe=He=null!=He?He:he();lt.add(()=>{ye--,0===ye&&!Pe&&!ve&&(Ve=fe(ot,oe))}),Qe.subscribe(lt),De||(De=new ie.Hp({next:Ie=>Qe.next(Ie),error:Ie=>{Pe=!0,qe(),Ve=fe(Be,W,Ie),Qe.error(Ie)},complete:()=>{ve=!0,qe(),Ve=fe(Be,Q),Qe.complete()}}),(0,f.D)(Re).subscribe(De))})(ze)}}function fe(se,he,...W){return!0===he?(se(),null):!1===he?null:he(...W).pipe((0,G.q)(1)).subscribe(()=>se())}},9468:(it,Ee,L)=>{L.d(Ee,{R:()=>G});var f=L(4482);function G(k,ie=0){return(0,f.e)((de,we)=>{we.add(k.schedule(()=>de.subscribe(we),ie))})}},5698:(it,Ee,L)=>{L.d(Ee,{q:()=>ie});var f=L(515),G=L(4482),k=L(5403);function ie(de){return de<=0?()=>f.E:(0,G.e)((we,fe)=>{let se=0;we.subscribe(new k.Q(fe,he=>{++se<=de&&(fe.next(he),de<=se&&fe.complete())}))})}},8505:(it,Ee,L)=>{L.d(Ee,{b:()=>de});var f=L(576),G=L(4482),k=L(5403),ie=L(4671);function de(we,fe,se){const he=(0,f.m)(we)||fe||se?{next:we,error:fe,complete:se}:we;return he?(0,G.e)((W,Q)=>{var oe;null===(oe=he.subscribe)||void 0===oe||oe.call(he);let ze=!0;W.subscribe(new k.Q(Q,De=>{var Ve;null===(Ve=he.next)||void 0===Ve||Ve.call(he,De),Q.next(De)},()=>{var De;ze=!1,null===(De=he.complete)||void 0===De||De.call(he),Q.complete()},De=>{var Ve;ze=!1,null===(Ve=he.error)||void 0===Ve||Ve.call(he,De),Q.error(De)},()=>{var De,Ve;ze&&(null===(De=he.unsubscribe)||void 0===De||De.call(he)),null===(Ve=he.finalize)||void 0===Ve||Ve.call(he)}))}):ie.y}},4408:(it,Ee,L)=>{L.d(Ee,{o:()=>de});var f=L(727);class G extends f.w0{constructor(fe,se){super()}schedule(fe,se=0){return this}}const k={setInterval(...we){const{delegate:fe}=k;return((null==fe?void 0:fe.setInterval)||setInterval)(...we)},clearInterval(we){const{delegate:fe}=k;return((null==fe?void 0:fe.clearInterval)||clearInterval)(we)},delegate:void 0};var ie=L(8737);class de extends G{constructor(fe,se){super(fe,se),this.scheduler=fe,this.work=se,this.pending=!1}schedule(fe,se=0){if(this.closed)return this;this.state=fe;const he=this.id,W=this.scheduler;return null!=he&&(this.id=this.recycleAsyncId(W,he,se)),this.pending=!0,this.delay=se,this.id=this.id||this.requestAsyncId(W,this.id,se),this}requestAsyncId(fe,se,he=0){return k.setInterval(fe.flush.bind(fe,this),he)}recycleAsyncId(fe,se,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return se;k.clearInterval(se)}execute(fe,se){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(fe,se);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(fe,se){let W,he=!1;try{this.work(fe)}catch(Q){he=!0,W=Q||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),W}unsubscribe(){if(!this.closed){const{id:fe,scheduler:se}=this,{actions:he}=se;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ie.P)(he,this),null!=fe&&(this.id=this.recycleAsyncId(se,fe,null)),this.delay=null,super.unsubscribe()}}}},7565:(it,Ee,L)=>{L.d(Ee,{v:()=>k});var f=L(6063);class G{constructor(de,we=G.now){this.schedulerActionCtor=de,this.now=we}schedule(de,we=0,fe){return new this.schedulerActionCtor(this,de).schedule(fe,we)}}G.now=f.l.now;class k extends G{constructor(de,we=G.now){super(de,we),this.actions=[],this._active=!1,this._scheduled=void 0}flush(de){const{actions:we}=this;if(this._active)return void we.push(de);let fe;this._active=!0;do{if(fe=de.execute(de.state,de.delay))break}while(de=we.shift());if(this._active=!1,fe){for(;de=we.shift();)de.unsubscribe();throw fe}}}},4986:(it,Ee,L)=>{L.d(Ee,{z:()=>k});var f=L(4408);const k=new(L(7565).v)(f.o)},6063:(it,Ee,L)=>{L.d(Ee,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},233:(it,Ee,L)=>{L.d(Ee,{N:()=>de});var f=L(4408),k=L(7565);const de=new class ie extends k.v{}(class G extends f.o{constructor(se,he){super(se,he),this.scheduler=se,this.work=he}schedule(se,he=0){return he>0?super.schedule(se,he):(this.delay=he,this.state=se,this.scheduler.flush(this),this)}execute(se,he){return he>0||this.closed?super.execute(se,he):this._execute(se,he)}requestAsyncId(se,he,W=0){return null!=W&&W>0||null==W&&this.delay>0?super.requestAsyncId(se,he,W):se.flush(this)}})},3410:(it,Ee,L)=>{L.d(Ee,{z:()=>f});const f={setTimeout(...G){const{delegate:k}=f;return((null==k?void 0:k.setTimeout)||setTimeout)(...G)},clearTimeout(G){const{delegate:k}=f;return((null==k?void 0:k.clearTimeout)||clearTimeout)(G)},delegate:void 0}},2202:(it,Ee,L)=>{L.d(Ee,{h:()=>G});const G=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(it,Ee,L)=>{L.d(Ee,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(it,Ee,L)=>{L.d(Ee,{_6:()=>we,jO:()=>ie,yG:()=>de});var f=L(576);function k(fe){return fe[fe.length-1]}function ie(fe){return(0,f.m)(k(fe))?fe.pop():void 0}function de(fe){return function G(fe){return fe&&(0,f.m)(fe.schedule)}(k(fe))?fe.pop():void 0}function we(fe,se){return"number"==typeof k(fe)?fe.pop():se}},8737:(it,Ee,L)=>{function f(G,k){if(G){const ie=G.indexOf(k);0<=ie&&G.splice(ie,1)}}L.d(Ee,{P:()=>f})},3888:(it,Ee,L)=>{function f(G){const ie=G(de=>{Error.call(de),de.stack=(new Error).stack});return ie.prototype=Object.create(Error.prototype),ie.prototype.constructor=ie,ie}L.d(Ee,{d:()=>f})},2806:(it,Ee,L)=>{L.d(Ee,{O:()=>ie,x:()=>k});var f=L(2416);let G=null;function k(de){if(f.v.useDeprecatedSynchronousErrorHandling){const we=!G;if(we&&(G={errorThrown:!1,error:null}),de(),we){const{errorThrown:fe,error:se}=G;if(G=null,fe)throw se}}else de()}function ie(de){f.v.useDeprecatedSynchronousErrorHandling&&G&&(G.errorThrown=!0,G.error=de)}},9672:(it,Ee,L)=>{function f(G,k,ie,de=0,we=!1){const fe=k.schedule(function(){ie(),we?G.add(this.schedule(null,de)):this.unsubscribe()},de);if(G.add(fe),!we)return fe}L.d(Ee,{f:()=>f})},4671:(it,Ee,L)=>{function f(G){return G}L.d(Ee,{y:()=>f})},1144:(it,Ee,L)=>{L.d(Ee,{z:()=>f});const f=G=>G&&"number"==typeof G.length&&"function"!=typeof G},2206:(it,Ee,L)=>{L.d(Ee,{D:()=>G});var f=L(576);function G(k){return Symbol.asyncIterator&&(0,f.m)(null==k?void 0:k[Symbol.asyncIterator])}},576:(it,Ee,L)=>{function f(G){return"function"==typeof G}L.d(Ee,{m:()=>f})},3670:(it,Ee,L)=>{L.d(Ee,{c:()=>k});var f=L(8822),G=L(576);function k(ie){return(0,G.m)(ie[f.L])}},6495:(it,Ee,L)=>{L.d(Ee,{T:()=>k});var f=L(2202),G=L(576);function k(ie){return(0,G.m)(null==ie?void 0:ie[f.h])}},8239:(it,Ee,L)=>{L.d(Ee,{t:()=>G});var f=L(576);function G(k){return(0,f.m)(null==k?void 0:k.then)}},3260:(it,Ee,L)=>{L.d(Ee,{L:()=>ie,Q:()=>k});var f=L(5987),G=L(576);function k(de){return(0,f.FC)(this,arguments,function*(){const fe=de.getReader();try{for(;;){const{value:se,done:he}=yield(0,f.qq)(fe.read());if(he)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(se)}}finally{fe.releaseLock()}})}function ie(de){return(0,G.m)(null==de?void 0:de.getReader)}},4482:(it,Ee,L)=>{L.d(Ee,{A:()=>G,e:()=>k});var f=L(576);function G(ie){return(0,f.m)(null==ie?void 0:ie.lift)}function k(ie){return de=>{if(G(de))return de.lift(function(we){try{return ie(we,this)}catch(fe){this.error(fe)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(it,Ee,L)=>{function f(){}L.d(Ee,{Z:()=>f})},7849:(it,Ee,L)=>{L.d(Ee,{h:()=>k});var f=L(2416),G=L(3410);function k(ie){G.z.setTimeout(()=>{const{onUnhandledError:de}=f.v;if(!de)throw ie;de(ie)})}},4532:(it,Ee,L)=>{function f(G){return new TypeError(`You provided ${null!==G&&"object"==typeof G?"an invalid object":`'${G}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(Ee,{z:()=>f})},5987:(it,Ee,L)=>{function se(Y,re,ge,_e){return new(ge||(ge=Promise))(function(ce,At){function qt(Nt){try{ct(_e.next(Nt))}catch(er){At(er)}}function br(Nt){try{ct(_e.throw(Nt))}catch(er){At(er)}}function ct(Nt){Nt.done?ce(Nt.value):function Oe(ce){return ce instanceof ge?ce:new ge(function(At){At(ce)})}(Nt.value).then(qt,br)}ct((_e=_e.apply(Y,re||[])).next())})}function ye(Y){return this instanceof ye?(this.v=Y,this):new ye(Y)}function ve(Y,re,ge){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Oe,_e=ge.apply(Y,re||[]),ce=[];return Oe={},At("next"),At("throw"),At("return"),Oe[Symbol.asyncIterator]=function(){return this},Oe;function At(en){_e[en]&&(Oe[en]=function(cr){return new Promise(function(mn,dr){ce.push([en,cr,mn,dr])>1||qt(en,cr)})})}function qt(en,cr){try{!function br(en){en.value instanceof ye?Promise.resolve(en.value.v).then(ct,Nt):er(ce[0][2],en)}(_e[en](cr))}catch(mn){er(ce[0][3],mn)}}function ct(en){qt("next",en)}function Nt(en){qt("throw",en)}function er(en,cr){en(cr),ce.shift(),ce.length&&qt(ce[0][0],ce[0][1])}}function qe(Y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ge,re=Y[Symbol.asyncIterator];return re?re.call(Y):(Y=function oe(Y){var re="function"==typeof Symbol&&Symbol.iterator,ge=re&&Y[re],_e=0;if(ge)return ge.call(Y);if(Y&&"number"==typeof Y.length)return{next:function(){return Y&&_e>=Y.length&&(Y=void 0),{value:Y&&Y[_e++],done:!Y}}};throw new TypeError(re?"Object is not iterable.":"Symbol.iterator is not defined.")}(Y),ge={},_e("next"),_e("throw"),_e("return"),ge[Symbol.asyncIterator]=function(){return this},ge);function _e(ce){ge[ce]=Y[ce]&&function(At){return new Promise(function(qt,br){!function Oe(ce,At,qt,br){Promise.resolve(br).then(function(ct){ce({value:ct,done:qt})},At)}(qt,br,(At=Y[ce](At)).done,At.value)})}}}L.d(Ee,{FC:()=>ve,KL:()=>qe,mG:()=>se,qq:()=>ye})},5e3:(it,Ee,L)=>{L.d(Ee,{$8M:()=>Zt,$Z:()=>cy,AFp:()=>r_,AaK:()=>se,CHM:()=>Wu,CRH:()=>zE,CZH:()=>sf,CqO:()=>Cl,EJc:()=>Id,EpF:()=>mI,F4k:()=>Jv,FYo:()=>dC,FiY:()=>kn,G48:()=>Tw,GfV:()=>Ul,Gpc:()=>Q,JOm:()=>wa,LFG:()=>B,LSH:()=>gh,Lbi:()=>o_,MAs:()=>Il,NdJ:()=>hy,OlP:()=>vn,Oqu:()=>xl,PXZ:()=>oR,Q6J:()=>le,QGY:()=>Fi,Qsj:()=>hC,R0b:()=>$s,RDi:()=>Hu,Rgc:()=>Xp,SBq:()=>fd,Sil:()=>lw,Suo:()=>WE,TTD:()=>To,TgZ:()=>Qv,VLi:()=>iR,X6Q:()=>YC,XFs:()=>mt,Xpm:()=>Ot,Y36:()=>mo,YKP:()=>zp,YNc:()=>Ue,Yjl:()=>Ne,Yz7:()=>mn,ZZ4:()=>Gs,_Bn:()=>RE,_UZ:()=>Su,_Vd:()=>Nu,_c5:()=>AP,_uU:()=>Ru,aQg:()=>Dd,c2e:()=>Pu,cJS:()=>zr,cg1:()=>ud,dDg:()=>mw,deG:()=>rl,dqk:()=>Ct,eFA:()=>Ew,ekj:()=>_y,g9A:()=>s_,h0i:()=>Ra,hGG:()=>Uw,iGM:()=>qy,ifc:()=>Qt,ip1:()=>og,kL8:()=>yE,lG2:()=>ae,n5z:()=>Ro,oAB:()=>H,q4F:()=>pC,qLn:()=>np,qOj:()=>zc,qZA:()=>ed,s9C:()=>eE,sBO:()=>Dw,sIi:()=>Zc,s_b:()=>yd,soG:()=>af,tBr:()=>vt,tb:()=>a_,tp0:()=>ds,uIk:()=>xh,vHH:()=>Ve,vpe:()=>_o,wAp:()=>xt,xp6:()=>wb,z2F:()=>Cd,zSh:()=>Kn,zs3:()=>Us});var f=L(7579),G=L(727),k=L(8306),ie=L(6451),de=L(3099);function we(s){for(let o in s)if(s[o]===we)return o;throw Error("Could not find renamed property on target object.")}function fe(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function se(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(se).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function he(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const W=we({__forward_ref__:we});function Q(s){return s.__forward_ref__=Q,s.toString=function(){return se(this())},s}function oe(s){return ze(s)?s():s}function ze(s){return"function"==typeof s&&s.hasOwnProperty(W)&&s.__forward_ref__===Q}class Ve extends Error{constructor(o,u){super(function He(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,u)),this.code=o}}function ye(s){return"string"==typeof s?s:null==s?"":String(s)}function ve(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ye(s)}function ot(s,o){const u=o?` in ${o}`:"";throw new Ve(-201,`No provider for ${ve(s)} found${u}`)}function ct(s,o){null==s&&function Nt(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function mn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function zr(s){return{providers:s.providers||[],imports:s.imports||[]}}function jn(s){return Br(s,jr)||Br(s,Fe)}function Br(s,o){return s.hasOwnProperty(o)?s[o]:null}function Es(s){return s&&(s.hasOwnProperty(ui)||s.hasOwnProperty(hr))?s[ui]:null}const jr=we({\u0275prov:we}),ui=we({\u0275inj:we}),Fe=we({ngInjectableDef:we}),hr=we({ngInjectorDef:we});var mt=(()=>((mt=mt||{})[mt.Default=0]="Default",mt[mt.Host=1]="Host",mt[mt.Self=2]="Self",mt[mt.SkipSelf=4]="SkipSelf",mt[mt.Optional=8]="Optional",mt))();let Rr;function yn(s){const o=Rr;return Rr=s,o}function li(s,o,u){const c=jn(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&mt.Optional?null:void 0!==o?o:void ot(se(s),"Injector")}function Ir(s){return{toString:s}.toString()}var Sn=(()=>((Sn=Sn||{})[Sn.OnPush=0]="OnPush",Sn[Sn.Default=1]="Default",Sn))(),Qt=(()=>{return(s=Qt||(Qt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Qt;var s})();const yt="undefined"!=typeof globalThis&&globalThis,gt="undefined"!=typeof window&&window,is="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ct=yt||"undefined"!=typeof global&&global||gt||is,bn={},_t=[],pr=we({\u0275cmp:we}),Kt=we({\u0275dir:we}),tr=we({\u0275pipe:we}),Je=we({\u0275mod:we}),Te=we({\u0275fac:we}),et=we({__NG_ELEMENT_ID__:we});let Pt=0;function Ot(s){return Ir(()=>{const u={},c={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Sn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||_t,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Qt.Emulated,id:"c",styles:s.styles||_t,_:null,setInput:null,schemas:s.schemas||null,tView:null},h=s.directives,m=s.features,E=s.pipes;return c.id+=Pt++,c.inputs=$(s.inputs,u),c.outputs=$(s.outputs),m&&m.forEach(b=>b(c)),c.directiveDefs=h?()=>("function"==typeof h?h():h).map(z):null,c.pipeDefs=E?()=>("function"==typeof E?E():E).map(q):null,c})}function z(s){return st(s)||function at(s){return s[Kt]||null}(s)}function q(s){return function kt(s){return s[tr]||null}(s)}const J={};function H(s){return Ir(()=>{const o={type:s.type,bootstrap:s.bootstrap||_t,declarations:s.declarations||_t,imports:s.imports||_t,exports:s.exports||_t,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(J[s.id]=s.type),o})}function $(s,o){if(null==s)return bn;const u={};for(const c in s)if(s.hasOwnProperty(c)){let h=s[c],m=h;Array.isArray(h)&&(m=h[1],h=h[0]),u[h]=c,o&&(o[h]=m)}return u}const ae=Ot;function Ne(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function st(s){return s[pr]||null}function ht(s,o){const u=s[Je]||null;if(!u&&!0===o)throw new Error(`Type ${se(s)} does not have '\u0275mod' property.`);return u}function Hi(s){return Array.isArray(s)&&"object"==typeof s[1]}function Gi(s){return Array.isArray(s)&&!0===s[1]}function Fd(s){return 0!=(8&s.flags)}function Ld(s){return 2==(2&s.flags)}function $n(s){return 1==(1&s.flags)}function qi(s){return null!==s.template}function Vd(s){return 0!=(512&s[2])}function bs(s,o){return s.hasOwnProperty(Te)?s[Te]:null}class Gd{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function To(){return qa}function qa(s){return s.type.prototype.ngOnChanges&&(s.setInput=Bu),rc}function rc(){const s=ju(this),o=null==s?void 0:s.current;if(o){const u=s.previous;if(u===bn)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function Bu(s,o,u,c){const h=ju(s)||function Jo(s,o){return s[xi]=o}(s,{previous:bn,current:null}),m=h.current||(h.current={}),E=h.previous,b=this.declaredInputs[u],C=E[b];m[b]=new Gd(C&&C.currentValue,o,E===bn),s[c]=o}To.ngInherit=!0;const xi="__ngSimpleChanges__";function ju(s){return s[xi]||null}let qd;function Hu(s){qd=s}function On(s){return!!s.listen}const ci={createRenderer:(s,o)=>function sc(){return void 0!==qd?qd:"undefined"!=typeof document?document:void 0}()};function Gn(s){for(;Array.isArray(s);)s=s[0];return s}function Mi(s,o){return Gn(o[s])}function qn(s,o){return Gn(o[s.index])}function Cs(s,o){return s.data[o]}function wi(s,o){const u=o[s];return Hi(u)?u:u[0]}function Dr(s){return 4==(4&s[2])}function Wa(s){return 128==(128&s[2])}function Wi(s,o){return null==o?null:s[o]}function os(s){s[18]=0}function za(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const Rt={lFrame:Yu(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ka(){return Rt.bindingsEnabled}function xe(){return Rt.lFrame.lView}function Jt(){return Rt.lFrame.tView}function Wu(s){return Rt.lFrame.contextLView=s,s[8]}function Rn(){let s=na();for(;null!==s&&64===s.type;)s=s.parent;return s}function na(){return Rt.lFrame.currentTNode}function ei(s,o){const u=Rt.lFrame;u.currentTNode=s,u.isParent=o}function io(){return Rt.lFrame.isParent}function Do(){return Rt.isInCheckNoChangesMode}function ra(s){Rt.isInCheckNoChangesMode=s}function zi(){return Rt.lFrame.bindingIndex++}function cc(s,o){const u=Rt.lFrame;u.bindingIndex=u.bindingRootIndex=s,Qa(o)}function Qa(s){Rt.lFrame.currentDirectiveIndex=s}function dc(){return Rt.lFrame.currentQueryIndex}function So(s){Rt.lFrame.currentQueryIndex=s}function zd(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Xa(s,o,u){if(u&mt.SkipSelf){let h=o,m=s;for(;!(h=h.parent,null!==h||u&mt.Host||(h=zd(m),null===h||(m=m[15],10&h.type))););if(null===h)return!1;o=h,s=m}const c=Rt.lFrame=hc();return c.currentTNode=o,c.lView=s,!0}function Zu(s){const o=hc(),u=s[1];Rt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function hc(){const s=Rt.lFrame,o=null===s?null:s.child;return null===o?Yu(s):o}function Yu(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Ja(){const s=Rt.lFrame;return Rt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const fc=Ja;function sa(){const s=Ja();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Nr(){return Rt.lFrame.selectedIndex}function Pr(s){Rt.lFrame.selectedIndex=s}function Ln(){const s=Rt.lFrame;return Cs(s.tView,s.selectedIndex)}function eu(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const m=s.data[u].type.prototype,{ngAfterContentInit:E,ngAfterContentChecked:b,ngAfterViewInit:C,ngAfterViewChecked:R,ngOnDestroy:N}=m;E&&(s.contentHooks||(s.contentHooks=[])).push(-u,E),b&&((s.contentHooks||(s.contentHooks=[])).push(u,b),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,b)),C&&(s.viewHooks||(s.viewHooks=[])).push(-u,C),R&&((s.viewHooks||(s.viewHooks=[])).push(u,R),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,R)),null!=N&&(s.destroyHooks||(s.destroyHooks=[])).push(u,N)}}function oa(s,o,u){yc(s,o,3,u)}function aa(s,o,u,c){(3&s[2])===u&&yc(s,o,u,c)}function Zd(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function yc(s,o,u,c){const m=null!=c?c:-1,E=o.length-1;let b=0;for(let C=void 0!==c?65535&s[18]:0;C<E;C++)if("number"==typeof o[C+1]){if(b=o[C],null!=c&&b>=c)break}else o[C]<0&&(s[18]+=65536),(b<m||-1==m)&&(Zg(s,u,o,C),s[18]=(4294901760&s[18])+C+2),C++}function Zg(s,o,u,c){const h=u[c]<0,m=u[c+1],b=s[h?-u[c]:u[c]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{m.call(b)}finally{}}}else try{m.call(b)}finally{}}class sr{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function Ec(s,o,u){const c=On(s);let h=0;for(;h<u.length;){const m=u[h];if("number"==typeof m){if(0!==m)break;h++;const E=u[h++],b=u[h++],C=u[h++];c?s.setAttribute(o,b,C,E):o.setAttributeNS(E,b,C)}else{const E=m,b=u[++h];As(E)?c&&s.setProperty(o,E,b):c?s.setAttribute(o,E,b):o.setAttribute(E,b),h++}}return h}function In(s){return 3===s||4===s||6===s}function As(s){return 64===s.charCodeAt(0)}function dt(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?u=h:0===u||as(s,u,h,null,-1===u||2===u?o[++c]:null)}}return s}function as(s,o,u,c,h){let m=0,E=s.length;if(-1===o)E=-1;else for(;m<s.length;){const b=s[m++];if("number"==typeof b){if(b===o){E=-1;break}if(b>o){E=m-1;break}}}for(;m<s.length;){const b=s[m];if("number"==typeof b)break;if(b===u){if(null===c)return void(null!==h&&(s[m+1]=h));if(c===s[m+1])return void(s[m+2]=h)}m++,null!==c&&m++,null!==h&&m++}-1!==E&&(s.splice(E,0,o),m=E+1),s.splice(m++,0,u),null!==c&&s.splice(m++,0,c),null!==h&&s.splice(m++,0,h)}function di(s){return-1!==s}function Wn(s){return 32767&s}function tu(s,o){let u=function Yd(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let Qd=!0;function nu(s){const o=Qd;return Qd=s,o}let It=0;function ru(s,o){const u=la(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,el(c.data,s),el(o,null),el(c.blueprint,null));const h=Zn(s,o),m=s.injectorIndex;if(di(h)){const E=Wn(h),b=tu(h,o),C=b[1].data;for(let R=0;R<8;R++)o[m+R]=b[E+R]|C[E+R]}return o[m+8]=h,m}function el(s,o){s.push(0,0,0,0,0,0,0,0,o)}function la(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Zn(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,h=o;for(;null!==h;){const m=h[1],E=m.type;if(c=2===E?m.declTNode:1===E?h[6]:null,null===c)return-1;if(u++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function oo(s,o,u){!function bc(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(et)&&(c=u[et]),null==c&&(c=u[et]=It++);const h=255&c;o.data[s+(h>>5)]|=1<<h}(s,o,u)}function tl(s,o,u){if(u&mt.Optional)return s;ot(o,"NodeInjector")}function ca(s,o,u,c){if(u&mt.Optional&&void 0===c&&(c=null),0==(u&(mt.Self|mt.Host))){const h=s[9],m=yn(void 0);try{return h?h.get(o,c,u&mt.Optional):li(o,c,u&mt.Optional)}finally{yn(m)}}return tl(c,o,u)}function iu(s,o,u,c=mt.Default,h){if(null!==s){const m=function Xd(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(et)?s[et]:void 0;return"number"==typeof o?o>=0?255&o:da:o}(u);if("function"==typeof m){if(!Xa(o,s,c))return c&mt.Host?tl(h,u,c):ca(o,u,c,h);try{const E=m(c);if(null!=E||c&mt.Optional)return E;ot(u)}finally{fc()}}else if("number"==typeof m){let E=null,b=la(s,o),C=-1,R=c&mt.Host?o[16][6]:null;for((-1===b||c&mt.SkipSelf)&&(C=-1===b?Zn(s,o):o[b+8],-1!==C&&Cc(c,!1)?(E=o[1],b=Wn(C),o=tu(C,o)):b=-1);-1!==b;){const N=o[1];if(ls(m,b,N.data)){const U=Vf(b,o,u,E,c,R);if(U!==su)return U}C=o[b+8],-1!==C&&Cc(c,o[1].data[b+8]===R)&&ls(m,b,o)?(E=N,b=Wn(C),o=tu(C,o)):b=-1}}}return ca(o,u,c,h)}const su={};function da(){return new Hn(Rn(),xe())}function Vf(s,o,u,c,h,m){const E=o[1],b=E.data[s+8],N=Ao(b,E,u,null==c?Ld(b)&&Qd:c!=E&&0!=(3&b.type),h&mt.Host&&m===b);return null!==N?Pi(o,E,N,b):su}function Ao(s,o,u,c,h){const m=s.providerIndexes,E=o.data,b=1048575&m,C=s.directiveStart,N=m>>20,X=h?b+N:s.directiveEnd;for(let te=c?b:b+N;te<X;te++){const Ce=E[te];if(te<C&&u===Ce||te>=C&&Ce.type===u)return te}if(h){const te=E[C];if(te&&qi(te)&&te.type===u)return C}return null}function Pi(s,o,u,c){let h=s[u];const m=o.data;if(function _c(s){return s instanceof sr}(h)){const E=h;E.resolving&&function Pe(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Ve(-200,`Circular dependency in DI detected for ${s}${u}`)}(ve(m[u]));const b=nu(E.canSeeViewProviders);E.resolving=!0;const C=E.injectImpl?yn(E.injectImpl):null;Xa(s,c,mt.Default);try{h=s[u]=E.factory(void 0,m,s,c),o.firstCreatePass&&u>=c.directiveStart&&function $_(s,o,u){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:m}=o.type.prototype;if(c){const E=qa(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,E),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,E)}h&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,h),m&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,m),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,m))}(u,m[u],o)}finally{null!==C&&yn(C),nu(b),E.resolving=!1,fc()}}return h}function ls(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function Cc(s,o){return!(s&mt.Self||s&mt.Host&&o)}class Hn{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return iu(this._tNode,this._lView,o,c,u)}}function Ro(s){return Ir(()=>{const o=s.prototype.constructor,u=o[Te]||ou(o),c=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==c;){const m=h[Te]||ou(h);if(m&&m!==u)return m;h=Object.getPrototypeOf(h)}return m=>new m})}function ou(s){return ze(s)?()=>{const o=ou(oe(s));return o&&o()}:bs(s)}function Zt(s){return function Ic(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let h=0;for(;h<c;){const m=u[h];if(In(m))break;if(0===m)h+=2;else if("number"==typeof m)for(h++;h<c&&"string"==typeof u[h];)h++;else{if(m===o)return u[h+1];h+=2}}}return null}(Rn(),s)}const Oi="__parameters__";function fi(s,o,u){return Ir(()=>{const c=function ki(s){return function(...u){if(s){const c=s(...u);for(const h in c)this[h]=c[h]}}}(o);function h(...m){if(this instanceof h)return c.apply(this,m),this;const E=new h(...m);return b.annotation=E,b;function b(C,R,N){const U=C.hasOwnProperty(Oi)?C[Oi]:Object.defineProperty(C,Oi,{value:[]})[Oi];for(;U.length<=N;)U.push(null);return(U[N]=U[N]||[]).push(E),C}}return u&&(h.prototype=Object.create(u.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class vn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=mn({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const rl=new vn("AnalyzeForEntryComponents");function Ii(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let c=s[u];Array.isArray(c)?(o===s&&(o=s.slice(0,u)),Ii(c,o)):o!==s&&o.push(c)}return o}function cs(s,o){s.forEach(u=>Array.isArray(u)?cs(u,o):o(u))}function th(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function pa(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Tt(s,o,u){let c=ti(s,o);return c>=0?s[1|c]=u:(c=~c,function Bf(s,o,u,c){let h=s.length;if(h==o)s.push(u,c);else if(1===h)s.push(c,s[0]),s[0]=u;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function du(s,o){const u=ti(s,o);if(u>=0)return s[1|u]}function ti(s,o){return function Sc(s,o,u){let c=0,h=s.length>>u;for(;h!==c;){const m=c+(h-c>>1),E=s[m<<u];if(o===E)return m<<u;E>o?h=m:c=m+1}return~(h<<u)}(s,o,1)}const qr={},Ms="__NG_DI_FLAG__",ma="ngTempTokenPath",fu=/\n/gm,pu="__source",tm=we({provide:String,useValue:we});let T;function S(s){const o=T;return T=s,o}function P(s,o=mt.Default){if(void 0===T)throw new Ve(203,"");return null===T?li(s,void 0,o):T.get(s,o&mt.Optional?null:void 0,o)}function B(s,o=mt.Default){return(function rn(){return Rr}()||P)(oe(s),o)}function Se(s){const o=[];for(let u=0;u<s.length;u++){const c=oe(s[u]);if(Array.isArray(c)){if(0===c.length)throw new Ve(900,"");let h,m=mt.Default;for(let E=0;E<c.length;E++){const b=c[E],C=Dt(b);"number"==typeof C?-1===C?h=b.token:m|=C:h=b}o.push(B(h,m))}else o.push(B(c))}return o}function $e(s,o){return s[Ms]=o,s.prototype[Ms]=o,s}function Dt(s){return s[Ms]}const vt=$e(fi("Inject",s=>({token:s})),-1),kn=$e(fi("Optional"),8),ds=$e(fi("SkipSelf"),4);class uh{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function lo(s){return s instanceof uh?s.changingThisBreaksApplicationSecurity:s}const Y_=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,dh=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Sr=(()=>((Sr=Sr||{})[Sr.NONE=0]="NONE",Sr[Sr.HTML=1]="HTML",Sr[Sr.STYLE=2]="STYLE",Sr[Sr.SCRIPT=3]="SCRIPT",Sr[Sr.URL=4]="URL",Sr[Sr.RESOURCE_URL=5]="RESOURCE_URL",Sr))();function gh(s){const o=function M(){const s=xe();return s&&s[12]}();return o?o.sanitize(Sr.URL,s)||"":function Rc(s,o){const u=function W_(s){return s instanceof uh&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}(s,"URL")?lo(s):function hh(s){return(s=String(s)).match(Y_)||s.match(dh)?s:"unsafe:"+s}(ye(s))}const Le="__ngContext__";function ut(s,o){s[Le]=o}function Cn(s){const o=function sn(s){return s[Le]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function Fc(s){return s.ngOriginalError}function tp(s,...o){s.error(...o)}class np{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o),c=function J_(s){return s&&s.ngErrorLogger||tp}(o);c(this._console,"ERROR",o),u&&c(this._console,"ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&Fc(o);for(;u&&Fc(u);)u=Fc(u);return u||null}}const sb=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ct))();function vu(s){return s instanceof Function?s():s}var wa=(()=>((wa=wa||{})[wa.Important=1]="Important",wa[wa.DashCase=2]="DashCase",wa))();function nv(s,o){return undefined(s,o)}function Vc(s){const o=s[3];return Gi(o)?o[3]:o}function rv(s){return iv(s[13])}function rp(s){return iv(s[4])}function iv(s){for(;null!==s&&!Gi(s);)s=s[4];return s}function _h(s,o,u,c,h){if(null!=c){let m,E=!1;Gi(c)?m=c:Hi(c)&&(E=!0,c=c[0]);const b=Gn(c);0===s&&null!==u?null==h?gl(o,u,b):vh(o,u,b,h||null,!0):1===s&&null!==u?vh(o,u,b,h||null,!0):2===s?function yb(s,o,u){const c=vm(s,o);c&&function hS(s,o,u,c){On(s)?s.removeChild(o,u,c):o.removeChild(u)}(s,c,o,u)}(o,b,E):3===s&&o.destroyNode(b),null!=m&&function V(s,o,u,c,h){const m=u[7];m!==Gn(u)&&_h(o,s,c,m,h);for(let b=10;b<u.length;b++){const C=u[b];ip(C[1],C,s,o,c,m)}}(o,s,m,u,h)}}function ov(s,o,u){return On(s)?s.createElement(o,u):null===u?s.createElement(o):s.createElementNS(u,o)}function Uc(s,o){const u=s[9],c=u.indexOf(o),h=o[3];1024&o[2]&&(o[2]&=-1025,za(h,-1)),u.splice(c,1)}function lv(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const h=c[17];null!==h&&h!==s&&Uc(h,c),o>0&&(s[u-1][4]=c[4]);const m=pa(s,10+o);!function lS(s,o){ip(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const E=m[19];null!==E&&E.detachView(m[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function db(s,o){if(!(256&o[2])){const u=o[11];On(u)&&u.destroyNode&&ip(s,o,u,3,null,null),function mm(s){let o=s[13];if(!o)return ym(s[1],s);for(;o;){let u=null;if(Hi(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)Hi(o)&&ym(o[1],o),o=o[3];null===o&&(o=s),Hi(o)&&ym(o[1],o),u=o&&o[4]}o=u}}(o)}}function ym(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function hb(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const h=o[u[c]];if(!(h instanceof sr)){const m=u[c+1];if(Array.isArray(m))for(let E=0;E<m.length;E+=2){const b=h[m[E]],C=m[E+1];try{C.call(b)}finally{}}else try{m.call(h)}finally{}}}}(s,o),function dS(s,o){const u=s.cleanup,c=o[7];let h=-1;if(null!==u)for(let m=0;m<u.length-1;m+=2)if("string"==typeof u[m]){const E=u[m+1],b="function"==typeof E?E(o):Gn(o[E]),C=c[h=u[m+2]],R=u[m+3];"boolean"==typeof R?b.removeEventListener(u[m],C,R):R>=0?c[h=R]():c[h=-R].unsubscribe(),m+=2}else{const E=c[h=u[m+1]];u[m].call(E)}if(null!==c){for(let m=h+1;m<c.length;m++)c[m]();o[7]=null}}(s,o),1===o[1].type&&On(o[11])&&o[11].destroy();const u=o[17];if(null!==u&&Gi(o[3])){u!==o[3]&&Uc(u,o);const c=o[19];null!==c&&c.detachView(s)}}}function cv(s,o,u){return function _m(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];if(2&c.flags){const h=s.data[c.directiveStart].encapsulation;if(h===Qt.None||h===Qt.Emulated)return null}return qn(c,u)}(s,o.parent,u)}function vh(s,o,u,c,h){On(s)?s.insertBefore(o,u,c,h):o.insertBefore(u,c,h)}function gl(s,o,u){On(s)?s.appendChild(o,u):o.appendChild(u)}function dv(s,o,u,c,h){null!==c?vh(s,o,u,c,h):gl(s,o,u)}function vm(s,o){return On(s)?s.parentNode(o):o.parentNode}let gb=function pb(s,o,u){return 40&s.type?qn(s,u):null};function bm(s,o,u,c){const h=cv(s,c,o),m=o[11],b=function fb(s,o,u){return gb(s,o,u)}(c.parent||o[6],c,o);if(null!=h)if(Array.isArray(u))for(let C=0;C<u.length;C++)dv(m,h,u[C],b,!1);else dv(m,h,u,b,!1)}function Im(s,o){if(null!==o){const u=o.type;if(3&u)return qn(o,s);if(4&u)return hv(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return Im(s,c);{const h=s[o.index];return Gi(h)?hv(-1,h):Gn(h)}}if(32&u)return nv(o,s)()||Gn(s[o.index]);{const c=Cm(s,o);return null!==c?Array.isArray(c)?c[0]:Im(Vc(s[16]),c):Im(s,o.next)}}return null}function Cm(s,o){return null!==o?s[16][6].projection[o.projection]:null}function hv(s,o){const u=10+s+1;if(u<o.length){const c=o[u],h=c[1].firstChild;if(null!==h)return Im(c,h)}return o[7]}function Tm(s,o,u,c,h,m,E){for(;null!=u;){const b=c[u.index],C=u.type;if(E&&0===o&&(b&&ut(Gn(b),c),u.flags|=4),64!=(64&u.flags))if(8&C)Tm(s,o,u.child,c,h,m,!1),_h(o,s,h,b,m);else if(32&C){const R=nv(u,c);let N;for(;N=R();)_h(o,s,h,N,m);_h(o,s,h,b,m)}else 16&C?_b(s,o,c,u,h,m):_h(o,s,h,b,m);u=E?u.projectionNext:u.next}}function ip(s,o,u,c,h,m){Tm(u,c,s.firstChild,o,h,m,!1)}function _b(s,o,u,c,h,m){const E=u[16],C=E[6].projection[c.projection];if(Array.isArray(C))for(let R=0;R<C.length;R++)_h(o,s,h,C[R],m);else Tm(s,o,C,E[3],h,m,!0)}function ho(s,o,u){On(s)?s.setAttribute(o,"style",u):o.style.cssText=u}function Fs(s,o,u){On(s)?""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u):o.className=u}function Dm(s,o,u){let c=s.length;for(;;){const h=s.indexOf(o,u);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const m=o.length;if(h+m===c||s.charCodeAt(h+m)<=32)return h}u=h+1}}const Sm="ng-template";function fv(s,o,u){let c=0;for(;c<s.length;){let h=s[c++];if(u&&"class"===h){if(h=s[c],-1!==Dm(h.toLowerCase(),o,0))return!0}else if(1===h){for(;c<s.length&&"string"==typeof(h=s[c++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function vb(s){return 4===s.type&&s.value!==Sm}function ni(s,o,u){return o===(4!==s.type||u?s.value:Sm)}function eP(s,o,u){let c=4;const h=s.attrs||[],m=function wt(s){for(let o=0;o<s.length;o++)if(In(s[o]))return o;return s.length}(h);let E=!1;for(let b=0;b<o.length;b++){const C=o[b];if("number"!=typeof C){if(!E)if(4&c){if(c=2|1&c,""!==C&&!ni(s,C,u)||""===C&&1===o.length){if(Ls(c))return!1;E=!0}}else{const R=8&c?C:o[++b];if(8&c&&null!==s.attrs){if(!fv(s.attrs,R,u)){if(Ls(c))return!1;E=!0}continue}const U=be(8&c?"class":C,h,vb(s),u);if(-1===U){if(Ls(c))return!1;E=!0;continue}if(""!==R){let X;X=U>m?"":h[U+1].toLowerCase();const te=8&c?X:null;if(te&&-1!==Dm(te,R,0)||2&c&&R!==X){if(Ls(c))return!1;E=!0}}}}else{if(!E&&!Ls(c)&&!Ls(C))return!1;if(E&&Ls(C))continue;E=!1,c=C|1&c}}return Ls(c)||E}function Ls(s){return 0==(1&s)}function be(s,o,u,c){if(null===o)return-1;let h=0;if(c||!u){let m=!1;for(;h<o.length;){const E=o[h];if(E===s)return h;if(3===E||6===E)m=!0;else{if(1===E||2===E){let b=o[++h];for(;"string"==typeof b;)b=o[++h];continue}if(4===E)break;if(0===E){h+=4;continue}}h+=m?1:2}return-1}return function pv(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function Eb(s,o,u=!1){for(let c=0;c<o.length;c++)if(eP(s,o[c],u))return!0;return!1}function sp(s,o){return s?":not("+o.trim()+")":o}function Am(s){let o=s[0],u=1,c=2,h="",m=!1;for(;u<s.length;){let E=s[u];if("string"==typeof E)if(2&c){const b=s[++u];h+="["+E+(b.length>0?'="'+b+'"':"")+"]"}else 8&c?h+="."+E:4&c&&(h+=" "+E);else""!==h&&!Ls(E)&&(o+=sp(m,h),h=""),c=E,m=m||!Ls(c);u++}return""!==h&&(o+=sp(m,h)),o}const jt={};function wb(s){bb(Jt(),xe(),Nr()+s,Do())}function bb(s,o,u,c){if(!c)if(3==(3&o[2])){const m=s.preOrderCheckHooks;null!==m&&oa(o,m,u)}else{const m=s.preOrderHooks;null!==m&&aa(o,m,0,u)}Pr(u)}function ri(s,o){return s<<17|o<<2}function ps(s){return s>>17&32767}function gv(s){return 2|s}function ba(s){return(131068&s)>>2}function ap(s,o){return-131069&s|o<<2}function gi(s){return 1|s}function Lm(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const h=u[c],m=u[c+1];if(-1!==m){const E=s.data[m];So(h),E.contentQueries(2,o[m],m)}}}function jc(s,o,u,c,h,m,E,b,C,R){const N=o.blueprint.slice();return N[0]=h,N[2]=140|c,os(N),N[3]=N[15]=s,N[8]=u,N[10]=E||s&&s[10],N[11]=b||s&&s[11],N[12]=C||s&&s[12]||null,N[9]=R||s&&s[9]||null,N[6]=m,N[16]=2==o.type?s[16]:N,N}function yl(s,o,u,c,h){let m=s.data[o];if(null===m)m=function fp(s,o,u,c,h){const m=na(),E=io(),C=s.data[o]=function Um(s,o,u,c,h,m){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,E?m:m&&m.parent,u,o,c,h);return null===s.firstChild&&(s.firstChild=C),null!==m&&(E?null==m.child&&null!==C.parent&&(m.child=C):null===m.next&&(m.next=C)),C}(s,o,u,c,h),function zu(){return Rt.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=u,m.value=c,m.attrs=h;const E=function Ds(){const s=Rt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();m.injectorIndex=null===E?-1:E.injectorIndex}return ei(m,!0),m}function mr(s,o,u,c){if(0===u)return-1;const h=o.length;for(let m=0;m<u;m++)o.push(c),s.blueprint.push(c),s.data.push(null);return h}function Or(s,o,u){Zu(o);try{const c=s.viewQuery;null!==c&&zm(1,c,u);const h=s.template;null!==h&&Pb(s,o,h,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Lm(s,o),s.staticViewQueries&&zm(2,s.viewQuery,u);const m=s.components;null!==m&&function vS(s,o){for(let u=0;u<o.length;u++)zb(s,o[u])}(o,m)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,sa()}}function Iu(s,o,u,c){const h=o[2];if(256==(256&h))return;Zu(o);const m=Do();try{os(o),function lc(s){return Rt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&Pb(s,o,u,2,c);const E=3==(3&h);if(!m)if(E){const R=s.preOrderCheckHooks;null!==R&&oa(o,R,null)}else{const R=s.preOrderHooks;null!==R&&aa(o,R,0,null),Zd(o,0)}if(function xv(s){for(let o=rv(s);null!==o;o=rp(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const h=u[c],m=h[3];0==(1024&h[2])&&za(m,1),h[2]|=1024}}}(o),function Rv(s){for(let o=rv(s);null!==o;o=rp(o))for(let u=10;u<o.length;u++){const c=o[u],h=c[1];Wa(c)&&Iu(h,c,h.template,c[8])}}(o),null!==s.contentQueries&&Lm(s,o),!m)if(E){const R=s.contentCheckHooks;null!==R&&oa(o,R)}else{const R=s.contentHooks;null!==R&&aa(o,R,1),Zd(o,1)}!function Mb(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const h=u[c];if(h<0)Pr(~h);else{const m=h,E=u[++c],b=u[++c];cc(E,m),b(2,o[m])}}}finally{Pr(-1)}}(s,o);const b=s.components;null!==b&&function Nb(s,o){for(let u=0;u<o.length;u++)Gm(s,o[u])}(o,b);const C=s.viewQuery;if(null!==C&&zm(2,C,c),!m)if(E){const R=s.viewCheckHooks;null!==R&&oa(o,R)}else{const R=s.viewHooks;null!==R&&aa(o,R,2),Zd(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),m||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,za(o[3],-1))}finally{sa()}}function Iv(s,o,u,c){const h=o[10],m=!Do(),E=Dr(o);try{m&&!E&&h.begin&&h.begin(),E&&Or(s,o,c),Iu(s,o,u,c)}finally{m&&!E&&h.end&&h.end()}}function Pb(s,o,u,c,h){const m=Nr(),E=2&c;try{Pr(-1),E&&o.length>20&&bb(s,o,20,Do()),u(c,h)}finally{Pr(m)}}function Vm(s,o,u){!Ka()||(function $c(s,o,u,c){const h=u.directiveStart,m=u.directiveEnd;s.firstCreatePass||ru(u,o),ut(c,o);const E=u.initialInputs;for(let b=h;b<m;b++){const C=s.data[b],R=qi(C);R&&jm(o,u,C);const N=Pi(o,s,b,u);ut(N,o),null!==E&&qb(0,b-h,N,C,0,E),R&&(wi(u.index,o)[8]=N)}}(s,o,u,qn(u,o)),128==(128&u.flags)&&function $b(s,o,u){const c=u.directiveStart,h=u.directiveEnd,E=u.index,b=function ia(){return Rt.lFrame.currentDirectiveIndex}();try{Pr(E);for(let C=c;C<h;C++){const R=s.data[C],N=o[C];Qa(C),(null!==R.hostBindings||0!==R.hostVars||null!==R.hostAttrs)&&yp(R,N)}}finally{Pr(-1),Qa(b)}}(s,o,u))}function Cv(s,o,u=qn){const c=o.localNames;if(null!==c){let h=o.index+1;for(let m=0;m<c.length;m+=2){const E=c[m+1],b=-1===E?u(o,s):s[E];s[h++]=b}}}function kb(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=pp(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function pp(s,o,u,c,h,m,E,b,C,R){const N=20+c,U=N+h,X=function Tv(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:jt);return u}(N,U),te="function"==typeof R?R():R;return X[1]={type:s,blueprint:X,template:u,queries:null,viewQuery:b,declTNode:o,data:X.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:U,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof E?E():E,firstChild:null,schemas:C,consts:te,incompleteFirstPass:!1}}function Vb(s,o,u,c){const h=vl(o);null===u?h.push(c):(h.push(u),s.firstCreatePass&&Km(s).push(c,h.length-1))}function Bm(s,o,u){for(let c in s)if(s.hasOwnProperty(c)){const h=s[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(o,h):u[c]=[o,h]}return u}function Vs(s,o,u,c,h,m,E,b){const C=qn(o,u);let N,R=o.inputs;!b&&null!=R&&(N=R[c])?(Ov(s,u,N,c,h),Ld(o)&&function gp(s,o){const u=wi(o,s);16&u[2]||(u[2]|=64)}(u,o.index)):3&o.type&&(c=function Ub(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),h=null!=E?E(h,o.value||"",c):h,On(m)?m.setProperty(C,c,h):As(c)||(C.setProperty?C.setProperty(c,h):C[c]=h))}function _l(s,o,u,c){let h=!1;if(Ka()){const m=function Hb(s,o,u){const c=s.directiveRegistry;let h=null;if(c)for(let m=0;m<c.length;m++){const E=c[m];Eb(u,E.selectors,!1)&&(h||(h=[]),oo(ru(u,o),s,E.type),qi(E)?(bh(s,u),h.unshift(E)):h.push(E))}return h}(s,o,u),E=null===c?null:{"":-1};if(null!==m){h=!0,Av(u,s.data.length,m.length);for(let N=0;N<m.length;N++){const U=m[N];U.providersResolver&&U.providersResolver(U)}let b=!1,C=!1,R=mr(s,o,m.length,null);for(let N=0;N<m.length;N++){const U=m[N];u.mergedAttrs=dt(u.mergedAttrs,U.hostAttrs),Ih(s,u,o,R,U),Ji(R,U,E),null!==U.contentQueries&&(u.flags|=8),(null!==U.hostBindings||null!==U.hostAttrs||0!==U.hostVars)&&(u.flags|=128);const X=U.type.prototype;!b&&(X.ngOnChanges||X.ngOnInit||X.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),b=!0),!C&&(X.ngOnChanges||X.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),C=!0),R++}!function Sv(s,o){const c=o.directiveEnd,h=s.data,m=o.attrs,E=[];let b=null,C=null;for(let R=o.directiveStart;R<c;R++){const N=h[R],U=N.inputs,X=null===m||vb(o)?null:Wb(U,m);E.push(X),b=Bm(U,R,b),C=Bm(N.outputs,R,C)}null!==b&&(b.hasOwnProperty("class")&&(o.flags|=16),b.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=E,o.inputs=b,o.outputs=C}(s,u)}E&&function Gb(s,o,u){if(o){const c=s.localNames=[];for(let h=0;h<o.length;h+=2){const m=u[o[h+1]];if(null==m)throw new Ve(-301,`Export of name '${o[h+1]}' not found!`);c.push(o[h],m)}}}(u,c,E)}return u.mergedAttrs=dt(u.mergedAttrs,u.attrs),h}function jb(s,o,u,c,h,m){const E=m.hostBindings;if(E){let b=s.hostBindingOpCodes;null===b&&(b=s.hostBindingOpCodes=[]);const C=~o.index;(function IS(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(b)!=C&&b.push(C),b.push(c,h,E)}}function yp(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function bh(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function Ji(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;qi(o)&&(u[""]=s)}}function Av(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function Ih(s,o,u,c,h){s.data[c]=h;const m=h.factory||(h.factory=bs(h.type)),E=new sr(m,qi(h),null);s.blueprint[c]=E,u[c]=E,jb(s,o,0,c,mr(s,u,h.hostVars,jt),h)}function jm(s,o,u){const c=qn(o,s),h=kb(u),m=s[10],E=Ch(s,jc(s,h,null,u.onPush?64:16,c,o,m,m.createRenderer(c,u),null,null));s[o.index]=E}function Oo(s,o,u,c,h,m){const E=qn(s,o);!function _p(s,o,u,c,h,m,E){if(null==m)On(s)?s.removeAttribute(o,h,u):o.removeAttribute(h);else{const b=null==E?ye(m):E(m,c||"",h);On(s)?s.setAttribute(o,h,b,u):u?o.setAttributeNS(u,h,b):o.setAttribute(h,b)}}(o[11],E,m,s.value,u,c,h)}function qb(s,o,u,c,h,m){const E=m[o];if(null!==E){const b=c.setInput;for(let C=0;C<E.length;){const R=E[C++],N=E[C++],U=E[C++];null!==b?c.setInput(u,U,R,N):u[N]=U}}}function Wb(s,o){let u=null,c=0;for(;c<o.length;){const h=o[c];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===u&&(u=[]),u.push(h,s[h],o[c+1])),c+=2}else c+=2;else c+=4}return u}function Hm(s,o,u,c){return new Array(s,!0,!1,o,null,0,c,u,null,null)}function Gm(s,o){const u=wi(o,s);if(Wa(u)){const c=u[1];80&u[2]?Iu(c,u,c.template,u[8]):u[5]>0&&Hc(u)}}function Hc(s){for(let c=rv(s);null!==c;c=rp(c))for(let h=10;h<c.length;h++){const m=c[h];if(1024&m[2]){const E=m[1];Iu(E,m,E.template,m[8])}else m[5]>0&&Hc(m)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const h=wi(u[c],s);Wa(h)&&h[5]>0&&Hc(h)}}function zb(s,o){const u=wi(o,s),c=u[1];(function CS(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),Or(c,u,u[8])}function Ch(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Th(s){for(;s;){s[2]|=64;const o=Vc(s);if(Vd(s)&&!o)return s;s=o}return null}function Wm(s,o,u){const c=o[10];c.begin&&c.begin();try{Iu(s,o,s.template,u)}catch(h){throw Zb(o,h),h}finally{c.end&&c.end()}}function Nv(s){!function qm(s){for(let o=0;o<s.components.length;o++){const u=s.components[o],c=Cn(u),h=c[1];Iv(h,c,h.template,u)}}(s[8])}function zm(s,o,u){So(0),o(s,u)}const Ep=(()=>Promise.resolve(null))();function vl(s){return s[7]||(s[7]=[])}function Km(s){return s.cleanup||(s.cleanup=[])}function Zb(s,o){const u=s[9],c=u?u.get(np,null):null;c&&c.handleError(o)}function Ov(s,o,u,c,h){for(let m=0;m<u.length;){const E=u[m++],b=u[m++],C=o[E],R=s.data[E];null!==R.setInput?R.setInput(C,h,c,b):C[b]=h}}function Ia(s,o,u){const c=Mi(o,s);!function lb(s,o,u){On(s)?s.setValue(o,u):o.textContent=u}(s[11],c,u)}function Zm(s,o,u){let c=u?s.styles:null,h=u?s.classes:null,m=0;if(null!==o)for(let E=0;E<o.length;E++){const b=o[E];"number"==typeof b?m=b:1==m?h=he(h,b):2==m&&(c=he(c,b+": "+o[++E]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=h:s.classesWithoutHost=h}const Dh=new vn("INJECTOR",-1);class Fv{get(o,u=qr){if(u===qr){const c=new Error(`NullInjectorError: No provider for ${se(o)}!`);throw c.name="NullInjectorError",c}return u}}const Kn=new vn("Set Injector scope."),El={},wp={};let qc;function Yb(){return void 0===qc&&(qc=new Fv),qc}function Lv(s,o=null,u=null,c){const h=Qb(s,o,u,c);return h._resolveInjectorDefTypes(),h}function Qb(s,o=null,u=null,c){return new DS(s,u,o||Yb(),c)}class DS{constructor(o,u,c,h=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const m=[];u&&cs(u,b=>this.processProvider(b,o,u)),cs([o],b=>this.processInjectorType(b,[],m)),this.records.set(Dh,Wc(void 0,this));const E=this.records.get(Kn);this.scope=null!=E?E.value:null,this.source=h||("object"==typeof o?null:se(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,u=qr,c=mt.Default){this.assertNotDestroyed();const h=S(this),m=yn(void 0);try{if(!(c&mt.SkipSelf)){let b=this.records.get(o);if(void 0===b){const C=function eI(s){return"function"==typeof s||"object"==typeof s&&s instanceof vn}(o)&&jn(o);b=C&&this.injectableDefInScope(C)?Wc(Vv(o),El):null,this.records.set(o,b)}if(null!=b)return this.hydrate(o,b)}return(c&mt.Self?Yb():this.parent).get(o,u=c&mt.Optional&&u===qr?null:u)}catch(E){if("NullInjectorError"===E.name){if((E[ma]=E[ma]||[]).unshift(se(o)),h)throw E;return function Bt(s,o,u,c){const h=s[ma];throw o[pu]&&h.unshift(o[pu]),s.message=function zt(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let h=se(o);if(Array.isArray(o))h=o.map(se).join(" -> ");else if("object"==typeof o){let m=[];for(let E in o)if(o.hasOwnProperty(E)){let b=o[E];m.push(E+":"+("string"==typeof b?JSON.stringify(b):se(b)))}h=`{${m.join(", ")}}`}return`${u}${c?"("+c+")":""}[${h}]: ${s.replace(fu,"\n  ")}`}("\n"+s.message,h,u,c),s.ngTokenPath=h,s[ma]=null,s}(E,o,"R3InjectorError",this.source)}throw E}finally{yn(m),S(h)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((c,h)=>o.push(se(h))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ve(205,"")}processInjectorType(o,u,c){if(!(o=oe(o)))return!1;let h=Es(o);const m=null==h&&o.ngModule||void 0,E=void 0===m?o:m,b=-1!==c.indexOf(E);if(void 0!==m&&(h=Es(m)),null==h)return!1;if(null!=h.imports&&!b){let N;c.push(E);try{cs(h.imports,U=>{this.processInjectorType(U,u,c)&&(void 0===N&&(N=[]),N.push(U))})}finally{}if(void 0!==N)for(let U=0;U<N.length;U++){const{ngModule:X,providers:te}=N[U];cs(te,Ce=>this.processProvider(Ce,X,te||_t))}}this.injectorDefTypes.add(E);const C=bs(E)||(()=>new E);this.records.set(E,Wc(C,El));const R=h.providers;if(null!=R&&!b){const N=o;cs(R,U=>this.processProvider(U,N,R))}return void 0!==m&&void 0!==o.providers}processProvider(o,u,c){let h=Ah(o=oe(o))?o:oe(o&&o.provide);const m=function bp(s,o,u){return Uv(s)?Wc(void 0,s.useValue):Wc(Tu(s),El)}(o);if(Ah(o)||!0!==o.multi)this.records.get(h);else{let E=this.records.get(h);E||(E=Wc(void 0,El,!0),E.factory=()=>Se(E.multi),this.records.set(h,E)),h=o,E.multi.push(o)}this.records.set(h,m)}hydrate(o,u){return u.value===El&&(u.value=wp,u.value=u.factory()),"object"==typeof u.value&&u.value&&function RS(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this.onDestroy.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=oe(o.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function Vv(s){const o=jn(s),u=null!==o?o.factory:bs(s);if(null!==u)return u;if(s instanceof vn)throw new Ve(204,"");if(s instanceof Function)return function SS(s){const o=s.length;if(o>0)throw function ga(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}(o,"?"),new Ve(204,"");const u=function Pn(s){const o=s&&(s[jr]||s[Fe]);if(o){const u=function En(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new Ve(204,"")}function Tu(s,o,u){let c;if(Ah(s)){const h=oe(s);return bs(h)||Vv(h)}if(Uv(s))c=()=>oe(s.useValue);else if(function Sh(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Se(s.deps||[]));else if(function Xb(s){return!(!s||!s.useExisting)}(s))c=()=>B(oe(s.useExisting));else{const h=oe(s&&(s.useClass||s.provide));if(!function Jb(s){return!!s.deps}(s))return bs(h)||Vv(h);c=()=>new h(...Se(s.deps))}return c}function Wc(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function Uv(s){return null!==s&&"object"==typeof s&&tm in s}function Ah(s){return"function"==typeof s}let Us=(()=>{class s{static create(u,c){var h;if(Array.isArray(u))return Lv({name:""},c,u,"");{const m=null!==(h=u.name)&&void 0!==h?h:"";return Lv({name:m},u.parent,u.providers,m)}}}return s.THROW_IF_NOT_FOUND=qr,s.NULL=new Fv,s.\u0275prov=mn({token:s,providedIn:"any",factory:()=>B(Dh)}),s.__NG_ELEMENT_ID__=-1,s})();function sI(s,o){eu(Cn(s)[1],Rn())}function zc(s){let o=function ty(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;o;){let h;if(qi(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Ve(903,"");h=o.\u0275dir}if(h){if(u){c.push(h);const E=s;E.inputs=Dp(s.inputs),E.declaredInputs=Dp(s.declaredInputs),E.outputs=Dp(s.outputs);const b=h.hostBindings;b&&ry(s,b);const C=h.viewQuery,R=h.contentQueries;if(C&&ny(s,C),R&&aI(s,R),fe(s.inputs,h.inputs),fe(s.declaredInputs,h.declaredInputs),fe(s.outputs,h.outputs),qi(h)&&h.data.animation){const N=s.data;N.animation=(N.animation||[]).concat(h.data.animation)}}const m=h.features;if(m)for(let E=0;E<m.length;E++){const b=m[E];b&&b.ngInherit&&b(s),b===zc&&(u=!1)}}o=Object.getPrototypeOf(o)}!function oI(s){let o=0,u=null;for(let c=s.length-1;c>=0;c--){const h=s[c];h.hostVars=o+=h.hostVars,h.hostAttrs=dt(h.hostAttrs,u=dt(u,h.hostAttrs))}}(c)}function Dp(s){return s===bn?{}:s===_t?[]:s}function ny(s,o){const u=s.viewQuery;s.viewQuery=u?(c,h)=>{o(c,h),u(c,h)}:o}function aI(s,o){const u=s.contentQueries;s.contentQueries=u?(c,h,m)=>{o(c,h,m),u(c,h,m)}:o}function ry(s,o){const u=s.hostBindings;s.hostBindings=u?(c,h)=>{o(c,h),u(c,h)}:o}let Ap=null;function Kc(){if(!Ap){const s=Ct.Symbol;if(s&&s.iterator)Ap=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Ap=c)}}}return Ap}function Zc(s){return!!sy(s)&&(Array.isArray(s)||!(s instanceof Map)&&Kc()in s)}function sy(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Di(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function xh(s,o,u,c){const h=xe();return Di(h,zi(),o)&&(Jt(),Oo(Ln(),h,s,o,u,c)),xh}function Yc(s,o,u,c){return Di(s,zi(),u)?o+ye(u)+c:jt}function Ue(s,o,u,c,h,m,E,b){const C=xe(),R=Jt(),N=s+20,U=R.firstCreatePass?function LS(s,o,u,c,h,m,E,b,C){const R=o.consts,N=yl(o,s,4,E||null,Wi(R,b));_l(o,u,N,Wi(R,C)),eu(o,N);const U=N.tViews=pp(2,N,c,h,m,o.directiveRegistry,o.pipeRegistry,null,o.schemas,R);return null!==o.queries&&(o.queries.template(o,N),U.queries=o.queries.embeddedTView(N)),N}(N,R,C,o,u,c,h,m,E):R.data[N];ei(U,!1);const X=C[11].createComment("");bm(R,C,X,U),ut(X,C),Ch(C,C[N]=Hm(X,C,X,U)),$n(U)&&Vm(R,C,U),null!=E&&Cv(C,U,b)}function Il(s){return function Ts(s,o){return s[o]}(function uc(){return Rt.lFrame.contextLView}(),20+s)}function mo(s,o=mt.Default){const u=xe();return null===u?B(s,o):iu(Rn(),u,oe(s),o)}function cy(){throw new Error("invalid")}function le(s,o,u){const c=xe();return Di(c,zi(),o)&&Vs(Jt(),Ln(),c,s,o,c[11],u,!1),le}function Lh(s,o,u,c,h){const E=h?"class":"style";Ov(s,u,o.inputs[E],E,c)}function Qv(s,o,u,c){const h=xe(),m=Jt(),E=20+s,b=h[11],C=h[E]=ov(b,o,function Qu(){return Rt.lFrame.currentNamespace}()),R=m.firstCreatePass?function Uo(s,o,u,c,h,m,E){const b=o.consts,R=yl(o,s,2,h,Wi(b,m));return _l(o,u,R,Wi(b,E)),null!==R.attrs&&Zm(R,R.attrs,!1),null!==R.mergedAttrs&&Zm(R,R.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,R),R}(E,m,h,0,o,u,c):m.data[E];ei(R,!0);const N=R.mergedAttrs;null!==N&&Ec(b,C,N);const U=R.classes;null!==U&&Fs(b,C,U);const X=R.styles;null!==X&&ho(b,C,X),64!=(64&R.flags)&&bm(m,h,C,R),0===function Jr(){return Rt.lFrame.elementDepthCount}()&&ut(C,h),function ta(){Rt.lFrame.elementDepthCount++}(),$n(R)&&(Vm(m,h,R),function Ob(s,o,u){if(Fd(o)){const h=o.directiveEnd;for(let m=o.directiveStart;m<h;m++){const E=s.data[m];E.contentQueries&&E.contentQueries(1,u[m],m)}}}(m,R,h)),null!==c&&Cv(h,R)}function ed(){let s=Rn();io()?function Ya(){Rt.lFrame.isParent=!1}():(s=s.parent,ei(s,!1));const o=s;!function Gu(){Rt.lFrame.elementDepthCount--}();const u=Jt();u.firstCreatePass&&(eu(u,s),Fd(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Ju(s){return 0!=(16&s.flags)}(o)&&Lh(u,o,xe(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Qg(s){return 0!=(32&s.flags)}(o)&&Lh(u,o,xe(),o.stylesWithoutHost,!1)}function Su(s,o,u,c){Qv(s,o,u,c),ed()}function mI(){return xe()}function Fi(s){return!!s&&"function"==typeof s.then}function Jv(s){return!!s&&"function"==typeof s.subscribe}const Cl=Jv;function hy(s,o,u,c){const h=xe(),m=Jt(),E=Rn();return function yi(s,o,u,c,h,m,E,b){const C=$n(c),N=s.firstCreatePass&&Km(s),U=o[8],X=vl(o);let te=!0;if(3&c.type||b){const ke=qn(c,o),pt=b?b(ke):ke,Ae=X.length,rt=b?nn=>b(Gn(nn[c.index])):c.index;if(On(u)){let nn=null;if(!b&&C&&(nn=function fy(s,o,u,c){const h=s.cleanup;if(null!=h)for(let m=0;m<h.length-1;m+=2){const E=h[m];if(E===u&&h[m+1]===c){const b=o[7],C=h[m+2];return b.length>C?b[C]:null}"string"==typeof E&&(m+=2)}return null}(s,o,h,c.index)),null!==nn)(nn.__ngLastListenerFn__||nn).__ngNextListenerFn__=m,nn.__ngLastListenerFn__=m,te=!1;else{m=py(c,o,U,m,!1);const Mn=u.listen(pt,h,m);X.push(m,Mn),N&&N.push(h,rt,Ae,Ae+1)}}else m=py(c,o,U,m,!0),pt.addEventListener(h,m,E),X.push(m),N&&N.push(h,rt,Ae,E)}else m=py(c,o,U,m,!1);const Ce=c.outputs;let Ge;if(te&&null!==Ce&&(Ge=Ce[h])){const ke=Ge.length;if(ke)for(let pt=0;pt<ke;pt+=2){const qs=o[Ge[pt]][Ge[pt+1]].subscribe(m),Gl=X.length;X.push(m,qs),N&&N.push(h,c.index,Gl,-(Gl+1))}}}(m,h,h[11],E,s,o,!!u,c),hy}function Fn(s,o,u,c){try{return!1!==u(c)}catch(h){return Zb(s,h),!1}}function py(s,o,u,c,h){return function m(E){if(E===Function)return c;const b=2&s.flags?wi(s.index,o):o;0==(32&o[2])&&Th(b);let C=Fn(o,0,c,E),R=m.__ngNextListenerFn__;for(;R;)C=Fn(o,0,R,E)&&C,R=R.__ngNextListenerFn__;return h&&!1===C&&(E.preventDefault(),E.returnValue=!1),C}}function eE(s,o,u){return Ta(s,"",o,"",u),eE}function Ta(s,o,u,c,h){const m=xe(),E=Yc(m,o,u,c);return E!==jt&&Vs(Jt(),Ln(),m,s,E,m[11],h,!1),Ta}function Pp(s,o,u,c,h){const m=s[u+1],E=null===o;let b=c?ps(m):ba(m),C=!1;for(;0!==b&&(!1===C||E);){const N=s[b+1];nd(s[b],o)&&(C=!0,s[b+1]=c?gi(N):gv(N)),b=c?ps(N):ba(N)}C&&(s[u+1]=c?gv(m):gi(m))}function nd(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&ti(s,o)>=0}function _y(s,o){return function jo(s,o,u,c){const h=xe(),m=Jt(),E=function Ss(s){const o=Rt.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}(2);m.firstUpdatePass&&function CI(s,o,u,c){const h=s.data;if(null===h[u+1]){const m=h[Nr()],E=function Rl(s,o){return o>=s.expandoStartIndex}(s,u);(function AI(s,o){return 0!=(s.flags&(o?16:32))})(m,c)&&null===o&&!E&&(o=!1),o=function Fp(s,o,u,c){const h=function so(s){const o=Rt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let m=c?o.residualClasses:o.residualStyles;if(null===h)0===(c?o.classBindings:o.styleBindings)&&(u=Fr(u=wy(null,s,o,u,c),o.attrs,c),m=null);else{const E=o.directiveStylingLast;if(-1===E||s[E]!==h)if(u=wy(h,s,o,u,c),null===m){let C=function vy(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==ba(c))return s[ps(c)]}(s,o,c);void 0!==C&&Array.isArray(C)&&(C=wy(null,s,o,C[1],c),C=Fr(C,o.attrs,c),function Ey(s,o,u,c){s[ps(u?o.classBindings:o.styleBindings)]=c}(s,o,c,C))}else m=function TI(s,o,u){let c;const h=o.directiveEnd;for(let m=1+o.directiveStylingLast;m<h;m++)c=Fr(c,s[m].hostAttrs,u);return Fr(c,o.attrs,u)}(s,o,c)}return void 0!==m&&(c?o.residualClasses=m:o.residualStyles=m),u}(h,m,o,c),function _I(s,o,u,c,h,m){let E=m?o.classBindings:o.styleBindings,b=ps(E),C=ba(E);s[c]=u;let N,R=!1;if(Array.isArray(u)){const U=u;N=U[1],(null===N||ti(U,N)>0)&&(R=!0)}else N=u;if(h)if(0!==C){const X=ps(s[b+1]);s[c+1]=ri(X,b),0!==X&&(s[X+1]=ap(s[X+1],c)),s[b+1]=function ml(s,o){return 131071&s|o<<17}(s[b+1],c)}else s[c+1]=ri(b,0),0!==b&&(s[b+1]=ap(s[b+1],c)),b=c;else s[c+1]=ri(C,0),0===b?b=c:s[C+1]=ap(s[C+1],c),C=c;R&&(s[c+1]=gv(s[c+1])),Pp(s,N,c,!0),Pp(s,N,c,!1),function Dl(s,o,u,c,h){const m=h?s.residualClasses:s.residualStyles;null!=m&&"string"==typeof o&&ti(m,o)>=0&&(u[c+1]=gi(u[c+1]))}(o,N,s,c,m),E=ri(b,C),m?o.classBindings=E:o.styleBindings=E}(h,m,o,u,E,c)}}(m,s,E,c),o!==jt&&Di(h,E,o)&&function iE(s,o,u,c,h,m,E,b){if(!(3&o.type))return;const C=s.data,R=C[b+1];by(function mv(s){return 1==(1&s)}(R)?SI(C,o,u,h,ba(R),E):void 0)||(by(m)||function pi(s){return 2==(2&s)}(R)&&(m=SI(C,null,u,h,b,E)),function Xi(s,o,u,c,h){const m=On(s);if(o)h?m?s.addClass(u,c):u.classList.add(c):m?s.removeClass(u,c):u.classList.remove(c);else{let E=-1===c.indexOf("-")?void 0:wa.DashCase;if(null==h)m?s.removeStyle(u,c,E):u.style.removeProperty(c);else{const b="string"==typeof h&&h.endsWith("!important");b&&(h=h.slice(0,-10),E|=wa.Important),m?s.setStyle(u,c,h,E):u.style.setProperty(c,h,b?"important":"")}}}(c,E,Mi(Nr(),u),h,m))}(m,m.data[Nr()],h,h[11],s,h[E+1]=function QS(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=se(lo(s)))),s}(o,u),c,E)}(s,o,null,!0),_y}function wy(s,o,u,c,h){let m=null;const E=u.directiveEnd;let b=u.directiveStylingLast;for(-1===b?b=u.directiveStart:b++;b<E&&(m=o[b],c=Fr(c,m.hostAttrs,h),m!==s);)b++;return null!==s&&(u.directiveStylingLast=b),c}function Fr(s,o,u){const c=u?1:2;let h=-1;if(null!==o)for(let m=0;m<o.length;m++){const E=o[m];"number"==typeof E?h=E:h===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Tt(s,E,!!u||o[++m]))}return void 0===s?null:s}function SI(s,o,u,c,h,m){const E=null===o;let b;for(;h>0;){const C=s[h],R=Array.isArray(C),N=R?C[1]:C,U=null===N;let X=u[h+1];X===jt&&(X=U?_t:void 0);let te=U?du(X,c):N===c?X:void 0;if(R&&!by(te)&&(te=du(C,c)),by(te)&&(b=te,E))return b;const Ce=s[h+1];h=E?ps(Ce):ba(Ce)}if(null!==o){let C=m?o.residualClasses:o.residualStyles;null!=C&&(b=du(C,c))}return b}function by(s){return void 0!==s}function Ru(s,o=""){const u=xe(),c=Jt(),h=s+20,m=c.firstCreatePass?yl(c,h,1,o,null):c.data[h],E=u[h]=function sv(s,o){return On(s)?s.createText(o):s.createTextNode(o)}(u[11],o);bm(c,u,E,m),ei(m,!1)}function xl(s){return sE("",s,""),xl}function sE(s,o,u){const c=xe(),h=Yc(c,s,o,u);return h!==jt&&Ia(c,Nr(),h),sE}const xn=void 0;var Ay=["en",[["a","p"],["AM","PM"],xn],[["AM","PM"],xn,xn],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],xn,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],xn,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",xn,"{1} 'at' {0}",xn],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Sy(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let ad={};function ud(s){const o=function VI(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=ld(o);if(u)return u;const c=o.split("-")[0];if(u=ld(c),u)return u;if("en"===c)return Ay;throw new Error(`Missing locale data for the locale "${s}".`)}function yE(s){return ud(s)[xt.PluralCase]}function ld(s){return s in ad||(ad[s]=Ct.ng&&Ct.ng.common&&Ct.ng.common.locales&&Ct.ng.common.locales[s]),ad[s]}var xt=(()=>((xt=xt||{})[xt.LocaleId=0]="LocaleId",xt[xt.DayPeriodsFormat=1]="DayPeriodsFormat",xt[xt.DayPeriodsStandalone=2]="DayPeriodsStandalone",xt[xt.DaysFormat=3]="DaysFormat",xt[xt.DaysStandalone=4]="DaysStandalone",xt[xt.MonthsFormat=5]="MonthsFormat",xt[xt.MonthsStandalone=6]="MonthsStandalone",xt[xt.Eras=7]="Eras",xt[xt.FirstDayOfWeek=8]="FirstDayOfWeek",xt[xt.WeekendRange=9]="WeekendRange",xt[xt.DateFormat=10]="DateFormat",xt[xt.TimeFormat=11]="TimeFormat",xt[xt.DateTimeFormat=12]="DateTimeFormat",xt[xt.NumberSymbols=13]="NumberSymbols",xt[xt.NumberFormats=14]="NumberFormats",xt[xt.CurrencyCode=15]="CurrencyCode",xt[xt.CurrencySymbol=16]="CurrencySymbol",xt[xt.CurrencyName=17]="CurrencyName",xt[xt.Currencies=18]="Currencies",xt[xt.Directionality=19]="Directionality",xt[xt.PluralCase=20]="PluralCase",xt[xt.ExtraData=21]="ExtraData",xt))();const qh="en-US";let xu=qh;function ky(s,o,u,c,h){if(s=oe(s),Array.isArray(s))for(let m=0;m<s.length;m++)ky(s[m],o,u,c,h);else{const m=Jt(),E=xe();let b=Ah(s)?s:oe(s.provide),C=Tu(s);const R=Rn(),N=1048575&R.providerIndexes,U=R.directiveStart,X=R.providerIndexes>>20;if(Ah(s)||!s.multi){const te=new sr(C,h,mo),Ce=Wr(b,o,h?N:N+X,U);-1===Ce?(oo(ru(R,E),m,b),DE(m,s,o.length),o.push(b),R.directiveStart++,R.directiveEnd++,h&&(R.providerIndexes+=1048576),u.push(te),E.push(te)):(u[Ce]=te,E[Ce]=te)}else{const te=Wr(b,o,N+X,U),Ce=Wr(b,o,N,N+X),Ge=te>=0&&u[te],ke=Ce>=0&&u[Ce];if(h&&!ke||!h&&!Ge){oo(ru(R,E),m,b);const pt=function Fl(s,o,u,c,h){const m=new sr(s,u,mo);return m.multi=[],m.index=o,m.componentProviders=0,Fy(m,h,c&&!u),m}(h?AE:SE,u.length,h,c,C);!h&&ke&&(u[Ce].providerFactory=pt),DE(m,s,o.length,0),o.push(b),R.directiveStart++,R.directiveEnd++,h&&(R.providerIndexes+=1048576),u.push(pt),E.push(pt)}else DE(m,s,te>-1?te:Ce,Fy(u[h?Ce:te],C,!h&&c));!h&&c&&ke&&u[Ce].componentProviders++}}}function DE(s,o,u,c){const h=Ah(o),m=function AS(s){return!!s.useClass}(o);if(h||m){const C=(m?oe(o.useClass):o).prototype.ngOnDestroy;if(C){const R=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const N=R.indexOf(u);-1===N?R.push(u,[c,C]):R[N+1].push(c,C)}else R.push(u,C)}}}function Fy(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function Wr(s,o,u,c){for(let h=u;h<c;h++)if(o[h]===s)return h;return-1}function SE(s,o,u,c){return Gp(this.multi,[])}function AE(s,o,u,c){const h=this.multi;let m;if(this.providerFactory){const E=this.providerFactory.componentProviders,b=Pi(u,u[1],this.providerFactory.index,c);m=b.slice(0,E),Gp(h,m);for(let C=E;C<b.length;C++)m.push(b[C])}else m=[],Gp(h,m);return m}function Gp(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function RE(s,o=[]){return u=>{u.providersResolver=(c,h)=>function uC(s,o,u){const c=Jt();if(c.firstCreatePass){const h=qi(s);ky(u,c.data,c.blueprint,h,!0),ky(o,c.data,c.blueprint,h,!1)}}(c,h?h(s):s,o)}}class xE{}class hd{resolveComponentFactory(o){throw function Ly(s){const o=Error(`No component factory found for ${se(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Nu=(()=>{class s{}return s.NULL=new hd,s})();function lC(){return Vl(Rn(),xe())}function Vl(s,o){return new fd(qn(s,o))}let fd=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=lC,s})();function cC(s){return s instanceof fd?s.nativeElement:s}class dC{}let hC=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function Vy(){const s=xe(),u=wi(Rn().index,s);return function fC(s){return s[11]}(Hi(u)?u:s)}(),s})(),qp=(()=>{class s{}return s.\u0275prov=mn({token:s,providedIn:"root",factory:()=>null}),s})();class Ul{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const pC=new Ul("13.1.3"),Uy={};function By(s,o,u,c,h=!1){for(;null!==u;){const m=o[u.index];if(null!==m&&c.push(Gn(m)),Gi(m))for(let b=10;b<m.length;b++){const C=m[b],R=C[1].firstChild;null!==R&&By(C[1],C,R,c)}const E=u.type;if(8&E)By(s,o,u.child,c);else if(32&E){const b=nv(u,o);let C;for(;C=b();)c.push(C)}else if(16&E){const b=Cm(o,u);if(Array.isArray(b))c.push(...b);else{const C=Vc(o[16]);By(C[1],C,b,c,!0)}}u=h?u.projectionNext:u.next}return c}class Wp{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return By(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Gi(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(lv(o,c),pa(u,c))}this._attachedToViewContainer=!1}db(this._lView[1],this._lView)}onDestroy(o){Vb(this._lView[1],this._lView,null,o)}markForCheck(){Th(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Wm(this._lView[1],this._lView,this.context)}checkNoChanges(){!function TS(s,o,u){ra(!0);try{Wm(s,o,u)}finally{ra(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Ve(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function cS(s,o){ip(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Ve(902,"");this._appRef=o}}class AA extends Wp{constructor(o){super(o),this._view=o}detectChanges(){Nv(this._view)}checkNoChanges(){!function vp(s){ra(!0);try{Nv(s)}finally{ra(!1)}}(this._view)}get context(){return null}}class Xh extends Nu{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=st(o);return new ME(u,this.ngModule)}}function Bl(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}const gC=new vn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>sb});class ME extends xE{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function op(s){return s.map(Am).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return Bl(this.componentDef.inputs)}get outputs(){return Bl(this.componentDef.outputs)}create(o,u,c,h){const m=(h=h||this.ngModule)?function RA(s,o){return{get:(u,c,h)=>{const m=s.get(u,Uy,h);return m!==Uy||c===Uy?m:o.get(u,c,h)}}}(o,h.injector):o,E=m.get(dC,ci),b=m.get(qp,null),C=E.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",N=c?function Dv(s,o,u){if(On(s))return s.selectRootElement(o,u===Qt.ShadowDom);let c="string"==typeof o?s.querySelector(o):o;return c.textContent="",c}(C,c,this.componentDef.encapsulation):ov(E.createRenderer(null,this.componentDef),R,function pd(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(R)),U=this.componentDef.onPush?576:528,X=function Ca(s,o){return{components:[],scheduler:s||sb,clean:Ep,playerHandler:o||null,flags:0}}(),te=pp(0,null,null,1,0,null,null,null,null,null),Ce=jc(null,te,X,U,null,null,E,C,b,m);let Ge,ke;Zu(Ce);try{const pt=function Tp(s,o,u,c,h,m){const E=u[1];u[20]=s;const C=yl(E,20,2,"#host",null),R=C.mergedAttrs=o.hostAttrs;null!==R&&(Zm(C,R,!0),null!==s&&(Ec(h,s,R),null!==C.classes&&Fs(h,s,C.classes),null!==C.styles&&ho(h,s,C.styles)));const N=c.createRenderer(s,o),U=jc(u,kb(o),null,o.onPush?64:16,u[20],C,c,N,m||null,null);return E.firstCreatePass&&(oo(ru(C,u),E,o.type),bh(E,C),Av(C,u.length,1)),Ch(u,U),u[20]=U}(N,this.componentDef,Ce,E,C);if(N)if(c)Ec(C,N,["ng-version",pC.full]);else{const{attrs:Ae,classes:rt}=function fS(s){const o=[],u=[];let c=1,h=2;for(;c<s.length;){let m=s[c];if("string"==typeof m)2===h?""!==m&&o.push(m,s[++c]):8===h&&u.push(m);else{if(!Ls(h))break;h=m}c++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);Ae&&Ec(C,N,Ae),rt&&rt.length>0&&Fs(C,N,rt.join(" "))}if(ke=Cs(te,20),void 0!==u){const Ae=ke.projection=[];for(let rt=0;rt<this.ngContentSelectors.length;rt++){const nn=u[rt];Ae.push(null!=nn?Array.from(nn):null)}}Ge=function Hv(s,o,u,c,h){const m=u[1],E=function bS(s,o,u){const c=Rn();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),Ih(s,c,o,mr(s,o,1,null),u));const h=Pi(o,s,c.directiveStart,c);ut(h,o);const m=qn(c,o);return m&&ut(m,o),h}(m,u,o);if(c.components.push(E),s[8]=E,h&&h.forEach(C=>C(E,o)),o.contentQueries){const C=Rn();o.contentQueries(1,E,C.directiveStart)}const b=Rn();return!m.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Pr(b.index),jb(u[1],b,0,b.directiveStart,b.directiveEnd,o),yp(o,E)),E}(pt,this.componentDef,Ce,X,[sI]),Or(te,Ce,null)}finally{sa()}return new xA(this.componentType,Ge,Vl(ke,Ce),Ce,ke)}}class xA extends class DA{}{constructor(o,u,c,h,m){super(),this.location=c,this._rootLView=h,this._tNode=m,this.instance=u,this.hostView=this.changeDetectorRef=new AA(h),this.componentType=o}get injector(){return new Hn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Ra{}class zp{}const xa=new Map;class FE extends Ra{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Xh(this);const c=ht(o);this._bootstrapComponents=vu(c.bootstrap),this._r3Injector=Qb(o,u,[{provide:Ra,useValue:this},{provide:Nu,useValue:this.componentFactoryResolver}],se(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,u=Us.THROW_IF_NOT_FOUND,c=mt.Default){return o===Us||o===Ra||o===Dh?this:this._r3Injector.get(o,u,c)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Ma extends zp{constructor(o){super(),this.moduleType=o,null!==ht(o)&&function ms(s){const o=new Set;!function u(c){const h=ht(c,!0),m=h.id;null!==m&&(function OE(s,o,u){if(o&&o!==u)throw new Error(`Duplicate module registered for ${s} - ${se(o)} vs ${se(o.name)}`)}(m,xa.get(m),c),xa.set(m,c));const E=vu(h.imports);for(const b of E)o.has(b)||(o.add(b),u(b))}(s)}(o)}create(o){return new FE(this.moduleType,o)}}function UE(s){return o=>{setTimeout(s,void 0,o)}}const _o=class VA extends f.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){var h,m,E;let b=o,C=u||(()=>null),R=c;if(o&&"object"==typeof o){const U=o;b=null===(h=U.next)||void 0===h?void 0:h.bind(U),C=null===(m=U.error)||void 0===m?void 0:m.bind(U),R=null===(E=U.complete)||void 0===E?void 0:E.bind(U)}this.__isAsync&&(C=UE(C),b&&(b=UE(b)),R&&(R=UE(R)));const N=super.subscribe({next:b,error:C,complete:R});return o instanceof G.w0&&o.add(N),N}};function vi(){return this._results[Kc()]()}class BE{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Kc(),c=BE.prototype;c[u]||(c[u]=vi)}get changes(){return this._changes||(this._changes=new _o)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const h=Ii(o);(this._changesDetected=!function Tc(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let h=s[c],m=o[c];if(u&&(h=u(h),m=u(m)),m!==h)return!1}return!0}(c._results,h,u))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Xp=(()=>{class s{}return s.__NG_ELEMENT_ID__=TC,s})();const UA=Xp,BA=class extends UA{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o){const u=this._declarationTContainer.tViews,c=jc(this._declarationLView,u,o,16,null,u.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(c[19]=m.createEmbeddedView(u)),Or(u,c,o),new Wp(c)}};function TC(){return jy(Rn(),xe())}function jy(s,o){return 4&s.type?new BA(o,s,Vl(s,o)):null}let yd=(()=>{class s{}return s.__NG_ELEMENT_ID__=jA,s})();function jA(){return Jp(Rn(),xe())}const DC=yd,$y=class extends DC{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return Vl(this._hostTNode,this._hostLView)}get injector(){return new Hn(this._hostTNode,this._hostLView)}get parentInjector(){const o=Zn(this._hostTNode,this._hostLView);if(di(o)){const u=tu(o,this._hostLView),c=Wn(o);return new Hn(u[1].data[c+8],u)}return new Hn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=Hy(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){const h=o.createEmbeddedView(u||{});return this.insert(h,c),h}createComponent(o,u,c,h,m){const E=o&&!function fa(s){return"function"==typeof s}(o);let b;if(E)b=u;else{const U=u||{};b=U.index,c=U.injector,h=U.projectableNodes,m=U.ngModuleRef}const C=E?o:new ME(st(o)),R=c||this.parentInjector;if(!m&&null==C.ngModule&&R){const U=R.get(Ra,null);U&&(m=U)}const N=C.create(R,h,void 0,m);return this.insert(N.hostView,b),N}insert(o,u){const c=o._lView,h=c[1];if(function no(s){return Gi(s[3])}(c)){const N=this.indexOf(o);if(-1!==N)this.detach(N);else{const U=c[3],X=new $y(U,U[6],U[3]);X.detach(X.indexOf(o))}}const m=this._adjustIndex(u),E=this._lContainer;!function av(s,o,u,c){const h=10+c,m=u.length;c>0&&(u[h-1][4]=o),c<m-10?(o[4]=u[h],th(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const E=o[17];null!==E&&u!==E&&function uv(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(E,o);const b=o[19];null!==b&&b.insertView(s),o[2]|=128}(h,c,E,m);const b=hv(m,E),C=c[11],R=vm(C,E[7]);return null!==R&&function Qi(s,o,u,c,h,m){c[0]=h,c[6]=o,ip(s,c,u,1,h,m)}(h,E[6],C,c,R,b),o.attachToViewContainerRef(),th(_d(E),m,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=Hy(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=lv(this._lContainer,u);c&&(pa(_d(this._lContainer),u),db(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=lv(this._lContainer,u);return c&&null!=pa(_d(this._lContainer),u)?new Wp(c):null}_adjustIndex(o,u=0){return null==o?this.length+u:o}};function Hy(s){return s[8]}function _d(s){return s[8]||(s[8]=[])}function Jp(s,o){let u;const c=o[s.index];if(Gi(c))u=c;else{let h;if(8&s.type)h=Gn(c);else{const m=o[11];h=m.createComment("");const E=qn(s,o);vh(m,vm(m,E),h,function Em(s,o){return On(s)?s.nextSibling(o):o.nextSibling}(m,E),!1)}o[s.index]=u=Hm(c,o,h,s),Ch(o,u)}return new $y(u,s,o)}class HE{constructor(o){this.queryList=o,this.matches=null}clone(){return new HE(this.queryList)}setDirty(){this.queryList.setDirty()}}class Gy{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,h=[];for(let m=0;m<c;m++){const E=u.getByIndex(m);h.push(this.queries[E.indexInDeclarationView].clone())}return new Gy(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==Ky(o,u).matches&&this.queries[u].setDirty()}}class GE{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class eg{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const h=null!==u?u.length:0,m=this.getByIndex(c).embeddedTView(o,h);m&&(m.indexInDeclarationView=c,null!==u?u.push(m):u=[m])}return null!==u?new eg(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class qE{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new qE(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const m=c[h];this.matchTNodeWithReadOption(o,u,SC(u,m)),this.matchTNodeWithReadOption(o,u,Ao(u,o,m,!1,!1))}else c===Xp?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,Ao(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===fd||h===yd||h===Xp&&4&u.type)this.addMatch(u.index,-2);else{const m=Ao(u,o,h,!1,!1);null!==m&&this.addMatch(u.index,m)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function SC(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function AC(s,o,u,c){return-1===u?function HA(s,o){return 11&s.type?Vl(s,o):4&s.type?jy(s,o):null}(o,s):-2===u?function GA(s,o,u){return u===fd?Vl(o,s):u===Xp?jy(o,s):u===yd?Jp(o,s):void 0}(s,o,c):Pi(s,s[1],u,o)}function vd(s,o,u,c){const h=o[19].queries[c];if(null===h.matches){const m=s.data,E=u.matches,b=[];for(let C=0;C<E.length;C+=2){const R=E[C];b.push(R<0?null:AC(o,m[R],E[C+1],u.metadata.read))}h.matches=b}return h.matches}function $l(s,o,u,c){const h=s.queries.getByIndex(u),m=h.matches;if(null!==m){const E=vd(s,o,h,u);for(let b=0;b<m.length;b+=2){const C=m[b];if(C>0)c.push(E[b/2]);else{const R=m[b+1],N=o[-C];for(let U=10;U<N.length;U++){const X=N[U];X[17]===X[3]&&$l(X[1],X,R,c)}if(null!==N[9]){const U=N[9];for(let X=0;X<U.length;X++){const te=U[X];$l(te[1],te,R,c)}}}}}return c}function qy(s){const o=xe(),u=Jt(),c=dc();So(c+1);const h=Ky(u,c);if(s.dirty&&Dr(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const m=h.crossesNgTemplate?$l(u,o,c,[]):vd(u,o,h,c);s.reset(m,cC),s.notifyOnChanges()}return!0}return!1}function WE(s,o,u,c){const h=Jt();if(h.firstCreatePass){const m=Rn();(function zy(s,o,u){null===s.queries&&(s.queries=new eg),s.queries.track(new qE(o,u))})(h,new GE(o,u,c),m.index),function qA(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(h,s),2==(2&u)&&(h.staticContentQueries=!0)}!function xC(s,o,u){const c=new BE(4==(4&u));Vb(s,o,c,c.destroy),null===o[19]&&(o[19]=new Gy),o[19].queries.push(new HE(c))}(h,xe(),u)}function zE(){return function RC(s,o){return s[19].queries[o].queryList}(xe(),dc())}function Ky(s,o){return s.queries.getByIndex(o)}function rf(...s){}const og=new vn("Application Initializer");let sf=(()=>{class s{constructor(u){this.appInits=u,this.resolve=rf,this.reject=rf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const m=this.appInits[h]();if(Fi(m))u.push(m);else if(Cl(m)){const E=new Promise((b,C)=>{m.subscribe({complete:b,error:C})});u.push(E)}}Promise.all(u).then(()=>{c()}).catch(h=>{this.reject(h)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(B(og,8))},s.\u0275prov=mn({token:s,factory:s.\u0275fac}),s})();const r_=new vn("AppId"),uw={provide:r_,useFactory:function XA(){return`${i_()}${i_()}${i_()}`},deps:[]};function i_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const s_=new vn("Platform Initializer"),o_=new vn("Platform ID"),a_=new vn("appBootstrapListener");let Pu=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=mn({token:s,factory:s.\u0275fac}),s})();const af=new vn("LocaleId"),Id=new vn("DefaultCurrencyCode");class eR{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let lw=(()=>{class s{compileModuleSync(u){return new Ma(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),m=vu(ht(u).declarations).reduce((E,b)=>{const C=st(b);return C&&E.push(new ME(C)),E},[]);return new eR(c,m)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=mn({token:s,factory:s.\u0275fac}),s})();const dw=(()=>Promise.resolve(0))();function cg(s){"undefined"==typeof Zone?dw.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class $s{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new _o(!1),this.onMicrotaskEmpty=new _o(!1),this.onStable=new _o(!1),this.onError=new _o(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&u,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function tR(){let s=Ct.requestAnimationFrame,o=Ct.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function GC(s){const o=()=>{!function nR(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Ct,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,fw(s),s.isCheckStableRunning=!0,dg(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),fw(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,h,m,E,b)=>{try{return pw(s),u.invokeTask(h,m,E,b)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||s.shouldCoalesceRunChangeDetection)&&o(),gw(s)}},onInvoke:(u,c,h,m,E,b,C)=>{try{return pw(s),u.invoke(h,m,E,b,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),gw(s)}},onHasTask:(u,c,h,m)=>{u.hasTask(h,m),c===h&&("microTask"==m.change?(s._hasPendingMicrotasks=m.microTask,fw(s),dg(s)):"macroTask"==m.change&&(s.hasPendingMacrotasks=m.macroTask))},onHandleError:(u,c,h,m)=>(u.handleError(h,m),s.runOutsideAngular(()=>s.onError.emit(m)),!1)})}(h)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!$s.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if($s.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,h){const m=this._inner,E=m.scheduleEventTask("NgZoneEvent: "+h,o,hw,rf,rf);try{return m.runTask(E,u,c)}finally{m.cancelTask(E)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const hw={};function dg(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function fw(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function pw(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function gw(s){s._nesting--,dg(s)}class qC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new _o,this.onMicrotaskEmpty=new _o,this.onStable=new _o,this.onError=new _o}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,h){return o.apply(u,c)}}let mw=(()=>{class s{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{$s.assertNotInAngularZone(),cg(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())cg(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,h){let m=-1;c&&c>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(E=>E.timeoutId!==m),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:m,updateCb:h})}whenStable(u,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,c,h){return[]}}return s.\u0275fac=function(u){return new(u||s)(B($s))},s.\u0275prov=mn({token:s,factory:s.\u0275fac}),s})(),WC=(()=>{class s{constructor(){this._applications=new Map,yw.addToWindow(this)}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return yw.findTestabilityInTree(this,u,c)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=mn({token:s,factory:s.\u0275fac}),s})();class rR{addToWindow(o){}findTestabilityInTree(o,u,c){return null}}function iR(s){yw=s}let Hs,yw=new rR;const u_=new vn("AllowMultipleToken");class oR{constructor(o,u){this.name=o,this.token=u}}function Ew(s,o,u=[]){const c=`Platform: ${o}`,h=new vn(c);return(m=[])=>{let E=KC();if(!E||E.injector.get(u_,!1))if(s)s(u.concat(m).concat({provide:h,useValue:!0}));else{const b=u.concat(m).concat({provide:h,useValue:!0},{provide:Kn,useValue:"platform"});!function vw(s){if(Hs&&!Hs.destroyed&&!Hs.injector.get(u_,!1))throw new Ve(400,"");Hs=s.get(l_);const o=s.get(s_,null);o&&o.forEach(u=>u())}(Us.create({providers:b,name:c}))}return function ww(s){const o=KC();if(!o)throw new Ve(401,"");return o}()}}function KC(){return Hs&&!Hs.destroyed?Hs:null}let l_=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const b=function uR(s,o){let u;return u="noop"===s?new qC:("zone.js"===s?void 0:s)||new $s({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),u}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),C=[{provide:$s,useValue:b}];return b.run(()=>{const R=Us.create({providers:C,parent:this.injector,name:u.moduleType.name}),N=u.create(R),U=N.injector.get(np,null);if(!U)throw new Ve(402,"");return b.runOutsideAngular(()=>{const X=b.onError.subscribe({next:te=>{U.handleError(te)}});N.onDestroy(()=>{Iw(this._modules,N),X.unsubscribe()})}),function bw(s,o,u){try{const c=u();return Fi(c)?c.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(U,b,()=>{const X=N.injector.get(sf);return X.runInitializers(),X.donePromise.then(()=>(function rA(s){ct(s,"Expected localeId to be defined"),"string"==typeof s&&(xu=s.toLowerCase().replace(/_/g,"-"))}(N.injector.get(af,qh)||qh),this._moduleDoBootstrap(N),N))})})}bootstrapModule(u,c=[]){const h=ZC({},c);return function _w(s,o,u){const c=new Ma(u);return Promise.resolve(c)}(0,0,u).then(m=>this.bootstrapModuleFactory(m,h))}_moduleDoBootstrap(u){const c=u.injector.get(Cd);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!u.instance.ngDoBootstrap)throw new Ve(403,"");u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ve(404,"");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(B(Us))},s.\u0275prov=mn({token:s,factory:s.\u0275fac}),s})();function ZC(s,o){return Array.isArray(o)?o.reduce(ZC,s):Object.assign(Object.assign({},s),o)}let Cd=(()=>{class s{constructor(u,c,h,m,E){this._zone=u,this._injector=c,this._exceptionHandler=h,this._componentFactoryResolver=m,this._initStatus=E,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const b=new k.y(R=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{R.next(this._stable),R.complete()})}),C=new k.y(R=>{let N;this._zone.runOutsideAngular(()=>{N=this._zone.onStable.subscribe(()=>{$s.assertNotInAngularZone(),cg(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,R.next(!0))})})});const U=this._zone.onUnstable.subscribe(()=>{$s.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{R.next(!1)}))});return()=>{N.unsubscribe(),U.unsubscribe()}});this.isStable=(0,ie.T)(b,C.pipe((0,de.B)()))}bootstrap(u,c){if(!this._initStatus.done)throw new Ve(405,"");let h;h=u instanceof xE?u:this._componentFactoryResolver.resolveComponentFactory(u),this.componentTypes.push(h.componentType);const m=function sR(s){return s.isBoundToModule}(h)?void 0:this._injector.get(Ra),b=h.create(Us.NULL,[],c||h.selector,m),C=b.location.nativeElement,R=b.injector.get(mw,null),N=R&&b.injector.get(WC);return R&&N&&N.registerApplication(C,R),b.onDestroy(()=>{this.detachView(b.hostView),Iw(this.components,b),N&&N.unregisterApplication(C)}),this._loadComponent(b),b}tick(){if(this._runningTick)throw new Ve(101,"");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;Iw(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(a_,[]).concat(this._bootstrapListeners).forEach(h=>h(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(u){return new(u||s)(B($s),B(Us),B(np),B(Nu),B(sf))},s.\u0275prov=mn({token:s,factory:s.\u0275fac}),s})();function Iw(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let d_=!0,Td=!1;function YC(){return Td=!0,d_}function Tw(){if(Td)throw new Error("Cannot enable prod mode after platform setup.");d_=!1}let Dw=(()=>{class s{}return s.__NG_ELEMENT_ID__=lR,s})();function lR(s){return function Sw(s,o,u){if(Ld(s)&&!u){const c=wi(s.index,o);return new Wp(c,c)}return 47&s.type?new Wp(o[16],o):null}(Rn(),xe(),16==(16&s))}class kw{constructor(){}supports(o){return Zc(o)}create(o){return new p_(o)}}const nT=(s,o)=>o;class p_{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||nT}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,h=0,m=null;for(;u||c;){const E=!c||u&&u.currentIndex<Lw(c,h,m)?u:c,b=Lw(E,h,m),C=E.currentIndex;if(E===c)h--,c=c._nextRemoved;else if(u=u._next,null==E.previousIndex)h++;else{m||(m=[]);const R=b-h,N=C-h;if(R!=N){for(let X=0;X<R;X++){const te=X<m.length?m[X]:m[X]=0,Ce=te+X;N<=Ce&&Ce<R&&(m[X]=te+1)}m[E.previousIndex]=N-R}}b!==C&&o(E,b,C)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!Zc(o))throw new Ve(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,m,E,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let b=0;b<this.length;b++)m=o[b],E=this._trackByFn(b,m),null!==u&&Object.is(u.trackById,E)?(c&&(u=this._verifyReinsertion(u,m,E,b)),Object.is(u.item,m)||this._addIdentityChange(u,m)):(u=this._mismatch(u,m,E,b),c=!0),u=u._next}else h=0,function iy(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[Kc()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,b=>{E=this._trackByFn(h,b),null!==u&&Object.is(u.trackById,E)?(c&&(u=this._verifyReinsertion(u,b,E,h)),Object.is(u.item,b)||this._addIdentityChange(u,b)):(u=this._mismatch(u,b,E,h),c=!0),u=u._next,h++}),this.length=h;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,h){let m;return null===o?m=this._itTail:(m=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,m,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,m,h)):o=this._addAfter(new dn(u,c),m,h),o}_verifyReinsertion(o,u,c,h){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==m?o=this._reinsertAfter(m,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,m=o._nextRemoved;return null===h?this._removalsHead=m:h._nextRemoved=m,null===m?this._removalsTail=h:m._prevRemoved=h,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const h=null===u?this._itHead:u._next;return o._next=h,o._prev=u,null===h?this._itTail=o:h._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new Fw),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Fw),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class dn{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class rT{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class Fw{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new rT,this.map.set(u,c)),c.add(o)}get(o,u){const h=this.map.get(o);return h?h.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Lw(s,o,u){const c=s.previousIndex;if(null===c)return c;let h=0;return u&&c<u.length&&(h=u[c]),c+o+h}class lf{constructor(){}supports(o){return o instanceof Map||sy(o)}create(){return new iT}}class iT{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||sy(o)))throw new Ve(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(u&&u.key===h)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const m=this._getOrCreateRecordForKey(h,c);u=this._insertBeforeOrAppend(u,m)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,u);const m=h._prev,E=h._next;return m&&(m._next=E),E&&(E._prev=m),h._next=null,h._prev=null,h}const c=new Xn(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class Xn{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Ai(){return new Gs([new kw])}let Gs=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Ai()),deps:[[s,new ds,new kn]]}}find(u){const c=this.factories.find(h=>h.supports(u));if(null!=c)return c;throw new Ve(901,"")}}return s.\u0275prov=mn({token:s,providedIn:"root",factory:Ai}),s})();function sT(){return new Dd([new lf])}let Dd=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||sT()),deps:[[s,new ds,new kn]]}}find(u){const c=this.factories.find(m=>m.supports(u));if(c)return c;throw new Ve(901,"")}}return s.\u0275prov=mn({token:s,providedIn:"root",factory:sT}),s})();const oT=[new lf],aT=new Gs([new kw]),g_=new Dd(oT),AP=Ew(null,"core",[{provide:o_,useValue:"unknown"},{provide:l_,deps:[Us]},{provide:WC,deps:[]},{provide:Pu,deps:[]}]),ER=[{provide:Cd,useClass:Cd,deps:[$s,Us,np,Nu,sf]},{provide:gC,deps:[$s],useFactory:function uT(s){let o=[];return s.onStable.subscribe(()=>{for(;o.length;)o.pop()()}),function(u){o.push(u)}}},{provide:sf,useClass:sf,deps:[[new kn,og]]},{provide:lw,useClass:lw,deps:[]},uw,{provide:Gs,useFactory:function mR(){return aT},deps:[]},{provide:Dd,useFactory:function yR(){return g_},deps:[]},{provide:af,useFactory:function _R(s){return s||function vR(){return"undefined"!=typeof $localize&&$localize.locale||qh}()},deps:[[new vt(af),new kn,new ds]]},{provide:Id,useValue:"USD"}];let Uw=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(B(Cd))},s.\u0275mod=H({type:s}),s.\u0275inj=zr({providers:ER}),s})()},3942:(it,Ee,L)=>{L.d(Ee,{Z:()=>Ve});var f=L(2090),G=L(4859),k=L(9681),ie=L(1877);class de{constructor(ye,ve){this._delegate=ye,this.firebase=ve,(0,k._addComponent)(ye,new G.wA("app-compat",()=>this,"PUBLIC")),this.container=ye.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ye){this._delegate.automaticDataCollectionEnabled=ye}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ye=>{this._delegate.checkDestroyed(),ye()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(ye,ve=k._DEFAULT_ENTRY_NAME){var Pe;this._delegate.checkDestroyed();const qe=this._delegate.container.getProvider(ye);return!qe.isInitialized()&&"EXPLICIT"===(null===(Pe=qe.getComponent())||void 0===Pe?void 0:Pe.instantiationMode)&&qe.initialize(),qe.getImmediate({identifier:ve})}_removeServiceInstance(ye,ve=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ye).clearInstance(ve)}_addComponent(ye){(0,k._addComponent)(this._delegate,ye)}_addOrOverwriteComponent(ye){(0,k._addOrOverwriteComponent)(this._delegate,ye)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const fe=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),W=function he(){const He=function se(He){const ye={},ve={__esModule:!0,initializeApp:function Be(Qe,Ie={}){const Y=k.initializeApp(Qe,Ie);if((0,f.r3)(ye,Y.name))return ye[Y.name];const re=new He(Y,ve);return ye[Y.name]=re,re},app:qe,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function Re(Qe){const Ie=Qe.name,Y=Ie.replace("-compat","");if(k._registerComponent(Qe)&&"PUBLIC"===Qe.type){const re=(ge=qe())=>{if("function"!=typeof ge[Y])throw fe.create("invalid-app-argument",{appName:Ie});return ge[Y]()};void 0!==Qe.serviceProps&&(0,f.ZB)(re,Qe.serviceProps),ve[Y]=re,He.prototype[Y]=function(...ge){return this._getService.bind(this,Ie).apply(this,Qe.multipleInstances?ge:[])}}return"PUBLIC"===Qe.type?ve[Y]:null},removeApp:function Pe(Qe){delete ye[Qe]},useAsService:function lt(Qe,Ie){return"serverAuth"===Ie?null:Ie},modularAPIs:k}};function qe(Qe){if(!(0,f.r3)(ye,Qe=Qe||k._DEFAULT_ENTRY_NAME))throw fe.create("no-app",{appName:Qe});return ye[Qe]}return ve.default=ve,Object.defineProperty(ve,"apps",{get:function ot(){return Object.keys(ye).map(Qe=>ye[Qe])}}),qe.App=He,ve}(de);return He.INTERNAL=Object.assign(Object.assign({},He.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function ye(ve){(0,f.ZB)(He,ve)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),He}(),Q=new ie.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){Q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const He=self.firebase.SDK_VERSION;He&&He.indexOf("LITE")>=0&&Q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ve=W;!function De(He){(0,k.registerVersion)("@firebase/app-compat","0.1.39",He)}()},9681:(it,Ee,L)=>{L.r(Ee),L.d(Ee,{FirebaseError:()=>ie.ZR,SDK_VERSION:()=>jr,_DEFAULT_ENTRY_NAME:()=>ct,_addComponent:()=>cr,_addOrOverwriteComponent:()=>mn,_apps:()=>er,_clearComponents:()=>Br,_components:()=>en,_getProvider:()=>zr,_registerComponent:()=>dr,_removeServiceInstance:()=>jn,deleteApp:()=>mt,getApp:()=>Fe,getApps:()=>hr,initializeApp:()=>ui,onLog:()=>yn,registerVersion:()=>rn,setLogLevel:()=>li});var f=L(5861),G=L(4859),k=L(1877),ie=L(2090),de=L(8766);class we{constructor(Te){this.container=Te}getPlatformInfoString(){return this.container.getProviders().map(et=>{if(function fe(Je){const Te=Je.getComponent();return"VERSION"===(null==Te?void 0:Te.type)}(et)){const Pt=et.getImmediate();return`${Pt.library}/${Pt.version}`}return null}).filter(et=>et).join(" ")}}const se="@firebase/app",W=new k.Yd("@firebase/app"),ct="[DEFAULT]",Nt={[se]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},er=new Map,en=new Map;function cr(Je,Te){try{Je.container.addComponent(Te)}catch(et){W.debug(`Component ${Te.name} failed to register with FirebaseApp ${Je.name}`,et)}}function mn(Je,Te){Je.container.addOrOverwriteComponent(Te)}function dr(Je){const Te=Je.name;if(en.has(Te))return W.debug(`There were multiple attempts to register component ${Te}.`),!1;en.set(Te,Je);for(const et of er.values())cr(et,Je);return!0}function zr(Je,Te){const et=Je.container.getProvider("heartbeat").getImmediate({optional:!0});return et&&et.triggerHeartbeat(),Je.container.getProvider(Te)}function jn(Je,Te,et=ct){zr(Je,Te).clearInstance(et)}function Br(){en.clear()}const En=new ie.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Es{constructor(Te,et,Pt){this._isDeleted=!1,this._options=Object.assign({},Te),this._config=Object.assign({},et),this._name=et.name,this._automaticDataCollectionEnabled=et.automaticDataCollectionEnabled,this._container=Pt,this.container.addComponent(new G.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Te){this.checkDestroyed(),this._automaticDataCollectionEnabled=Te}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Te){this._isDeleted=Te}checkDestroyed(){if(this.isDeleted)throw En.create("app-deleted",{appName:this._name})}}const jr="9.14.0";function ui(Je,Te={}){let et=Je;"object"!=typeof Te&&(Te={name:Te});const Pt=Object.assign({name:ct,automaticDataCollectionEnabled:!1},Te),Ot=Pt.name;if("string"!=typeof Ot||!Ot)throw En.create("bad-app-name",{appName:String(Ot)});if(et||(et=(0,ie.aH)()),!et)throw En.create("no-options");const tn=er.get(Ot);if(tn){if((0,ie.vZ)(et,tn.options)&&(0,ie.vZ)(Pt,tn.config))return tn;throw En.create("duplicate-app",{appName:Ot})}const z=new G.H0(Ot);for(const J of en.values())z.addComponent(J);const q=new Es(et,Pt,z);return er.set(Ot,q),q}function Fe(Je=ct){const Te=er.get(Je);if(!Te&&Je===ct)return ui();if(!Te)throw En.create("no-app",{appName:Je});return Te}function hr(){return Array.from(er.values())}function mt(Je){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,f.Z)(function*(Je){const Te=Je.name;er.has(Te)&&(er.delete(Te),yield Promise.all(Je.container.getProviders().map(et=>et.delete())),Je.isDeleted=!0)})).apply(this,arguments)}function rn(Je,Te,et){var Pt;let Ot=null!==(Pt=Nt[Je])&&void 0!==Pt?Pt:Je;et&&(Ot+=`-${et}`);const tn=Ot.match(/\s|\//),z=Te.match(/\s|\//);if(tn||z){const q=[`Unable to register library "${Ot}" with version "${Te}":`];return tn&&q.push(`library name "${Ot}" contains illegal characters (whitespace or "/")`),tn&&z&&q.push("and"),z&&q.push(`version name "${Te}" contains illegal characters (whitespace or "/")`),void W.warn(q.join(" "))}dr(new G.wA(`${Ot}-version`,()=>({library:Ot,version:Te}),"VERSION"))}function yn(Je,Te){if(null!==Je&&"function"!=typeof Je)throw En.create("invalid-log-argument");(0,k.Am)(Je,Te)}function li(Je){(0,k.Ub)(Je)}const Sn="firebase-heartbeat-store";let $r=null;function bo(){return $r||($r=(0,de.X3)("firebase-heartbeat-database",1,{upgrade:(Je,Te)=>{0===Te&&Je.createObjectStore(Sn)}}).catch(Je=>{throw En.create("idb-open",{originalErrorMessage:Je.message})})),$r}function yt(){return(yt=(0,f.Z)(function*(Je){var Te;try{return(yield bo()).transaction(Sn).objectStore(Sn).get(Zr(Je))}catch(et){if(et instanceof ie.ZR)W.warn(et.message);else{const Pt=En.create("idb-get",{originalErrorMessage:null===(Te=et)||void 0===Te?void 0:Te.message});W.warn(Pt.message)}}})).apply(this,arguments)}function gt(Je,Te){return is.apply(this,arguments)}function is(){return(is=(0,f.Z)(function*(Je,Te){var et;try{const Ot=(yield bo()).transaction(Sn,"readwrite");return yield Ot.objectStore(Sn).put(Te,Zr(Je)),Ot.done}catch(Pt){if(Pt instanceof ie.ZR)W.warn(Pt.message);else{const Ot=En.create("idb-set",{originalErrorMessage:null===(et=Pt)||void 0===et?void 0:et.message});W.warn(Ot.message)}}})).apply(this,arguments)}function Zr(Je){return`${Je.name}!${Je.options.appId}`}class fr{constructor(Te){this.container=Te,this._heartbeatsCache=null;const et=this.container.getProvider("app").getImmediate();this._storage=new pr(et),this._heartbeatsCachePromise=this._storage.read().then(Pt=>(this._heartbeatsCache=Pt,Pt))}triggerHeartbeat(){var Te=this;return(0,f.Z)(function*(){const Pt=Te.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ot=bn();if(null===Te._heartbeatsCache&&(Te._heartbeatsCache=yield Te._heartbeatsCachePromise),Te._heartbeatsCache.lastSentHeartbeatDate!==Ot&&!Te._heartbeatsCache.heartbeats.some(tn=>tn.date===Ot))return Te._heartbeatsCache.heartbeats.push({date:Ot,agent:Pt}),Te._heartbeatsCache.heartbeats=Te._heartbeatsCache.heartbeats.filter(tn=>{const z=new Date(tn.date).valueOf();return Date.now()-z<=2592e6}),Te._storage.overwrite(Te._heartbeatsCache)})()}getHeartbeatsHeader(){var Te=this;return(0,f.Z)(function*(){if(null===Te._heartbeatsCache&&(yield Te._heartbeatsCachePromise),null===Te._heartbeatsCache||0===Te._heartbeatsCache.heartbeats.length)return"";const et=bn(),{heartbeatsToSend:Pt,unsentEntries:Ot}=function _t(Je,Te=1024){const et=[];let Pt=Je.slice();for(const Ot of Je){const tn=et.find(z=>z.agent===Ot.agent);if(tn){if(tn.dates.push(Ot.date),Kt(et)>Te){tn.dates.pop();break}}else if(et.push({agent:Ot.agent,dates:[Ot.date]}),Kt(et)>Te){et.pop();break}Pt=Pt.slice(1)}return{heartbeatsToSend:et,unsentEntries:Pt}}(Te._heartbeatsCache.heartbeats),tn=(0,ie.L)(JSON.stringify({version:2,heartbeats:Pt}));return Te._heartbeatsCache.lastSentHeartbeatDate=et,Ot.length>0?(Te._heartbeatsCache.heartbeats=Ot,yield Te._storage.overwrite(Te._heartbeatsCache)):(Te._heartbeatsCache.heartbeats=[],Te._storage.overwrite(Te._heartbeatsCache)),tn})()}}function bn(){return(new Date).toISOString().substring(0,10)}class pr{constructor(Te){this.app=Te,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,ie.hl)()&&(0,ie.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Te=this;return(0,f.Z)(function*(){return(yield Te._canUseIndexedDBPromise)&&(yield function Qt(Je){return yt.apply(this,arguments)}(Te.app))||{heartbeats:[]}})()}overwrite(Te){var et=this;return(0,f.Z)(function*(){var Pt;if(yield et._canUseIndexedDBPromise){const tn=yield et.read();return gt(et.app,{lastSentHeartbeatDate:null!==(Pt=Te.lastSentHeartbeatDate)&&void 0!==Pt?Pt:tn.lastSentHeartbeatDate,heartbeats:Te.heartbeats})}})()}add(Te){var et=this;return(0,f.Z)(function*(){var Pt;if(yield et._canUseIndexedDBPromise){const tn=yield et.read();return gt(et.app,{lastSentHeartbeatDate:null!==(Pt=Te.lastSentHeartbeatDate)&&void 0!==Pt?Pt:tn.lastSentHeartbeatDate,heartbeats:[...tn.heartbeats,...Te.heartbeats]})}})()}}function Kt(Je){return(0,ie.L)(JSON.stringify({version:2,heartbeats:Je})).length}!function tr(Je){dr(new G.wA("platform-logger",Te=>new we(Te),"PRIVATE")),dr(new G.wA("heartbeat",Te=>new fr(Te),"PRIVATE")),rn(se,"0.8.4",Je),rn(se,"0.8.4","esm2017"),rn("fire-js","")}("")},4859:(it,Ee,L)=>{L.d(Ee,{H0:()=>se,wA:()=>k,zt:()=>de});var f=L(5861),G=L(2090);class k{constructor(W,Q,oe){this.name=W,this.instanceFactory=Q,this.type=oe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(W){return this.instantiationMode=W,this}setMultipleInstances(W){return this.multipleInstances=W,this}setServiceProps(W){return this.serviceProps=W,this}setInstanceCreatedCallback(W){return this.onInstanceCreated=W,this}}const ie="[DEFAULT]";class de{constructor(W,Q){this.name=W,this.container=Q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(W){const Q=this.normalizeInstanceIdentifier(W);if(!this.instancesDeferred.has(Q)){const oe=new G.BH;if(this.instancesDeferred.set(Q,oe),this.isInitialized(Q)||this.shouldAutoInitialize())try{const ze=this.getOrInitializeService({instanceIdentifier:Q});ze&&oe.resolve(ze)}catch(ze){}}return this.instancesDeferred.get(Q).promise}getImmediate(W){var Q;const oe=this.normalizeInstanceIdentifier(null==W?void 0:W.identifier),ze=null!==(Q=null==W?void 0:W.optional)&&void 0!==Q&&Q;if(!this.isInitialized(oe)&&!this.shouldAutoInitialize()){if(ze)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:oe})}catch(De){if(ze)return null;throw De}}getComponent(){return this.component}setComponent(W){if(W.name!==this.name)throw Error(`Mismatching Component ${W.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=W,this.shouldAutoInitialize()){if(function fe(he){return"EAGER"===he.instantiationMode}(W))try{this.getOrInitializeService({instanceIdentifier:ie})}catch(Q){}for(const[Q,oe]of this.instancesDeferred.entries()){const ze=this.normalizeInstanceIdentifier(Q);try{const De=this.getOrInitializeService({instanceIdentifier:ze});oe.resolve(De)}catch(De){}}}}clearInstance(W=ie){this.instancesDeferred.delete(W),this.instancesOptions.delete(W),this.instances.delete(W)}delete(){var W=this;return(0,f.Z)(function*(){const Q=Array.from(W.instances.values());yield Promise.all([...Q.filter(oe=>"INTERNAL"in oe).map(oe=>oe.INTERNAL.delete()),...Q.filter(oe=>"_delete"in oe).map(oe=>oe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(W=ie){return this.instances.has(W)}getOptions(W=ie){return this.instancesOptions.get(W)||{}}initialize(W={}){const{options:Q={}}=W,oe=this.normalizeInstanceIdentifier(W.instanceIdentifier);if(this.isInitialized(oe))throw Error(`${this.name}(${oe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ze=this.getOrInitializeService({instanceIdentifier:oe,options:Q});for(const[De,Ve]of this.instancesDeferred.entries())oe===this.normalizeInstanceIdentifier(De)&&Ve.resolve(ze);return ze}onInit(W,Q){var oe;const ze=this.normalizeInstanceIdentifier(Q),De=null!==(oe=this.onInitCallbacks.get(ze))&&void 0!==oe?oe:new Set;De.add(W),this.onInitCallbacks.set(ze,De);const Ve=this.instances.get(ze);return Ve&&W(Ve,ze),()=>{De.delete(W)}}invokeOnInitCallbacks(W,Q){const oe=this.onInitCallbacks.get(Q);if(oe)for(const ze of oe)try{ze(W,Q)}catch(De){}}getOrInitializeService({instanceIdentifier:W,options:Q={}}){let oe=this.instances.get(W);if(!oe&&this.component&&(oe=this.component.instanceFactory(this.container,{instanceIdentifier:(he=W,he===ie?void 0:he),options:Q}),this.instances.set(W,oe),this.instancesOptions.set(W,Q),this.invokeOnInitCallbacks(oe,W),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,W,oe)}catch(ze){}var he;return oe||null}normalizeInstanceIdentifier(W=ie){return this.component?this.component.multipleInstances?W:ie:W}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class se{constructor(W){this.name=W,this.providers=new Map}addComponent(W){const Q=this.getProvider(W.name);if(Q.isComponentSet())throw new Error(`Component ${W.name} has already been registered with ${this.name}`);Q.setComponent(W)}addOrOverwriteComponent(W){this.getProvider(W.name).isComponentSet()&&this.providers.delete(W.name),this.addComponent(W)}getProvider(W){if(this.providers.has(W))return this.providers.get(W);const Q=new de(W,this);return this.providers.set(W,Q),Q}getProviders(){return Array.from(this.providers.values())}}},1877:(it,Ee,L)=>{L.d(Ee,{Am:()=>he,Ub:()=>se,Yd:()=>fe,in:()=>G});const f=[];var G=(()=>{return(W=G||(G={}))[W.DEBUG=0]="DEBUG",W[W.VERBOSE=1]="VERBOSE",W[W.INFO=2]="INFO",W[W.WARN=3]="WARN",W[W.ERROR=4]="ERROR",W[W.SILENT=5]="SILENT",G;var W})();const k={debug:G.DEBUG,verbose:G.VERBOSE,info:G.INFO,warn:G.WARN,error:G.ERROR,silent:G.SILENT},ie=G.INFO,de={[G.DEBUG]:"log",[G.VERBOSE]:"log",[G.INFO]:"info",[G.WARN]:"warn",[G.ERROR]:"error"},we=(W,Q,...oe)=>{if(Q<W.logLevel)return;const ze=(new Date).toISOString(),De=de[Q];if(!De)throw new Error(`Attempted to log a message with an invalid logType (value: ${Q})`);console[De](`[${ze}]  ${W.name}:`,...oe)};class fe{constructor(Q){this.name=Q,this._logLevel=ie,this._logHandler=we,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(Q){if(!(Q in G))throw new TypeError(`Invalid value "${Q}" assigned to \`logLevel\``);this._logLevel=Q}setLogLevel(Q){this._logLevel="string"==typeof Q?k[Q]:Q}get logHandler(){return this._logHandler}set logHandler(Q){if("function"!=typeof Q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Q}get userLogHandler(){return this._userLogHandler}set userLogHandler(Q){this._userLogHandler=Q}debug(...Q){this._userLogHandler&&this._userLogHandler(this,G.DEBUG,...Q),this._logHandler(this,G.DEBUG,...Q)}log(...Q){this._userLogHandler&&this._userLogHandler(this,G.VERBOSE,...Q),this._logHandler(this,G.VERBOSE,...Q)}info(...Q){this._userLogHandler&&this._userLogHandler(this,G.INFO,...Q),this._logHandler(this,G.INFO,...Q)}warn(...Q){this._userLogHandler&&this._userLogHandler(this,G.WARN,...Q),this._logHandler(this,G.WARN,...Q)}error(...Q){this._userLogHandler&&this._userLogHandler(this,G.ERROR,...Q),this._logHandler(this,G.ERROR,...Q)}}function se(W){f.forEach(Q=>{Q.setLogLevel(W)})}function he(W,Q){for(const oe of f){let ze=null;Q&&Q.level&&(ze=k[Q.level]),oe.userLogHandler=null===W?null:(De,Ve,...He)=>{const ye=He.map(ve=>{if(null==ve)return null;if("string"==typeof ve)return ve;if("number"==typeof ve||"boolean"==typeof ve)return ve.toString();if(ve instanceof Error)return ve.message;try{return JSON.stringify(ve)}catch(Pe){return null}}).filter(ve=>ve).join(" ");Ve>=(null!=ze?ze:De.logLevel)&&W({level:G[Ve].toLowerCase(),message:ye,args:He,type:De.name})}}}},8766:(it,Ee,L)=>{L.d(Ee,{Lj:()=>Be,X3:()=>qe});var f=L(5861);let k,ie;const fe=new WeakMap,se=new WeakMap,he=new WeakMap,W=new WeakMap,Q=new WeakMap;let De={get(Ie,Y,re){if(Ie instanceof IDBTransaction){if("done"===Y)return se.get(Ie);if("objectStoreNames"===Y)return Ie.objectStoreNames||he.get(Ie);if("store"===Y)return re.objectStoreNames[1]?void 0:re.objectStore(re.objectStoreNames[0])}return ve(Ie[Y])},set:(Ie,Y,re)=>(Ie[Y]=re,!0),has:(Ie,Y)=>Ie instanceof IDBTransaction&&("done"===Y||"store"===Y)||Y in Ie};function ye(Ie){return"function"==typeof Ie?function He(Ie){return Ie!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function we(){return ie||(ie=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Ie)?function(...Y){return Ie.apply(Pe(this),Y),ve(fe.get(this))}:function(...Y){return ve(Ie.apply(Pe(this),Y))}:function(Y,...re){const ge=Ie.call(Pe(this),Y,...re);return he.set(ge,Y.sort?Y.sort():[Y]),ve(ge)}}(Ie):(Ie instanceof IDBTransaction&&function ze(Ie){if(se.has(Ie))return;const Y=new Promise((re,ge)=>{const _e=()=>{Ie.removeEventListener("complete",Oe),Ie.removeEventListener("error",ce),Ie.removeEventListener("abort",ce)},Oe=()=>{re(),_e()},ce=()=>{ge(Ie.error||new DOMException("AbortError","AbortError")),_e()};Ie.addEventListener("complete",Oe),Ie.addEventListener("error",ce),Ie.addEventListener("abort",ce)});se.set(Ie,Y)}(Ie),((Ie,Y)=>Y.some(re=>Ie instanceof re))(Ie,function de(){return k||(k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Ie,De):Ie)}function ve(Ie){if(Ie instanceof IDBRequest)return function oe(Ie){const Y=new Promise((re,ge)=>{const _e=()=>{Ie.removeEventListener("success",Oe),Ie.removeEventListener("error",ce)},Oe=()=>{re(ve(Ie.result)),_e()},ce=()=>{ge(Ie.error),_e()};Ie.addEventListener("success",Oe),Ie.addEventListener("error",ce)});return Y.then(re=>{re instanceof IDBCursor&&fe.set(re,Ie)}).catch(()=>{}),Q.set(Y,Ie),Y}(Ie);if(W.has(Ie))return W.get(Ie);const Y=ye(Ie);return Y!==Ie&&(W.set(Ie,Y),Q.set(Y,Ie)),Y}const Pe=Ie=>Q.get(Ie);function qe(Ie,Y,{blocked:re,upgrade:ge,blocking:_e,terminated:Oe}={}){const ce=indexedDB.open(Ie,Y),At=ve(ce);return ge&&ce.addEventListener("upgradeneeded",qt=>{ge(ve(ce.result),qt.oldVersion,qt.newVersion,ve(ce.transaction))}),re&&ce.addEventListener("blocked",()=>re()),At.then(qt=>{Oe&&qt.addEventListener("close",()=>Oe()),_e&&qt.addEventListener("versionchange",()=>_e())}).catch(()=>{}),At}function Be(Ie,{blocked:Y}={}){const re=indexedDB.deleteDatabase(Ie);return Y&&re.addEventListener("blocked",()=>Y()),ve(re).then(()=>{})}const ot=["get","getKey","getAll","getAllKeys","count"],Re=["put","add","delete","clear"],lt=new Map;function Qe(Ie,Y){if(!(Ie instanceof IDBDatabase)||Y in Ie||"string"!=typeof Y)return;if(lt.get(Y))return lt.get(Y);const re=Y.replace(/FromIndex$/,""),ge=Y!==re,_e=Re.includes(re);if(!(re in(ge?IDBIndex:IDBObjectStore).prototype)||!_e&&!ot.includes(re))return;const Oe=function(){var ce=(0,f.Z)(function*(At,...qt){const br=this.transaction(At,_e?"readwrite":"readonly");let ct=br.store;return ge&&(ct=ct.index(qt.shift())),(yield Promise.all([ct[re](...qt),_e&&br.done]))[0]});return function(qt){return ce.apply(this,arguments)}}();return lt.set(Y,Oe),Oe}!function Ve(Ie){De=Ie(De)}(Ie=>FU(kU({},Ie),{get:(Y,re,ge)=>Qe(Y,re)||Ie.get(Y,re,ge),has:(Y,re)=>!!Qe(Y,re)||Ie.has(Y,re)}))},5861:(it,Ee,L)=>{function f(k,ie,de,we,fe,se,he){try{var W=k[se](he),Q=W.value}catch(oe){return void de(oe)}W.done?ie(Q):Promise.resolve(Q).then(we,fe)}function G(k){return function(){var ie=this,de=arguments;return new Promise(function(we,fe){var se=k.apply(ie,de);function he(Q){f(se,we,fe,he,W,"next",Q)}function W(Q){f(se,we,fe,he,W,"throw",Q)}he(void 0)})}}L.d(Ee,{Z:()=>G})}},it=>{it(it.s=4174)}]);